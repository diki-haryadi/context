/== App.tsx
import { Routes, Route, Navigate } from 'react-router-dom';
import MainLayout from './components/templates/MainLayout';
import AdminLayout from './components/templates/AdminLayout';
import HomePage from './pages/HomePage';
import LoginPage from './pages/LoginPage';
import RegisterPage from './pages/RegisterPage';
import TutorialPage from './pages/TutorialPage';
import CoursePage from './pages/CoursePage';
import CompilerPage from './pages/CompilerPage';
import DashboardPage from './pages/DashboardPage';
import CourseEnrollmentPage from './pages/CourseEnrollmentPage';
import LearningPage from './pages/LearningPage';
import NotFoundPage from './pages/NotFoundPage';
import CompleteLearningPage from './pages/CompleteLearningPage';
import CertificatePage from './pages/CertificatePage';
import CertificatesDashboardPage from './pages/CertificatesDashboardPage';
import PricingPage from './pages/PricingPage';
import PaymentPage from './pages/PaymentPage';
import PaymentSuccessPage from './pages/PaymentSuccessPage';
import PaymentFailedPage from './pages/PaymentFailedPage';
import BillingPage from './pages/BillingPage';
import RoadmapsListPage from './pages/RoadmapsListPage';
import RoadmapPage from './pages/RoadmapPage';
import SubmissionPage from './pages/SubmissionPage';
import SubmissionReviewPage from './pages/SubmissionReviewPage';

// CMS Admin Pages
import AdminDashboard from './pages/cms/AdminDashboard';
import AdminCourseList from './pages/cms/AdminCourseList';
import AdminCourseForm from './pages/cms/AdminCourseForm';
import AdminUserList from './pages/cms/AdminUserList';
import AdminUserForm from './pages/cms/AdminUserForm';
import AdminSettings from './pages/cms/AdminSettings';

// Content Management Pages
import AdminContentEditor from './pages/cms/AdminContentEditor';
import AdminMediaLibrary from './pages/cms/AdminMediaLibrary';
import AdminQuizBuilder from './pages/cms/AdminQuizBuilder';
import AdminCurriculumBuilder from './pages/cms/AdminCurriculumBuilder';
import AdminContentPreview from './pages/cms/AdminContentPreview';

// Communication Tools Pages
import AdminMessaging from './pages/cms/communication/AdminMessaging';
import AdminEmailTemplates from './pages/cms/communication/AdminEmailTemplates';
import AdminAnnouncements from './pages/cms/communication/AdminAnnouncements';
import AdminNotifications from './pages/cms/communication/AdminNotifications';
import AdminFeedback from './pages/cms/communication/AdminFeedback';

// Course Features Pages
import AdminCourseCategories from './pages/cms/course-features/AdminCourseCategories';
import AdminCourseScheduling from './pages/cms/course-features/AdminCourseScheduling';
import AdminPrerequisites from './pages/cms/course-features/AdminPrerequisites';
import AdminCertificates from './pages/cms/course-features/AdminCertificates';
import AdminReviews from './pages/cms/course-features/AdminReviews';

// User Management Pages
import AdminUserRoles from './pages/cms/user-management/AdminUserRoles';
import AdminUserActivity from './pages/cms/user-management/AdminUserActivity';
import AdminUserProgress from './pages/cms/user-management/AdminUserProgress';

// Integration Management Pages
import AdminPaymentGateways from './pages/cms/integrations/AdminPaymentGateways';
import AdminThirdParty from './pages/cms/integrations/AdminThirdParty';
import AdminApiManagement from './pages/cms/integrations/AdminApiManagement';
import AdminWebhooks from './pages/cms/integrations/AdminWebhooks';
import AdminSso from './pages/cms/integrations/AdminSso';
import IntegrationsPage from './pages/cms/IntegrationsPage';

// Monetization Pages
import MonetizationIndex from './pages/cms/monetization';
import MonetizationCoupons from './pages/cms/monetization/coupons';
import MonetizationBundles from './pages/cms/monetization/bundles';
import MonetizationAffiliates from './pages/cms/monetization/affiliates';
import MonetizationAnalytics from './pages/cms/monetization/revenue-analytics';
import SubscriptionManagement from './pages/cms/monetization/subscription/SubscriptionManagement';
import EditSubscriptionPage from './pages/cms/monetization/subscription/EditSubscriptionPage';

// Customer Pages Bundle
import BundlesListPage from './pages/bundles';
import BundleDetailPage from './pages/bundle-detail';
import MyLearningPage from './pages/my-learning';

// Import new affiliate pages
import AffiliateRegistrationPage from './pages/AffiliateRegistrationPage';
import AffiliateDashboardPage from './pages/AffiliateDashboardPage';

import LeaderboardPage from './pages/LeaderboardPage';

function App() {
  return (
    <Routes>
      {/* Auth pages */}
      <Route path="/login" element={<LoginPage />} />
      <Route path="/register" element={<RegisterPage />} />
      
      {/* CMS Admin Routes */}
      <Route path="/cms" element={<AdminLayout />}>
        <Route index element={<AdminDashboard />} />
        <Route path="courses" element={<AdminCourseList />} />
        <Route path="courses/create" element={<AdminCourseForm />} />
        <Route path="courses/edit/:id" element={<AdminCourseForm />} />
        <Route path="users" element={<AdminUserList />} />
        <Route path="users/create" element={<AdminUserForm />} />
        <Route path="users/edit/:id" element={<AdminUserForm />} />
        <Route path="settings" element={<AdminSettings />} />
        
        {/* Content Management Routes */}
        <Route path="content/editor/:id?" element={<AdminContentEditor />} />
        <Route path="content/preview/:id" element={<AdminContentPreview />} />
        <Route path="media" element={<AdminMediaLibrary />} />
        <Route path="quizzes" element={<AdminQuizBuilder />} />
        <Route path="curriculum" element={<AdminCurriculumBuilder />} />

        {/* Communication Tools Routes */}
        <Route path="communication">
          <Route path="messaging" element={<AdminMessaging />} />
          <Route path="email-templates" element={<AdminEmailTemplates />} />
          <Route path="announcements" element={<AdminAnnouncements />} />
          <Route path="notifications" element={<AdminNotifications />} />
          <Route path="feedback" element={<AdminFeedback />} />
        </Route>

        {/* Course Features Routes */}
        <Route path="course-features">
          <Route path="categories" element={<AdminCourseCategories />} />
          <Route path="scheduling" element={<AdminCourseScheduling />} />
          <Route path="prerequisites" element={<AdminPrerequisites />} />
          <Route path="certificates" element={<AdminCertificates />} />
          <Route path="reviews" element={<AdminReviews />} />
        </Route>

        {/* User Management Routes */}
        <Route path="user-management">
          <Route path="roles" element={<AdminUserRoles />} />
          <Route path="activity" element={<AdminUserActivity />} />
          <Route path="progress" element={<AdminUserProgress />} />
        </Route>

        {/* Integration Management Routes */}
        <Route path="integrations">
          <Route index element={<IntegrationsPage />} />
          <Route path="payment-gateways" element={<AdminPaymentGateways />} />
          <Route path="third-party" element={<AdminThirdParty />} />
          <Route path="api" element={<AdminApiManagement />} />
          <Route path="webhooks" element={<AdminWebhooks />} />
          <Route path="sso" element={<AdminSso />} />
        </Route>

        {/* Monetization Routes */}
        <Route path="monetization">
          <Route index element={<MonetizationIndex />} />
          <Route path="coupons" element={<MonetizationCoupons />} />
          <Route path="bundles" element={<MonetizationBundles />} />
          <Route path="affiliates" element={<MonetizationAffiliates />} />
          <Route path="revenue-analytics" element={<MonetizationAnalytics />} />
          <Route path="subscription" element={<SubscriptionManagement />} />
          <Route path="subscription/edit/:id" element={<EditSubscriptionPage />} />;
        </Route>
      </Route>
      
      {/* Learning pages */}
      <Route path="/courses/:courseId/lessons/:lessonId" element={<LearningPage />} />
      <Route path="/courses/:courseId/lessons/:lessonId/submit" element={<SubmissionPage />} />
      <Route path="/courses/:courseId/lessons/:lessonId/review" element={<SubmissionReviewPage />} />
      
      {/* Course completion and certificate pages */}
      <Route path="/courses/:courseId/complete" element={<CompleteLearningPage />} />
      <Route path="/certificate/:courseId" element={<CertificatePage />} />
      <Route path="/certificates" element={<CertificatesDashboardPage />} />
      
      {/* Payment and billing pages */}
      <Route path="/payment" element={<PaymentPage />} />
      <Route path="/payment/success" element={<PaymentSuccessPage />} />
      <Route path="/payment/failed" element={<PaymentFailedPage />} />
      <Route path="/billing" element={<BillingPage />} />
      
      {/* Dashboard has its own layout */}
      <Route path="/dashboard" element={<DashboardPage />} />

      {/* Roadmap pages */}
      <Route path="/roadmap" element={<RoadmapsListPage />} />
      <Route path="/roadmap/:name" element={<RoadmapPage />} />
      
        {/* Affiliate Routes */}
        <Route path="/affiliate/register" element={<AffiliateRegistrationPage />} />
        <Route path="/affiliate/dashboard" element={<AffiliateDashboardPage />} />


      {/* All other pages use MainLayout */}
      <Route element={<MainLayout />}>
        <Route path="/home" element={<HomePage />} />
        <Route path="/tutorials/:language" element={<TutorialPage />} />
        <Route path="/courses" element={<CoursePage />} />
        <Route path="/courses/:courseId" element={<CourseEnrollmentPage />} />
        <Route path="/compiler" element={<CompilerPage />} />
        <Route path="/pricing" element={<PricingPage />} />
        <Route path="/bundles" element={<BundlesListPage />} />
        <Route path="/bundles/:id" element={<BundleDetailPage />} />
        <Route path="/my-learning" element={<MyLearningPage />} />
        <Route path="/" element={<Navigate to="/home" replace />} />
        <Route path="/leaderboard" element={<LeaderboardPage />} />
        <Route path="*" element={<NotFoundPage />} />
      </Route>
    </Routes>
  );
}

export default App;

/== classes/BundlesManagement.ts
import useBundleStore, { Bundle } from '../store/useBundleStore';

class BundlesManagement {
  static instance: BundlesManagement;

  private constructor() {}

  public static getInstance(): BundlesManagement {
    if (!BundlesManagement.instance) {
      BundlesManagement.instance = new BundlesManagement();
    }
    return BundlesManagement.instance;
  }

  public async fetchBundles(): Promise<Bundle[]> {
    const { fetchBundles, bundles } = useBundleStore.getState();
    await fetchBundles();
    return bundles;
  }

  public async fetchCourses() {
    const { fetchCourses } = useBundleStore.getState();
    await fetchCourses();
  }

  public async createBundle(bundle: Omit<Bundle, 'id' | 'createdAt' | 'updatedAt'>) {
    const { createBundle } = useBundleStore.getState();
    await createBundle(bundle);
  }

  public async updateBundle(id: string, bundle: Partial<Bundle>) {
    const { updateBundle } = useBundleStore.getState();
    await updateBundle(id, bundle);
  }

  public async deleteBundle(id: string) {
    const { deleteBundle } = useBundleStore.getState();
    await deleteBundle(id);
  }

  public async fetchBundleStats(bundleId: string) {
    const { fetchBundleStats } = useBundleStore.getState();
    await fetchBundleStats(bundleId);
  }

  public selectBundle(id: string) {
    const { selectBundle } = useBundleStore.getState();
    selectBundle(id);
  }

  public clearSelectedBundle() {
    const { clearSelectedBundle } = useBundleStore.getState();
    clearSelectedBundle();
  }

  public calculateSavings(originalPrice: number, bundlePrice: number): number {
    if (!originalPrice) return 0;
    return Math.round(((originalPrice - bundlePrice) / originalPrice) * 100);
  }

  public calculateBundlePrice(originalPrice: number, discountPercentage: number): number {
    return Math.round((originalPrice * (1 - (discountPercentage / 100))) * 100) / 100;
  }
}

export default BundlesManagement;

/== components/CodeEditor.tsx
import React, { useRef } from 'react';
import Editor from '@monaco-editor/react';

interface CodeEditorProps {
  code: string;
  onChange: (value: string | undefined) => void;
  language?: string;
  theme?: string;
  readOnly?: boolean;
  height?: string;
}

const CodeEditor: React.FC<CodeEditorProps> = ({
  code,
  onChange,
  language = 'python',
  theme = 'vs-dark',
  readOnly = false,
  height = '100%'
}) => {
  const editorRef = useRef<any>(null);

  const handleEditorDidMount = (editor: any) => {
    editorRef.current = editor;
    editor.focus();
  };

  const options = {
    selectOnLineNumbers: true,
    roundedSelection: false,
    readOnly: readOnly,
    cursorStyle: 'line',
    automaticLayout: true,
    minimap: {
      enabled: false
    },
    scrollBeyondLastLine: false,
    fontSize: 14,
    fontFamily: 'Menlo, Monaco, "Courier New", monospace',
    lineNumbers: 'on',
    folding: true,
    lineHeight: 21,
    renderLineHighlight: 'all',
    scrollbar: {
      useShadows: false,
      verticalScrollbarSize: 10,
      horizontalScrollbarSize: 10
    },
    overviewRulerLanes: 0,
    hideCursorInOverviewRuler: true,
    overviewRulerBorder: false
  };

  return (
    <div className="h-full w-full relative">
      <Editor
        height={height}
        language={language}
        theme={theme}
        value={code}
        options={options}
        onChange={onChange}
        onMount={handleEditorDidMount}
        loading={
          <div className="absolute inset-0 flex items-center justify-center bg-gray-900">
            <div className="text-white">Loading editor...</div>
          </div>
        }
      />
    </div>
  );
};

export default CodeEditor;

/== components/CourseCard.tsx
import React from 'react';
import { Play } from 'lucide-react';
import { Link } from 'react-router-dom';

interface CourseCardProps {
  id: string;
  title: string;
  progress: number;
  color: string;
  totalProblems?: number;
  solvedProblems?: number;
  totalQuizzes?: number;
  solvedQuizzes?: number;
  isRecommended?: boolean;
  questionsCount?: number;
  level?: string;
}

const CourseCard: React.FC<CourseCardProps> = ({
  id,
  title,
  progress,
  color,
  totalProblems,
  solvedProblems,
  totalQuizzes,
  solvedQuizzes,
  isRecommended = false,
  questionsCount,
  level
}) => {
  return (
    <div className={`rounded-lg overflow-hidden shadow-sm border border-gray-200 ${isRecommended ? '' : 'mb-4'}`}>
      <div className={`${color} p-6`}>
        {!isRecommended && (
          <div className="uppercase text-xs font-semibold text-gray-700 mb-1">Course</div>
        )}
        <h3 className="font-bold text-gray-900 text-lg mb-2">{title}</h3>
        
        {!isRecommended && (
          <>
            <div className="flex items-center text-xs text-gray-700 mb-2">
              <span>{progress}% Completed</span>
            </div>
            <div className="w-full bg-gray-200 rounded-full h-1.5">
              <div 
                className="bg-blue-600 h-1.5 rounded-full" 
                style={{ width: `${progress}%` }}
              ></div>
            </div>
          </>
        )}
      </div>
      
      {!isRecommended && totalProblems && totalQuizzes && (
        <div className="grid grid-cols-2 divide-x divide-gray-200">
          <div className="p-4 text-center">
            <div className="text-gray-900 font-medium">{solvedProblems}/{totalProblems}</div>
            <div className="text-xs text-gray-500">Practice Problems</div>
          </div>
          <div className="p-4 text-center">
            <div className="text-gray-900 font-medium">{solvedQuizzes}/{totalQuizzes}</div>
            <div className="text-xs text-gray-500">Quizzes</div>
          </div>
        </div>
      )}
      
      {isRecommended && (
        <div className="p-4">
          <div className="text-xs text-gray-500 mb-1">
            {questionsCount}+ Questions
          </div>
          <div className="text-xs text-gray-500 mb-3">
            {level} Course
          </div>
          <Link
            to={`/courses/${id}`}
            className="block w-full text-center py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-200 text-sm font-medium"
          >
            View Course
          </Link>
        </div>
      )}
      
      {!isRecommended && (
        <div className="p-4 flex justify-end">
          <Link
            to={`/courses/${id}`}
            className="flex items-center py-2 px-4 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition duration-200 text-sm font-medium"
          >
            <span>Continue Learning</span>
            <Play className="ml-2 h-4 w-4" />
          </Link>
        </div>
      )}
    </div>
  );
};

export default CourseCard;

/== components/CourseOutlineSidebar.tsx
import React, { useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { ChevronDown, ChevronRight, X, CheckCircle, Circle } from 'lucide-react';
import goCourses from '../data/courses/go';

interface CourseOutlineSidebarProps {
  courseId: string;
  currentLessonId: string;
}

const CourseOutlineSidebar: React.FC<CourseOutlineSidebarProps> = ({ 
  courseId, 
  currentLessonId 
}) => {
  const navigate = useNavigate();
  const [expandedChapters, setExpandedChapters] = useState<string[]>(['basic-syntax']);

  // Get course level from courseId
  const courseLevel = courseId.split('-')[1];
  const course = courseLevel ? goCourses[courseLevel] : null;

  if (!course) {
    return null;
  }

  const toggleChapter = (chapterId: string) => {
    if (expandedChapters.includes(chapterId)) {
      setExpandedChapters(expandedChapters.filter(id => id !== chapterId));
    } else {
      setExpandedChapters([...expandedChapters, chapterId]);
    }
  };

  const handleLessonClick = (lessonId: string) => {
    navigate(`/courses/${courseId}/lessons/${lessonId}`);
  };

  return (
    <div className="w-72 bg-white border-r border-gray-200 overflow-y-auto">
      <div className="p-4 border-b border-gray-200 flex items-center justify-between">
        <div>
          <div className="text-sm text-gray-500">Course Progress</div>
          <h2 className="text-lg font-medium text-gray-900">{course.title}</h2>
        </div>
      </div>
      
      <div className="py-2">
        {Object.entries(course.lessons).map(([lessonId, lesson]) => (
          <div key={lessonId} className="mb-1">
            <button
              onClick={() => toggleChapter(lessonId)}
              className="w-full flex items-center px-4 py-2 text-left hover:bg-gray-50"
            >
              {expandedChapters.includes(lessonId) ? (
                <ChevronDown className="h-4 w-4 text-gray-400 mr-2" />
              ) : (
                <ChevronRight className="h-4 w-4 text-gray-400 mr-2" />
              )}
              <span className="text-sm font-medium">{lesson.title}</span>
            </button>
            
            {expandedChapters.includes(lessonId) && lesson.steps && (
              <div className="ml-6 pl-4 border-l border-gray-200">
                {lesson.steps.map((step) => (
                  <button
                    key={step.id}
                    onClick={() => handleLessonClick(lessonId)}
                    className={`w-full flex items-center py-2 px-3 text-left text-sm ${
                      currentLessonId === lessonId
                        ? 'bg-blue-50 text-blue-700'
                        : 'hover:bg-gray-50 text-gray-700'
                    }`}
                  >
                    <Circle className="h-4 w-4 text-gray-300 mr-2" />
                    {step.title}
                  </button>
                ))}
              </div>
            )}
          </div>
        ))}
      </div>
    </div>
  );
};

export default CourseOutlineSidebar;

/== components/DailyChallengeCard.tsx
import React from 'react';
import { ArrowRight } from 'lucide-react';
import { useCourseStore } from '../store/courseStore';

const DailyChallengeCard: React.FC = () => {
  const { dailyChallenge } = useCourseStore();
  
  if (!dailyChallenge) return null;
  
  return (
    <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6">
      <div className="flex items-center mb-2">
        <div className="w-5 h-5 bg-green-100 rounded-full flex items-center justify-center mr-2">
          <span className="text-green-600 text-xs">✓</span>
        </div>
        <h3 className="text-sm font-medium text-gray-600">Challenge of the Day</h3>
      </div>
      
      <h2 className="text-lg font-bold text-gray-900 mb-4">{dailyChallenge.title}</h2>
      
      <div className="flex justify-between">
        <button className="flex items-center text-sm font-medium text-blue-600 hover:text-blue-800">
          Start Challenge
          <ArrowRight className="ml-1 h-4 w-4" />
        </button>
        
        <button className="text-sm text-gray-500 hover:text-gray-700">
          View all
        </button>
      </div>
    </div>
  );
};

export default DailyChallengeCard;

/== components/DailyStreak.tsx
import React from 'react';
import { useCourseStore } from '../store/courseStore';

const DailyStreak: React.FC = () => {
  const { currentStreak, highestStreak } = useCourseStore();
  
  // Days of the week
  const days = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];
  
  // Get current day index (0-6, where 0 is Sunday)
  const currentDayIndex = new Date().getDay();
  
  return (
    <div className="bg-white rounded-lg p-4 mb-6">
      <div className="flex items-center mb-2">
        <span className="text-yellow-500">⚡</span>
        <h3 className="font-medium ml-2">Daily Streak: {currentStreak}</h3>
      </div>
      <p className="text-xs text-gray-500 mb-3">Highest Streak: {highestStreak}</p>
      
      <div className="flex justify-between">
        {days.map((day, index) => (
          <div key={index} className="flex flex-col items-center">
            <span className="text-xs text-gray-500 mb-1">{day}</span>
            <div 
              className={`w-6 h-6 rounded-full flex items-center justify-center text-xs
                ${index === currentDayIndex 
                  ? 'bg-blue-600 text-white' 
                  : index < currentDayIndex 
                    ? 'bg-gray-200' 
                    : 'border border-gray-300'}`}
            >
              {index <= currentDayIndex ? '✓' : ''}
            </div>
          </div>
        ))}
      </div>
    </div>
  );
};

export default DailyStreak;

/== components/Footer.tsx
import React from 'react';
import { Link } from 'react-router-dom';
import { Code, Facebook, Twitter, Instagram, Linkedin, Youtube } from 'lucide-react';

const Footer = () => {
  return (
    <footer className="bg-gray-800 text-white">
      <div className="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
        <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <div className="flex items-center">
              <Code className="h-8 w-8 text-blue-400" />
              <span className="ml-2 text-xl font-bold">Programiz</span>
            </div>
            <p className="mt-4 text-sm text-gray-300">
              Learn to code in Python, C/C++, Java, and other popular programming languages with our easy-to-follow tutorials, examples, online compiler and references.
            </p>
            <div className="mt-6 flex space-x-4">
              <a href="#" className="text-gray-400 hover:text-white">
                <Facebook className="h-5 w-5" />
              </a>
              <a href="#" className="text-gray-400 hover:text-white">
                <Twitter className="h-5 w-5" />
              </a>
              <a href="#" className="text-gray-400 hover:text-white">
                <Instagram className="h-5 w-5" />
              </a>
              <a href="#" className="text-gray-400 hover:text-white">
                <Linkedin className="h-5 w-5" />
              </a>
              <a href="#" className="text-gray-400 hover:text-white">
                <Youtube className="h-5 w-5" />
              </a>
            </div>
          </div>
          <div>
            <h3 className="text-sm font-semibold text-gray-200 tracking-wider uppercase">Tutorials</h3>
            <ul className="mt-4 space-y-2">
              <li>
                <Link to="/tutorials/python" className="text-gray-300 hover:text-white">Python</Link>
              </li>
              <li>
                <Link to="/tutorials/javascript" className="text-gray-300 hover:text-white">JavaScript</Link>
              </li>
              <li>
                <Link to="/tutorials/java" className="text-gray-300 hover:text-white">Java</Link>
              </li>
              <li>
                <Link to="/tutorials/c" className="text-gray-300 hover:text-white">C</Link>
              </li>
              <li>
                <Link to="/tutorials/cpp" className="text-gray-300 hover:text-white">C++</Link>
              </li>
              <li>
                <Link to="/tutorials/dsa" className="text-gray-300 hover:text-white">DSA</Link>
              </li>
            </ul>
          </div>
          <div>
            <h3 className="text-sm font-semibold text-gray-200 tracking-wider uppercase">Resources</h3>
            <ul className="mt-4 space-y-2">
              <li>
                <Link to="/compiler" className="text-gray-300 hover:text-white">Online Compiler</Link>
              </li>
              <li>
                <Link to="/examples" className="text-gray-300 hover:text-white">Examples</Link>
              </li>
              <li>
                <Link to="/courses" className="text-gray-300 hover:text-white">Courses</Link>
              </li>
              <li>
                <Link to="/challenges" className="text-gray-300 hover:text-white">Challenges</Link>
              </li>
              <li>
                <Link to="/blog" className="text-gray-300 hover:text-white">Blog</Link>
              </li>
            </ul>
          </div>
          <div>
            <h3 className="text-sm font-semibold text-gray-200 tracking-wider uppercase">Company</h3>
            <ul className="mt-4 space-y-2">
              <li>
                <Link to="/about" className="text-gray-300 hover:text-white">About Us</Link>
              </li>
              <li>
                <Link to="/contact" className="text-gray-300 hover:text-white">Contact</Link>
              </li>
              <li>
                <Link to="/privacy" className="text-gray-300 hover:text-white">Privacy Policy</Link>
              </li>
              <li>
                <Link to="/terms" className="text-gray-300 hover:text-white">Terms of Service</Link>
              </li>
            </ul>
          </div>
        </div>
        <div className="mt-12 border-t border-gray-700 pt-8">
          <p className="text-sm text-gray-400">© {new Date().getFullYear()} Programiz Clone. All rights reserved.</p>
        </div>
      </div>
    </footer>
  );
};

export default Footer;

/== components/LeaderboardCard.tsx
import React, { useState } from 'react';
import { ChevronDown } from 'lucide-react';
import { useCourseStore } from '../store/courseStore';
import { useAuthStore } from '../store/authStore';

const LeaderboardCard: React.FC = () => {
  const [viewMode, setViewMode] = useState<'weekly' | 'monthly' | 'all-time'>('weekly');
  const { leaderboard } = useCourseStore();
  const { user } = useAuthStore();
  
  const handleViewChange = (mode: 'weekly' | 'monthly' | 'all-time') => {
    setViewMode(mode);
  };
  
  return (
    <div className="bg-white rounded-lg p-4">
      <div className="flex justify-between items-center mb-4">
        <h3 className="font-medium">Challenge Leaderboard</h3>
        <div className="relative inline-block text-left">
          <button className="inline-flex items-center text-sm text-gray-700">
            {viewMode === 'weekly' ? 'Weekly' : viewMode === 'monthly' ? 'Monthly' : 'All Time'}
            <ChevronDown className="ml-1 h-4 w-4" />
          </button>
        </div>
      </div>
      
      <div className="space-y-3">
        {leaderboard.slice(0, 10).map((entry, index) => {
          const isCurrentUser = user && entry.name === user.name;
          
          return (
            <div 
              key={entry.id} 
              className={`flex items-center justify-between py-1 px-2 rounded ${isCurrentUser ? 'bg-blue-50' : ''}`}
            >
              <div className="flex items-center">
                <div className="w-6 text-center font-medium text-gray-500">
                  {index < 3 ? (
                    <span className={`
                      ${index === 0 ? 'text-yellow-500' : ''}
                      ${index === 1 ? 'text-gray-400' : ''}
                      ${index === 2 ? 'text-amber-600' : ''}
                    `}>
                      {index + 1}
                    </span>
                  ) : (
                    entry.rank
                  )}
                </div>
                
                <div className="w-8 h-8 rounded-full overflow-hidden ml-2">
                  <img 
                    src={entry.avatar} 
                    alt={entry.name} 
                    className="w-full h-full object-cover"
                  />
                </div>
                
                <span className={`ml-2 text-sm truncate max-w-[120px] ${isCurrentUser ? 'font-medium' : ''}`}>
                  {entry.name}
                </span>
              </div>
              
              <div className="text-sm font-medium">
                {entry.xp} XP
              </div>
            </div>
          );
        })}
      </div>
      
      <div className="mt-4 text-center">
        <button className="text-blue-600 text-sm font-medium">
          View All
        </button>
      </div>
    </div>
  );
};

export default LeaderboardCard;

/== components/LoginModal.tsx
import React, { useState } from 'react';
import { X } from 'lucide-react';
import { useAuthStore } from '../store/authStore';
import { useNavigate } from 'react-router-dom';
import Button from './atoms/Button';
import Input from './atoms/Input';

interface LoginModalProps {
  isOpen: boolean;
  onClose: () => void;
}

const LoginModal: React.FC<LoginModalProps> = ({ isOpen, onClose }) => {
  const [isLoginView, setIsLoginView] = useState(true);
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [name, setName] = useState('');
  const navigate = useNavigate();

  const { login, register, isLoading, error, clearError } = useAuthStore();

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    
    try {
      if (isLoginView) {
        await login(email, password);
      } else {
        await register(name, email, password);
      }
      
      const { error: authError } = useAuthStore.getState();
      if (!authError) {
        onClose();
        navigate('/dashboard');
      }
    } catch (err) {
      console.error('Authentication error:', err);
    }
  };

  const toggleView = () => {
    setIsLoginView(!isLoginView);
    clearError();
  };

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50">
      <div className="bg-white dark:bg-gray-800 rounded-xl w-full max-w-md p-8 relative">
        <button 
          onClick={onClose}
          className="absolute top-4 right-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"
        >
          <X size={20} />
        </button>
        
        <h2 className="text-2xl font-bold text-gray-900 dark:text-white text-center mb-6">
          {isLoginView ? 'Welcome Back!' : 'Create Account'}
        </h2>
        
        {error && (
          <div className="bg-red-100 dark:bg-red-900/50 border border-red-400 dark:border-red-500 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-6">
            {error}
          </div>
        )}
        
        <form onSubmit={handleSubmit} className="space-y-6">
          {!isLoginView && (
            <Input
              id="name"
              type="text"
              label="Full Name"
              value={name}
              onChange={(e) => setName(e.target.value)}
              required
              className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
            />
          )}
          
          <Input
            id="email"
            type="email"
            label="Email Address"
            value={email}
            onChange={(e) => setEmail(e.target.value)}
            required
            className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
          />
          
          <Input
            id="password"
            type="password"
            label="Password"
            value={password}
            onChange={(e) => setPassword(e.target.value)}
            required
            className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
          />
          
          <Button
            type="submit"
            variant="primary"
            disabled={isLoading}
            className="w-full bg-brand-green hover:bg-brand-green/90"
          >
            {isLoading ? 'Processing...' : isLoginView ? 'Sign In' : 'Create Account'}
          </Button>
        </form>
        
        <div className="mt-6 text-center">
          <button
            onClick={toggleView}
            className="text-brand-green hover:text-brand-green/90 text-sm font-medium"
          >
            {isLoginView ? "Don't have an account? Sign up" : "Already have an account? Sign in"}
          </button>
        </div>
        
        <div className="mt-8 border-t border-gray-200 dark:border-gray-700 pt-6">
          <p className="text-xs text-gray-500 dark:text-gray-400 text-center">
            For demo purposes, use: unpam@example.com / password123
          </p>
        </div>
      </div>
    </div>
  );
};

export default LoginModal;

/== components/Navbar.tsx
import React, { useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { Menu, X, ChevronDown, Bell } from 'lucide-react';
import { useAuthStore } from '../store/authStore';
import UserProfile from './UserProfile';
import Button from './atoms/Button';

const Navbar = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isLanguagesOpen, setIsLanguagesOpen] = useState(false);
  const navigate = useNavigate();
  const { isAuthenticated } = useAuthStore();

  const languages = [
    { name: 'Python', path: '/tutorials/python' },
    { name: 'JavaScript', path: '/tutorials/javascript' },
    { name: 'Java', path: '/tutorials/java' },
    { name: 'C', path: '/tutorials/c' },
    { name: 'C++', path: '/tutorials/cpp' },
    { name: 'DSA', path: '/tutorials/dsa' },
  ];

  return (
    <nav className="bg-white shadow-sm sticky top-0 z-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex justify-between h-16">
          <div className="flex items-center">
            <Link to="/" className="flex-shrink-0 flex items-center">
              <div className="flex items-center">
                <span className="text-2xl font-bold tracking-tight">CG</span>
                <span className="w-1.5 h-1.5 bg-brand-green rounded-full ml-0.5" />
              </div>
              <div className="ml-2 flex items-center">
                <span className="text-xl font-bold tracking-tight">CODER GROWTH</span>
                <span className="ml-2 text-xs text-gray-500">by Diki Haryadi</span>
              </div>
            </Link>
            <div className="hidden md:ml-6 md:flex md:space-x-8">
              <div className="relative">
                <button
                  onClick={() => setIsLanguagesOpen(!isLanguagesOpen)}
                  className="inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-700 hover:text-brand-green"
                >
                  Learn
                  <ChevronDown className="ml-1 h-4 w-4" />
                </button>
                {isLanguagesOpen && (
                  <div className="absolute left-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5">
                    <div className="py-1" role="menu" aria-orientation="vertical">
                      {languages.map((language) => (
                        <Link
                          key={language.path}
                          to={language.path}
                          className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                          role="menuitem"
                          onClick={() => setIsLanguagesOpen(false)}
                        >
                          {language.name}
                        </Link>
                      ))}
                    </div>
                  </div>
                )}
              </div>
              <Link
                to="/courses"
                className="inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-700 hover:text-brand-green"
              >
                Courses
              </Link>
              <Link
                to="/compiler"
                className="inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-700 hover:text-brand-green"
              >
                Compiler
              </Link>
            </div>
          </div>

          <div className="hidden md:flex items-center space-x-4">
            {isAuthenticated ? (
              <div className="flex items-center space-x-4">
                <button className="relative text-gray-600 hover:text-gray-900">
                  <Bell className="h-6 w-6" />
                  <span className="absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-500"></span>
                </button>
                <Link to="/dashboard">
                  <Button variant="primary" className="bg-brand-green hover:bg-brand-green/90">
                    Dashboard
                  </Button>
                </Link>
                <UserProfile />
              </div>
            ) : (
              <Link to="/login">
                <Button
                  variant="primary"
                  className="bg-brand-green hover:bg-brand-green/90"
                >
                  Sign In
                </Button>
              </Link>
            )}
          </div>

          <div className="-mr-2 flex items-center md:hidden">
            <button
              onClick={() => setIsMenuOpen(!isMenuOpen)}
              className="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100"
            >
              <span className="sr-only">Open main menu</span>
              {isMenuOpen ? (
                <X className="block h-6 w-6" aria-hidden="true" />
              ) : (
                <Menu className="block h-6 w-6" aria-hidden="true" />
              )}
            </button>
          </div>
        </div>
      </div>

      {/* Mobile menu */}
      {isMenuOpen && (
        <div className="md:hidden">
          <div className="pt-2 pb-3 space-y-1">
            <Link
              to="/courses"
              className="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800"
            >
              Courses
            </Link>
            <Link
              to="/compiler"
              className="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800"
            >
              Compiler
            </Link>
          </div>
          <div className="pt-4 pb-3 border-t border-gray-200">
            {!isAuthenticated && (
              <div className="mt-3 px-2 space-y-1">
                <Link
                  to="/login"
                  className="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50"
                >
                  Sign In
                </Link>
              </div>
            )}
          </div>
        </div>
      )}
    </nav>
  );
};

export default Navbar;

/== components/StatsCard.tsx
import React from 'react';
import { useCourseStore } from '../store/courseStore';

const StatsCard: React.FC = () => {
  const { totalXp, solvedChallenges } = useCourseStore();
  
  return (
    <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6">
      <h3 className="font-medium text-gray-900 mb-4">Your Stats</h3>
      
      <div className="space-y-4">
        <div className="flex items-center">
          <div className="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3">
            <span className="text-green-600 text-lg">✓</span>
          </div>
          <div>
            <div className="font-medium text-gray-900">{totalXp}</div>
            <div className="text-xs text-gray-500">Total XP gained</div>
          </div>
        </div>
        
        <div className="flex items-center">
          <div className="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
            <span className="text-blue-600 text-lg">🏆</span>
          </div>
          <div>
            <div className="font-medium text-gray-900">{solvedChallenges}</div>
            <div className="text-xs text-gray-500">Challenges solved</div>
          </div>
        </div>
        
        <div className="flex items-center">
          <div className="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3">
            <span className="text-purple-600 text-lg">📚</span>
          </div>
          <div>
            <div className="font-medium text-gray-900">1</div>
            <div className="text-xs text-gray-500">Courses in progress</div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default StatsCard;

/== components/UserProfile.tsx
import React, { useState } from 'react';
import { useAuthStore } from '../store/authStore';
import { LogOut, ChevronDown } from 'lucide-react';

const UserProfile: React.FC = () => {
  const { user, logout } = useAuthStore();
  const [isDropdownOpen, setIsDropdownOpen] = useState(false);

  const toggleDropdown = () => {
    setIsDropdownOpen(!isDropdownOpen);
  };

  if (!user) return null;

  return (
    <div className="relative">
      <button
        onClick={toggleDropdown}
        className="flex items-center space-x-2 focus:outline-none"
      >
        <div className="w-8 h-8 rounded-full overflow-hidden bg-blue-600 flex items-center justify-center text-white">
          {user.profilePicture ? (
            <img src={user.profilePicture} alt={user.name} className="w-full h-full object-cover" />
          ) : (
            <span>{user.name.charAt(0)}</span>
          )}
        </div>
        <ChevronDown className="h-4 w-4 text-gray-600" />
      </button>

      {isDropdownOpen && (
        <div className="absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg py-2 z-50 border border-gray-200">
          <div className="px-4 py-3 border-b border-gray-100">
            <p className="text-sm font-medium text-gray-900">Hey {user.name},</p>
            <p className="text-xs text-gray-500 mt-1">{user.email}</p>
          </div>
          
          <a href="/profile" className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
            My Profile
          </a>
          <a href="/settings" className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
            Settings
          </a>
          <a href="/my-learning" className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
            My Courses
          </a>
          
          <div className="border-t border-gray-100 mt-2 pt-2">
            <button
              onClick={() => {
                logout();
                setIsDropdownOpen(false);
              }}
              className="flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-100"
            >
              <LogOut className="h-4 w-4 mr-2" />
              Sign Out
            </button>
          </div>
        </div>
      )}
    </div>
  );
};

export default UserProfile;

/== components/atoms/Alert.tsx
import React from 'react';
import { AlertCircle, CheckCircle, Info, XCircle } from 'lucide-react';

interface AlertProps {
  children: React.ReactNode;
  variant?: 'info' | 'success' | 'warning' | 'error';
  className?: string;
}

const Alert: React.FC<AlertProps> = ({
  children,
  variant = 'info',
  className = ''
}) => {
  const variantStyles = {
    info: 'bg-blue-50 text-blue-800 border-blue-200',
    success: 'bg-green-50 text-green-800 border-green-200',
    warning: 'bg-yellow-50 text-yellow-800 border-yellow-200',
    error: 'bg-red-50 text-red-800 border-red-200'
  };

  const icons = {
    info: Info,
    success: CheckCircle,
    warning: AlertCircle,
    error: XCircle
  };

  const Icon = icons[variant];

  return (
    <div className={`flex items-center p-4 rounded-lg border ${variantStyles[variant]} ${className}`}>
      <Icon className="h-5 w-5 mr-3" />
      <div>{children}</div>
    </div>
  );
};

export default Alert;

/== components/atoms/AuthInput.tsx
import React from 'react';

interface AuthInputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label: string;
  error?: string;
}

const AuthInput: React.FC<AuthInputProps> = ({
  label,
  error,
  className = '',
  ...props
}) => {
  return (
    <div className="space-y-1">
      <label className="block text-sm font-medium text-gray-700 dark:text-gray-300">
        {label}
      </label>
      <input
        className={`
          w-full px-4 py-2 rounded-lg border bg-white dark:bg-gray-800
          focus:ring-2 focus:ring-brand-green focus:border-transparent
          ${error ? 'border-red-500' : 'border-gray-300 dark:border-gray-600'}
          ${className}
        `}
        {...props}
      />
      {error && (
        <p className="text-sm text-red-600 dark:text-red-400">{error}</p>
      )}
    </div>
  );
};

export default AuthInput;

/== components/atoms/Avatar.tsx
import React from 'react';

interface AvatarProps {
  src?: string;
  alt: string;
  size?: 'sm' | 'md' | 'lg';
  fallback?: string;
}

const Avatar: React.FC<AvatarProps> = ({
  src,
  alt,
  size = 'md',
  fallback
}) => {
  const sizeStyles = {
    sm: 'w-8 h-8',
    md: 'w-10 h-10',
    lg: 'w-12 h-12'
  };

  if (!src && !fallback) {
    return (
      <div className={`${sizeStyles[size]} bg-blue-600 rounded-full flex items-center justify-center text-white`}>
        {alt.charAt(0).toUpperCase()}
      </div>
    );
  }

  return (
    <div className={`${sizeStyles[size]} rounded-full overflow-hidden bg-gray-200`}>
      <img
        src={src}
        alt={alt}
        className="w-full h-full object-cover"
        onError={(e) => {
          if (fallback) {
            (e.target as HTMLImageElement).src = fallback;
          }
        }}
      />
    </div>
  );
};

export default Avatar;

/== components/atoms/Badge.tsx
import React from "react";

interface BadgeProps {
  children: React.ReactNode;
  color?: "default" | "blue" | "green" | "red" | "yellow" | "purple";
  className?: string;
}

const Badge: React.FC<BadgeProps> = ({ 
  children, 
  color = "default", 
  className = ""
}) => {
  const colorClasses = {
    default: "bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",
    blue: "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:bg-opacity-30 dark:text-blue-300",
    green: "bg-green-100 text-green-800 dark:bg-green-900 dark:bg-opacity-30 dark:text-green-300",
    red: "bg-red-100 text-red-800 dark:bg-red-900 dark:bg-opacity-30 dark:text-red-300",
    yellow: "bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:bg-opacity-30 dark:text-yellow-300",
    purple: "bg-purple-100 text-purple-800 dark:bg-purple-900 dark:bg-opacity-30 dark:text-purple-300",
  };

  return (
    <span
      className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${colorClasses[color]} ${className}`}
    >
      {children}
    </span>
  );
};

export default Badge;

/== components/atoms/Button.tsx
import React from 'react';
import { DivideIcon as LucideIcon } from 'lucide-react';
import { Link } from 'react-router-dom';

interface ButtonProps {
  children: React.ReactNode;
  onClick?: () => void;
  variant?: 'primary' | 'secondary' | 'outline';
  size?: 'sm' | 'md' | 'lg';
  icon?: LucideIcon;
  disabled?: boolean;
  className?: string;
  type?: 'button' | 'submit' | 'reset';
  href?: string;
}

const Button: React.FC<ButtonProps> = ({
  children,
  onClick,
  variant = 'primary',
  size = 'md',
  icon: Icon,
  disabled = false,
  className = '',
  type = 'button',
  href
}) => {
  const baseStyles = 'inline-flex items-center justify-center font-medium rounded-md transition-all duration-200';
  
  const variantStyles = {
    primary: 'bg-primary-500 text-white hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900',
    secondary: 'bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600 focus:ring-2 focus:ring-gray-900 focus:ring-offset-2 dark:focus:ring-offset-gray-900',
    outline: 'border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:ring-2 focus:ring-gray-900 dark:focus:ring-gray-400 focus:ring-offset-2 dark:focus:ring-offset-gray-900'
  };
  
  const sizeStyles = {
    sm: 'px-3 py-1.5 text-sm',
    md: 'px-4 py-2 text-base',
    lg: 'px-6 py-3 text-lg'
  };
  
  const disabledStyles = disabled 
    ? 'opacity-50 cursor-not-allowed dark:opacity-40' 
    : 'cursor-pointer';

  const combinedClassName = `${baseStyles} ${variantStyles[variant]} ${sizeStyles[size]} ${disabledStyles} ${className}`;

  const content = (
    <>
      {Icon && <Icon className={`h-5 w-5 ${children ? 'mr-2' : ''}`} />}
      {children}
    </>
  );

  if (href) {
    return (
      <Link to={href} className={combinedClassName}>
        {content}
      </Link>
    );
  }

  return (
    <button
      type={type}
      onClick={onClick}
      disabled={disabled}
      className={combinedClassName}
    >
      {content}
    </button>
  );
};

export default Button;

/== components/atoms/Card.tsx
import React from 'react';

interface CardProps {
  children: React.ReactNode;
  className?: string;
  onClick?: () => void;
  hoverable?: boolean;
}

const Card: React.FC<CardProps> = ({
  children,
  className = '',
  onClick,
  hoverable = false
}) => {
  return (
    <div
      className={`
       bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700  overflow-hidden
        ${hoverable ? 'transition-shadow hover:shadow-lg' : ''}
        ${className}
      `}
      onClick={onClick}
      role={onClick ? 'button' : undefined}
    >
      {children}
    </div>
  );
};

export default Card;

/== components/atoms/Confetti.tsx
import React, { useEffect, useState } from 'react';

const Confetti: React.FC = () => {
  const [particles, setParticles] = useState<JSX.Element[]>([]);

  useEffect(() => {
    const colors = ['#FFD700', '#FF69B4', '#00CED1', '#98FB98', '#DDA0DD'];
    const particleCount = 100;
    const newParticles: JSX.Element[] = [];

    for (let i = 0; i < particleCount; i++) {
      const left = Math.random() * 100;
      const animationDuration = 3 + Math.random() * 2;
      const color = colors[Math.floor(Math.random() * colors.length)];
      const size = 5 + Math.random() * 10;
      const rotation = Math.random() * 360;

      newParticles.push(
        <div
          key={i}
          className="absolute animate-fall"
          style={{
            left: `${left}%`,
            top: '-20px',
            width: `${size}px`,
            height: `${size}px`,
            backgroundColor: color,
            transform: `rotate(${rotation}deg)`,
            animation: `fall ${animationDuration}s linear infinite`,
          }}
        />
      );
    }

    setParticles(newParticles);

    // Clean up animation after 5 seconds
    const timeout = setTimeout(() => {
      setParticles([]);
    }, 5000);

    return () => clearTimeout(timeout);
  }, []);

  return (
    <div className="fixed inset-0 pointer-events-none overflow-hidden">
      {particles}
      <style>
        {`
          @keyframes fall {
            0% {
              transform: translateY(-20px) rotate(0deg);
              opacity: 1;
            }
            100% {
              transform: translateY(100vh) rotate(360deg);
              opacity: 0;
            }
          }
          .animate-fall {
            animation: fall 3s linear infinite;
          }
        `}
      </style>
    </div>
  );
};

export default Confetti;

/== components/atoms/Divider.tsx
import React from 'react';

interface DividerProps {
  orientation?: 'horizontal' | 'vertical';
  className?: string;
  children?: React.ReactNode;
}

const Divider: React.FC<DividerProps> = ({
  orientation = 'horizontal',
  className = '',
  children
}) => {
  const baseStyles = {
    horizontal: 'w-full border-t border-gray-200',
    vertical: 'h-full border-l border-gray-200'
  };

  if (children) {
    return (
      <div className="relative">
        <div className="absolute inset-0 flex items-center">
          <div className={`${baseStyles[orientation]} ${className}`} />
        </div>
        <div className="relative flex justify-center">
          <span className="bg-white px-2 text-sm text-gray-500">
            {children}
          </span>
        </div>
      </div>
    );
  }

  return <div className={`${baseStyles[orientation]} ${className}`} />;
};

export default Divider;

/== components/atoms/Heading.tsx
import React from 'react';

interface HeadingProps {
  children: React.ReactNode;
  level?: number | 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6';
  className?: string;
}

const Heading: React.FC<HeadingProps> = ({
  children,
  level = 'h1',
  className = ''
}) => {
  const baseStyles = 'font-bold text-gray-900';
  const sizeStyles = {
    h1: 'text-4xl',
    h2: 'text-3xl',
    h3: 'text-2xl',
    h4: 'text-xl',
    h5: 'text-lg',
    h6: 'text-base'
  };

  const headingLevel = typeof level === 'number' ? `h${level}` : level;
  const Tag = headingLevel as keyof JSX.IntrinsicElements;

  return (
    <Tag className={`${baseStyles} ${sizeStyles[headingLevel]} ${className}`}>
      {children}
    </Tag>
  );
};

export default Heading;

/== components/atoms/IconButton.tsx
import React from 'react';
import { LucideIcon } from 'lucide-react';

interface IconButtonProps {
  icon: LucideIcon;
  onClick?: () => void;
  variant?: 'primary' | 'secondary' | 'outline';
  size?: 'sm' | 'md' | 'lg';
  className?: string;
  title?: string;
  disabled?: boolean;
}

const IconButton: React.FC<IconButtonProps> = ({
  icon: Icon,
  onClick,
  variant = 'primary',
  size = 'md',
  className = '',
  title,
  disabled = false
}) => {
  const baseStyles = 'inline-flex items-center justify-center rounded-full';
  
  const variantStyles = {
    primary: 'bg-blue-600 text-white hover:bg-blue-700',
    secondary: 'bg-gray-200 text-gray-700 hover:bg-gray-300',
    outline: 'border border-gray-300 text-gray-700 hover:bg-gray-50'
  };

  const sizeStyles = {
    sm: 'p-1.5',
    md: 'p-2',
    lg: 'p-3'
  };

  const iconSizes = {
    sm: 'h-4 w-4',
    md: 'h-5 w-5',
    lg: 'h-6 w-6'
  };

  return (
    <button
      onClick={onClick}
      disabled={disabled}
      title={title}
      className={`
        ${baseStyles}
        ${variantStyles[variant]}
        ${sizeStyles[size]}
        ${disabled ? 'opacity-50 cursor-not-allowed' : ''}
        ${className}
      `}
    >
      <Icon className={iconSizes[size]} />
    </button>
  );
};

export default IconButton;

/== components/atoms/Input.tsx
import React from 'react';

interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label?: string;
  error?: string;
}

const Input: React.FC<InputProps> = ({
  label,
  error,
  id,
  className = '',
  ...props
}) => {
  return (
    <div className="w-full">
      {label && (
        <label htmlFor={id} className="block text-sm font-medium text-gray-700 mb-1">
          {label}
        </label>
      )}
      <input
        id={id}
        className={`
          w-full px-3 py-2 border border-gray-300 rounded-md 
          focus:outline-none focus:ring-2 focus:ring-blue-500 
          ${error ? 'border-red-500' : ''} 
          ${className}
        `}
        {...props}
      />
      {error && (
        <p className="mt-1 text-sm text-red-600">{error}</p>
      )}
    </div>
  );
};

export default Input;

/== components/atoms/Logo.tsx
import React from 'react';
import { Link } from 'react-router-dom';

interface LogoProps {
  showText?: boolean;
}

const Logo: React.FC<LogoProps> = ({ showText = true }) => {
  return (
    <Link to="/" className="flex items-center">
      <div className="flex items-center">
        <span className="text-2xl font-bold tracking-tight">CG</span>
        <span className="w-1.5 h-1.5 bg-green-500 rounded-full ml-0.5" />
      </div>
      {showText && (
        <div className="ml-2 flex items-center">
          <span className="text-xl font-bold tracking-tight">CODER GROWTH</span>
          <span className="ml-2 text-xs text-gray-500">by Diki Haryadi</span>
        </div>
      )}
    </Link>
  );
};

export default Logo;

/== components/atoms/Modal.tsx
import React, { useEffect, useRef } from 'react';
import { X } from 'lucide-react';
import Button from './Button';

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  title: string;
  children: React.ReactNode;
  footer?: React.ReactNode;
  size?: 'sm' | 'md' | 'lg' | 'xl';
}

const Modal: React.FC<ModalProps> = ({
  isOpen,
  onClose,
  title,
  children,
  footer,
  size = 'md'
}) => {
  const modalRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    const handleEscape = (e: KeyboardEvent) => {
      if (e.key === 'Escape') {
        onClose();
      }
    };

    const handleClickOutside = (e: MouseEvent) => {
      if (modalRef.current && !modalRef.current.contains(e.target as Node)) {
        onClose();
      }
    };

    if (isOpen) {
      document.addEventListener('keydown', handleEscape);
      document.addEventListener('mousedown', handleClickOutside);
      document.body.style.overflow = 'hidden';
    }

    return () => {
      document.removeEventListener('keydown', handleEscape);
      document.removeEventListener('mousedown', handleClickOutside);
      document.body.style.overflow = 'auto';
    };
  }, [isOpen, onClose]);

  if (!isOpen) return null;

  const sizeClasses = {
    sm: 'max-w-md',
    md: 'max-w-lg',
    lg: 'max-w-2xl',
    xl: 'max-w-4xl'
  };

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50">
      <div 
        ref={modalRef}
        className={`bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full ${sizeClasses[size]} overflow-hidden`}
      >
        <div className="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">
          <h3 className="text-lg font-medium text-gray-900 dark:text-white">{title}</h3>
          <button
            onClick={onClose}
            className="text-gray-400 hover:text-gray-500 focus:outline-none"
          >
            <X className="h-5 w-5" />
          </button>
        </div>
        
        <div className="p-6">{children}</div>
        
        {footer && (
          <div className="px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex justify-end space-x-3">
            {footer}
          </div>
        )}
      </div>
    </div>
  );
};

export default Modal;

/== components/atoms/PaymentInput.tsx
import React from 'react';

interface PaymentInputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label: string;
  error?: string;
  icon?: React.ReactNode;
}

const PaymentInput: React.FC<PaymentInputProps> = ({
  label,
  error,
  icon,
  className = '',
  ...props
}) => {
  return (
    <div className="space-y-1">
      <label className="block text-sm font-medium text-gray-700">
        {label}
      </label>
      <div className="relative">
        <input
          className={`
            w-full px-4 py-2 rounded-lg border bg-white
            focus:ring-2 focus:ring-primary-500 focus:border-transparent
            ${error ? 'border-red-500' : 'border-gray-300'}
            ${icon ? 'pl-10' : ''}
            ${className}
          `}
          {...props}
        />
        {icon && (
          <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400">
            {icon}
          </div>
        )}
      </div>
      {error && (
        <p className="text-sm text-red-600">{error}</p>
      )}
    </div>
  );
};

export default PaymentInput;

/== components/atoms/PaymentMethodButton.tsx
import React from 'react';

interface PaymentMethodButtonProps {
  icon: React.ReactNode;
  name: string;
  selected: boolean;
  onClick: () => void;
}

const PaymentMethodButton: React.FC<PaymentMethodButtonProps> = ({
  icon,
  name,
  selected,
  onClick
}) => {
  return (
    <button
      onClick={onClick}
      className={`w-full flex items-center justify-center p-4 rounded-lg border ${
        selected 
          ? 'border-primary-500 bg-primary-50 text-primary-600' 
          : 'border-gray-200 hover:bg-gray-50'
      }`}
    >
      {icon}
      <span className="ml-2 font-medium">{name}</span>
    </button>
  );
};

export default PaymentMethodButton;

/== components/atoms/PricingFeature.tsx
import React from 'react';
import { Check } from 'lucide-react';

interface PricingFeatureProps {
  name: string;
  included: boolean;
}

const PricingFeature: React.FC<PricingFeatureProps> = ({ name, included }) => {
  return (
    <li className="flex items-center">
      <Check 
        className={`h-5 w-5 mr-3 ${
          included ? 'text-green-500' : 'text-gray-300'
        }`} 
      />
      <span className={included ? 'text-gray-700' : 'text-gray-400'}>
        {name}
      </span>
    </li>
  );
};

export default PricingFeature;

/== components/atoms/PricingToggle.tsx
import React from 'react';

interface PricingToggleProps {
  value: 'yearly' | 'monthly';
  onChange: (value: 'yearly' | 'monthly') => void;
}

const PricingToggle: React.FC<PricingToggleProps> = ({ value, onChange }) => {
  return (
    <div className="bg-white rounded-lg p-1 inline-flex">
      <button
        onClick={() => onChange('yearly')}
        className={`px-4 py-2 rounded-md text-sm font-medium ${
          value === 'yearly'
            ? 'bg-primary-500 text-white'
            : 'text-gray-700 hover:bg-gray-100'
        }`}
      >
        Yearly
      </button>
      <button
        onClick={() => onChange('monthly')}
        className={`px-4 py-2 rounded-md text-sm font-medium ${
          value === 'monthly'
            ? 'bg-primary-500 text-white'
            : 'text-gray-700 hover:bg-gray-100'
        }`}
      >
        Monthly
      </button>
    </div>
  );
};

export default PricingToggle;

/== components/atoms/Progress.tsx
import React from "react";

interface ProgressProps {
  value: number;
  max?: number;
  color?: "default" | "blue" | "green" | "red" | "yellow";
  className?: string;
}

const Progress: React.FC<ProgressProps> = ({
  value,
  max = 100,
  color = "default",
  className = "",
}) => {
  // Ensure the value is between 0 and max
  const clampedValue = Math.min(Math.max(0, value), max);
  const percentage = (clampedValue / max) * 100;

  const baseClasses = "rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700";
  const barClasses = {
    default: "bg-gray-500 dark:bg-gray-400",
    blue: "bg-blue-500 dark:bg-blue-600",
    green: "bg-green-500 dark:bg-green-600",
    red: "bg-red-500 dark:bg-red-600",
    yellow: "bg-yellow-500 dark:bg-yellow-600",
  };

  return (
    <div className={`${baseClasses} ${className}`}>
      <div
        className={`${barClasses[color]} h-full transition-all duration-300 ease-in-out`}
        style={{ width: `${percentage}%` }}
        role="progressbar"
        aria-valuenow={clampedValue}
        aria-valuemin={0}
        aria-valuemax={max}
      ></div>
    </div>
  );
};

export default Progress;

/== components/atoms/RoadmapConnection.tsx
import React from 'react';

interface RoadmapConnectionProps {
  type?: 'straight' | 'curved';
  direction?: 'horizontal' | 'vertical';
  className?: string;
}

const RoadmapConnection: React.FC<RoadmapConnectionProps> = ({
  type = 'straight',
  direction = 'horizontal',
  className = ''
}) => {
  if (direction === 'horizontal') {
    return (
      <div className={`h-px bg-gray-300 dark:bg-gray-700 ${className}`} />
    );
  }

  return (
    <div className={`w-px h-full bg-gray-300 dark:bg-gray-700 ${className}`} />
  );
};

export default RoadmapConnection;

/== components/atoms/RoadmapNode.tsx
import React from 'react';
import { Check } from 'lucide-react';

interface RoadmapNodeProps {
  title: string;
  isCompleted?: boolean;
  isActive?: boolean;
  type?: 'primary' | 'secondary' | 'highlight';
  onClick?: () => void;
}

const RoadmapNode: React.FC<RoadmapNodeProps> = ({
  title,
  isCompleted = false,
  isActive = false,
  type = 'secondary',
  onClick
}) => {
  const baseStyles = "px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 cursor-pointer";
  
  const typeStyles = {
    primary: "bg-blue-600 text-white hover:bg-blue-700",
    secondary: "bg-yellow-100 text-yellow-900 hover:bg-yellow-200",
    highlight: "bg-purple-600 text-white hover:bg-purple-700"
  };

  const statusStyles = isCompleted 
    ? "border-2 border-green-500" 
    : isActive 
      ? "ring-2 ring-blue-400" 
      : "";

  return (
    <div
      onClick={onClick}
      className={`
        ${baseStyles}
        ${typeStyles[type]}
        ${statusStyles}
        flex items-center justify-between
        hover:scale-105 transform
      `}
    >
      <span>{title}</span>
      {isCompleted && (
        <Check className="h-4 w-4 ml-2 text-green-500" />
      )}
    </div>
  );
};

export default RoadmapNode;

/== components/atoms/Select.tsx
import React from 'react';

interface SelectOption {
  value: string;
  label: string;
}

interface SelectProps extends React.SelectHTMLAttributes<HTMLSelectElement> {
  options: SelectOption[];
  label?: string;
  error?: string;
  className?: string;
}

const Select: React.FC<SelectProps> = ({
  options,
  label,
  error,
  className = '',
  ...props
}) => {
  return (
    <div className="w-full">
      {label && (
        <label className="block text-sm font-medium text-gray-700 mb-1">
          {label}
        </label>
      )}
      <select
        className={`
          w-full px-3 py-2 bg-white border border-gray-300 rounded-md
          focus:outline-none focus:ring-2 focus:ring-blue-500
          disabled:bg-gray-100 disabled:cursor-not-allowed
          ${error ? 'border-red-500' : 'border-gray-300'}
          ${className}
        `}
        {...props}
      >
        {options.map((option) => (
          <option key={option.value} value={option.value}>
            {option.label}
          </option>
        ))}
      </select>
      {error && (
        <p className="mt-1 text-sm text-red-600">{error}</p>
      )}
    </div>
  );
};

export default Select;

/== components/atoms/Spinner.tsx
import React from 'react';

interface SpinnerProps {
  size?: 'sm' | 'md' | 'lg';
  color?: 'primary' | 'white';
}

const Spinner: React.FC<SpinnerProps> = ({
  size = 'md',
  color = 'primary'
}) => {
  const sizeStyles = {
    sm: 'w-4 h-4',
    md: 'w-6 h-6',
    lg: 'w-8 h-8'
  };

  const colorStyles = {
    primary: 'text-blue-600',
    white: 'text-white'
  };

  return (
    <div className={`${sizeStyles[size]} ${colorStyles[color]} animate-spin`}>
      <svg className="w-full h-full" viewBox="0 0 24 24">
        <circle
          className="opacity-25"
          cx="12"
          cy="12"
          r="10"
          stroke="currentColor"
          strokeWidth="4"
          fill="none"
        />
        <path
          className="opacity-75"
          fill="currentColor"
          d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
        />
      </svg>
    </div>
  );
};

export default Spinner;

/== components/atoms/Text.tsx
import React from 'react';

interface TextProps {
  children: React.ReactNode;
  variant?: 'body' | 'caption' | 'small';
  color?: 'default' | 'muted' | 'primary' | 'error';
  className?: string;
}

const Text: React.FC<TextProps> = ({
  children,
  variant = 'body',
  color = 'default',
  className = ''
}) => {
  const variantStyles = {
    body: 'text-base',
    caption: 'text-sm',
    small: 'text-xs'
  };

  const colorStyles = {
    default: 'text-gray-900',
    muted: 'text-gray-600',
    primary: 'text-blue-600',
    error: 'text-red-600'
  };

  return (
    <p className={`${variantStyles[variant]} ${colorStyles[color]} ${className}`}>
      {children}
    </p>
  );
};

export default Text;

/== components/atoms/TextArea.tsx
import React from 'react';

interface TextAreaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {
  label?: string;
  error?: string;
}

const TextArea: React.FC<TextAreaProps> = ({
  label,
  error,
  className = '',
  ...props
}) => {
  return (
    <div className="w-full">
      {label && (
        <label className="block text-sm font-medium text-gray-700 mb-1">
          {label}
        </label>
      )}
      <textarea
        className={`
          w-full px-3 py-2 border border-gray-300 rounded-md
          focus:outline-none focus:ring-2 focus:ring-blue-500
          disabled:bg-gray-100 disabled:cursor-not-allowed
          ${error ? 'border-red-500' : 'border-gray-300'}
          ${className}
        `}
        {...props}
      />
      {error && (
        <p className="mt-1 text-sm text-red-600">{error}</p>
      )}
    </div>
  );
};

export default TextArea;

/== components/atoms/ThemeToggle.tsx
import React from 'react';
import { Sun, Moon } from 'lucide-react';
import { useThemeStore } from '../../store/themeStore';

const ThemeToggle: React.FC = () => {
  const { isDarkMode, toggleTheme } = useThemeStore();

  React.useEffect(() => {
    if (isDarkMode) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  }, [isDarkMode]);

  return (
    <button
      onClick={toggleTheme}
      className="p-2 rounded-md text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 dark:text-gray-400"
      aria-label="Toggle theme"
    >
      {isDarkMode ? (
        <Sun className="h-5 w-5" />
      ) : (
        <Moon className="h-5 w-5" />
      )}
    </button>
  );
};

export default ThemeToggle;

/== components/atoms/Toast.tsx
import React, { useEffect } from 'react';
import { CheckCircle, XCircle, AlertCircle, Info, X } from 'lucide-react';

export type ToastType = 'success' | 'error' | 'warning' | 'info';

interface ToastProps {
  message: string;
  type?: ToastType;
  onClose: () => void;
  duration?: number;
}

const Toast: React.FC<ToastProps> = ({
  message,
  type = 'info',
  onClose,
  duration = 3000
}) => {
  useEffect(() => {
    const timer = setTimeout(() => {
      onClose();
    }, duration);

    return () => clearTimeout(timer);
  }, [duration, onClose]);

  const icons = {
    success: <CheckCircle className="w-5 h-5 text-green-500" />,
    error: <XCircle className="w-5 h-5 text-red-500" />,
    warning: <AlertCircle className="w-5 h-5 text-yellow-500" />,
    info: <Info className="w-5 h-5 text-blue-500" />
  };

  const colors = {
    success: 'bg-green-50 border-green-200',
    error: 'bg-red-50 border-red-200',
    warning: 'bg-yellow-50 border-yellow-200',
    info: 'bg-blue-50 border-blue-200'
  };

  return (
    <div
      className={`fixed top-4 right-4 flex items-center p-4 rounded-lg border ${colors[type]} shadow-lg max-w-sm animate-slide-in-right`}
      role="alert"
    >
      <div className="flex items-center">
        {icons[type]}
        <p className="ml-3 text-sm font-medium text-gray-800">{message}</p>
      </div>
      <button
        onClick={onClose}
        className="ml-4 text-gray-400 hover:text-gray-600"
      >
        <X className="w-4 h-4" />
      </button>
    </div>
  );
};

export default Toast;

/== components/molecules/AddIntegrationModal.tsx
import React, { useState } from 'react';
import { X } from 'lucide-react';
import Button from '../atoms/Button';
import Input from '../atoms/Input';
import Select from '../atoms/Select';
import Heading from '../atoms/Heading';
import Text from '../atoms/Text';

interface AddIntegrationModalProps {
  isOpen: boolean;
  onClose: () => void;
  onSubmit: (data: any) => void;
  integrationType: 'api' | 'payment' | 'sso' | 'third-party' | 'webhook';
  isLoading?: boolean;
}

const AddIntegrationModal: React.FC<AddIntegrationModalProps> = ({
  isOpen,
  onClose,
  onSubmit,
  integrationType,
  isLoading = false
}) => {
  const [formData, setFormData] = useState<Record<string, any>>({});

  if (!isOpen) return null;

  const handleChange = (field: string, value: any) => {
    setFormData(prev => ({
      ...prev,
      [field]: value
    }));
  };

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    onSubmit(formData);
  };

  const getFormFields = () => {
    switch (integrationType) {
      case 'api':
        return (
          <>
            <div className="mb-4">
              <label htmlFor="name" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Nama API Key <span className="text-red-500">*</span>
              </label>
              <Input
                id="name"
                type="text"
                placeholder="Contoh: Production API Key"
                value={formData.name || ''}
                onChange={(e) => handleChange('name', e.target.value)}
                required
                className="w-full"
              />
            </div>
            <div className="mb-4">
              <label htmlFor="description" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Deskripsi
              </label>
              <Input
                id="description"
                type="text"
                placeholder="Deskripsi penggunaan API key"
                value={formData.description || ''}
                onChange={(e) => handleChange('description', e.target.value)}
                className="w-full"
              />
            </div>
            <div className="mb-4">
              <label htmlFor="expiry" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Tanggal Kadaluarsa
              </label>
              <Input
                id="expiry"
                type="date"
                value={formData.expiry || ''}
                onChange={(e) => handleChange('expiry', e.target.value)}
                className="w-full"
              />
            </div>
          </>
        );
      
      case 'payment':
        return (
          <>
            <div className="mb-4">
              <label htmlFor="provider" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Penyedia Pembayaran <span className="text-red-500">*</span>
              </label>
              <Select
                id="provider"
                value={formData.provider || ''}
                onChange={(e) => handleChange('provider', e.target.value)}
                required
                className="w-full"
              >
                <option value="">Pilih Penyedia</option>
                <option value="stripe">Stripe</option>
                <option value="paypal">PayPal</option>
                <option value="midtrans">Midtrans</option>
                <option value="xendit">Xendit</option>
              </Select>
            </div>
            <div className="mb-4">
              <label htmlFor="apiKey" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                API Key <span className="text-red-500">*</span>
              </label>
              <Input
                id="apiKey"
                type="password"
                placeholder="API Key dari penyedia pembayaran"
                value={formData.apiKey || ''}
                onChange={(e) => handleChange('apiKey', e.target.value)}
                required
                className="w-full"
              />
            </div>
            <div className="mb-4">
              <label htmlFor="mode" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Mode <span className="text-red-500">*</span>
              </label>
              <Select
                id="mode"
                value={formData.mode || ''}
                onChange={(e) => handleChange('mode', e.target.value)}
                required
                className="w-full"
              >
                <option value="">Pilih Mode</option>
                <option value="test">Test</option>
                <option value="live">Live</option>
              </Select>
            </div>
          </>
        );
      
      case 'sso':
        return (
          <>
            <div className="mb-4">
              <label htmlFor="provider" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Penyedia SSO <span className="text-red-500">*</span>
              </label>
              <Select
                id="provider"
                value={formData.provider || ''}
                onChange={(e) => handleChange('provider', e.target.value)}
                required
                className="w-full"
              >
                <option value="">Pilih Penyedia</option>
                <option value="google">Google</option>
                <option value="microsoft">Microsoft Azure AD</option>
                <option value="okta">Okta</option>
                <option value="auth0">Auth0</option>
              </Select>
            </div>
            <div className="mb-4">
              <label htmlFor="clientId" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Client ID <span className="text-red-500">*</span>
              </label>
              <Input
                id="clientId"
                type="text"
                placeholder="Client ID dari penyedia SSO"
                value={formData.clientId || ''}
                onChange={(e) => handleChange('clientId', e.target.value)}
                required
                className="w-full"
              />
            </div>
            <div className="mb-4">
              <label htmlFor="clientSecret" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Client Secret <span className="text-red-500">*</span>
              </label>
              <Input
                id="clientSecret"
                type="password"
                placeholder="Client Secret dari penyedia SSO"
                value={formData.clientSecret || ''}
                onChange={(e) => handleChange('clientSecret', e.target.value)}
                required
                className="w-full"
              />
            </div>
            <div className="mb-4">
              <label htmlFor="domain" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Domain <span className="text-red-500">*</span>
              </label>
              <Input
                id="domain"
                type="text"
                placeholder="contoh: perusahaan.com"
                value={formData.domain || ''}
                onChange={(e) => handleChange('domain', e.target.value)}
                required
                className="w-full"
              />
            </div>
          </>
        );
      
      case 'third-party':
        return (
          <>
            <div className="mb-4">
              <label htmlFor="service" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Layanan <span className="text-red-500">*</span>
              </label>
              <Select
                id="service"
                value={formData.service || ''}
                onChange={(e) => handleChange('service', e.target.value)}
                required
                className="w-full"
              >
                <option value="">Pilih Layanan</option>
                <option value="google-analytics">Google Analytics</option>
                <option value="mailchimp">Mailchimp</option>
                <option value="slack">Slack</option>
                <option value="discord">Discord</option>
                <option value="other">Lainnya</option>
              </Select>
            </div>
            {formData.service === 'other' && (
              <div className="mb-4">
                <label htmlFor="customService" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                  Nama Layanan <span className="text-red-500">*</span>
                </label>
                <Input
                  id="customService"
                  type="text"
                  placeholder="Masukkan nama layanan"
                  value={formData.customService || ''}
                  onChange={(e) => handleChange('customService', e.target.value)}
                  required
                  className="w-full"
                />
              </div>
            )}
            <div className="mb-4">
              <label htmlFor="apiKey" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                API Key / Token <span className="text-red-500">*</span>
              </label>
              <Input
                id="apiKey"
                type="password"
                placeholder="API Key atau Token dari layanan"
                value={formData.apiKey || ''}
                onChange={(e) => handleChange('apiKey', e.target.value)}
                required
                className="w-full"
              />
            </div>
            <div className="mb-4">
              <label htmlFor="category" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Kategori
              </label>
              <Select
                id="category"
                value={formData.category || ''}
                onChange={(e) => handleChange('category', e.target.value)}
                className="w-full"
              >
                <option value="">Pilih Kategori</option>
                <option value="analytics">Analytics</option>
                <option value="email">Email</option>
                <option value="communication">Komunikasi</option>
                <option value="marketing">Marketing</option>
                <option value="other">Lainnya</option>
              </Select>
            </div>
          </>
        );
      
      case 'webhook':
        return (
          <>
            <div className="mb-4">
              <label htmlFor="name" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Nama Webhook <span className="text-red-500">*</span>
              </label>
              <Input
                id="name"
                type="text"
                placeholder="Contoh: Notifikasi Kursus Selesai"
                value={formData.name || ''}
                onChange={(e) => handleChange('name', e.target.value)}
                required
                className="w-full"
              />
            </div>
            <div className="mb-4">
              <label htmlFor="url" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                URL <span className="text-red-500">*</span>
              </label>
              <Input
                id="url"
                type="url"
                placeholder="https://example.com/webhook"
                value={formData.url || ''}
                onChange={(e) => handleChange('url', e.target.value)}
                required
                className="w-full"
              />
            </div>
            <div className="mb-4">
              <label htmlFor="event" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Event <span className="text-red-500">*</span>
              </label>
              <Select
                id="event"
                value={formData.event || ''}
                onChange={(e) => handleChange('event', e.target.value)}
                required
                className="w-full"
              >
                <option value="">Pilih Event</option>
                <option value="course.completed">Kursus Selesai</option>
                <option value="payment.success">Pembayaran Berhasil</option>
                <option value="user.created">Pengguna Baru</option>
                <option value="certificate.issued">Sertifikat Diterbitkan</option>
              </Select>
            </div>
            <div className="mb-4">
              <label htmlFor="secret" className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Secret Key
              </label>
              <Input
                id="secret"
                type="password"
                placeholder="Secret key untuk verifikasi webhook"
                value={formData.secret || ''}
                onChange={(e) => handleChange('secret', e.target.value)}
                className="w-full"
              />
            </div>
          </>
        );
      
      default:
        return null;
    }
  };

  const getModalTitle = () => {
    switch (integrationType) {
      case 'api': return 'Tambah API Key Baru';
      case 'payment': return 'Tambah Gateway Pembayaran';
      case 'sso': return 'Tambah Provider SSO';
      case 'third-party': return 'Tambah Integrasi Pihak Ketiga';
      case 'webhook': return 'Tambah Webhook Baru';
      default: return 'Tambah Integrasi';
    }
  };

  return (
    <div className="fixed inset-0 z-50 overflow-y-auto">
      <div className="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
        <div className="fixed inset-0 transition-opacity" aria-hidden="true">
          <div className="absolute inset-0 bg-gray-500 opacity-75 dark:bg-gray-900 dark:opacity-90"></div>
        </div>

        <span className="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

        <div className="inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
          <div className="flex items-center justify-between px-6 pt-5 pb-2">
            <Heading level="h3" className="text-lg font-medium">{getModalTitle()}</Heading>
            <button
              type="button"
              className="text-gray-400 hover:text-gray-500 focus:outline-none"
              onClick={onClose}
            >
              <X className="h-6 w-6" />
            </button>
          </div>
          
          <div className="px-6 pb-6">
            <Text className="text-sm text-gray-500 dark:text-gray-400 mb-4">
              Isi formulir berikut untuk menambahkan integrasi baru.
            </Text>
            
            <form onSubmit={handleSubmit}>
              {getFormFields()}
              
              <div className="flex justify-end space-x-3 mt-6">
                <Button
                  type="button"
                  variant="secondary"
                  onClick={onClose}
                  className="border-gray-300 dark:border-gray-600"
                >
                  Batal
                </Button>
                <Button
                  type="submit"
                  variant="primary"
                  className="bg-brand-green hover:bg-brand-green/90"
                  disabled={isLoading}
                >
                  {isLoading ? 'Menyimpan...' : 'Simpan'}
                </Button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  );
};

export default AddIntegrationModal;

/== components/molecules/AffiliateTable.tsx
import React from "react";
import Badge from "../atoms/Badge";
import IconButton from "../atoms/IconButton";
import Text from "../atoms/Text";
import { Eye, Edit, Trash } from "lucide-react";

interface AffiliateProgram {
  id: string;
  name: string;
  referralCode: string;
  commission: string;
  registrations: number;
  status: "active" | "inactive" | "pending";
  earnings: number;
  conversions: number;
}

interface AffiliateTableProps {
  affiliates: AffiliateProgram[];
  onEdit: (id: string) => void;
  onView: (id: string) => void;
  onDelete: (id: string) => void;
}

const AffiliateTable: React.FC<AffiliateTableProps> = ({ 
  affiliates, 
  onEdit, 
  onView,
  onDelete 
}) => {
  return (
    <div className="overflow-x-auto w-full">
      <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
        <thead className="bg-gray-50 dark:bg-gray-800">
          <tr>
            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
              Nama Program
            </th>
            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
              Kode Referral
            </th>
            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
              Komisi
            </th>
            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
              Pendaftaran
            </th>
            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
              Konversi
            </th>
            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
              Total Komisi
            </th>
            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
              Status
            </th>
            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
              Aksi
            </th>
          </tr>
        </thead>
        <tbody className="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
          {affiliates.map((affiliate) => (
            <tr key={affiliate.id} className="hover:bg-gray-50 dark:hover:bg-gray-800">
              <td className="px-6 py-4 whitespace-nowrap">
                <Text className="font-medium text-gray-900 dark:text-white">{affiliate.name}</Text>
              </td>
              <td className="px-6 py-4 whitespace-nowrap">
                <Badge color="blue">{affiliate.referralCode}</Badge>
              </td>
              <td className="px-6 py-4 whitespace-nowrap">
                <Text className="text-gray-700 dark:text-gray-300">{affiliate.commission}</Text>
              </td>
              <td className="px-6 py-4 whitespace-nowrap">
                <Text className="text-gray-700 dark:text-gray-300">{affiliate.registrations}</Text>
              </td>
              <td className="px-6 py-4 whitespace-nowrap">
                <Text className="text-gray-700 dark:text-gray-300">{affiliate.conversions}</Text>
              </td>
              <td className="px-6 py-4 whitespace-nowrap">
                <Text className="font-medium text-gray-900 dark:text-white">
                  Rp {affiliate.earnings.toLocaleString()}
                </Text>
              </td>
              <td className="px-6 py-4 whitespace-nowrap">
                <Badge 
                  color={affiliate.status === 'active' ? 'green' : 
                        affiliate.status === 'pending' ? 'yellow' : 'red'}
                >
                  {affiliate.status === 'active' ? 'Aktif' : 
                   affiliate.status === 'pending' ? 'Menunggu' : 'Tidak Aktif'}
                </Badge>
              </td>
              <td className="px-6 py-4 whitespace-nowrap">
                <div className="flex space-x-2">
                  <IconButton
                    icon={Eye}
                    variant="outline"
                    onClick={() => onView(affiliate.id)}
                    title="Lihat Detail"
                    size="sm"
                  />
                  <IconButton
                    icon={Edit}
                    variant="outline"
                    onClick={() => onEdit(affiliate.id)}
                    title="Edit Program"
                    size="sm"
                  />
                  <IconButton
                    icon={Trash}
                    variant="outline"
                    onClick={() => onDelete(affiliate.id)}
                    title="Hapus Program"
                    className="text-red-600 hover:text-red-700 hover:border-red-600"
                    size="sm"
                  />
                </div>
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
};

export default AffiliateTable;

/== components/molecules/AuthForm.tsx
import React from 'react';
import { Link } from 'react-router-dom';
import AuthInput from '../atoms/AuthInput';
import Button from '../atoms/Button';

interface AuthFormProps {
  isLogin?: boolean;
  onSubmit: (e: React.FormEvent) => void;
  isLoading: boolean;
  error?: string;
  email: string;
  setEmail: (value: string) => void;
  password: string;
  setPassword: (value: string) => void;
  name?: string;
  setName?: (value: string) => void;
}

const AuthForm: React.FC<AuthFormProps> = ({
  isLogin = true,
  onSubmit,
  isLoading,
  error,
  email,
  setEmail,
  password,
  setPassword,
  name,
  setName
}) => {
  return (
    <form onSubmit={onSubmit} className="space-y-6">
      {error && (
        <div className="p-4 rounded-lg bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-800">
          <p className="text-sm text-red-600 dark:text-red-400">{error}</p>
        </div>
      )}

      {!isLogin && setName && (
        <AuthInput
          label="Full Name"
          type="text"
          value={name}
          onChange={(e) => setName(e.target.value)}
          required
          placeholder="Enter your full name"
        />
      )}

      <AuthInput
        label="Email Address"
        type="email"
        value={email}
        onChange={(e) => setEmail(e.target.value)}
        required
        placeholder="Enter your email"
      />

      <AuthInput
        label="Password"
        type="password"
        value={password}
        onChange={(e) => setPassword(e.target.value)}
        required
        placeholder="Enter your password"
      />

      <Button
        type="submit"
        variant="primary"
        className="w-full bg-brand-green hover:bg-brand-green/90"
        disabled={isLoading}
      >
        {isLoading ? 'Processing...' : isLogin ? 'Sign In' : 'Create Account'}
      </Button>

      <div className="text-center">
        <Link
          to={isLogin ? '/register' : '/login'}
          className="text-sm text-brand-green hover:text-brand-green/90"
        >
          {isLogin
            ? "Don't have an account? Sign up"
            : "Already have an account? Sign in"}
        </Link>
      </div>

      {isLogin && (
        <div className="text-center space-y-2">
          <p className="text-xs text-gray-500 dark:text-gray-400">
            Demo credentials (User): unpam@example.com / password123
          </p>
          <p className="text-xs text-gray-500 dark:text-gray-400">
            Demo credentials (Admin): admin@example.com / admin123
          </p>
        </div>
      )}
    </form>
  );
};

export default AuthForm;

/== components/molecules/AuthHeader.tsx
import React from 'react';
import { Link } from 'react-router-dom';

interface AuthHeaderProps {
  title: string;
  subtitle: string;
}

const AuthHeader: React.FC<AuthHeaderProps> = ({ title, subtitle }) => {
  return (
    <div className="text-center mb-8">
      <Link to="/" className="inline-block mb-6">
        <div className="flex items-center justify-center">
          <span className="text-3xl font-bold">CG</span>
          <span className="w-2 h-2 bg-brand-green rounded-full ml-1" />
        </div>
      </Link>
      <h1 className="text-3xl font-bold text-gray-900 dark:text-white mb-2">
        {title}
      </h1>
      <p className="text-gray-600 dark:text-gray-400">
        {subtitle}
      </p>
    </div>
  );
};

export default AuthHeader;

/== components/molecules/Breadcrumbs.tsx
import React from 'react';
import { Link } from 'react-router-dom';
import { ChevronRight } from 'lucide-react';

interface BreadcrumbItem {
  label: string;
  href?: string;
}

interface BreadcrumbsProps {
  items: BreadcrumbItem[];
}

const Breadcrumbs: React.FC<BreadcrumbsProps> = ({ items }) => {
  return (
    <nav className="flex" aria-label="Breadcrumb">
      <ol className="flex items-center space-x-2">
        {items.map((item, index) => (
          <li key={index} className="flex items-center">
            {index > 0 && (
              <ChevronRight className="h-4 w-4 text-gray-400 mx-2 flex-shrink-0" />
            )}
            {item.href ? (
              <Link
                to={item.href}
                className="text-sm font-medium text-gray-500 hover:text-gray-700"
              >
                {item.label}
              </Link>
            ) : (
              <span className="text-sm font-medium text-gray-900">
                {item.label}
              </span>
            )}
          </li>
        ))}
      </ol>
    </nav>
  );
};

export default Breadcrumbs;

/== components/molecules/BundleCard.tsx
import React from 'react';
import { Bundle } from '../../store/useBundleStore';
import  Badge  from '../atoms/Badge';
import Button  from '../atoms/Button';

interface BundleCardProps {
  bundle: Bundle;
  onEdit?: () => void;
  onDelete?: () => void;
  onView?: () => void;
}

export const BundleCard: React.FC<BundleCardProps> = ({
  bundle,
  onEdit,
  onDelete,
  onView,
}) => {
  const {
    title,
    description,
    originalPrice,
    bundlePrice,
    discountPercentage,
    courses,
    theme,
    difficultyLevel,
    limitedTime,
    startDate,
    endDate,
    isActive,
  } = bundle;
  
  return (
    <div className="border rounded-lg overflow-hidden shadow-sm bg-white">
      <div className="p-4 border-b">
        <div className="flex justify-between">
          <div>
            <h3 className="text-lg font-semibold text-gray-800">{title}</h3>
            <p className="text-sm text-gray-500 mb-2">{courses.length} courses</p>
          </div>
          <div className="text-right">
            <div className="text-lg font-bold text-blue-600">${bundlePrice.toFixed(2)}</div>
            <div className="text-sm text-gray-500 line-through">${originalPrice.toFixed(2)}</div>
            <Badge variant="success">Save {discountPercentage}%</Badge>
          </div>
        </div>
        <p className="text-sm text-gray-600 mt-2 line-clamp-2">{description}</p>
      </div>
      <div className="p-4 bg-gray-50">
        <div className="flex justify-between items-center mb-3">
          <div className="flex space-x-2">
            <Badge variant="info">{theme}</Badge>
            <Badge variant={
              difficultyLevel === 'beginner' ? 'info' : 
              difficultyLevel === 'intermediate' ? 'warning' : 'danger'
            }>
              {difficultyLevel}
            </Badge>
            {limitedTime && (
              <Badge variant="warning">Limited Time</Badge>
            )}
          </div>
          <div>
            {isActive ? (
              <Badge variant="success">Active</Badge>
            ) : (
              <Badge variant="danger">Inactive</Badge>
            )}
          </div>
        </div>
        {limitedTime && startDate && endDate && (
          <div className="text-xs text-gray-500 mb-3">
            Available from {new Date(startDate).toLocaleDateString()} to {new Date(endDate).toLocaleDateString()}
          </div>
        )}
        <div className="flex space-x-2">
          <Button size="sm" variant="outline" onClick={onView}>View</Button>
          <Button size="sm" variant="primary" onClick={onEdit}>Edit</Button>
          <Button size="sm" variant="danger" onClick={onDelete}>Delete</Button>
        </div>
      </div>
    </div>
  );
};

/== components/molecules/CodeEditor.tsx
import React, { useRef } from 'react';
import Editor from '@monaco-editor/react';

interface CodeEditorProps {
  code: string;
  onChange: (value: string | undefined) => void;
  language?: string;
  theme?: string;
  readOnly?: boolean;
  fontSize?: string;
  height?: string;
}

const CodeEditor: React.FC<CodeEditorProps> = ({
  code,
  onChange,
  language = 'python',
  theme = 'vs-dark',
  readOnly = false,
  fontSize = '14px',
  height = '100%'
}) => {
  const editorRef = useRef<any>(null);

  const handleEditorDidMount = (editor: any) => {
    editorRef.current = editor;
    editor.focus();
  };

  const options = {
    selectOnLineNumbers: true,
    roundedSelection: false,
    readOnly: readOnly,
    cursorStyle: 'line',
    automaticLayout: true,
    minimap: {
      enabled: false
    },
    scrollBeyondLastLine: false,
    fontSize: parseInt(fontSize),
    fontFamily: 'Menlo, Monaco, "Courier New", monospace',
    lineNumbers: 'on',
    folding: true,
    lineHeight: 21,
    renderLineHighlight: 'all',
    scrollbar: {
      useShadows: false,
      verticalScrollbarSize: 10,
      horizontalScrollbarSize: 10
    },
    overviewRulerLanes: 0,
    hideCursorInOverviewRuler: true,
    overviewRulerBorder: false
  };

  return (
    <div className="h-full w-full relative">
      <Editor
        height={height}
        language={language}
        theme={theme}
        value={code}
        options={options}
        onChange={onChange}
        onMount={handleEditorDidMount}
        loading={
          <div className="absolute inset-0 flex items-center justify-center bg-gray-900">
            <div className="text-white">Loading editor...</div>
          </div>
        }
      />
    </div>
  );
};

export default CodeEditor;

/== components/molecules/CourseCard.tsx
import React from 'react';
import { Link } from 'react-router-dom';
import { Star, Clock, Users, Code } from 'lucide-react';
import Button from '../atoms/Button';

interface CourseCardProps {
  id: string;
  title: string;
  description: string;
  image: string;
  rating: number;
  students: number;
  duration: string;
  level: string;
  color: string;
}

const CourseCard: React.FC<CourseCardProps> = ({
  id,
  title,
  description,
  image,
  rating,
  students,
  duration,
  level,
  color
}) => {
  return (
    <div className="bg-white rounded-lg shadow-md overflow-hidden">
      <div className="relative">
        <img src={image} alt={title} className="w-full h-48 object-cover" />
        <div className="absolute top-0 right-0 bg-white px-3 py-1 m-2 rounded-full flex items-center">
          <Star className="h-4 w-4 text-yellow-400 mr-1" fill="currentColor" />
          <span className="text-sm font-medium">{rating}</span>
        </div>
      </div>
      
      <div className="p-6">
        <h3 className="text-xl font-bold text-gray-900 mb-2">{title}</h3>
        <p className="text-gray-600 mb-4">{description}</p>
        
        <div className="flex flex-wrap gap-4 mb-4">
          <div className="flex items-center text-sm text-gray-500">
            <Clock className="h-4 w-4 mr-1" />
            {duration}
          </div>
          <div className="flex items-center text-sm text-gray-500">
            <Users className="h-4 w-4 mr-1" />
            {(students || 0).toLocaleString()} students
          </div>
          <div className="flex items-center text-sm text-gray-500">
            <Code className="h-4 w-4 mr-1" />
            {level}
          </div>
        </div>
        
        <Link
          to={`/courses/${id}`}
          className={`inline-block w-full text-center px-4 py-2 ${color} text-white font-medium rounded hover:opacity-90 transition duration-300`}
        >
          Enroll Now
        </Link>
      </div>
    </div>
  );
};

export default CourseCard;

/== components/molecules/CourseSortable.tsx
import React from 'react';
import { Course } from '../../store/useBundleStore';

interface CourseSortableProps {
  courses: Course[];
  selectedCourseIds: string[];
  onReorder: (newOrder: string[]) => void;
}

export const CourseSortable: React.FC<CourseSortableProps> = ({
  courses,
  selectedCourseIds,
  onReorder,
}) => {
  const selectedCourses = courses.filter(course => 
    selectedCourseIds.includes(course.id)
  );

  const handleDragStart = (e: React.DragEvent, index: number) => {
    e.dataTransfer.setData('text/plain', index.toString());
  };

  const handleDragOver = (e: React.DragEvent) => {
    e.preventDefault();
  };

  const handleDrop = (e: React.DragEvent, dropIndex: number) => {
    const dragIndex = parseInt(e.dataTransfer.getData('text/plain'));
    const newOrder = [...selectedCourseIds];
    const item = newOrder[dragIndex];

    // Remove the item from its original position
    newOrder.splice(dragIndex, 1);
    // Insert it at the new position
    newOrder.splice(dropIndex, 0, item);

    onReorder(newOrder);
  };

  return (
    <div className="border rounded-lg overflow-hidden">
      <div className="bg-gray-50 p-3 border-b">
        <h3 className="font-medium">Course Order (Drag to Reorder)</h3>
      </div>
      <ul className="divide-y divide-gray-200">
        {selectedCourses.map((course, index) => (
          <li
            key={course.id}
            draggable
            onDragStart={(e) => handleDragStart(e, index)}
            onDragOver={handleDragOver}
            onDrop={(e) => handleDrop(e, index)}
            className="p-3 flex items-center bg-white hover:bg-gray-50 cursor-move"
          >
            <div className="mr-3 text-gray-500">
              <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
              </svg>
            </div>
            <div className="flex-1">
              <div className="font-medium">{course.title}</div>
              <div className="text-sm text-gray-500">{course.level} · {course.duration} hours</div>
            </div>
            <div className="text-gray-500 text-sm">
              ${course.price.toFixed(2)}
            </div>
          </li>
        ))}
      </ul>
    </div>
  );
};

/== components/molecules/CriteriaItem.tsx
import React from 'react';
import { CheckCircle } from 'lucide-react';

interface CriteriaItemProps {
  title: string;
  description: string;
  points: number;
}

const CriteriaItem: React.FC<CriteriaItemProps> = ({
  title,
  description,
  points
}) => {
  return (
    <div className="flex items-start space-x-4 p-4 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700">
      <div className="flex-shrink-0">
        <CheckCircle className="h-6 w-6 text-green-500" />
      </div>
      <div className="flex-1">
        <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-1">
          {title}
        </h3>
        <p className="text-gray-600 dark:text-gray-300 text-sm">
          {description}
        </p>
      </div>
      <div className="flex-shrink-0">
        <span className="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">
          {points} points
        </span>
      </div>
    </div>
  );
};

export default CriteriaItem;

/== components/molecules/EmptyState.tsx
import React from 'react';
import { DivideIcon as LucideIcon } from 'lucide-react';
import Button from '../atoms/Button';
import Text from '../atoms/Text';

interface EmptyStateProps {
  icon?: LucideIcon;
  title: string;
  description?: string;
  action?: {
    label: string;
    onClick: () => void;
  };
}

const EmptyState: React.FC<EmptyStateProps> = ({
  icon: Icon,
  title,
  description,
  action
}) => {
  return (
    <div className="flex flex-col items-center justify-center p-8 text-center">
      {Icon && (
        <div className="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-4">
          <Icon className="h-6 w-6 text-gray-600" />
        </div>
      )}
      <Text variant="body" className="font-medium text-gray-900 mb-2">
        {title}
      </Text>
      {description && (
        <Text variant="caption" color="muted" className="mb-4">
          {description}
        </Text>
      )}
      {action && (
        <Button variant="primary" onClick={action.onClick}>
          {action.label}
        </Button>
      )}
    </div>
  );
};

export default EmptyState;

/== components/molecules/FeatureCard.tsx
import React from 'react';
import { DivideIcon as LucideIcon } from 'lucide-react';
import Card from '../atoms/Card';

interface FeatureCardProps {
  icon: LucideIcon;
  title: string;
  description: string;
  color: string;
}

const FeatureCard: React.FC<FeatureCardProps> = ({
  icon: Icon,
  title,
  description,
  color
}) => {
  return (
    <Card className="p-8 hover:shadow-lg transition-shadow duration-300 bg-white dark:bg-gray-800">
      <div className={`${color} w-12 h-12 rounded-lg flex items-center justify-center mb-6`}>
        <Icon className="h-6 w-6 text-white" />
      </div>
      <h3 className="text-xl font-bold text-gray-900 dark:text-white mb-4">{title}</h3>
      <p className="text-gray-600 dark:text-gray-300 leading-relaxed">{description}</p>
    </Card>
  );
};

export default FeatureCard;

/== components/molecules/FormSection.tsx
import React, { ReactNode } from "react";
import Heading from "../atoms/Heading";
import Text from "../atoms/Text";

interface FormSectionProps {
  title: string;
  children: ReactNode;
  description?: string;
}

export const FormSection: React.FC<FormSectionProps> = ({ 
  title, 
  children, 
  description 
}) => {
  return (
    <div className="space-y-4">
      <div>
        <Heading level={4} className="mb-1 text-gray-900 dark:text-white">
          {title}
        </Heading>
        {description && (
          <Text className="text-sm text-gray-500 dark:text-gray-400">
            {description}
          </Text>
        )}
      </div>
      <div className="space-y-4">
        {children}
      </div>
    </div>
  );
};

// Also providing a default export as a backup option
export default FormSection;

/== components/molecules/IconText.tsx
import React from 'react';
import { DivideIcon as LucideIcon } from 'lucide-react';

interface IconTextProps {
  icon: LucideIcon;
  text: string;
  className?: string;
}

const IconText: React.FC<IconTextProps> = ({
  icon: Icon,
  text,
  className = ''
}) => {
  return (
    <div className={`flex items-center ${className}`}>
      <Icon className="h-5 w-5 mr-2" />
      <span>{text}</span>
    </div>
  );
};

export default IconText;

/== components/molecules/IntegrationConfigForm.tsx
import React from 'react';
import Button from '../atoms/Button';
import Input from '../atoms/Input';
import TextArea from '../atoms/TextArea';
import Select from '../atoms/Select';
import Card from '../atoms/Card';
import Heading from '../atoms/Heading';
import Text from '../atoms/Text';

interface FormField {
  id: string;
  label: string;
  type: 'text' | 'password' | 'textarea' | 'select';
  placeholder?: string;
  options?: { value: string; label: string }[];
  required?: boolean;
  description?: string;
}

interface IntegrationConfigFormProps {
  title: string;
  description: string;
  fields: FormField[];
  onSubmit: (data: Record<string, any>) => void;
  submitLabel?: string;
  isLoading?: boolean;
  icon?: React.ReactNode;
}

const IntegrationConfigForm: React.FC<IntegrationConfigFormProps> = ({
  title,
  description,
  fields,
  onSubmit,
  submitLabel = 'Simpan Konfigurasi',
  isLoading = false,
  icon
}) => {
  const [formData, setFormData] = React.useState<Record<string, any>>({});

  const handleChange = (id: string, value: any) => {
    setFormData(prev => ({
      ...prev,
      [id]: value
    }));
  };

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    onSubmit(formData);
  };

  return (
    <Card className="p-6">
      <div className="flex items-center mb-4">
        {icon && <div className="p-2 rounded-full bg-brand-green/10 text-brand-green mr-3">{icon}</div>}
        <div>
          <Heading level="h2" className="text-xl font-semibold">{title}</Heading>
          <Text className="text-gray-600 dark:text-gray-400">{description}</Text>
        </div>
      </div>

      <form onSubmit={handleSubmit} className="space-y-4">
        {fields.map((field) => (
          <div key={field.id} className="space-y-2">
            <label htmlFor={field.id} className="block text-sm font-medium text-gray-700 dark:text-gray-300">
              {field.label}
              {field.required && <span className="text-red-500 ml-1">*</span>}
            </label>
            
            {field.description && (
              <Text className="text-xs text-gray-500 dark:text-gray-400 mb-1">{field.description}</Text>
            )}
            
            {field.type === 'textarea' ? (
              <TextArea
                id={field.id}
                placeholder={field.placeholder}
                value={formData[field.id] || ''}
                onChange={(e) => handleChange(field.id, e.target.value)}
                required={field.required}
                className="w-full"
              />
            ) : field.type === 'select' ? (
              <Select
                id={field.id}
                value={formData[field.id] || ''}
                onChange={(e) => handleChange(field.id, e.target.value)}
                required={field.required}
                className="w-full"
              >
                <option value="">Pilih {field.label}</option>
                {field.options?.map((option) => (
                  <option key={option.value} value={option.value}>
                    {option.label}
                  </option>
                ))}
              </Select>
            ) : (
              <Input
                id={field.id}
                type={field.type}
                placeholder={field.placeholder}
                value={formData[field.id] || ''}
                onChange={(e) => handleChange(field.id, e.target.value)}
                required={field.required}
                className="w-full"
              />
            )}
          </div>
        ))}

        <div className="pt-4">
          <Button
            type="submit"
            variant="primary"
            className="bg-brand-green hover:bg-brand-green/90 w-full sm:w-auto"
            disabled={isLoading}
          >
            {isLoading ? 'Menyimpan...' : submitLabel}
          </Button>
        </div>
      </form>
    </Card>
  );
};

export default IntegrationConfigForm;

/== components/molecules/IntegrationForm.tsx
import React from 'react';
import Button from '../atoms/Button';

interface FormField {
  id: string;
  label: string;
  type: string;
  placeholder?: string;
  required?: boolean;
  options?: { value: string; label: string }[];
}

interface IntegrationFormProps {
  fields: FormField[];
  values: Record<string, any>;
  onChange: (id: string, value: any) => void;
  onSubmit: (e: React.FormEvent) => void;
  isSubmitting?: boolean;
  submitText?: string;
  cancelText?: string;
  onCancel?: () => void;
}

const IntegrationForm: React.FC<IntegrationFormProps> = ({
  fields,
  values,
  onChange,
  onSubmit,
  isSubmitting = false,
  submitText = 'Simpan',
  cancelText = 'Batal',
  onCancel
}) => {
  const handleChange = (id: string, e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {
    onChange(id, e.target.value);
  };

  const renderField = (field: FormField) => {
    const { id, label, type, placeholder, required, options } = field;
    
    switch (type) {
      case 'select':
        return (
          <div key={id} className="mb-4">
            <label htmlFor={id} className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
              {label}{required && <span className="text-red-500 ml-1">*</span>}
            </label>
            <select
              id={id}
              value={values[id] || ''}
              onChange={(e) => handleChange(id, e)}
              className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
              required={required}
            >
              <option value="">Pilih {label}</option>
              {options?.map((option) => (
                <option key={option.value} value={option.value}>
                  {option.label}
                </option>
              ))}
            </select>
          </div>
        );
      
      case 'textarea':
        return (
          <div key={id} className="mb-4">
            <label htmlFor={id} className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
              {label}{required && <span className="text-red-500 ml-1">*</span>}
            </label>
            <textarea
              id={id}
              value={values[id] || ''}
              onChange={(e) => handleChange(id, e)}
              placeholder={placeholder}
              className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
              required={required}
              rows={4}
            />
          </div>
        );
      
      case 'checkbox':
        return (
          <div key={id} className="mb-4 flex items-center">
            <input
              id={id}
              type="checkbox"
              checked={values[id] || false}
              onChange={(e) => onChange(id, e.target.checked)}
              className="h-4 w-4 text-brand-green focus:ring-brand-green border-gray-300 rounded"
            />
            <label htmlFor={id} className="ml-2 block text-sm text-gray-700 dark:text-gray-300">
              {label}
            </label>
          </div>
        );
      
      default: // text, email, password, etc.
        return (
          <div key={id} className="mb-4">
            <label htmlFor={id} className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
              {label}{required && <span className="text-red-500 ml-1">*</span>}
            </label>
            <input
              id={id}
              type={type}
              value={values[id] || ''}
              onChange={(e) => handleChange(id, e)}
              placeholder={placeholder}
              className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
              required={required}
            />
          </div>
        );
    }
  };

  return (
    <form onSubmit={onSubmit}>
      {fields.map(renderField)}
      
      <div className="flex justify-end space-x-3 mt-6">
        {onCancel && (
          <Button 
            variant="outline" 
            onClick={onCancel} 
            type="button"
          >
            {cancelText}
          </Button>
        )}
        <Button 
          variant="primary" 
          type="submit" 
          disabled={isSubmitting}
          className="bg-brand-green hover:bg-brand-green/90"
        >
          {isSubmitting ? 'Menyimpan...' : submitText}
        </Button>
      </div>
    </form>
  );
};

export default IntegrationForm;

/== components/molecules/LessonNavigation.tsx
import React from 'react';
import { ChevronLeft, ChevronRight } from 'lucide-react';
import Button from '../atoms/Button';

interface LessonNavigationProps {
  currentStep: number;
  totalSteps: number;
  onPrevious: () => void;
  onNext: () => void;
  isLastStep: boolean;
}

const LessonNavigation: React.FC<LessonNavigationProps> = ({
  currentStep,
  totalSteps,
  onPrevious,
  onNext,
  isLastStep
}) => {
  return (
    <div className="flex items-center justify-between">
      <Button
        variant="outline"
        icon={ChevronLeft}
        onClick={onPrevious}
        disabled={currentStep === 1}
      >
        Previous Step
      </Button>
      
      <Button
        variant="primary"
        icon={ChevronRight}
        onClick={onNext}
        iconPosition="right"
      >
        {isLastStep ? 'Complete Lesson' : 'Next Step'}
      </Button>
    </div>
  );
};

export default LessonNavigation;

/== components/molecules/LoadingSpinner.tsx
import React from 'react';
import Spinner from '../atoms/Spinner';
import Text from '../atoms/Text';

interface LoadingSpinnerProps {
  text?: string;
  size?: 'sm' | 'md' | 'lg';
  color?: 'primary' | 'white';
}

const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({
  text,
  size = 'md',
  color = 'primary'
}) => {
  return (
    <div className="flex flex-col items-center justify-center">
      <Spinner size={size} color={color} />
      {text && (
        <Text
          variant="caption"
          color={color === 'white' ? 'default' : 'muted'}
          className="mt-2"
        >
          {text}
        </Text>
      )}
    </div>
  );
};

export default LoadingSpinner;

/== components/molecules/NotificationDropdown.tsx
import React from 'react';
import { Link } from 'react-router-dom';
import { Bell, Check, Info, AlertTriangle, XCircle, X, CheckCheck } from 'lucide-react';
import { useNotificationStore, Notification } from '../../store/notificationStore';

interface NotificationDropdownProps {
  isOpen: boolean;
  onClose: () => void;
}

const NotificationDropdown: React.FC<NotificationDropdownProps> = ({
  isOpen,
  onClose
}) => {
  const { notifications, markAsRead, markAllAsRead, removeNotification } = useNotificationStore();

  if (!isOpen) return null;

  const getIcon = (type: Notification['type']) => {
    switch (type) {
      case 'success':
        return <Check className="h-5 w-5 text-green-500" />;
      case 'warning':
        return <AlertTriangle className="h-5 w-5 text-yellow-500" />;
      case 'error':
        return <XCircle className="h-5 w-5 text-red-500" />;
      default:
        return <Info className="h-5 w-5 text-blue-500" />;
    }
  };

  const formatTimestamp = (timestamp: number) => {
    const now = Date.now();
    const diff = now - timestamp;
    const minutes = Math.floor(diff / 60000);
    const hours = Math.floor(minutes / 60);
    const days = Math.floor(hours / 24);

    if (days > 0) return `${days}d ago`;
    if (hours > 0) return `${hours}h ago`;
    if (minutes > 0) return `${minutes}m ago`;
    return 'Just now';
  };

  return (
    <div className="absolute right-0 mt-2 w-96 bg-white dark:bg-gray-800 rounded-lg shadow-lg py-1 ring-1 ring-black ring-opacity-5 z-50">
      <div className="px-4 py-2 border-b border-gray-200 dark:border-gray-700">
        <div className="flex items-center justify-between">
          <h3 className="text-lg font-semibold text-gray-900 dark:text-white">Notifications</h3>
          <button
            onClick={markAllAsRead}
            className="text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 flex items-center"
          >
            <CheckCheck className="h-4 w-4 mr-1" />
            Mark all as read
          </button>
        </div>
      </div>

      <div className="max-h-96 overflow-y-auto">
        {notifications.length === 0 ? (
          <div className="px-4 py-6 text-center text-gray-500 dark:text-gray-400">
            No notifications
          </div>
        ) : (
          notifications.map((notification) => (
            <div
              key={notification.id}
              className={`
                px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 relative
                ${notification.read ? 'opacity-75' : 'bg-blue-50/50 dark:bg-blue-900/20'}
              `}
            >
              <div className="flex items-start">
                <div className="flex-shrink-0 mt-1">
                  {getIcon(notification.type)}
                </div>
                <div className="ml-3 flex-1">
                  <div className="text-sm font-medium text-gray-900 dark:text-white">
                    {notification.title}
                  </div>
                  <p className="mt-1 text-sm text-gray-600 dark:text-gray-300">
                    {notification.message}
                  </p>
                  <div className="mt-2 text-xs text-gray-500 dark:text-gray-400 flex items-center justify-between">
                    <span>{formatTimestamp(notification.timestamp)}</span>
                    {notification.link && (
                      <Link
                        to={notification.link}
                        className="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"
                        onClick={() => {
                          markAsRead(notification.id);
                          onClose();
                        }}
                      >
                        View details
                      </Link>
                    )}
                  </div>
                </div>
                <button
                  onClick={() => removeNotification(notification.id)}
                  className="ml-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"
                >
                  <X className="h-4 w-4" />
                </button>
              </div>
            </div>
          ))
        )}
      </div>
    </div>
  );
};

export default NotificationDropdown;

/== components/molecules/PaymentForm.tsx
import React from 'react';
import { CreditCard } from 'lucide-react';
import PaymentInput from '../atoms/PaymentInput';
import PaymentMethodButton from '../atoms/PaymentMethodButton';

interface PaymentFormProps {
  paymentMethod: 'card' | 'paypal';
  setPaymentMethod: (method: 'card' | 'paypal') => void;
  cardNumber: string;
  setCardNumber: (value: string) => void;
  cardName: string;
  setCardName: (value: string) => void;
  expiry: string;
  setExpiry: (value: string) => void;
  cvv: string;
  setCvv: (value: string) => void;
  onSubmit: (e: React.FormEvent) => void;
  isProcessing: boolean;
}

const PaymentForm: React.FC<PaymentFormProps> = ({
  paymentMethod,
  setPaymentMethod,
  cardNumber,
  setCardNumber,
  cardName,
  setCardName,
  expiry,
  setExpiry,
  cvv,
  setCvv,
  onSubmit,
  isProcessing
}) => {
  return (
    <form onSubmit={onSubmit} className="space-y-6">
      <div className="grid grid-cols-2 gap-4">
        <PaymentMethodButton
          icon={<img src="https://cdn.paddle.com/paypal/paypal@2x.png" alt="PayPal" className="h-6" />}
          name="PayPal"
          selected={paymentMethod === 'paypal'}
          onClick={() => setPaymentMethod('paypal')}
        />
        <PaymentMethodButton
          icon={<CreditCard className="h-5 w-5" />}
          name="Card"
          selected={paymentMethod === 'card'}
          onClick={() => setPaymentMethod('card')}
        />
      </div>

      {paymentMethod === 'card' ? (
        <div className="space-y-4">
          <PaymentInput
            label="Card number"
            type="text"
            value={cardNumber}
            onChange={(e) => setCardNumber(e.target.value)}
            placeholder="1234 5678 9012 3456"
            icon={<CreditCard className="h-5 w-5" />}
          />
          
          <PaymentInput
            label="Name on card"
            type="text"
            value={cardName}
            onChange={(e) => setCardName(e.target.value)}
            placeholder="John Doe"
          />
          
          <div className="grid grid-cols-2 gap-4">
            <PaymentInput
              label="Expiry date"
              type="text"
              value={expiry}
              onChange={(e) => setExpiry(e.target.value)}
              placeholder="MM/YY"
            />
            <PaymentInput
              label="Security code"
              type="text"
              value={cvv}
              onChange={(e) => setCvv(e.target.value)}
              placeholder="CVV"
            />
          </div>
        </div>
      ) : (
        <div className="bg-blue-50 p-4 rounded-lg">
          <p className="text-sm text-blue-600">
            You will be redirected to PayPal to complete your payment securely.
          </p>
        </div>
      )}

      <button
        type="submit"
        disabled={isProcessing}
        className={`
          w-full py-3 px-4 rounded-lg font-medium text-white
          ${isProcessing 
            ? 'bg-gray-400 cursor-not-allowed' 
            : 'bg-primary-500 hover:bg-primary-600'
          }
        `}
      >
        {isProcessing ? 'Processing...' : 'Subscribe now'}
      </button>
    </form>
  );
};

export default PaymentForm;

/== components/molecules/PaymentSummary.tsx
import React from 'react';
import { Info } from 'lucide-react';

interface PaymentSummaryProps {
  originalPrice: number;
  discount: number;
  finalPrice: number;
  plan: string;
  billingCycle: string;
}

const PaymentSummary: React.FC<PaymentSummaryProps> = ({
  originalPrice,
  discount,
  finalPrice,
  plan,
  billingCycle
}) => {
  return (
    <div className="bg-white/10 rounded-xl p-6">
      <div className="flex items-center justify-center text-blue-400 mb-4">
        <Info className="h-5 w-5 mr-2" />
        <span className="text-sm">14-day money back guarantee</span>
      </div>

      <h2 className="text-lg font-medium text-white mb-6">Review Payment Details</h2>
      
      <div className="space-y-4">
        <div className="flex justify-between text-gray-300">
          <span>{billingCycle === 'yearly' ? 'Yearly' : 'Monthly'} {plan} for 🇮🇩</span>
          <span>Rp {originalPrice.toLocaleString()}</span>
        </div>
        
        {discount > 0 && (
          <div className="flex justify-between">
            <span className="text-green-400">Annual Discount Applied: -66%</span>
            <span className="text-green-400">-Rp {discount.toLocaleString()}</span>
          </div>
        )}
        
        <div className="pt-4 border-t border-gray-700">
          <div className="flex justify-between text-white font-medium">
            <span>Total</span>
            <span>Rp {finalPrice.toLocaleString()}</span>
          </div>
        </div>
      </div>
    </div>
  );
};

export default PaymentSummary;

/== components/molecules/PricingCard.tsx
import React from 'react';
import { Check } from 'lucide-react';
import PricingFeature from '../atoms/PricingFeature';

interface PricingCardProps {
  name: string;
  description: string;
  price: number;
  period?: string;
  features: Array<{ name: string; included: boolean }>;
  popular?: boolean;
  onSubscribe: () => void;
  buttonText: string;
  buttonVariant?: 'primary' | 'secondary' | 'outline';
}

const PricingCard: React.FC<PricingCardProps> = ({
  name,
  description,
  price,
  period,
  features,
  popular,
  onSubscribe,
  buttonText,
  buttonVariant = 'primary'
}) => {
  const buttonStyles = {
    primary: 'bg-primary-500 text-white hover:bg-primary-600',
    secondary: 'bg-blue-600 text-white hover:bg-blue-700',
    outline: 'border border-gray-300 text-gray-700 hover:bg-gray-50'
  };

  return (
    <div className={`
      bg-white rounded-xl shadow-sm p-8
      ${popular ? 'border-2 border-primary-500 relative' : 'border border-gray-200'}
    `}>
      {popular && (
        <div className="absolute top-0 right-0 bg-primary-500 text-white px-4 py-1 rounded-bl-lg rounded-tr-lg text-sm font-medium">
          Most Popular
        </div>
      )}

      <h2 className="text-2xl font-bold text-gray-900 mb-2">{name}</h2>
      <p className="text-gray-600 mb-6">{description}</p>

      <div className="mb-8">
        <span className="text-4xl font-bold text-gray-900">
          Rp {price.toLocaleString()}
        </span>
        {period && (
          <span className="text-gray-600 ml-2">/ {period}</span>
        )}
      </div>

      <button
        onClick={onSubscribe}
        className={`w-full py-3 px-4 rounded-lg font-medium mb-8 ${buttonStyles[buttonVariant]}`}
      >
        {buttonText}
      </button>

      <ul className="space-y-4">
        {features.map((feature, index) => (
          <PricingFeature
            key={index}
            name={feature.name}
            included={feature.included}
          />
        ))}
      </ul>

      {popular && (
        <div className="mt-6 pt-6 border-t border-gray-100 text-center">
          <span className="text-sm text-gray-500">14-day money back guarantee</span>
        </div>
      )}
    </div>
  );
};

export default PricingCard;

/== components/molecules/ProgressBar.tsx
import React from 'react';
import Progress from '../atoms/Progress';
import Text from '../atoms/Text';

interface ProgressBarProps {
  value: number;
  max?: number;
  label?: string;
  showPercentage?: boolean;
  size?: 'sm' | 'md' | 'lg';
  color?: 'primary' | 'success' | 'warning' | 'error';
}

const ProgressBar: React.FC<ProgressBarProps> = ({
  value,
  max = 100,
  label,
  showPercentage = true,
  size = 'md',
  color = 'primary'
}) => {
  const percentage = Math.round((value / max) * 100);

  return (
    <div className="w-full">
      {(label || showPercentage) && (
        <div className="flex justify-between mb-1">
          {label && (
            <Text variant="caption" color="muted">{label}</Text>
          )}
          {showPercentage && (
            <Text variant="caption" color="muted">{percentage}%</Text>
          )}
        </div>
      )}
      <Progress
        value={value}
        max={max}
        size={size}
        color={color}
      />
    </div>
  );
};

export default ProgressBar;

/== components/molecules/ProgressStats.tsx
import React from 'react';

interface ProgressStatsProps {
  title: string;
  value: number;
  max: number;
  percentage: number;
  color?: string;
}

export const ProgressStats: React.FC<ProgressStatsProps> = ({
  title,
  value,
  max,
  percentage,
  color = 'blue',
}) => {
  const colorMap: Record<string, string> = {
    blue: 'bg-blue-600',
    green: 'bg-green-600',
    red: 'bg-red-600',
    yellow: 'bg-yellow-600',
    purple: 'bg-purple-600',
  };
  
  const bgColor = colorMap[color] || colorMap.blue;
  
  return (
    <div className="bg-white rounded-lg shadow p-4">
      <h4 className="text-sm font-medium text-gray-500 mb-1">{title}</h4>
      <div className="flex justify-between items-end mb-1">
        <span className="text-2xl font-bold">{value}</span>
        <span className="text-sm text-gray-500">of {max}</span>
      </div>
      <div className="w-full bg-gray-200 rounded-full h-2.5">
        <div
          className={`h-2.5 rounded-full ${bgColor}`}
          style={{ width: `${percentage}%` }}
        ></div>
      </div>
      <div className="text-sm text-right mt-1">{percentage}% Complete</div>
    </div>
  );
};

/== components/molecules/ResourceCard.tsx
import React from 'react';
import { DivideIcon as LucideIcon } from 'lucide-react';
import Card from '../atoms/Card';
import Text from '../atoms/Text';
import Button from '../atoms/Button';

interface ResourceCardProps {
  icon: LucideIcon;
  title: string;
  description: string;
  link: string;
  linkText: string;
  bgColor: string;
}

const ResourceCard: React.FC<ResourceCardProps> = ({
  icon: Icon,
  title,
  description,
  link,
  linkText,
  bgColor
}) => {
  return (
    <Card className={`p-6 ${bgColor}`}>
      <div className="flex items-center mb-4">
        <Icon className="h-6 w-6 text-gray-700" />
        <Text variant="body" className="font-medium text-gray-900 ml-2">{title}</Text>
      </div>
      <Text variant="body" color="muted" className="mb-4">{description}</Text>
      <Button
        variant="primary"
        onClick={() => window.location.href = link}
      >
        {linkText}
      </Button>
    </Card>
  );
};

export default ResourceCard;

/== components/molecules/ReviewFeedback.tsx
import React from 'react';
import { AlertCircle, CheckCircle, FileText } from 'lucide-react';

interface FeedbackItem {
  type: 'success' | 'error';
  message: string;
}

interface ReviewFeedbackProps {
  feedback: FeedbackItem[];
  reviewerNotes?: string;
  submissionFiles?: {
    name: string;
    path: string;
    comments: number;
  }[];
}

const ReviewFeedback: React.FC<ReviewFeedbackProps> = ({
  feedback,
  reviewerNotes,
  submissionFiles
}) => {
  return (
    <div className="space-y-6">
      {/* Feedback Items */}
      <div className="bg-white dark:bg-gray-800 rounded-lg p-6">
        <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-4">
          Review Results
        </h3>
        <div className="space-y-4">
          {feedback.map((item, index) => (
            <div
              key={index}
              className={`flex items-start p-4 rounded-lg ${
                item.type === 'success'
                  ? 'bg-green-50 dark:bg-green-900/20'
                  : 'bg-red-50 dark:bg-red-900/20'
              }`}
            >
              {item.type === 'success' ? (
                <CheckCircle className="h-5 w-5 text-green-500" />
              ) : (
                <AlertCircle className="h-5 w-5 text-red-500" />
              )}
              <p className={`ml-3 text-sm ${
                item.type === 'success'
                  ? 'text-green-700 dark:text-green-200'
                  : 'text-red-700 dark:text-red-200'
              }`}>
                {item.message}
              </p>
            </div>
          ))}
        </div>
      </div>

      {/* Reviewer Notes */}
      {reviewerNotes && (
        <div className="bg-white dark:bg-gray-800 rounded-lg p-6">
          <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-4">
            Reviewer Notes
          </h3>
          <div className="prose prose-sm dark:prose-invert max-w-none">
            <p className="text-gray-600 dark:text-gray-300">{reviewerNotes}</p>
          </div>
        </div>
      )}

      {/* Submission Files */}
      {submissionFiles && submissionFiles.length > 0 && (
        <div className="bg-white dark:bg-gray-800 rounded-lg p-6">
          <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-4">
            Submission Files
          </h3>
          <div className="space-y-2">
            {submissionFiles.map((file, index) => (
              <div
                key={index}
                className="flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50"
              >
                <div className="flex items-center">
                  <FileText className="h-5 w-5 text-gray-400" />
                  <span className="ml-2 text-sm font-medium text-gray-900 dark:text-white">
                    {file.name}
                  </span>
                  {file.comments > 0 && (
                    <span className="ml-2 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded-full">
                      {file.comments} comments
                    </span>
                  )}
                </div>
                <button className="text-sm text-blue-600 dark:text-blue-400 hover:underline">
                  View
                </button>
              </div>
            ))}
          </div>
        </div>
      )}
    </div>
  );
};

export default ReviewFeedback;

/== components/molecules/RoadmapModal.tsx
import React from 'react';
import { X, ExternalLink, BookOpen, Code, CheckCircle } from 'lucide-react';
import Button from '../atoms/Button';

interface RoadmapModalProps {
  isOpen: boolean;
  onClose: () => void;
  node: {
    id: string;
    title: string;
    description?: string;
    type: string;
  } | null;
  onComplete?: () => void;
  isCompleted?: boolean;
}

const RoadmapModal: React.FC<RoadmapModalProps> = ({
  isOpen,
  onClose,
  node,
  onComplete,
  isCompleted = false
}) => {
  if (!isOpen || !node) return null;

  const resources = [
    {
      title: 'Official Documentation',
      description: 'Read the comprehensive guide and documentation',
      icon: BookOpen,
      link: '#'
    },
    {
      title: 'Practice Examples',
      description: 'Try hands-on coding examples and exercises',
      icon: Code,
      link: '#'
    }
  ];

  return (
    <div className="fixed inset-0 z-50 overflow-y-auto">
      <div className="flex min-h-screen items-center justify-center p-4">
        <div className="fixed inset-0 bg-black/50 backdrop-blur-sm" onClick={onClose} />
        
        <div className="relative w-full max-w-2xl rounded-xl bg-white dark:bg-gray-800 shadow-lg">
          {/* Header */}
          <div className="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700">
            <div>
              <h3 className="text-xl font-bold text-gray-900 dark:text-white">
                {node.title}
              </h3>
              <p className="mt-1 text-sm text-gray-500 dark:text-gray-400">
                {node.description || 'Learn more about this topic and access related resources.'}
              </p>
            </div>
            <button
              onClick={onClose}
              className="text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"
            >
              <X className="h-5 w-5" />
            </button>
          </div>

          {/* Content */}
          <div className="p-6">
            <div className="space-y-6">
              {/* Status */}
              <div className={`flex items-center p-4 rounded-lg ${
                isCompleted ? 'bg-green-50 dark:bg-green-900/20' : 'bg-blue-50 dark:bg-blue-900/20'
              }`}>
                <div className={`w-10 h-10 rounded-full flex items-center justify-center ${
                  isCompleted ? 'bg-green-100 dark:bg-green-900/40' : 'bg-blue-100 dark:bg-blue-900/40'
                }`}>
                  {isCompleted ? (
                    <CheckCircle className="h-6 w-6 text-green-600 dark:text-green-400" />
                  ) : (
                    <BookOpen className="h-6 w-6 text-blue-600 dark:text-blue-400" />
                  )}
                </div>
                <div className="ml-4">
                  <h4 className={`font-medium ${
                    isCompleted ? 'text-green-800 dark:text-green-200' : 'text-blue-800 dark:text-blue-200'
                  }`}>
                    {isCompleted ? 'Completed' : 'Ready to Learn'}
                  </h4>
                  <p className={`text-sm ${
                    isCompleted ? 'text-green-600 dark:text-green-300' : 'text-blue-600 dark:text-blue-300'
                  }`}>
                    {isCompleted 
                      ? "You've mastered this topic! Want to review it again?"
                      : 'Start learning this topic with our curated resources'}
                  </p>
                </div>
              </div>

              {/* Resources */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                {resources.map((resource, index) => (
                  <div
                    key={index}
                    className="p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-colors duration-200"
                  >
                    <div className="flex items-start">
                      <div className="w-8 h-8 bg-blue-100 dark:bg-blue-900/40 rounded-lg flex items-center justify-center">
                        <resource.icon className="h-5 w-5 text-blue-600 dark:text-blue-400" />
                      </div>
                      <div className="ml-3">
                        <h5 className="text-sm font-medium text-gray-900 dark:text-white">
                          {resource.title}
                        </h5>
                        <p className="mt-1 text-xs text-gray-500 dark:text-gray-400">
                          {resource.description}
                        </p>
                      </div>
                    </div>
                    <a
                      href={resource.link}
                      className="mt-3 inline-flex items-center text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"
                    >
                      Access Resource
                      <ExternalLink className="h-4 w-4 ml-1" />
                    </a>
                  </div>
                ))}
              </div>
            </div>
          </div>

          {/* Footer */}
          <div className="flex items-center justify-end gap-4 p-6 border-t border-gray-200 dark:border-gray-700">
            <Button
              variant="outline"
              onClick={onClose}
            >
              Close
            </Button>
            {!isCompleted && onComplete && (
              <Button
                variant="primary"
                onClick={onComplete}
              >
                Mark as Complete
              </Button>
            )}
          </div>
        </div>
      </div>
    </div>
  );
};

export default RoadmapModal;

/== components/molecules/RoadmapNodeComponent.tsx
import React from 'react';
import { motion } from 'framer-motion';
import { Check, ChevronRight } from 'lucide-react';
import { RoadmapNode } from '../../store/roadmapStore';

interface RoadmapNodeComponentProps {
  node: RoadmapNode;
  onClick: (node: RoadmapNode) => void;
  isActive: boolean;
  isCompleted: boolean;
}

const RoadmapNodeComponent: React.FC<RoadmapNodeComponentProps> = ({
  node,
  onClick,
  isActive,
  isCompleted
}) => {
  const getNodeStyles = () => {
    const baseStyles = "px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 cursor-pointer";
    
    if (isCompleted) {
      return `${baseStyles} bg-green-100 text-green-800 border-2 border-green-500`;
    }
    
    if (isActive) {
      return `${baseStyles} ring-2 ring-blue-400 bg-blue-50 text-blue-800`;
    }
    
    switch (node.type) {
      case 'primary':
        return `${baseStyles} bg-yellow-400 text-yellow-900 hover:bg-yellow-500`;
      case 'highlight':
        return `${baseStyles} bg-purple-600 text-white hover:bg-purple-700`;
      default:
        return `${baseStyles} bg-gray-100 text-gray-800 hover:bg-gray-200`;
    }
  };

  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      exit={{ opacity: 0, y: -20 }}
      className={getNodeStyles()}
      onClick={() => onClick(node)}
      whileHover={{ scale: 1.02 }}
      whileTap={{ scale: 0.98 }}
    >
      <div className="flex items-center justify-between">
        <span>{node.title}</span>
        {isCompleted ? (
          <Check className="h-4 w-4 ml-2" />
        ) : (
          node.children && <ChevronRight className="h-4 w-4 ml-2" />
        )}
      </div>
    </motion.div>
  );
};

export default RoadmapNodeComponent;

/== components/molecules/RoadmapSection.tsx
import React from 'react';
import RoadmapNode from '../atoms/RoadmapNode';
import RoadmapConnection from '../atoms/RoadmapConnection';

interface RoadmapSectionProps {
  title: string;
  items: {
    id: string;
    title: string;
    isCompleted?: boolean;
    isActive?: boolean;
    type?: 'primary' | 'secondary' | 'highlight';
  }[];
  onItemClick?: (id: string) => void;
}

const RoadmapSection: React.FC<RoadmapSectionProps> = ({
  title,
  items,
  onItemClick
}) => {
  return (
    <div className="space-y-4">
      <h3 className="text-lg font-semibold text-gray-900 dark:text-white">
        {title}
      </h3>
      <div className="space-y-3">
        {items.map((item, index) => (
          <div key={item.id}>
            <RoadmapNode
              title={item.title}
              isCompleted={item.isCompleted}
              isActive={item.isActive}
              type={item.type}
              onClick={() => onItemClick?.(item.id)}
            />
            {index < items.length - 1 && (
              <RoadmapConnection className="my-2" />
            )}
          </div>
        ))}
      </div>
    </div>
  );
};

export default RoadmapSection;

/== components/molecules/SearchBar.tsx
import React from 'react';
import { Search } from 'lucide-react';
import Input from '../atoms/Input';

interface SearchBarProps {
  placeholder?: string;
  value: string;
  onChange: (value: string) => void;
}

const SearchBar: React.FC<SearchBarProps> = ({
  placeholder = 'Search...',
  value,
  onChange
}) => {
  return (
    <div className="relative">
      <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
        <Search className="h-5 w-5 text-gray-400" />
      </div>
      <Input
        type="text"
        placeholder={placeholder}
        value={value}
        onChange={(e) => onChange(e.target.value)}
        className="pl-10 pr-3 py-2"
      />
    </div>
  );
};

export default SearchBar;

/== components/molecules/SearchInput.tsx
import React from 'react';
import { Search } from 'lucide-react';

interface SearchInputProps {
  value: string;
  onChange: (value: string) => void;
  placeholder?: string;
  className?: string;
}

const SearchInput: React.FC<SearchInputProps> = ({
  value,
  onChange,
  placeholder = 'Search...',
  className = ''
}) => {
  return (
    <div className={`relative ${className}`}>
      <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
        <Search className="h-5 w-5 text-gray-400" />
      </div>
      <input
        type="text"
        value={value}
        onChange={(e) => onChange(e.target.value)}
        className="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder={placeholder}
      />
    </div>
  );
};

export default SearchInput;

/== components/molecules/StatCard.tsx
import React from 'react';
import Card from '../atoms/Card';

interface StatCardProps {
  value: string | number;
  label: string;
  icon?: React.ReactNode;
}

const StatCard: React.FC<StatCardProps> = ({ value, label, icon }) => {
  return (
    <Card className="p-6 bg-white dark:bg-gray-800">
      <div className="flex items-center">
        {icon && <div className="mr-4">{icon}</div>}
        <div>
          <div className="text-3xl font-bold text-gray-900 dark:text-white mb-1">{value}</div>
          <div className="text-sm text-gray-600 dark:text-gray-300">{label}</div>
        </div>
      </div>
    </Card>
  );
};

export default StatCard;

/== components/molecules/StatsDisplay.tsx
import React from 'react';
import { DivideIcon as LucideIcon } from 'lucide-react';

interface StatsDisplayProps {
  icon: LucideIcon;
  label: string;
  value: string | number;
  color?: string;
}

const StatsDisplay: React.FC<StatsDisplayProps> = ({
  icon: Icon,
  label,
  value,
  color = 'blue'
}) => {
  return (
    <div className="flex items-center">
      <div className={`w-10 h-10 bg-${color}-100 rounded-full flex items-center justify-center mr-3`}>
        <Icon className={`h-5 w-5 text-${color}-600`} />
      </div>
      <div>
        <div className="font-medium text-gray-900">{value}</div>
        <div className="text-xs text-gray-500">{label}</div>
      </div>
    </div>
  );
};

export default StatsDisplay;

/== components/molecules/StepIndicator.tsx
import React from 'react';
import { Check } from 'lucide-react';

interface StepIndicatorProps {
  steps: string[];
  currentStep: number;
  className?: string;
}

const StepIndicator: React.FC<StepIndicatorProps> = ({
  steps,
  currentStep,
  className = ''
}) => {
  return (
    <div className={`space-y-4 ${className}`}>
      <div className="flex items-center justify-between">
        <div className="text-sm text-gray-500">
          Step {currentStep} of {steps.length}
        </div>
        <div className="flex space-x-1">
          {steps.map((_, index) => (
            <div
              key={index}
              className={`h-1 w-8 rounded-full ${
                index < currentStep ? 'bg-blue-600' : 'bg-gray-200'
              }`}
            />
          ))}
        </div>
      </div>
      <div className="space-y-4">
        {steps.map((step, index) => (
          <div
            key={index}
            className={`flex items-center ${
              index < currentStep
                ? 'text-blue-600'
                : index === currentStep
                ? 'text-gray-900'
                : 'text-gray-400'
            }`}
          >
            <div
              className={`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center mr-3 ${
                index < currentStep
                  ? 'border-blue-600 bg-blue-600'
                  : index === currentStep
                  ? 'border-gray-900'
                  : 'border-gray-300'
              }`}
            >
              {index < currentStep ? (
                <Check className="h-4 w-4 text-white" />
              ) : (
                <span className="text-sm">{index + 1}</span>
              )}
            </div>
            <span className="text-sm font-medium">{step}</span>
          </div>
        ))}
      </div>
    </div>
  );
};

export default StepIndicator;

/== components/molecules/StepProgress.tsx
import React from 'react';

interface StepProgressProps {
  currentStep: number;
  totalSteps: number;
}

const StepProgress: React.FC<StepProgressProps> = ({
  currentStep,
  totalSteps
}) => {
  return (
    <div className="mb-6">
      <div className="flex items-center justify-between">
        <div className="text-sm text-gray-500">
          Step {currentStep} of {totalSteps}
        </div>
        <div className="flex space-x-1">
          {Array.from({ length: totalSteps }).map((_, i) => (
            <div
              key={i}
              className={`h-1 w-8 rounded-full ${
                i < currentStep ? 'bg-blue-600' : 'bg-gray-200'
              }`}
            />
          ))}
        </div>
      </div>
    </div>
  );
};

export default StepProgress;

/== components/molecules/SubmissionChecklist.tsx
import React from 'react';
import { Check, AlertCircle } from 'lucide-react';

interface ChecklistItem {
  id: string;
  label: string;
  required: boolean;
}

interface SubmissionChecklistProps {
  items: ChecklistItem[];
  checkedItems: string[];
  onItemCheck: (id: string) => void;
}

const SubmissionChecklist: React.FC<SubmissionChecklistProps> = ({
  items,
  checkedItems,
  onItemCheck
}) => {
  return (
    <div className="bg-white dark:bg-gray-800 rounded-lg p-6">
      <div className="mb-6">
        <h3 className="text-lg font-semibold text-gray-900 dark:text-white">
          Submission Checklist
        </h3>
        <p className="text-sm text-gray-500 dark:text-gray-400">
          Please verify that your submission meets all requirements
        </p>
      </div>

      <div className="space-y-4">
        {items.map((item) => (
          <div
            key={item.id}
            className="flex items-start p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50"
          >
            <div className="flex-shrink-0">
              <input
                type="checkbox"
                checked={checkedItems.includes(item.id)}
                onChange={() => onItemCheck(item.id)}
                className="h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
              />
            </div>
            <div className="ml-3">
              <label className="text-sm font-medium text-gray-900 dark:text-white">
                {item.label}
              </label>
              {item.required && (
                <span className="ml-2 text-xs text-red-500">*Required</span>
              )}
            </div>
          </div>
        ))}
      </div>

      {items.some(item => item.required && !checkedItems.includes(item.id)) && (
        <div className="mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/50 rounded-lg">
          <div className="flex">
            <AlertCircle className="h-5 w-5 text-yellow-400" />
            <div className="ml-3">
              <p className="text-sm text-yellow-800 dark:text-yellow-200">
                Please complete all required checklist items before submitting
              </p>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default SubmissionChecklist;

/== components/molecules/SubmissionResource.tsx
import React from 'react';
import { ExternalLink } from 'lucide-react';

interface SubmissionResourceProps {
  title: string;
  description: string;
  link: string;
}

const SubmissionResource: React.FC<SubmissionResourceProps> = ({
  title,
  description,
  link
}) => {
  return (
    <div className="p-4 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-all duration-200">
      <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
        {title}
      </h3>
      <p className="text-gray-600 dark:text-gray-300 mb-4 text-sm">
        {description}
      </p>
      <a
        href={link}
        target="_blank"
        rel="noopener noreferrer"
        className="inline-flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-700 text-sm font-medium"
      >
        Learn More
        <ExternalLink className="ml-2 h-4 w-4" />
      </a>
    </div>
  );
};

export default SubmissionResource;

/== components/molecules/SubmissionStatus.tsx
import React from 'react';
import { Clock, CheckCircle, XCircle } from 'lucide-react';

interface SubmissionStatusProps {
  status: 'reviewing' | 'rejected' | 'approved';
  message?: string;
}

const SubmissionStatus: React.FC<SubmissionStatusProps> = ({ status, message }) => {
  const statusConfig = {
    reviewing: {
      icon: Clock,
      title: 'Under Review',
      color: 'text-blue-500',
      bgColor: 'bg-blue-50 dark:bg-blue-900/20',
      borderColor: 'border-blue-200 dark:border-blue-800'
    },
    rejected: {
      icon: XCircle,
      title: 'Submission Rejected',
      color: 'text-red-500',
      bgColor: 'bg-red-50 dark:bg-red-900/20',
      borderColor: 'border-red-200 dark:border-red-800'
    },
    approved: {
      icon: CheckCircle,
      title: 'Submission Approved',
      color: 'text-green-500',
      bgColor: 'bg-green-50 dark:bg-green-900/20',
      borderColor: 'border-green-200 dark:border-green-800'
    }
  };

  const config = statusConfig[status];
  const Icon = config.icon;

  return (
    <div className={`rounded-lg border ${config.borderColor} ${config.bgColor} p-6`}>
      <div className="flex items-center">
        <div className={`flex-shrink-0 ${config.color}`}>
          <Icon className="h-8 w-8" />
        </div>
        <div className="ml-4">
          <h3 className={`text-lg font-medium ${config.color}`}>
            {config.title}
          </h3>
          {message && (
            <p className="mt-1 text-sm text-gray-600 dark:text-gray-300">
              {message}
            </p>
          )}
        </div>
      </div>
    </div>
  );
};

export default SubmissionStatus;

/== components/molecules/SubmissionTab.tsx
import React from 'react';

interface SubmissionTabProps {
  label: string;
  isActive: boolean;
  onClick: () => void;
}

const SubmissionTab: React.FC<SubmissionTabProps> = ({ label, isActive, onClick }) => {
  return (
    <button
      onClick={onClick}
      className={`px-6 py-3 text-sm font-medium transition-all duration-200 border-b-2 ${
        isActive
          ? 'text-blue-600 border-blue-600 dark:text-blue-400 dark:border-blue-400'
          : 'text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'
      }`}
    >
      {label}
    </button>
  );
};

export default SubmissionTab;

/== components/molecules/SubscriptionCard.tsx
import React, { useState, useEffect } from 'react';

interface Feature {
  name: string;
  included: boolean;
}

interface SubscriptionCardProps {
  id: string;
  type: string;
  title: string;
  subtitle: string;
  price: number;
  pricePeriod: string;
  features: Feature[];
  buttonText: string;
  isPopular?: boolean;
  guarantee?: string;
  onSubscribe: () => void;
  onDelete: () => void;
  onUpdate: (updatedData: any) => void;
}

const SubscriptionCard: React.FC<SubscriptionCardProps> = ({
  id,
  type,
  title,
  subtitle,
  price,
  pricePeriod,
  features,
  buttonText,
  isPopular = false,
  guarantee,
  onSubscribe,
  onDelete,
  onUpdate
}) => {
  const [editing, setEditing] = useState({
    title: false,
    subtitle: false,
    price: false,
    buttonText: false,
    features: null as number | null,
    newFeature: false,
    guarantee: false
  });
  
  const [editedValues, setEditedValues] = useState({
    title,
    subtitle,
    price,
    buttonText,
    features: [...features],
    newFeature: '',
    guarantee: guarantee || ''
  });
  
  // Update edited values when props change
  useEffect(() => {
    setEditedValues(prev => ({
      ...prev,
      title,
      subtitle,
      price,
      buttonText,
      features: [...features],
      guarantee: guarantee || ''
    }));
  }, [title, subtitle, price, buttonText, features, guarantee]);
  
  // Simplified handleEdit function
  const handleEdit = (field: string, value: any = null) => {
    // Create a new editing state object where everything is initially false/null
    const newEditing = {
      title: false,
      subtitle: false,
      price: false,
      buttonText: false,
      features: null as number | null,
      newFeature: false,
      guarantee: false
    };
    
    // Set only the clicked field to true/value
    if (field === 'features') {
      newEditing.features = value;
    } else {
      // @ts-ignore - we know field is a valid key
      newEditing[field] = true;
    }
    
    setEditing(newEditing);
  };
  
  const handleSave = (field: string, index: number | null = null) => {
    // Create a copy of the current edited values
    const updatedValues = { ...editedValues };
    
    // Handle adding a new feature
    if (field === 'newFeature' && editedValues.newFeature.trim() !== '') {
      const newFeature = {
        name: editedValues.newFeature.trim(),
        included: true
      };
      
      // Update the features array with the new feature
      updatedValues.features = [...updatedValues.features, newFeature];
      
      // Reset the new feature input
      updatedValues.newFeature = '';
      
      // Update local state with new feature added
      setEditedValues(updatedValues);
      
      // Send the updated data to parent component
      onUpdate(updatedValues);
    }
    
    // Close the editing state
    const newEditing = { ...editing };
    if (field === 'features') {
      newEditing.features = null;
    } else {
      // @ts-ignore - we know field is a valid key
      newEditing[field] = false;
    }
    
    setEditing(newEditing);
    
    // Send the updated data to parent for other fields
    if (field !== 'newFeature') {
      onUpdate(updatedValues);
    }
  };
  
  const handleInputChange = (field: string, value: any, index: number | null = null) => {
    const updatedValues = { ...editedValues };
    
    if (field === 'features' && index !== null) {
      updatedValues.features[index] = {
        ...updatedValues.features[index],
        name: value
      };
    } else {
      // @ts-ignore - we know field is a valid key
      updatedValues[field] = value;
    }
    
    setEditedValues(updatedValues);
  };
  
  const handleAddFeature = () => {
    handleEdit('newFeature');
  };
  
  const handleDeleteFeature = (index: number) => {
    const updatedFeatures = [...editedValues.features];
    updatedFeatures.splice(index, 1);
    
    const updatedValues = {
      ...editedValues,
      features: updatedFeatures
    };
    
    setEditedValues(updatedValues);
    onUpdate(updatedValues);
  };
  
  return (
    <div className={`bg-white dark:bg-gray-800 rounded-lg overflow-hidden border ${isPopular ? 'border-green-500 border-1' : 'border-gray-100'} relative`}>
      {/* Delete button */}
      <button 
        onClick={onDelete}
        className="absolute top-2 right-2 text-gray-400 hover:text-red-500 z-10"
        aria-label="Delete subscription"
      >
        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
        </svg>
      </button>
      
      {isPopular && (
        <div className="absolute top-0 right-12 bg-green-500 text-white dark:text-gray-800 px-4 py-1 text-sm font-medium rounded-b-lg">
          Most Popular
        </div>
      )}
      
      <div className="p-6">
        {/* Title */}
        <div className="text-center mb-4">
          {editing.title ? (
            <div className="mb-2">
              <input
                type="text"
                value={editedValues.title}
                onChange={(e) => handleInputChange('title', e.target.value)}
                className="border border-gray-100 rounded px-2 py-1 text-xl font-bold w-full text-center"
                autoFocus
                onBlur={() => handleSave('title')}
                onKeyPress={(e) => e.key === 'Enter' && handleSave('title')}
              />
            </div>
          ) : (
            <h3 
              className="text-xl font-bold cursor-pointer hover:text-blue-600 transition-colors" 
              onClick={() => handleEdit('title')}
            >
              {editedValues.title}
            </h3>
          )}
          
          {/* Subtitle - now editable */}
          {editing.subtitle ? (
            <div className="mb-2">
              <input
                type="text"
                value={editedValues.subtitle}
                onChange={(e) => handleInputChange('subtitle', e.target.value)}
                className="border border-gray-100 rounded px-2 py-1 text-gray-600 w-full text-center"
                autoFocus
                onBlur={() => handleSave('subtitle')}
                onKeyPress={(e) => e.key === 'Enter' && handleSave('subtitle')}
              />
            </div>
          ) : (
            <p 
              className="text-gray-600 dark:text-gray-400 cursor-pointer hover:text-blue-600 transition-colors"
              onClick={() => handleEdit('subtitle')}
            >
              {editedValues.subtitle}
            </p>
          )}
        </div>
        
        {/* Price */}
        <div className="text-center mb-6">
          {editing.price ? (
            <div className="mb-2">
              <input
                type="number"
                value={editedValues.price}
                onChange={(e) => handleInputChange('price', parseInt(e.target.value) || 0)}
                className="border border-gray-300 rounded px-2 py-1 text-3xl font-bold w-full text-center"
                autoFocus
                onBlur={() => handleSave('price')}
                onKeyPress={(e) => e.key === 'Enter' && handleSave('price')}
              />
            </div>
          ) : (
            <div 
              className="text-3xl font-bold cursor-pointer hover:text-blue-600 transition-colors" 
              onClick={() => handleEdit('price')}
            >
              <span className="text-black dark:text-white">Rp {parseInt(String(price)).toLocaleString('id-ID')}</span>
              <span className="text-sm text-gray-500 font-normal ml-1">/ {pricePeriod}</span>
            </div>
          )}
        </div>
        
        {/* Subscribe Button - now editable */}
        {editing.buttonText ? (
          <div className="mb-6">
            <input
              type="text"
              value={editedValues.buttonText}
              onChange={(e) => handleInputChange('buttonText', e.target.value)}
              className="border border-gray-300 rounded px-2 py-1 w-full text-center"
              autoFocus
              onBlur={() => handleSave('buttonText')}
              onKeyPress={(e) => e.key === 'Enter' && handleSave('buttonText')}
            />
          </div>
        ) : (
          <button
            onClick={onSubscribe}
            className={`w-full py-3 px-4 rounded-lg font-medium mb-6 ${
              type === 'free' 
                ? 'bg-gray-100 text-gray-800 hover:bg-gray-200' 
                : isPopular
                  ? 'bg-green-500 text-white dark:text-white hover:bg-green-600'
                  : 'bg-blue-500 text-white dark:text-white hover:bg-blue-600'
            }`}
            onDoubleClick={(e) => {
              e.preventDefault();
              e.stopPropagation();
              handleEdit('buttonText');
            }}
          >
            {editedValues.buttonText}
          </button>
        )}
        
        {/* Features */}
        <div className="space-y-4">
          {editedValues.features.map((feature, index) => (
            <div key={index} className="flex items-start group">
              {/* Checkmark icon */}
              <div className="text-green-500 mt-0.5 mr-3 flex-shrink-0">
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 13l4 4L19 7" />
                </svg>
              </div>
              
              {/* Feature text/input */}
              <div className="flex-grow">
                {editing.features === index ? (
                  <input
                    type="text"
                    value={editedValues.features[index].name}
                    onChange={(e) => handleInputChange('features', e.target.value, index)}
                    className="border border-gray-300 rounded px-2 py-1 w-full"
                    autoFocus
                    onBlur={() => handleSave('features')}
                    onKeyPress={(e) => e.key === 'Enter' && handleSave('features')}
                  />
                ) : (
                  <span 
                    className="cursor-pointer hover:text-blue-600 transition-colors"
                    onClick={() => handleEdit('features', index)}
                  >
                    {feature.name}
                  </span>
                )}
              </div>
              
              {/* Delete feature button */}
              <button 
                onClick={() => handleDeleteFeature(index)}
                className="hidden group-hover:block text-gray-400 hover:text-red-500 ml-2"
                aria-label="Delete feature"
              >
                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
          ))}
          
          {/* Add new feature section */}
          {editing.newFeature ? (
            <div className="flex items-start border-t border-gray-100 pt-4 mt-4">
              <div className="text-green-500 mt-0.5 mr-3 flex-shrink-0">
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 13l4 4L19 7" />
                </svg>
              </div>
              <input
                type="text"
                value={editedValues.newFeature}
                onChange={(e) => handleInputChange('newFeature', e.target.value)}
                className="border border-gray-300 rounded px-2 py-1 w-full"
                placeholder="Add new feature..."
                autoFocus
                onBlur={() => handleSave('newFeature')}
                onKeyPress={(e) => e.key === 'Enter' && handleSave('newFeature')}
              />
            </div>
          ) : (
            <div className="border-t border-gray-100 pt-4 mt-4">
              <button
                onClick={handleAddFeature}
                className="flex items-center text-sm text-blue-500 hover:text-blue-700"
              >
                <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                </svg>
                Add feature
              </button>
            </div>
          )}
        </div>
        
        {/* Guarantee - now editable */}
        {editing.guarantee ? (
          <div className="mt-6">
            <input
              type="text"
              value={editedValues.guarantee}
              onChange={(e) => handleInputChange('guarantee', e.target.value)}
              className="border border-gray-300 rounded px-2 py-1 w-full text-center text-sm text-gray-500"
              autoFocus
              onBlur={() => handleSave('guarantee')}
              onKeyPress={(e) => e.key === 'Enter' && handleSave('guarantee')}
              placeholder="Add guarantee text..."
            />
          </div>
        ) : (
          editedValues.guarantee ? (
            <div 
              className="mt-6 text-center text-sm text-gray-500 cursor-pointer hover:text-blue-600 transition-colors"
              onClick={() => handleEdit('guarantee')}
            >
              {editedValues.guarantee}
            </div>
          ) : (
            <div className="mt-6 text-center">
              <button
                onClick={() => handleEdit('guarantee')}
                className="text-sm text-blue-500 hover:text-blue-700"
              >
                Add guarantee
              </button>
            </div>
          )
        )}
      </div>
    </div>
  );
};

export default SubscriptionCard;

/== components/molecules/TabGroup.tsx
import React from 'react';

interface Tab {
  id: string;
  label: string;
}

interface TabGroupProps {
  tabs: Tab[];
  activeTab: string;
  onChange: (tabId: string) => void;
  className?: string;
}

const TabGroup: React.FC<TabGroupProps> = ({
  tabs,
  activeTab,
  onChange,
  className = ''
}) => {
  return (
    <div className={`border-b border-gray-200 ${className}`}>
      <nav className="-mb-px flex space-x-8">
        {tabs.map((tab) => (
          <button
            key={tab.id}
            onClick={() => onChange(tab.id)}
            className={`
              whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
              ${
                activeTab === tab.id
                  ? 'border-blue-500 text-blue-600'
                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
              }
            `}
          >
            {tab.label}
          </button>
        ))}
      </nav>
    </div>
  );
};

export default TabGroup;

/== components/molecules/TableOfContents.tsx
import React from 'react';
import { ChevronRight } from 'lucide-react';
import Card from '../atoms/Card';
import Text from '../atoms/Text';
import IconText from './IconText';

interface TableOfContentsProps {
  topics: {
    title: string;
    path: string;
  }[];
}

const TableOfContents: React.FC<TableOfContentsProps> = ({ topics }) => {
  return (
    <Card className="p-6 sticky top-20">
      <Text variant="body" className="font-bold text-gray-900 mb-4">Table of Contents</Text>
      <ul className="space-y-2">
        {topics.map((topic) => (
          <li key={topic.path}>
            <IconText
              icon={ChevronRight}
              text={topic.title}
              className="text-gray-700 hover:text-blue-600 cursor-pointer"
            />
          </li>
        ))}
      </ul>
    </Card>
  );
};

export default TableOfContents;

/== components/molecules/TutorialCard.tsx
import React from 'react';
import { Link } from 'react-router-dom';
import Card from '../atoms/Card';
import Text from '../atoms/Text';
import Button from '../atoms/Button';
import { ChevronRight } from 'lucide-react';

interface TutorialCardProps {
  title: string;
  description: string;
  path: string;
  icon: string;
  color: string;
}

const TutorialCard: React.FC<TutorialCardProps> = ({
  title,
  description,
  path,
  icon,
  color
}) => {
  return (
    <Link to={path}>
      <Card className="p-6 hover:shadow-lg transition duration-300">
        <div className={`text-3xl mb-3 ${color} h-16 w-16 flex items-center justify-center rounded-full`}>
          {icon}
        </div>
        <Text variant="body" className="font-medium text-gray-900 mb-2">{title}</Text>
        <Text variant="caption" color="muted">{description}</Text>
        <div className="mt-4 flex items-center text-blue-600">
          <span className="text-sm font-medium">Learn More</span>
          <ChevronRight className="h-4 w-4 ml-1" />
        </div>
      </Card>
    </Link>
  );
};

export default TutorialCard;

/== components/molecules/UserAvatar.tsx
import React from 'react';
import Avatar from '../atoms/Avatar';
import Text from '../atoms/Text';

interface UserAvatarProps {
  name: string;
  image?: string;
  subtitle?: string;
  size?: 'sm' | 'md' | 'lg';
}

const UserAvatar: React.FC<UserAvatarProps> = ({
  name,
  image,
  subtitle,
  size = 'md'
}) => {
  return (
    <div className="flex items-center">
      <Avatar src={image} alt={name} size={size} />
      <div className="ml-3">
        <Text variant="body" className="font-medium">{name}</Text>
        {subtitle && (
          <Text variant="caption" color="muted">{subtitle}</Text>
        )}
      </div>
    </div>
  );
};

export default UserAvatar;

/== components/organisms/AffiliateAnalytics.tsx
import React from "react";
import Card from "../atoms/Card";
import Heading from "../atoms/Heading";
import Text from "../atoms/Text";
import Divider from "../atoms/Divider";
import Progress from "../atoms/Progress";
import { AffiliateAnalytics as AnalyticsType } from "../../store/affiliateStore";

interface AffiliateAnalyticsProps {
  data: AnalyticsType;
}

const AffiliateAnalytics: React.FC<AffiliateAnalyticsProps> = ({ data }) => {
  // Calculate max values for scaling bars
  const maxEarnings = Math.max(...data.monthlyStats.map(item => item.earnings));
  const maxRegistrations = Math.max(...data.monthlyStats.map(item => item.registrations));
  const maxConversions = Math.max(...data.monthlyStats.map(item => item.conversions));

  return (
    <div className="space-y-6">
      <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
        <Card className="p-4 dark:bg-gray-800">
          <Text className="text-sm text-gray-500 dark:text-gray-400">Total Pendapatan</Text>
          <Heading level={3} className="mt-1 text-gray-900 dark:text-white">
            Rp {data.totalEarnings.toLocaleString()}
          </Heading>
        </Card>
        <Card className="p-4 dark:bg-gray-800">
          <Text className="text-sm text-gray-500 dark:text-gray-400">Total Pendaftaran</Text>
          <Heading level={3} className="mt-1 text-gray-900 dark:text-white">
            {data.totalRegistrations}
          </Heading>
        </Card>
        <Card className="p-4 dark:bg-gray-800">
          <Text className="text-sm text-gray-500 dark:text-gray-400">Total Konversi</Text>
          <Heading level={3} className="mt-1 text-gray-900 dark:text-white">
            {data.totalConversions}
          </Heading>
        </Card>
        <Card className="p-4 dark:bg-gray-800">
          <Text className="text-sm text-gray-500 dark:text-gray-400">Tingkat Konversi</Text>
          <Heading level={3} className="mt-1 text-gray-900 dark:text-white">
            {data.conversionRate.toFixed(1)}%
          </Heading>
        </Card>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <Card className="p-4 dark:bg-gray-800">
          <Heading level={4} className="mb-4 text-gray-900 dark:text-white">
            Trend Pendapatan Bulanan
          </Heading>
          <div className="space-y-4">
            {data.monthlyStats.map((month, index) => (
              <div key={index} className="space-y-1">
                <div className="flex justify-between text-sm">
                  <Text className="text-gray-700 dark:text-gray-300">{month.name}</Text>
                  <Text className="text-gray-900 dark:text-white font-medium">
                    Rp {month.earnings.toLocaleString()}
                  </Text>
                </div>
                <Progress 
                  value={(month.earnings / maxEarnings) * 100} 
                  color="blue" 
                  className="h-2" 
                />
              </div>
            ))}
          </div>
        </Card>

        <Card className="p-4 dark:bg-gray-800">
          <Heading level={4} className="mb-4 text-gray-900 dark:text-white">
            Aktivitas Referral
          </Heading>
          <div className="space-y-6">
            <div>
              <Text className="font-medium mb-2 text-gray-900 dark:text-white">Pendaftaran</Text>
              {data.monthlyStats.map((month, index) => (
                <div key={`reg-${index}`} className="mb-2">
                  <div className="flex justify-between text-sm">
                    <Text className="text-gray-700 dark:text-gray-300">{month.name}</Text>
                    <Text className="text-gray-900 dark:text-white">{month.registrations}</Text>
                  </div>
                  <Progress 
                    value={(month.registrations / maxRegistrations) * 100} 
                    color="blue" 
                    className="h-2" 
                  />
                </div>
              ))}
            </div>

            <Divider className="dark:border-gray-700" />

            <div>
              <Text className="font-medium mb-2 text-gray-900 dark:text-white">Konversi</Text>
              {data.monthlyStats.map((month, index) => (
                <div key={`conv-${index}`} className="mb-2">
                  <div className="flex justify-between text-sm">
                    <Text className="text-gray-700 dark:text-gray-300">{month.name}</Text>
                    <Text className="text-gray-900 dark:text-white">{month.conversions}</Text>
                  </div>
                  <Progress 
                    value={(month.conversions / maxConversions) * 100} 
                    color="green" 
                    className="h-2" 
                  />
                </div>
              ))}
            </div>
          </div>
        </Card>
      </div>

      <Card className="p-4 dark:bg-gray-800">
        <Heading level={4} className="mb-4 text-gray-900 dark:text-white">Top Afiliator</Heading>
        <div className="overflow-x-auto">
          <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
            <thead className="bg-gray-50 dark:bg-gray-800">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Afiliator
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Konversi
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Tingkat Konversi
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Pendapatan
                </th>
              </tr>
            </thead>
            <tbody className="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
              {data.topAffiliates.map((affiliate, index) => (
                <tr key={index} className="hover:bg-gray-50 dark:hover:bg-gray-800">
                  <td className="px-6 py-4 whitespace-nowrap">
                    <Text className="font-medium text-gray-900 dark:text-white">{affiliate.name}</Text>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <Text className="text-gray-700 dark:text-gray-300">{affiliate.conversions}</Text>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <Text className="text-gray-700 dark:text-gray-300">
                      {affiliate.conversionRate.toFixed(1)}%
                    </Text>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <Text className="font-medium text-gray-900 dark:text-white">
                      Rp {affiliate.earnings.toLocaleString()}
                    </Text>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>
    </div>
  );
};

export default AffiliateAnalytics;

/== components/organisms/AffiliateApplicationForm.tsx
import React, { useState } from "react";
import Card from "../atoms/Card";
import Heading from "../atoms/Heading";
import Text from "../atoms/Text";
import Input from "../atoms/Input";
import TextArea from "../atoms/TextArea";
import Button from "../atoms/Button";
import Select from "../atoms/Select";
import StepIndicator from "../molecules/StepIndicator";

interface AffiliateApplicationFormProps {
  onSubmit: (data: any) => void;
}

const AffiliateApplicationForm: React.FC<AffiliateApplicationFormProps> = ({
  onSubmit,
}) => {
  const [step, setStep] = useState(1);
  const [formData, setFormData] = useState({
    name: "",
    email: "",
    phone: "",
    website: "",
    socialMedia: {
      instagram: "",
      facebook: "",
      twitter: "",
      linkedin: "",
      youtube: "",
    },
    occupation: "",
    experience: "",
    audience: "",
    reason: "",
    marketingPlan: "",
    paymentMethod: "bank",
    bankAccount: {
      name: "",
      number: "",
      bank: "",
    },
    eWallet: {
      provider: "",
      number: "",
    },
    termsAccepted: false,
  });

  const handleChange = (
    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>
  ) => {
    const { name, value, type } = e.target;

    if (type === "checkbox") {
      const checkbox = e.target as HTMLInputElement;
      setFormData({ ...formData, [name]: checkbox.checked });
    } else if (name.includes(".")) {
      const [parent, child] = name.split(".");
      setFormData({
        ...formData,
        [parent]: {
          ...formData[parent as keyof typeof formData],
          [child]: value,
        },
      });
    } else {
      setFormData({ ...formData, [name]: value });
    }
  };

  const nextStep = () => {
    setStep(step + 1);
    window.scrollTo(0, 0);
  };

  const prevStep = () => {
    setStep(step - 1);
    window.scrollTo(0, 0);
  };

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    onSubmit(formData);
  };

  return (
    <Card className="p-6 max-w-4xl mx-auto">
      <div className="mb-6">
        <Heading level={2}>Aplikasi Program Afiliasi</Heading>
        <Text className="text-gray-500 mt-1">
          Isi formulir di bawah untuk bergabung dengan program afiliasi kami
        </Text>
      </div>

      <div className="mb-8">
        <StepIndicator
          steps={["Informasi Pribadi", "Pengalaman & Rencana", "Detail Pembayaran"]}
          currentStep={step}
        />
      </div>

      <form onSubmit={handleSubmit}>
        {step === 1 && (
          <div className="space-y-4">
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <Input
                label="Nama Lengkap"
                name="name"
                value={formData.name}
                onChange={handleChange}
                required
              />
              <Input
                label="Alamat Email"
                name="email"
                type="email"
                value={formData.email}
                onChange={handleChange}
                required
              />
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <Input
                label="Nomor Telepon"
                name="phone"
                value={formData.phone}
                onChange={handleChange}
                required
              />
              <Input
                label="Website (opsional)"
                name="website"
                value={formData.website}
                onChange={handleChange}
              />
            </div>

            <Heading level={4} className="mt-6">
              Sosial Media
            </Heading>
            <Text className="text-sm text-gray-500 mb-3">
              Tambahkan akun sosial media yang akan Anda gunakan untuk promosi
            </Text>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <Input
                label="Instagram"
                name="socialMedia.instagram"
                value={formData.socialMedia.instagram}
                onChange={handleChange}
              />
              <Input
                label="Facebook"
                name="socialMedia.facebook"
                value={formData.socialMedia.facebook}
                onChange={handleChange}
              />
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <Input
                label="Twitter"
                name="socialMedia.twitter"
                value={formData.socialMedia.twitter}
                onChange={handleChange}
              />
              <Input
                label="LinkedIn"
                name="socialMedia.linkedin"
                value={formData.socialMedia.linkedin}
                onChange={handleChange}
              />
            </div>

            <Input
              label="YouTube"
              name="socialMedia.youtube"
              value={formData.socialMedia.youtube}
              onChange={handleChange}
            />

            <div className="flex justify-end mt-6">
              <Button onClick={nextStep}>Lanjutkan</Button>
            </div>
          </div>
        )}

        {step === 2 && (
          <div className="space-y-4">
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <Input
                label="Pekerjaan/Profesi"
                name="occupation"
                value={formData.occupation}
                onChange={handleChange}
                required
              />
              <Select
                label="Pengalaman di Bidang Teknologi/Pendidikan"
                name="experience"
                value={formData.experience}
                onChange={handleChange}
                options={[
                  { value: "", label: "Pilih..." },
                  { value: "beginner", label: "Pemula (< 1 tahun)" },
                  { value: "intermediate", label: "Menengah (1-3 tahun)" },
                  { value: "advanced", label: "Mahir (3-5 tahun)" },
                  { value: "expert", label: "Ahli (5+ tahun)" },
                ]}
                required
              />
            </div>

            <Select
              label="Target Audiens Anda"
              name="audience"
              value={formData.audience}
              onChange={handleChange}
              options={[
                { value: "", label: "Pilih..." },
                { value: "students", label: "Pelajar/Mahasiswa" },
                { value: "professionals", label: "Profesional" },
                { value: "educators", label: "Pendidik" },
                { value: "companies", label: "Perusahaan" },
                { value: "mixed", label: "Campuran" },
              ]}
              required
            />

            <TextArea
              label="Mengapa Anda ingin bergabung dengan program afiliasi kami?"
              name="reason"
              value={formData.reason}
              onChange={handleChange}
              rows={3}
              required
            />

            <TextArea
              label="Bagaimana rencana Anda untuk mempromosikan kursus kami?"
              name="marketingPlan"
              value={formData.marketingPlan}
              onChange={handleChange}
              rows={4}
              required
              placeholder="Jelaskan strategi dan kanal yang akan Anda gunakan untuk mempromosikan kursus kami."
            />

            <div className="flex justify-between mt-6">
              <Button variant="outline" onClick={prevStep}>
                Kembali
              </Button>
              <Button onClick={nextStep}>Lanjutkan</Button>
            </div>
          </div>
        )}

        {step === 3 && (
          <div className="space-y-4">
            <div>
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Metode Pembayaran
              </label>
              <div className="flex space-x-4">
                <div className="flex items-center">
                  <input
                    type="radio"
                    id="bank"
                    name="paymentMethod"
                    value="bank"
                    checked={formData.paymentMethod === "bank"}
                    onChange={handleChange}
                    className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"
                  />
                  <label htmlFor="bank" className="ml-2 text-sm text-gray-700 dark:text-gray-300">
                    Rekening Bank
                  </label>
                </div>
                <div className="flex items-center">
                  <input
                    type="radio"
                    id="ewallet"
                    name="paymentMethod"
                    value="ewallet"
                    checked={formData.paymentMethod === "ewallet"}
                    onChange={handleChange}
                    className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"
                  />
                  <label htmlFor="ewallet" className="ml-2 text-sm text-gray-700 dark:text-gray-300">
                    E-Wallet
                  </label>
                </div>
              </div>
            </div>

            {formData.paymentMethod === "bank" ? (
              <div className="space-y-4">
                <Input
                  label="Nama Pemilik Rekening"
                  name="bankAccount.name"
                  value={formData.bankAccount.name}
                  onChange={handleChange}
                  required
                />
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <Input
                    label="Nama Bank"
                    name="bankAccount.bank"
                    value={formData.bankAccount.bank}
                    onChange={handleChange}
                    required
                  />
                  <Input
                    label="Nomor Rekening"
                    name="bankAccount.number"
                    value={formData.bankAccount.number}
                    onChange={handleChange}
                    required
                  />
                </div>
              </div>
            ) : (
              <div className="space-y-4">
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <Input
                    label="Provider E-Wallet"
                    name="eWallet.provider"
                    value={formData.eWallet.provider}
                    onChange={handleChange}
                    placeholder="OVO/GoPay/DANA/LinkAja"
                    required
                  />
                  <Input
                    label="Nomor E-Wallet"
                    name="eWallet.number"
                    value={formData.eWallet.number}
                    onChange={handleChange}
                    required
                  />
                </div>
              </div>
            )}

            <div className="mt-6">
              <div className="flex items-start">
                <div className="flex items-center h-5">
                  <input
                    id="termsAccepted"
                    name="termsAccepted"
                    type="checkbox"
                    checked={formData.termsAccepted}
                    onChange={handleChange}
                    className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                    required
                  />
                </div>
                <div className="ml-3 text-sm">
                  <label htmlFor="termsAccepted" className="text-gray-700 dark:text-gray-300">
                    Saya menyetujui <a href="#" className="text-blue-600 hover:underline">syarat dan ketentuan</a> program afiliasi
                  </label>
                </div>
              </div>
            </div>

            <div className="flex justify-between mt-6">
              <Button variant="outline" onClick={prevStep}>
                Kembali
              </Button>
              <Button type="submit" disabled={!formData.termsAccepted}>
                Kirim Aplikasi
              </Button>
            </div>
          </div>
        )}
      </form>
    </Card>
  );
};

export default AffiliateApplicationForm;

/== components/organisms/AffiliateDashboard.tsx
import React from "react";
import Card from "../atoms/Card";
import Heading from "../atoms/Heading";
import Text from "../atoms/Text";
import Button from "../atoms/Button";
import Input from "../atoms/Input";
import Badge from "../atoms/Badge";
import IconButton from "../atoms/IconButton";
import Progress from "../atoms/Progress";
import TabGroup from "../molecules/TabGroup";

interface AffiliateDashboardProps {
  userData: {
    name: string;
    referralCode: string;
    totalEarnings: number;
    availableEarnings: number;
    pendingEarnings: number;
    referralCount: number;
    conversionCount: number;
    conversionRate: number;
    level: "bronze" | "silver" | "gold" | "platinum";
    progress: number;
    nextLevelThreshold: number;
  };
  referrals: Array<{
    id: string;
    name: string;
    date: string;
    status: "pending" | "converted" | "expired";
    commission: number;
  }>;
  payouts: Array<{
    id: string;
    amount: number;
    status: "pending" | "processed" | "completed";
    date: string;
    method: string;
  }>;
}

const AffiliateDashboard: React.FC<AffiliateDashboardProps> = ({
  userData,
  referrals,
  payouts,
}) => {
  const [activeTab, setActiveTab] = React.useState("dashboard");
  const [showCopyToast, setShowCopyToast] = React.useState(false);

  const copyReferralLink = () => {
    navigator.clipboard.writeText(
      `https://example.com/refer?code=${userData.referralCode}`
    );
    setShowCopyToast(true);
    setTimeout(() => setShowCopyToast(false), 3000);
  };

  const getLevelColor = (level: string) => {
    switch (level) {
      case "bronze":
        return "bg-amber-700";
      case "silver":
        return "bg-gray-400";
      case "gold":
        return "bg-yellow-500";
      case "platinum":
        return "bg-blue-300";
      default:
        return "bg-gray-300";
    }
  };

  const getStatusColor = (status: string) => {
    switch (status) {
      case "converted":
      case "completed":
        return "green";
      case "pending":
        return "yellow";
      case "expired":
      case "cancelled":
        return "red";
      default:
        return "gray";
    }
  };

  const tabs = [
    { id: "dashboard", label: "Dashboard" },
    { id: "referrals", label: "Referral Saya" },
    { id: "payouts", label: "Pencairan Dana" },
    { id: "materials", label: "Materi Promosi" },
  ];

  return (
    <div className="space-y-6">
      {showCopyToast && (
        <div className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-md shadow-lg z-50 animate-fade-in-out">
          Link referral berhasil disalin!
        </div>
      )}

      <TabGroup tabs={tabs} activeTab={activeTab} onChange={setActiveTab} />

      {activeTab === "dashboard" && (
        <>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
            <Card className="p-4">
              <Text className="text-sm text-gray-500 dark:text-gray-400">
                Total Penghasilan
              </Text>
              <Heading level={3} className="mt-1">
                Rp {userData.totalEarnings.toLocaleString()}
              </Heading>
              <div className="mt-2 flex items-center space-x-4">
                <div>
                  <Text className="text-xs text-gray-500">Tersedia</Text>
                  <Text className="font-medium">
                    Rp {userData.availableEarnings.toLocaleString()}
                  </Text>
                </div>
                <div>
                  <Text className="text-xs text-gray-500">Tertunda</Text>
                  <Text className="font-medium">
                    Rp {userData.pendingEarnings.toLocaleString()}
                  </Text>
                </div>
              </div>
            </Card>

            <Card className="p-4">
              <Text className="text-sm text-gray-500 dark:text-gray-400">
                Total Referral
              </Text>
              <Heading level={3} className="mt-1">
                {userData.referralCount}
              </Heading>
              <div className="mt-2 flex items-center space-x-4">
                <div>
                  <Text className="text-xs text-gray-500">Konversi</Text>
                  <Text className="font-medium">{userData.conversionCount}</Text>
                </div>
                <div>
                  <Text className="text-xs text-gray-500">Tingkat Konversi</Text>
                  <Text className="font-medium">{userData.conversionRate}%</Text>
                </div>
              </div>
            </Card>

            <Card className="p-4">
              <div className="flex justify-between mb-2">
                <Text className="text-sm text-gray-500 dark:text-gray-400">
                  Level Afiliasi
                </Text>
                <Badge
                  color="blue"
                  className={`${getLevelColor(userData.level)} text-white`}
                >
                  {userData.level.charAt(0).toUpperCase() + userData.level.slice(1)}
                </Badge>
              </div>
              <div className="mt-2">
                <div className="flex justify-between mb-1">
                  <Text className="text-xs">
                    {userData.progress} / {userData.nextLevelThreshold} Konversi
                  </Text>
                  <Text className="text-xs">
                    {Math.round((userData.progress / userData.nextLevelThreshold) * 100)}%
                  </Text>
                </div>
                <Progress
                  value={(userData.progress / userData.nextLevelThreshold) * 100}
                  color="blue"
                  className="h-2"
                />
                <Text className="text-xs text-gray-500 mt-2">
                  {userData.nextLevelThreshold - userData.progress} konversi lagi untuk naik level
                </Text>
              </div>
            </Card>
          </div>

          <Card className="p-6">
            <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
              <div>
                <Heading level={3}>Link Referral Anda</Heading>
                <Text className="text-gray-500 mt-1">
                  Bagikan link ini dan dapatkan komisi untuk setiap pendaftaran
                </Text>
              </div>
              <Button
                variant="primary"
                className="mt-4 md:mt-0"
                onClick={copyReferralLink}
              >
                Salin Link
              </Button>
            </div>

            <div className="bg-gray-50 dark:bg-gray-800 p-4 rounded-md">
              <div className="flex flex-col md:flex-row items-start md:items-center justify-between">
                <div className="flex-grow">
                  <div className="flex items-center">
                    <Text className="font-medium">Kode Referral:</Text>
                    <Badge color="blue" className="ml-2">
                      {userData.referralCode}
                    </Badge>
                  </div>
                  <Input
                    className="mt-2"
                    value={`https://example.com/refer?code=${userData.referralCode}`}
                    readOnly
                    onClick={() => copyReferralLink()}
                  />
                </div>
              </div>
            </div>
          </Card>

          <Card className="p-6">
            <Heading level={3} className="mb-4">
              Aktivitas Terbaru
            </Heading>
            <div className="overflow-x-auto">
              <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                <thead className="bg-gray-50 dark:bg-gray-800">
                  <tr>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Nama
                    </th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Tanggal
                    </th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Status
                    </th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Komisi
                    </th>
                  </tr>
                </thead>
                <tbody className="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
                  {referrals.slice(0, 5).map((referral) => (
                    <tr key={referral.id}>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <Text className="font-medium">{referral.name}</Text>
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <Text>{referral.date}</Text>
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <Badge color={getStatusColor(referral.status)}>
                          {referral.status === "converted"
                            ? "Berhasil"
                            : referral.status === "pending"
                            ? "Tertunda"
                            : "Kedaluwarsa"}
                        </Badge>
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <Text className="font-medium">
                          Rp {referral.commission.toLocaleString()}
                        </Text>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
            {referrals.length > 5 && (
              <div className="mt-4 text-center">
                <Button variant="link" onClick={() => setActiveTab("referrals")}>
                  Lihat Semua Referral
                </Button>
              </div>
            )}
          </Card>
        </>
      )}

      {activeTab === "referrals" && (
        <Card className="p-6">
          <Heading level={3} className="mb-4">
            Daftar Referral
          </Heading>
          <div className="overflow-x-auto">
            <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
              <thead className="bg-gray-50 dark:bg-gray-800">
                <tr>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                    Nama
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                    Tanggal
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                    Status
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                    Komisi
                  </th>
                </tr>
              </thead>
              <tbody className="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
                {referrals.map((referral) => (
                  <tr key={referral.id}>
                    <td className="px-6 py-4 whitespace-nowrap">
                      <Text className="font-medium">{referral.name}</Text>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap">
                      <Text>{referral.date}</Text>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap">
                      <Badge color={getStatusColor(referral.status)}>
                        {referral.status === "converted"
                          ? "Berhasil"
                          : referral.status === "pending"
                          ? "Tertunda"
                          : "Kedaluwarsa"}
                      </Badge>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap">
                      <Text className="font-medium">
                        Rp {referral.commission.toLocaleString()}
                      </Text>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </Card>
      )}

      {activeTab === "payouts" && (
        <Card className="p-6">
          <div className="flex justify-between items-center mb-6">
            <div>
              <Heading level={3}>Pencairan Dana</Heading>
              <Text className="text-gray-500 mt-1">
                Kelola pencairan komisi afiliasi Anda
              </Text>
            </div>
            <Button>Ajukan Pencairan</Button>
          </div>
          
          <div className="overflow-x-auto">
            <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
              <thead className="bg-gray-50 dark:bg-gray-800">
                <tr>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                    ID Transaksi
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                    Jumlah
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                    Tanggal
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                    Metode
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                    Status
                  </th>
                </tr>
              </thead>
              <tbody className="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
                {payouts.map((payout) => (
                  <tr key={payout.id}>
                    <td className="px-6 py-4 whitespace-nowrap">
                      <Text className="font-mono">{payout.id}</Text>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap">
                      <Text className="font-medium">
                        Rp {payout.amount.toLocaleString()}
                      </Text>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap">
                      <Text>{payout.date}</Text>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap">
                      <Text>{payout.method}</Text>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap">
                      <Badge color={getStatusColor(payout.status)}>
                        {payout.status === "completed"
                          ? "Selesai"
                          : payout.status === "processed"
                          ? "Diproses"
                          : "Tertunda"}
                      </Badge>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </Card>
      )}

      {activeTab === "materials" && (
        <div className="space-y-6">
          <Card className="p-6">
            <Heading level={3} className="mb-4">
              Banner Promosi
            </Heading>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              <div className="border border-gray-200 dark:border-gray-700 rounded-md overflow-hidden">
                <img
                  src="https://via.placeholder.com/800x400?text=Promo+Banner+1"
                  alt="Promo Banner 1"
                  className="w-full object-cover"
                />
                <div className="p-3">
                  <Text className="font-medium">Banner Utama</Text>
                  <div className="mt-2 flex justify-end">
                    <Button size="sm">Unduh</Button>
                  </div>
                </div>
              </div>
              <div className="border border-gray-200 dark:border-gray-700 rounded-md overflow-hidden">
                <img
                  src="https://via.placeholder.com/800x400?text=Promo+Banner+2"
                  alt="Promo Banner 2"
                  className="w-full object-cover"
                />
                <div className="p-3">
                  <Text className="font-medium">Banner Diskon</Text>
                  <div className="mt-2 flex justify-end">
                    <Button size="sm">Unduh</Button>
                  </div>
                </div>
              </div>
              <div className="border border-gray-200 dark:border-gray-700 rounded-md overflow-hidden">
                <img
                  src="https://via.placeholder.com/800x400?text=Promo+Banner+3"
                  alt="Promo Banner 3"
                  className="w-full object-cover"
                />
                <div className="p-3">
                  <Text className="font-medium">Banner Kursus Baru</Text>
                  <div className="mt-2 flex justify-end">
                    <Button size="sm">Unduh</Button>
                  </div>
                </div>
              </div>
            </div>
          </Card>

          <Card className="p-6">
            <Heading level={3} className="mb-4">
              Template Promosi
            </Heading>
            <div className="space-y-4">
              <div className="border border-gray-200 dark:border-gray-700 rounded-md p-4">
                <div className="flex justify-between items-start">
                  <div>
                    <Text className="font-medium">Template Email</Text>
                    <Text className="text-sm text-gray-500 mt-1">
                      Email singkat untuk teman dan keluarga
                    </Text>
                  </div>
                  <Button size="sm">Salin</Button>
                </div>
                <div className="mt-3 bg-gray-50 dark:bg-gray-800 p-3 rounded text-sm">
                  Halo [Nama],<br /><br />
                  Saya ingin merekomendasikan kursus coding yang sangat bagus di
                  CodeCampus. Mereka menawarkan kursus berkualitas dengan harga
                  terjangkau.<br /><br />
                  Gunakan kode referral saya: <strong>{userData.referralCode}</strong> untuk
                  mendapatkan diskon 10% untuk pendaftaran pertama Anda!<br /><br />
                  Link: https://example.com/refer?code={userData.referralCode}<br /><br />
                  Salam,<br />
                  [Nama Anda]
                </div>
              </div>

              <div className="border border-gray-200 dark:border-gray-700 rounded-md p-4">
                <div className="flex justify-between items-start">
                  <div>
                    <Text className="font-medium">Template Post Sosial Media</Text>
                    <Text className="text-sm text-gray-500 mt-1">
                      Untuk diposting di Instagram, Facebook, atau Twitter
                    </Text>
                  </div>
                  <Button size="sm">Salin</Button>
                </div>
                <div className="mt-3 bg-gray-50 dark:bg-gray-800 p-3 rounded text-sm">
                  🚀 Belajar coding jadi lebih mudah dengan CodeCampus!<br /><br />
                  Mereka menawarkan kursus interaktif yang akan mengajarkan Anda
                  keterampilan coding yang dibutuhkan industri. Saya sangat
                  merekomendasikannya untuk pemula maupun yang sudah berpengalaman.<br /><br />
                  Daftar sekarang dengan kode referral saya: <strong>{userData.referralCode}</strong> dan
                  dapatkan diskon 10%!<br /><br />
                  Link: https://example.com/refer?code={userData.referralCode}<br /><br />
                  #BelajarCoding #CodeCampus #WebDevelopment
                </div>
              </div>
            </div>
          </Card>
        </div>
      )}
    </div>
  );
};

export default AffiliateDashboard;

/== components/organisms/AffiliateForm.tsx
import React, { useState } from "react";
import Button from "../atoms/Button";
import Card from "../atoms/Card";
import Heading from "../atoms/Heading";
import Input from "../atoms/Input";
import TextArea from "../atoms/TextArea";
import Select from "../atoms/Select";
import { FormSection } from "../molecules/FormSection";
import Divider from "../atoms/Divider";

interface AffiliateFormProps {
  initialData?: {
    name: string;
    referralCode: string;
    commission: string;
    cookieDuration: number;
    description: string;
    terms: string;
    status: string;
    paymentSchedule: string;
    multilevel: boolean;
    level2Commission: string;
  };
  onSubmit: (data: any) => void;
  onCancel: () => void;
}

const AffiliateForm: React.FC<AffiliateFormProps> = ({
  initialData,
  onSubmit,
  onCancel,
}) => {
  const [formData, setFormData] = useState(
    initialData || {
      name: "",
      referralCode: "",
      commission: "",
      cookieDuration: 30,
      description: "",
      terms: "",
      status: "active",
      paymentSchedule: "monthly",
      multilevel: false,
      level2Commission: "",
    }
  );

  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {
    const { name, value, type } = e.target;
    
    if (type === 'checkbox') {
      const checkbox = e.target as HTMLInputElement;
      setFormData({ ...formData, [name]: checkbox.checked });
    } else {
      setFormData({ ...formData, [name]: value });
    }
  };

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    
    // Validate required fields
    if (!formData.name || !formData.referralCode || formData.commission === '') {
      alert('Mohon lengkapi semua kolom yang wajib diisi');
      return;
    }
    
    // Convert any numeric string values to numbers
    const processedData = {
      ...formData,
      commission: formData.commission.toString().replace('%', ''),
      cookieDuration: Number(formData.cookieDuration),
      level2Commission: formData.level2Commission.toString().replace('%', '')
    };
    
    console.log('Submitting form data:', processedData);
    onSubmit(processedData);
  };

  return (
    <form onSubmit={handleSubmit} className="space-y-6 text-gray-800 dark:text-gray-200">
      <Card className="p-6 space-y-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700">
        <FormSection title="Detail Program">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <Input
              label="Nama Program"
              name="name"
              value={formData.name}
              onChange={handleChange}
              placeholder="Contoh: Program Influencer"
              required
              className="dark:bg-gray-700 dark:border-gray-600"
            />
            <Input
              label="Kode Referral"
              name="referralCode"
              value={formData.referralCode}
              onChange={handleChange}
              placeholder="Contoh: INF2024"
              required
              className="dark:bg-gray-700 dark:border-gray-600"
            />
            <Input
              label="Komisi (%)"
              name="commission"
              value={formData.commission}
              onChange={handleChange}
              placeholder="Contoh: 15"
              type="number"
              min="0"
              max="100"
              required
              className="dark:bg-gray-700 dark:border-gray-600"
            />
            <Input
              label="Masa Aktif Cookie (Hari)"
              name="cookieDuration"
              value={formData.cookieDuration.toString()}
              onChange={handleChange}
              placeholder="30"
              type="number"
              min="1"
              max="365"
              required
              className="dark:bg-gray-700 dark:border-gray-600"
            />
          </div>
          <TextArea
            label="Deskripsi"
            name="description"
            value={formData.description}
            onChange={handleChange}
            placeholder="Deskripsi singkat program afiliasi"
            rows={3}
            className="dark:bg-gray-700 dark:border-gray-600"
          />
          <TextArea
            label="Syarat & Ketentuan"
            name="terms"
            value={formData.terms}
            onChange={handleChange}
            placeholder="Syarat dan ketentuan program"
            rows={5}
            className="dark:bg-gray-700 dark:border-gray-600"
          />
        </FormSection>

        <Divider className="dark:border-gray-700" />

        <FormSection title="Pengaturan Lanjutan">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <Select
              label="Status"
              name="status"
              value={formData.status}
              onChange={handleChange}
              options={[
                { value: "active", label: "Aktif" },
                { value: "inactive", label: "Tidak Aktif" },
                { value: "pending", label: "Menunggu Persetujuan" },
              ]}
              className="dark:bg-gray-700 dark:border-gray-600"
            />
            <Select
              label="Jadwal Pembayaran"
              name="paymentSchedule"
              value={formData.paymentSchedule}
              onChange={handleChange}
              options={[
                { value: "weekly", label: "Mingguan" },
                { value: "monthly", label: "Bulanan" },
                { value: "quarterly", label: "Per 3 Bulan" },
              ]}
              className="dark:bg-gray-700 dark:border-gray-600"
            />
          </div>

          <div className="flex items-center mt-4">
            <input
              type="checkbox"
              id="multilevel"
              name="multilevel"
              checked={formData.multilevel}
              onChange={handleChange}
              className="h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700"
            />
            <label htmlFor="multilevel" className="ml-2 text-sm text-gray-700 dark:text-gray-300">
              Aktifkan Komisi Multi-Level
            </label>
          </div>

          {formData.multilevel && (
            <div className="mt-4">
              <Input
                label="Komisi Level 2 (%)"
                name="level2Commission"
                value={formData.level2Commission}
                onChange={handleChange}
                placeholder="Contoh: 5"
                type="number"
                min="0"
                max="100"
                className="dark:bg-gray-700 dark:border-gray-600"
              />
            </div>
          )}
        </FormSection>

        <div className="flex justify-end space-x-3 pt-4">
          <Button variant="outline" onClick={onCancel} className="dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
            Batal
          </Button>
          <Button type="submit" variant="primary">
            Simpan
          </Button>
        </div>
      </Card>
    </form>
  );
};

export default AffiliateForm;

/== components/organisms/AffiliatePromotionMaterials.tsx
import React, { useState } from "react";
import Card from "../atoms/Card";
import Button from "../atoms/Button";
import Heading from "../atoms/Heading";
import Text from "../atoms/Text";
import IconButton from "../atoms/IconButton";
import Modal from "../atoms/Modal";
import Input from "../atoms/Input";
import TextArea from "../atoms/TextArea";
import Select from "../atoms/Select";
import { Edit, Trash, Copy, Plus, ExternalLink } from "lucide-react";
import { PromotionalMaterial, MaterialType } from "../../store/affiliateStore";

interface AffiliatePromotionMaterialsProps {
  materials: PromotionalMaterial[];
  onAdd: (material: Omit<PromotionalMaterial, "id" | "createdAt" | "updatedAt">) => void;
  onEdit: (id: string, material: Partial<PromotionalMaterial>) => void;
  onDelete: (id: string) => void;
}

const AffiliatePromotionMaterials: React.FC<AffiliatePromotionMaterialsProps> = ({
  materials,
  onAdd,
  onEdit,
  onDelete,
}) => {
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [currentMaterial, setCurrentMaterial] = useState<PromotionalMaterial | null>(null);
  const [selectedType, setSelectedType] = useState<MaterialType | 'all'>('all');
  const [showCopyToast, setShowCopyToast] = useState(false);
  
  const [formData, setFormData] = useState({
    name: "",
    type: "banner" as MaterialType,
    preview: "",
    description: "",
    programId: "1",
  });

  const filteredMaterials = selectedType === 'all' 
    ? materials 
    : materials.filter(material => material.type === selectedType);

  const handleOpenModal = (material?: PromotionalMaterial) => {
    if (material) {
      setCurrentMaterial(material);
      setFormData({
        name: material.name,
        type: material.type,
        preview: material.preview,
        description: material.description,
        programId: material.programId,
      });
    } else {
      setCurrentMaterial(null);
      setFormData({
        name: "",
        type: "banner",
        preview: "",
        description: "",
        programId: "1",
      });
    }
    setIsModalOpen(true);
  };

  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {
    const { name, value } = e.target;
    setFormData({ ...formData, [name]: value });
  };

  const handleSubmit = () => {
    if (currentMaterial) {
      onEdit(currentMaterial.id, formData);
    } else {
      onAdd(formData);
    }
    setIsModalOpen(false);
  };

  const handleCopy = (text: string) => {
    navigator.clipboard.writeText(text);
    setShowCopyToast(true);
    setTimeout(() => setShowCopyToast(false), 3000);
  };

  const getTypeLabel = (type: MaterialType) => {
    switch (type) {
      case 'banner': return 'Banner';
      case 'email': return 'Email';
      case 'text': return 'Teks';
      case 'social': return 'Sosial Media';
      default: return type;
    }
  };

  return (
    <>
      {showCopyToast && (
        <div className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-md shadow-lg z-50 animate-fade-in-out">
          Konten berhasil disalin ke clipboard!
        </div>
      )}

      <div className="space-y-6">
        <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
          <Heading level={3} className="text-gray-900 dark:text-white">Materi Promosi</Heading>
          
          <div className="flex flex-wrap gap-2">
            <Button 
              variant="outline" 
              size="sm"
              onClick={() => setSelectedType('all')}
              className={`${selectedType === 'all' ? 'bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-900 dark:bg-opacity-20 dark:text-blue-400 dark:border-blue-800' : 'dark:text-gray-300 dark:border-gray-700'}`}
            >
              Semua
            </Button>
            <Button 
              variant="outline" 
              size="sm"
              onClick={() => setSelectedType('banner')}
              className={`${selectedType === 'banner' ? 'bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-900 dark:bg-opacity-20 dark:text-blue-400 dark:border-blue-800' : 'dark:text-gray-300 dark:border-gray-700'}`}
            >
              Banner
            </Button>
            <Button 
              variant="outline" 
              size="sm"
              onClick={() => setSelectedType('email')}
              className={`${selectedType === 'email' ? 'bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-900 dark:bg-opacity-20 dark:text-blue-400 dark:border-blue-800' : 'dark:text-gray-300 dark:border-gray-700'}`}
            >
              Email
            </Button>
            <Button 
              variant="outline" 
              size="sm"
              onClick={() => setSelectedType('text')}
              className={`${selectedType === 'text' ? 'bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-900 dark:bg-opacity-20 dark:text-blue-400 dark:border-blue-800' : 'dark:text-gray-300 dark:border-gray-700'}`}
            >
              Teks
            </Button>
            <Button 
              variant="outline" 
              size="sm"
              onClick={() => setSelectedType('social')}
              className={`${selectedType === 'social' ? 'bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-900 dark:bg-opacity-20 dark:text-blue-400 dark:border-blue-800' : 'dark:text-gray-300 dark:border-gray-700'}`}
            >
              Sosial Media
            </Button>
            
            <Button
              variant="primary"
              size="sm"
              onClick={() => handleOpenModal()}
            >
              <Plus className="w-4 h-4 mr-1" /> Tambah Materi
            </Button>
          </div>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          {filteredMaterials.map((material) => (
            <Card key={material.id} className="flex flex-col h-full overflow-hidden dark:bg-gray-800 border border-gray-200 dark:border-gray-700">
              <div className="p-4 flex justify-between items-start">
                <div>
                  <Heading level={4} className="text-gray-900 dark:text-white">{material.name}</Heading>
                  <span className="inline-block px-2 py-1 mt-1 text-xs rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300">
                    {getTypeLabel(material.type)}
                  </span>
                </div>
                <div className="flex space-x-1">
                  <IconButton
                    icon={Edit}
                    variant="outline"
                    size="sm"
                    onClick={() => handleOpenModal(material)}
                    title="Edit"
                  />
                  <IconButton
                    icon={Trash}
                    variant="outline"
                    size="sm"
                    onClick={() => onDelete(material.id)}
                    title="Hapus"
                    className="text-red-600 hover:text-red-700 hover:border-red-600"
                  />
                </div>
              </div>
              
              <div className="flex-grow px-4">
                {material.type === "banner" ? (
                  <div className="aspect-w-16 aspect-h-5 bg-gray-100 dark:bg-gray-700 rounded overflow-hidden mb-3">
                    <img 
                      src={material.preview} 
                      alt={material.name} 
                      className="object-cover w-full h-full"
                    />
                  </div>
                ) : (
                  <div className="mb-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-md max-h-32 overflow-auto">
                    <Text className="text-sm text-gray-700 dark:text-gray-300 whitespace-pre-line">
                      {material.preview}
                    </Text>
                  </div>
                )}
              </div>
              
              <div className="px-4 pb-3">
                <Text className="text-sm text-gray-600 dark:text-gray-400 mb-3">{material.description}</Text>
              </div>
              
              <div className="px-4 pb-4 mt-auto">
                {material.type === "banner" ? (
                  <a 
                    href={material.preview} 
                    target="_blank"
                    rel="noopener noreferrer" 
                    className="inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none w-full justify-center"
                  >
                    <ExternalLink className="w-4 h-4 mr-2" />
                    Lihat Full Size
                  </a>
                ) : (
                  <Button 
                    variant="outline" 
                    className="w-full dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700"
                    onClick={() => handleCopy(material.preview)}
                  >
                    <Copy className="w-4 h-4 mr-2" />
                    Salin Konten
                  </Button>
                )}
              </div>
            </Card>
          ))}
        </div>

        {filteredMaterials.length === 0 && (
          <Card className="p-8 text-center dark:bg-gray-800">
            <Text className="text-gray-500 dark:text-gray-400">
              Belum ada materi promosi {selectedType !== 'all' ? `dengan tipe ${getTypeLabel(selectedType)}` : ''}
            </Text>
            <Button
              variant="primary"
              className="mt-4"
              onClick={() => handleOpenModal()}
            >
              <Plus className="w-4 h-4 mr-1" /> Tambah Materi Promosi
            </Button>
          </Card>
        )}
      </div>

      <Modal 
        open={isModalOpen} 
        onClose={() => setIsModalOpen(false)}
        title={currentMaterial ? "Edit Materi Promosi" : "Tambah Materi Promosi"}
        size="lg"
      >
        <div className="space-y-4">
          <Input
            label="Nama Materi"
            name="name"
            value={formData.name}
            onChange={handleChange}
            placeholder="Contoh: Banner Utama"
            required
            className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
          />
          
          <Select
            label="Tipe Materi"
            name="type"
            value={formData.type}
            onChange={handleChange}
            options={[
              { value: "banner", label: "Banner" },
              { value: "email", label: "Template Email" },
              { value: "text", label: "Teks Promosi" },
              { value: "social", label: "Konten Sosial Media" },
            ]}
            className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
          />
          
          <Select
            label="Program Afiliasi"
            name="programId"
            value={formData.programId}
            onChange={handleChange}
            options={[
              { value: "1", label: "Program Influencer" },
              { value: "2", label: "Program Kampus" },
              { value: "3", label: "Program Komunitas" },
            ]}
            className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
          />
          
          {formData.type === "banner" ? (
            <Input
              label="URL Gambar"
              name="preview"
              value={formData.preview}
              onChange={handleChange}
              placeholder="https://example.com/banner.jpg"
              className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
            />
          ) : (
            <TextArea
              label="Konten"
              name="preview"
              value={formData.preview}
              onChange={handleChange}
              placeholder="Masukkan konten promosi di sini..."
              rows={4}
              className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
            />
          )}
          
          <TextArea
            label="Deskripsi"
            name="description"
            value={formData.description}
            onChange={handleChange}
            placeholder="Deskripsi singkat tentang materi promosi ini..."
            rows={2}
            className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
          />
          
          <div className="flex justify-end space-x-2 pt-2">
            <Button 
              variant="outline" 
              onClick={() => setIsModalOpen(false)}
              className="dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700" 
            >
              Batal
            </Button>
            <Button variant="primary" onClick={handleSubmit}>Simpan</Button>
          </div>
        </div>
      </Modal>
    </>
  );
};

export default AffiliatePromotionMaterials;

/== components/organisms/AffiliateSettings.tsx
import React, { useState } from 'react';
import Card from '../atoms/Card';
import Heading from '../atoms/Heading';
import Text from '../atoms/Text';
import Button from '../atoms/Button';
import Input from '../atoms/Input';
import TextArea from '../atoms/TextArea';
import Divider from '../atoms/Divider';
import { FormSection } from '../molecules/FormSection';
import { AffiliateSettings as AffiliateSettingsType } from '../../store/affiliateStore';

interface AffiliateSettingsProps {
  settings: AffiliateSettingsType;
  onSave: (settings: AffiliateSettingsType) => void;
}

const AffiliateSettings: React.FC<AffiliateSettingsProps> = ({ settings, onSave }) => {
  const [formData, setFormData] = useState<AffiliateSettingsType>(settings);
  const [isEditing, setIsEditing] = useState(false);

  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {
    const { name, value, type, checked } = e.target as HTMLInputElement;
    
    if (name.includes('.')) {
      const [section, key] = name.split('.');
      if (type === 'checkbox') {
        setFormData({
          ...formData,
          [section]: {
            ...formData[section as keyof AffiliateSettingsType],
            [key]: checked,
          },
        });
      } else {
        setFormData({
          ...formData,
          [section]: {
            ...formData[section as keyof AffiliateSettingsType],
            [key]: type === 'number' ? parseFloat(value) : value,
          },
        });
      }
    } else if (name.includes('[') && name.includes(']')) {
      const pattern = /(\w+)\[(\w+)\]\.(\w+)/;
      const matches = name.match(pattern);
      
      if (matches) {
        const [_, section, level, property] = matches;
        setFormData({
          ...formData,
          [section]: {
            ...formData[section as keyof AffiliateSettingsType],
            levels: {
              ...formData.levelSettings.levels,
              [level]: {
                ...formData.levelSettings.levels[level as keyof typeof formData.levelSettings.levels],
                [property]: type === 'number' ? parseFloat(value) : value,
              },
            },
          },
        });
      }
    } else {
      setFormData({
        ...formData,
        [name]: type === 'checkbox' ? checked : (type === 'number' ? parseFloat(value) : value),
      });
    }
  };

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    onSave(formData);
    setIsEditing(false);
  };

  return (
    <div className="space-y-6">
      <div className="flex justify-between items-center">
        <Heading level={3} className="text-gray-900 dark:text-white">Pengaturan Program Afiliasi</Heading>
        {!isEditing ? (
          <Button onClick={() => setIsEditing(true)}>Edit Pengaturan</Button>
        ) : (
          <div className="flex space-x-2">
            <Button variant="outline" onClick={() => setIsEditing(false)} className="dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">Batal</Button>
            <Button onClick={handleSubmit}>Simpan Perubahan</Button>
          </div>
        )}
      </div>

      <form onSubmit={handleSubmit}>
        <div className="space-y-6">
          {/* Global Settings */}
          <Card className="p-6 dark:bg-gray-800">
            <FormSection title="Pengaturan Umum">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div className="flex items-center">
                  <input
                    type="checkbox"
                    id="globalSettings.enabled"
                    name="globalSettings.enabled"
                    checked={formData.globalSettings.enabled}
                    onChange={handleChange}
                    disabled={!isEditing}
                    className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"
                  />
                  <label
                    htmlFor="globalSettings.enabled"
                    className="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >
                    Aktifkan Program Afiliasi
                  </label>
                </div>

                <div className="flex items-center">
                  <input
                    type="checkbox"
                    id="globalSettings.multilevelEnabled"
                    name="globalSettings.multilevelEnabled"
                    checked={formData.globalSettings.multilevelEnabled}
                    onChange={handleChange}
                    disabled={!isEditing}
                    className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"
                  />
                  <label
                    htmlFor="globalSettings.multilevelEnabled"
                    className="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >
                    Aktifkan Sistem Multi-Level
                  </label>
                </div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                <Input
                  type="number"
                  label="Komisi Default (%)"
                  name="globalSettings.defaultCommission"
                  value={formData.globalSettings.defaultCommission.toString()}
                  onChange={handleChange}
                  disabled={!isEditing}
                  min="0"
                  max="100"
                  className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                />

                <Input
                  type="number"
                  label="Durasi Cookie Default (hari)"
                  name="globalSettings.defaultCookieDuration"
                  value={formData.globalSettings.defaultCookieDuration.toString()}
                  onChange={handleChange}
                  disabled={!isEditing}
                  min="1"
                  max="365"
                  className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                />

                <Input
                  type="number"
                  label="Minimum Penarikan Dana (Rp)"
                  name="globalSettings.minPayoutAmount"
                  value={formData.globalSettings.minPayoutAmount.toString()}
                  onChange={handleChange}
                  disabled={!isEditing}
                  min="0"
                  className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                />

                <div className="w-full">
                  <label className="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                    Jadwal Pembayaran Default
                  </label>
                  <select
                    name="globalSettings.defaultPaymentSchedule"
                    value={formData.globalSettings.defaultPaymentSchedule}
                    onChange={handleChange}
                    disabled={!isEditing}
                    className="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                  >
                    <option value="weekly">Mingguan</option>
                    <option value="monthly">Bulanan</option>
                    <option value="quarterly">Per 3 Bulan</option>
                  </select>
                </div>
              </div>

              <div className="mt-4">
                <div className="flex items-center">
                  <input
                    type="checkbox"
                    id="globalSettings.applicationRequiresApproval"
                    name="globalSettings.applicationRequiresApproval"
                    checked={formData.globalSettings.applicationRequiresApproval}
                    onChange={handleChange}
                    disabled={!isEditing}
                    className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"
                  />
                  <label
                    htmlFor="globalSettings.applicationRequiresApproval"
                    className="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >
                    Pendaftaran Memerlukan Persetujuan
                  </label>
                </div>
              </div>
            </FormSection>
          </Card>

          {/* Payment Methods */}
          <Card className="p-6 dark:bg-gray-800">
            <FormSection title="Metode Pembayaran">
              <div className="space-y-3">
                <div className="flex items-center">
                  <input
                    type="checkbox"
                    id="paymentMethods.bankTransfer"
                    name="paymentMethods.bankTransfer"
                    checked={formData.paymentMethods.bankTransfer}
                    onChange={handleChange}
                    disabled={!isEditing}
                    className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"
                  />
                  <label
                    htmlFor="paymentMethods.bankTransfer"
                    className="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >
                    Bank Transfer
                  </label>
                </div>

                <div className="flex items-center">
                  <input
                    type="checkbox"
                    id="paymentMethods.eWallet"
                    name="paymentMethods.eWallet"
                    checked={formData.paymentMethods.eWallet}
                    onChange={handleChange}
                    disabled={!isEditing}
                    className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"
                  />
                  <label
                    htmlFor="paymentMethods.eWallet"
                    className="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >
                    E-Wallet (GoPay, OVO, DANA)
                  </label>
                </div>

                <div className="flex items-center">
                  <input
                    type="checkbox"
                    id="paymentMethods.paypal"
                    name="paymentMethods.paypal"
                    checked={formData.paymentMethods.paypal}
                    onChange={handleChange}
                    disabled={!isEditing}
                    className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"
                  />
                  <label
                    htmlFor="paymentMethods.paypal"
                    className="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >
                    PayPal
                  </label>
                </div>
              </div>
            </FormSection>
          </Card>

          {/* Level Settings */}
          <Card className="p-6 dark:bg-gray-800">
            <FormSection title="Pengaturan Level Afiliator">
              <div className="mb-4">
                <div className="flex items-center">
                  <input
                    type="checkbox"
                    id="levelSettings.enabled"
                    name="levelSettings.enabled"
                    checked={formData.levelSettings.enabled}
                    onChange={handleChange}
                    disabled={!isEditing}
                    className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"
                  />
                  <label
                    htmlFor="levelSettings.enabled"
                    className="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >
                    Aktifkan Sistem Level
                  </label>
                </div>
              </div>

              {formData.levelSettings.enabled && (
                <div className="space-y-4">
                  <div className="grid grid-cols-12 gap-4 text-sm font-medium text-gray-700 dark:text-gray-300">
                    <div className="col-span-4">Level</div>
                    <div className="col-span-4">Minimum Referral</div>
                    <div className="col-span-4">Bonus Komisi (%)</div>
                  </div>
                  
                  <div className="grid grid-cols-12 gap-4 items-center">
                    <div className="col-span-4">
                      <div className="flex items-center">
                        <div className="h-5 w-5 bg-amber-700 rounded-full mr-2"></div>
                        <Text className="dark:text-gray-300">Bronze</Text>
                      </div>
                    </div>
                    <div className="col-span-4">
                      <Input
                        type="number"
                        name="levelSettings[bronze].minReferrals"
                        value={formData.levelSettings.levels.bronze.minReferrals.toString()}
                        onChange={handleChange}
                        disabled={!isEditing || true} // Bronze level min refs should always be 0
                        min="0"
                        className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                      />
                    </div>
                    <div className="col-span-4">
                      <Input
                        type="number"
                        name="levelSettings[bronze].bonusCommission"
                        value={formData.levelSettings.levels.bronze.bonusCommission.toString()}
                        onChange={handleChange}
                        disabled={!isEditing}
                        min="0"
                        max="100"
                        className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                      />
                    </div>
                  </div>

                  <div className="grid grid-cols-12 gap-4 items-center">
                    <div className="col-span-4">
                      <div className="flex items-center">
                        <div className="h-5 w-5 bg-gray-400 rounded-full mr-2"></div>
                        <Text className="dark:text-gray-300">Silver</Text>
                      </div>
                    </div>
                    <div className="col-span-4">
                      <Input
                        type="number"
                        name="levelSettings[silver].minReferrals"
                        value={formData.levelSettings.levels.silver.minReferrals.toString()}
                        onChange={handleChange}
                        disabled={!isEditing}
                        min="1"
                        className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                      />
                    </div>
                    <div className="col-span-4">
                      <Input
                        type="number"
                        name="levelSettings[silver].bonusCommission"
                        value={formData.levelSettings.levels.silver.bonusCommission.toString()}
                        onChange={handleChange}
                        disabled={!isEditing}
                        min="0"
                        max="100"
                        className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                      />
                    </div>
                  </div>

                  <div className="grid grid-cols-12 gap-4 items-center">
                    <div className="col-span-4">
                      <div className="flex items-center">
                        <div className="h-5 w-5 bg-yellow-500 rounded-full mr-2"></div>
                        <Text className="dark:text-gray-300">Gold</Text>
                      </div>
                    </div>
                    <div className="col-span-4">
                      <Input
                        type="number"
                        name="levelSettings[gold].minReferrals"
                        value={formData.levelSettings.levels.gold.minReferrals.toString()}
                        onChange={handleChange}
                        disabled={!isEditing}
                        min="1"
                        className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                      />
                    </div>
                    <div className="col-span-4">
                      <Input
                        type="number"
                        name="levelSettings[gold].bonusCommission"
                        value={formData.levelSettings.levels.gold.bonusCommission.toString()}
                        onChange={handleChange}
                        disabled={!isEditing}
                        min="0"
                        max="100"
                        className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                      />
                    </div>
                  </div>

                  <div className="grid grid-cols-12 gap-4 items-center">
                    <div className="col-span-4">
                      <div className="flex items-center">
                        <div className="h-5 w-5 bg-blue-300 rounded-full mr-2"></div>
                        <Text className="dark:text-gray-300">Platinum</Text>
                      </div>
                    </div>
                    <div className="col-span-4">
                      <Input
                        type="number"
                        name="levelSettings[platinum].minReferrals"
                        value={formData.levelSettings.levels.platinum.minReferrals.toString()}
                        onChange={handleChange}
                        disabled={!isEditing}
                        min="1"
                        className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                      />
                    </div>
                    <div className="col-span-4">
                      <Input
                        type="number"
                        name="levelSettings[platinum].bonusCommission"
                        value={formData.levelSettings.levels.platinum.bonusCommission.toString()}
                        onChange={handleChange}
                        disabled={!isEditing}
                        min="0"
                        max="100"
                        className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                      />
                    </div>
                  </div>
                </div>
              )}
            </FormSection>
          </Card>

          {/* Form Fields Settings */}
          <Card className="p-6 dark:bg-gray-800">
            <FormSection title="Kolom Formulir Pendaftaran">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div className="flex items-center">
                  <input
                    type="checkbox"
                    id="applicationFormFields.website"
                    name="applicationFormFields.website"
                    checked={formData.applicationFormFields.website}
                    onChange={handleChange}
                    disabled={!isEditing}
                    className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"
                  />
                  <label
                    htmlFor="applicationFormFields.website"
                    className="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >
                    Website
                  </label>
                </div>

                <div className="flex items-center">
                  <input
                    type="checkbox"
                    id="applicationFormFields.phone"
                    name="applicationFormFields.phone"
                    checked={formData.applicationFormFields.phone}
                    onChange={handleChange}
                    disabled={!isEditing}
                    className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"
                  />
                  <label
                    htmlFor="applicationFormFields.phone"
                    className="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >
                    Nomor Telepon
                  </label>
                </div>

                <div className="flex items-center">
                  <input
                    type="checkbox"
                    id="applicationFormFields.socialMedia"
                    name="applicationFormFields.socialMedia"
                    checked={formData.applicationFormFields.socialMedia}
                    onChange={handleChange}
                    disabled={!isEditing}
                    className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"
                  />
                  <label
                    htmlFor="applicationFormFields.socialMedia"
                    className="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >
                    Sosial Media
                  </label>
                </div>

                <div className="flex items-center">
                  <input
                    type="checkbox"
                    id="applicationFormFields.marketingPlan"
                    name="applicationFormFields.marketingPlan"
                    checked={formData.applicationFormFields.marketingPlan}
                    onChange={handleChange}
                    disabled={!isEditing}
                    className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"
                  />
                  <label
                    htmlFor="applicationFormFields.marketingPlan"
                    className="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >
                    Rencana Pemasaran
                  </label>
                </div>
              </div>
            </FormSection>
          </Card>

          {/* Terms & Conditions */}
          <Card className="p-6 dark:bg-gray-800">
            <FormSection title="Syarat & Ketentuan">
              <TextArea
                name="termsAndConditions"
                value={formData.termsAndConditions}
                onChange={handleChange}
                disabled={!isEditing}
                rows={10}
                className="dark:bg-gray-700 dark:border-gray-600 dark:text-white"
              />
            </FormSection>
          </Card>

          {isEditing && (
            <div className="flex justify-end mt-6">
              <Button type="submit">Simpan Semua Perubahan</Button>
            </div>
          )}
        </div>
      </form>
    </div>
  );
};

export default AffiliateSettings;

/== components/organisms/AffiliatorList.tsx
import React, { useState } from 'react';
import Badge from '../atoms/Badge';
import Button from '../atoms/Button';
import Card from '../atoms/Card';
import Heading from '../atoms/Heading';
import IconButton from '../atoms/IconButton';
import Text from '../atoms/Text';
import { Eye, Edit, Trash, Check, X, ExternalLink } from 'lucide-react';
import { Affiliator, AffiliateStatus } from '../../store/affiliateStore';

interface AffiliatorListProps {
  affiliators: Affiliator[];
  onViewAffiliator: (id: string) => void;
  onEditAffiliator: (id: string) => void;
  onDeleteAffiliator: (id: string) => void;
  onApproveAffiliator: (id: string) => void;
  onRejectAffiliator: (id: string) => void;
}

const AffiliatorList: React.FC<AffiliatorListProps> = ({
  affiliators,
  onViewAffiliator,
  onEditAffiliator,
  onDeleteAffiliator,
  onApproveAffiliator,
  onRejectAffiliator,
}) => {
  const [filter, setFilter] = useState<AffiliateStatus | 'all'>('all');
  const [searchTerm, setSearchTerm] = useState('');

  const filteredAffiliators = affiliators
    .filter(affiliator => filter === 'all' || affiliator.status === filter)
    .filter(affiliator => 
      affiliator.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
      affiliator.email.toLowerCase().includes(searchTerm.toLowerCase()) ||
      affiliator.referralCode.toLowerCase().includes(searchTerm.toLowerCase())
    );

  const getStatusBadge = (status: AffiliateStatus) => {
    switch (status) {
      case 'active':
        return <Badge color="green">Aktif</Badge>;
      case 'pending':
        return <Badge color="yellow">Menunggu</Badge>;
      case 'inactive':
        return <Badge color="red">Tidak Aktif</Badge>;
      case 'rejected':
        return <Badge color="red">Ditolak</Badge>;
      default:
        return <Badge color="default">Unknown</Badge>;
    }
  };

  const getLevelBadge = (level: string) => {
    switch (level) {
      case 'bronze':
        return <Badge className="bg-amber-700 text-white dark:bg-amber-800">Bronze</Badge>;
      case 'silver':
        return <Badge className="bg-gray-400 text-white dark:bg-gray-500">Silver</Badge>;
      case 'gold':
        return <Badge className="bg-yellow-500 text-white dark:bg-yellow-600">Gold</Badge>;
      case 'platinum':
        return <Badge className="bg-blue-300 text-gray-800 dark:bg-blue-400">Platinum</Badge>;
      default:
        return <Badge color="default">Unknown</Badge>;
    }
  };

  return (
    <div className="space-y-4">
      <div className="flex flex-col md:flex-row justify-between gap-4">
        <div className="w-full md:w-72">
          <div className="relative">
            <div className="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
              <svg className="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                <path stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
              </svg>
            </div>
            <input 
              type="search" 
              className="block w-full p-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-white focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" 
              placeholder="Cari nama, email, kode..."
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
            />
          </div>
        </div>
        <div className="flex flex-wrap gap-2">
          <Button 
            variant={filter === 'all' ? 'primary' : 'outline'} 
            size="sm"
            onClick={() => setFilter('all')}
          >
            Semua
          </Button>
          <Button 
            variant={filter === 'active' ? 'primary' : 'outline'} 
            size="sm"
            onClick={() => setFilter('active')}
          >
            Aktif
          </Button>
          <Button 
            variant={filter === 'pending' ? 'primary' : 'outline'} 
            size="sm"
            onClick={() => setFilter('pending')}
          >
            Menunggu
          </Button>
          <Button 
            variant={filter === 'inactive' ? 'primary' : 'outline'} 
            size="sm"
            onClick={() => setFilter('inactive')}
          >
            Tidak Aktif
          </Button>
          <Button 
            variant={filter === 'rejected' ? 'primary' : 'outline'} 
            size="sm"
            onClick={() => setFilter('rejected')}
          >
            Ditolak
          </Button>
        </div>
      </div>

      <div className="overflow-x-auto relative shadow-md sm:rounded-lg">
        <table className="w-full text-sm text-left text-gray-500 dark:text-gray-400">
          <thead className="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
            <tr>
              <th scope="col" className="py-3 px-6">Nama</th>
              <th scope="col" className="py-3 px-6">Email</th>
              <th scope="col" className="py-3 px-6">Kode Referral</th>
              <th scope="col" className="py-3 px-6">Level</th>
              <th scope="col" className="py-3 px-6">Referral</th>
              <th scope="col" className="py-3 px-6">Konversi</th>
              <th scope="col" className="py-3 px-6">Penghasilan</th>
              <th scope="col" className="py-3 px-6">Status</th>
              <th scope="col" className="py-3 px-6">Aksi</th>
            </tr>
          </thead>
          <tbody>
            {filteredAffiliators.map((affiliator) => (
              <tr key={affiliator.id} className="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700">
                <td className="py-4 px-6 font-medium text-gray-900 dark:text-white whitespace-nowrap">
                  <div className="flex items-center">
                    {affiliator.profilePicture ? (
                      <img
                        src={affiliator.profilePicture}
                        alt={affiliator.name}
                        className="w-8 h-8 rounded-full mr-3"
                      />
                    ) : (
                      <div className="w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 flex items-center justify-center mr-3">
                        {affiliator.name.charAt(0).toUpperCase()}
                      </div>
                    )}
                    {affiliator.name}
                  </div>
                </td>
                <td className="py-4 px-6">{affiliator.email}</td>
                <td className="py-4 px-6">
                  <Badge color="blue">{affiliator.referralCode}</Badge>
                </td>
                <td className="py-4 px-6">
                  {getLevelBadge(affiliator.level)}
                </td>
                <td className="py-4 px-6">{affiliator.totalReferrals}</td>
                <td className="py-4 px-6">{affiliator.totalConversions}</td>
                <td className="py-4 px-6">Rp {affiliator.totalEarnings.toLocaleString()}</td>
                <td className="py-4 px-6">
                  {getStatusBadge(affiliator.status)}
                </td>
                <td className="py-4 px-6">
                  <div className="flex items-center space-x-2">
                    <IconButton
                      icon={Eye}
                      variant="outline"
                      onClick={() => onViewAffiliator(affiliator.id)}
                      title="Lihat Detail"
                      size="sm"
                    />
                    <IconButton
                      icon={Edit}
                      variant="outline"
                      onClick={() => onEditAffiliator(affiliator.id)}
                      title="Edit"
                      size="sm"
                    />
                    {affiliator.status === 'pending' && (
                      <>
                        <IconButton
                          icon={Check}
                          variant="outline"
                          color="primary"
                          onClick={() => onApproveAffiliator(affiliator.id)}
                          title="Setujui"
                          size="sm"
                          className="text-green-600 hover:text-green-700 hover:border-green-600"
                        />
                        <IconButton
                          icon={X}
                          variant="outline"
                          color="primary"
                          onClick={() => onRejectAffiliator(affiliator.id)}
                          title="Tolak"
                          size="sm"
                          className="text-red-600 hover:text-red-700 hover:border-red-600"
                        />
                      </>
                    )}
                    <IconButton
                      icon={Trash}
                      variant="outline"
                      onClick={() => onDeleteAffiliator(affiliator.id)}
                      title="Hapus"
                      size="sm"
                      className="text-red-600 hover:text-red-700 hover:border-red-600"
                    />
                  </div>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      {filteredAffiliators.length === 0 && (
        <div className="text-center py-10">
          <Text className="text-gray-500 dark:text-gray-400">Tidak ada data yang sesuai dengan filter</Text>
        </div>
      )}
    </div>
  );
};

export default AffiliatorList;

/== components/organisms/BundleForm.tsx
import React, { useState, useEffect } from 'react';
import { Bundle, Course } from '../../store/useBundleStore';
import { FormSection } from '../molecules/FormSection';
import  Input  from '../atoms/Input';
import  TextArea  from '../atoms/TextArea';
import  Select  from '../atoms/Select';
import  Button  from '../atoms/Button';
import  CourseCard  from '../molecules/CourseCard';
import { CourseSortable } from '../molecules/CourseSortable';

interface BundleFormProps {
  courses: Course[];
  initialData?: Partial<Bundle>;
  onSubmit: (data: Omit<Bundle, 'id' | 'createdAt' | 'updatedAt'>) => void;
  isLoading?: boolean;
}

export const BundleForm: React.FC<BundleFormProps> = ({
  courses,
  initialData,
  onSubmit,
  isLoading,
}) => {
  const [formData, setFormData] = useState<Partial<Bundle>>({
    title: '',
    description: '',
    courses: [],
    originalPrice: 0,
    bundlePrice: 0,
    discountPercentage: 0,
    theme: '',
    difficultyLevel: 'beginner',
    limitedTime: false,
    accessDuration: 'lifetime',
    hasCertificate: false,
    isActive: true,
    ...initialData,
  });
  
  const [errors, setErrors] = useState<Record<string, string>>({});
  
  // Calculate original price based on selected courses
  useEffect(() => {
    if (formData.courses && formData.courses.length > 0) {
      const selectedCourses = courses.filter(course => 
        formData.courses?.includes(course.id)
      );
      
      const total = selectedCourses.reduce((sum, course) => sum + course.price, 0);
      
      setFormData(prev => ({
        ...prev,
        originalPrice: total,
      }));
      
      // If discount percentage is set, recalculate bundle price
      if (formData.discountPercentage) {
        const discountedPrice = total * (1 - (formData.discountPercentage / 100));
        setFormData(prev => ({
          ...prev,
          bundlePrice: Math.round(discountedPrice * 100) / 100,
        }));
      }
    }
  }, [formData.courses, formData.discountPercentage, courses]);
  
  const handleCourseSelect = (courseId: string) => {
    setFormData(prev => {
      const newCourses = prev.courses ? [...prev.courses] : [];
      
      if (newCourses.includes(courseId)) {
        return {
          ...prev,
          courses: newCourses.filter(id => id !== courseId),
        };
      } else {
        return {
          ...prev,
          courses: [...newCourses, courseId],
        };
      }
    });
  };
  
  const handleDiscountChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const discount = parseFloat(e.target.value);
    
    if (formData.originalPrice) {
      const discountedPrice = formData.originalPrice * (1 - (discount / 100));
      
      setFormData(prev => ({
        ...prev,
        discountPercentage: discount,
      }));
    }
  };
  
  const handleReorderCourses = (newOrder: string[]) => {
    setFormData(prev => ({
      ...prev,
      courses: newOrder,
      courseOrder: newOrder,
    }));
  };
  
  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    
    // Validate form
    const newErrors: Record<string, string> = {};
    
    if (!formData.title) {
      newErrors.title = 'Title is required';
    }
    
    if (!formData.description) {
      newErrors.description = 'Description is required';
    }
    
    if (!formData.courses || formData.courses.length === 0) {
      newErrors.courses = 'At least one course must be selected';
    }
    
    if (!formData.theme) {
      newErrors.theme = 'Theme is required';
    }
    
    if (formData.limitedTime) {
      if (!formData.startDate) {
        newErrors.startDate = 'Start date is required for limited time bundles';
      }
      
      if (!formData.endDate) {
        newErrors.endDate = 'End date is required for limited time bundles';
      }
      
      if (formData.startDate && formData.endDate && new Date(formData.startDate) >= new Date(formData.endDate)) {
        newErrors.endDate = 'End date must be after start date';
      }
    }
    
    setErrors(newErrors);
    
    if (Object.keys(newErrors).length === 0) {
      onSubmit(formData as Omit<Bundle, 'id' | 'createdAt' | 'updatedAt'>);
    }
  };
  
  return (
    <form onSubmit={handleSubmit} className="space-y-8">
      <FormSection title="Basic Information" description="Enter the main details for your bundle">
        <Input
          label="Bundle Title"
          value={formData.title}
          onChange={(e) => setFormData({...formData, title: e.target.value})}
          placeholder="e.g., Web Development Mastery Bundle"
          error={errors.title}
          required
        />
        
        <TextArea
          label="Bundle Description"
          value={formData.description}
          onChange={(e) => setFormData({...formData, description: e.target.value})}
          placeholder="Describe the bundle and its benefits..."
          rows={4}
          error={errors.description}
          required
        />
        
        <Select
          label="Difficulty Level"
          value={formData.difficultyLevel}
          onChange={(value) => setFormData({...formData, difficultyLevel: value as 'beginner' | 'intermediate' | 'advanced'})}
          options={[
            { value: 'beginner', label: 'Beginner' },
            { value: 'intermediate', label: 'Intermediate' },
            { value: 'advanced', label: 'Advanced' },
          ]}
        />
        
        <Input
          label="Theme"
          value={formData.theme}
          onChange={(e) => setFormData({...formData, theme: e.target.value})}
          placeholder="e.g., Web Development, Data Science, Business"
          error={errors.theme}
          required
        />
        
        <Input
          label="Career Path (Optional)"
          value={formData.careerPath || ''}
          onChange={(e) => setFormData({...formData, careerPath: e.target.value})}
          placeholder="e.g., Frontend Developer, Data Analyst"
        />
      </FormSection>
      
      <FormSection title="Course Selection" description="Select courses to include in this bundle">
        {errors.courses && (
          <p className="text-red-600 text-sm mb-3">{errors.courses}</p>
        )}
        
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          {courses.map((course) => (
            <CourseCard
              key={course.id}
              course={course}
              isSelected={formData.courses?.includes(course.id)}
              onClick={() => handleCourseSelect(course.id)}
            />
          ))}
        </div>
        
        {formData.courses && formData.courses.length > 0 && (
          <div className="mt-6">
            <CourseSortable
              courses={courses}
              selectedCourseIds={formData.courses}
              onReorder={handleReorderCourses}
            />
          </div>
        )}
      </FormSection>
      
      <FormSection title="Pricing" description="Set the pricing options for this bundle">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <Input
              label="Original Price"
              value={formData.originalPrice?.toString()}
              disabled
              readOnly
              prefix="$"
            />
            <p className="text-xs text-gray-500 mt-1">
              Calculated from the sum of individual course prices
            </p>
          </div>
          
          <div>
            <Input
              label="Discount Percentage"
              type="number"
              min="0"
              max="100"
              value={formData.discountPercentage?.toString()}
              onChange={handleDiscountChange}
              suffix="%"
            />
          </div>
          
          <div>
            <Input
              label="Bundle Price"
              type="number"
              min="0"
              step="0.01"
              value={formData.bundlePrice?.toString()}
              onChange={(e) => setFormData({...formData, bundlePrice: parseFloat(e.target.value)})}
              prefix="$"
            />
            <p className="text-xs text-gray-500 mt-1">
              You can manually adjust this price or set a discount percentage
            </p>
          </div>
        </div>
      </FormSection>
      
      <FormSection title="Availability" description="Set when and how this bundle is available">
        <div className="flex items-center mb-4">
          <input
            type="checkbox"
            id="limitedTime"
            checked={formData.limitedTime}
            onChange={(e) => setFormData({...formData, limitedTime: e.target.checked})}
            className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
          />
          <label htmlFor="limitedTime" className="ml-2 block text-sm text-gray-700">
            Limited Time Bundle
          </label>
        </div>
        
        {formData.limitedTime && (
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <Input
              label="Start Date"
              type="date"
              value={formData.startDate instanceof Date ? formData.startDate.toISOString().split('T')[0] : formData.startDate}
              onChange={(e) => setFormData({...formData, startDate: new Date(e.target.value)})}
              error={errors.startDate}
            />
            
            <Input
              label="End Date"
              type="date"
              value={formData.endDate instanceof Date ? formData.endDate.toISOString().split('T')[0] : formData.endDate}
              onChange={(e) => setFormData({...formData, endDate: new Date(e.target.value)})}
              error={errors.endDate}
            />
          </div>
        )}
        
        <div className="mt-4">
          <Select
            label="Access Duration"
            value={formData.accessDuration === 'lifetime' ? 'lifetime' : formData.accessDuration?.toString()}
            onChange={(value) => setFormData({
              ...formData, 
              accessDuration: value === 'lifetime' ? 'lifetime' : parseInt(value)
            })}
            options={[
              { value: 'lifetime', label: 'Lifetime Access' },
              { value: '30', label: '30 days' },
              { value: '60', label: '60 days' },
              { value: '90', label: '90 days' },
              { value: '180', label: '6 months' },
              { value: '365', label: '1 year' },
            ]}
          />
        </div>
      </FormSection>
      
      <FormSection title="Additional Options" description="Configure additional bundle settings">
        <div className="flex items-center mb-4">
          <input
            type="checkbox"
            id="hasCertificate"
            checked={formData.hasCertificate}
            onChange={(e) => setFormData({...formData, hasCertificate: e.target.checked})}
            className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
          />
          <label htmlFor="hasCertificate" className="ml-2 block text-sm text-gray-700">
            Bundle Certificate
          </label>
          <p className="ml-2 text-xs text-gray-500">
            Offer a special certificate for completing the entire bundle
          </p>
        </div>
        
        <div className="flex items-center">
          <input
            type="checkbox"
            id="isActive"
            checked={formData.isActive}
            onChange={(e) => setFormData({...formData, isActive: e.target.checked})}
            className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
          />
          <label htmlFor="isActive" className="ml-2 block text-sm text-gray-700">
            Active Bundle
          </label>
          <p className="ml-2 text-xs text-gray-500">
            Make this bundle visible and available for purchase
          </p>
        </div>
      </FormSection>
      
      <div className="flex justify-end">
        <Button type="submit" isLoading={isLoading}>
          {initialData?.id ? 'Update Bundle' : 'Create Bundle'}
        </Button>
      </div>
    </form>
  );
};

/== components/organisms/BundleStatistics.tsx
import React from 'react';
import { BundleStats } from '../../store/useBundleStore';
import { ProgressStats } from '../molecules/ProgressStats';

interface BundleStatisticsProps {
  stats: BundleStats;
  isLoading?: boolean;
}

export const BundleStatistics: React.FC<BundleStatisticsProps> = ({
  stats,
  isLoading,
}) => {
  if (isLoading) {
    return (
      <div className="flex justify-center items-center h-48">
        <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
      </div>
    );
  }

  const { purchases, completionRate, averageCompletionTime, revenue } = stats;

  return (
    <div className="bg-white dark:bg-dark-800 rounded-lg shadow-sm border p-4">
      <h3 className="text-lg font-medium text-gray-900 mb-4">Bundle Performance</h3>
      
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
        <div className="bg-blue-50 rounded-lg p-4">
          <div className="text-sm text-blue-600 font-medium">Total Purchases</div>
          <div className="text-3xl font-bold text-blue-800">{purchases}</div>
        </div>
        
        <div className="bg-green-50 rounded-lg p-4">
          <div className="text-sm text-green-600 font-medium">Total Revenue</div>
          <div className="text-3xl font-bold text-green-800">${revenue.toFixed(2)}</div>
        </div>
      </div>
      
      <div className="space-y-4">
        <ProgressStats
          title="Completion Rate"
          value={Math.round(completionRate)}
          max={100}
          percentage={Math.round(completionRate)}
          color="blue"
        />
        
        <div className="bg-white dark:bg-dark-800 rounded-lg p-4 border">
          <h4 className="text-sm font-medium text-gray-500 mb-1">Average Completion Time</h4>
          <div className="text-2xl font-bold">
            {averageCompletionTime} days
          </div>
        </div>
      </div>
    </div>
  );
};

/== components/organisms/BundlesList.tsx
import React from 'react';
import { Bundle } from '../../store/useBundleStore';
import { BundleCard } from '../molecules/BundleCard';

interface BundlesListProps {
  bundles: Bundle[];
  onEdit: (id: string) => void;
  onDelete: (id: string) => void;
  onView: (id: string) => void;
  isLoading?: boolean;
}

export const BundlesList: React.FC<BundlesListProps> = ({
  bundles,
  onEdit,
  onDelete,
  onView,
  isLoading,
}) => {
  if (isLoading) {
    return (
      <div className="flex justify-center items-center h-64">
        <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
      </div>
    );
  }

  if (bundles.length === 0) {
    return (
      <div className="bg-gray-800 dark:bg-dark-800 p-6 rounded-lg border text-center">
        <h3 className="text-lg font-medium text-gray-900 dark:text-white mb-2">No bundles found</h3>
        <p className="text-gray-500  dark:text-white">Create your first bundle to get started</p>
      </div>
    );
  }

  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {bundles.map((bundle) => (
        <BundleCard
          key={bundle.id}
          bundle={bundle}
          onEdit={() => onEdit(bundle.id)}
          onDelete={() => onDelete(bundle.id)}
          onView={() => onView(bundle.id)}
        />
      ))}
    </div>
  );
};

/== components/organisms/CodeWorkspace.tsx
import React from 'react';
import { Play, Download, Copy, Trash, Settings, Maximize2 } from 'lucide-react';
import Button from '../atoms/Button';
import CodeEditor from '../molecules/CodeEditor';

interface CodeWorkspaceProps {
  code: string;
  output: string;
  isRunning: boolean;
  consoleExpanded: boolean;
  onCodeChange: (value: string | undefined) => void;
  onRun: () => void;
  onCopy: () => void;
  onClear: () => void;
  onDownload: () => void;
  onToggleConsole: () => void;
  theme?: string;
  fontSize?: string;
}

const CodeWorkspace: React.FC<CodeWorkspaceProps> = ({
  code,
  output,
  isRunning,
  consoleExpanded,
  onCodeChange,
  onRun,
  onCopy,
  onClear,
  onDownload,
  onToggleConsole,
  theme = 'vs-dark',
  fontSize = '14px'
}) => {
  return (
    <div className="flex flex-col h-full bg-gray-900 text-white">
      {/* Editor Header */}
      <div className="flex items-center justify-between p-2 border-b border-gray-700">
        <div className="flex items-center">
          <span className="text-sm font-medium">main.py</span>
        </div>
        <div className="flex items-center space-x-2">
          <Button
            variant="primary"
            icon={Play}
            onClick={onRun}
            disabled={isRunning}
            size="sm"
          >
            {isRunning ? 'Running...' : 'Run'}
          </Button>
          <Button
            variant="outline"
            icon={Copy}
            onClick={onCopy}
            size="sm"
            title="Copy Code"
          />
          <Button
            variant="outline"
            icon={Download}
            onClick={onDownload}
            size="sm"
            title="Download Code"
          />
          <Button
            variant="outline"
            icon={Trash}
            onClick={onClear}
            size="sm"
            title="Clear Code"
          />
        </div>
      </div>
      
      {/* Code Editor */}
      <div className="flex-1">
        <CodeEditor
          code={code}
          onChange={onCodeChange}
          language="python"
          theme={theme}
          fontSize={fontSize}
        />
      </div>
      
      {/* Console Output */}
      <div className={`border-t border-gray-700 ${consoleExpanded ? 'h-1/2' : 'h-40'}`}>
        <div className="flex items-center justify-between p-2 bg-gray-800">
          <div className="text-sm font-medium">Console</div>
          <Button
            variant="outline"
            icon={Maximize2}
            onClick={onToggleConsole}
            size="sm"
          />
        </div>
        <div className="p-4 font-mono text-sm overflow-auto h-[calc(100%-36px)]">
          {output || 'Run your code to see the output here...'}
        </div>
      </div>
    </div>
  );
};

export default CodeWorkspace;

/== components/organisms/CourseList.tsx
import React from 'react';
import CourseCard from '../molecules/CourseCard';
import { Course } from '../../store/courseStore';

interface CourseListProps {
  courses: Course[];
  title?: string;
  description?: string;
}

const CourseList: React.FC<CourseListProps> = ({
  courses,
  title,
  description
}) => {
  return (
    <div>
      {title && (
        <div className="text-center mb-12">
          <h2 className="text-3xl font-bold text-gray-900">{title}</h2>
          {description && (
            <p className="mt-4 text-xl text-gray-600">{description}</p>
          )}
        </div>
      )}
      
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {courses.map((course) => (
          <CourseCard
            key={course.id}
            id={course.id}
            title={course.title}
            description={course.description}
            image={course.image}
            rating={course.rating}
            students={course.students}
            duration={course.duration}
            level={course.level}
            color={course.color}
          />
        ))}
      </div>
    </div>
  );
};

export default CourseList;

/== components/organisms/Footer.tsx
import React from 'react';
import { Link } from 'react-router-dom';
import { Facebook, Twitter, Instagram, Linkedin, Youtube } from 'lucide-react';
import Logo from '../atoms/Logo';

const Footer: React.FC = () => {
  return (
    <footer className="bg-gray-900 text-white">
      <div className="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
        <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <Logo />
            <p className="mt-4 text-sm text-gray-300">
              Learn to code with our easy-to-follow tutorials, examples, and references.
            </p>
            <div className="mt-6 flex space-x-4">
              <a href="#" className="text-gray-400 hover:text-primary-500">
                <Facebook className="h-5 w-5" />
              </a>
              <a href="#" className="text-gray-400 hover:text-primary-500">
                <Twitter className="h-5 w-5" />
              </a>
              <a href="#" className="text-gray-400 hover:text-primary-500">
                <Instagram className="h-5 w-5" />
              </a>
              <a href="#" className="text-gray-400 hover:text-primary-500">
                <Linkedin className="h-5 w-5" />
              </a>
              <a href="#" className="text-gray-400 hover:text-primary-500">
                <Youtube className="h-5 w-5" />
              </a>
            </div>
          </div>
          
          <div>
            <h3 className="text-sm font-semibold text-gray-200 tracking-wider uppercase">
              Tutorials
            </h3>
            <ul className="mt-4 space-y-2">
              <li>
                <Link to="/tutorials/python" className="text-gray-300 hover:text-primary-500">
                  Python
                </Link>
              </li>
              {/* Add more tutorial links */}
            </ul>
          </div>
          
          <div>
            <h3 className="text-sm font-semibold text-gray-200 tracking-wider uppercase">
              Resources
            </h3>
            <ul className="mt-4 space-y-2">
              <li>
                <Link to="/compiler" className="text-gray-300 hover:text-primary-500">
                  Online Compiler
                </Link>
              </li>
              {/* Add more resource links */}
            </ul>
          </div>
          
          <div>
            <h3 className="text-sm font-semibold text-gray-200 tracking-wider uppercase">
              Company
            </h3>
            <ul className="mt-4 space-y-2">
              <li>
                <Link to="/about" className="text-gray-300 hover:text-primary-500">
                  About Us
                </Link>
              </li>
              {/* Add more company links */}
            </ul>
          </div>
        </div>
        
        <div className="mt-12 border-t border-gray-700 pt-8">
          <p className="text-sm text-gray-400">
            © {new Date().getFullYear()} Coder Growth. All rights reserved.
          </p>
        </div>
      </div>
    </footer>
  );
};

export default Footer;

/== components/organisms/GettingStarted.tsx
import React from 'react';
import Card from '../atoms/Card';
import Text from '../atoms/Text';
import Heading from '../atoms/Heading';
import Button from '../atoms/Button';

interface GettingStartedProps {
  steps: string[];
  firstTutorialPath: string;
}

const GettingStarted: React.FC<GettingStartedProps> = ({
  steps,
  firstTutorialPath
}) => {
  return (
    <Card className="p-6">
      <Heading level={2} className="mb-4">Getting Started</Heading>
      <div className="prose max-w-none">
        <Text variant="body" color="muted" className="mb-4">
          Ready to start learning? Here's what you need to do:
        </Text>
        <ol className="space-y-2 mb-6">
          {steps.map((step, index) => (
            <li key={index} className="flex items-start">
              <span className="text-blue-600 font-medium mr-2">{index + 1}.</span>
              <Text variant="body" color="muted">{step}</Text>
            </li>
          ))}
        </ol>
        <Button
          variant="primary"
          onClick={() => window.location.href = firstTutorialPath}
        >
          Start with the First Tutorial
        </Button>
      </div>
    </Card>
  );
};

export default GettingStarted;

/== components/organisms/Header.tsx
import React, { useState, useRef, useEffect } from 'react';
import { Link, useLocation, useNavigate } from 'react-router-dom';
import { Menu, ChevronDown, Search, Bell, LogOut, User, Settings, BookOpen, Star, Globe, Zap, Crown, Code, Map } from 'lucide-react';
import Logo from '../atoms/Logo';
import Button from '../atoms/Button';
import SearchBar from '../molecules/SearchBar';
import ThemeToggle from '../atoms/ThemeToggle';
import NotificationDropdown from '../molecules/NotificationDropdown';
import { useAuthStore } from '../../store/authStore';
import { useCourseStore } from '../../store/courseStore';
import { useNotificationStore } from '../../store/notificationStore';

const Header: React.FC = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [searchQuery, setSearchQuery] = useState('');
  const [isUserMenuOpen, setIsUserMenuOpen] = useState(false);
  const [isNotificationsOpen, setIsNotificationsOpen] = useState(false);
  const notificationRef = useRef<HTMLDivElement>(null);
  const { isAuthenticated, user, logout } = useAuthStore();
  const { totalXp } = useCourseStore();
  const { unreadCount } = useNotificationStore();
  const location = useLocation();
  const navigate = useNavigate();

  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (notificationRef.current && !notificationRef.current.contains(event.target as Node)) {
        setIsNotificationsOpen(false);
      }
    };

    document.addEventListener('mousedown', handleClickOutside);
    return () => document.removeEventListener('mousedown', handleClickOutside);
  }, []);

  const handleDashboardClick = () => {
    if (user?.role === 'admin') {
      navigate('/cms');
    } else {
      navigate('/dashboard');
    }
  };

  const navItems = [
    {
      label: 'Learn',
      items: [
        { label: 'Python', href: '/tutorials/python' },
        { label: 'JavaScript', href: '/tutorials/javascript' },
        { label: 'Java', href: '/tutorials/java' },
        { label: 'Go', href: '/tutorials/go' },
        { label: 'DSA', href: '/tutorials/dsa' },
      ]
    },
    {
      label: 'Practice',
      items: [
        { label: 'Compiler', href: '/compiler' },
        { label: 'Challenges', href: '/challenges' },
        { label: 'Projects', href: '/projects' },
      ]
    },
    {
      label: 'Resources',
      items: [
        { label: 'Documentation', href: '/docs' },
        { label: 'Examples', href: '/examples' },
        { label: 'Blog', href: '/blog' },
      ]
    }
  ];

  const userMenuItems = [
    { label: 'Profile', icon: User, href: '/profile' },
    { label: 'My Courses', icon: BookOpen, href: '/my-learning' },
    { label: 'Settings', icon: Settings, href: '/settings' },
    { label: 'Sign Out', icon: LogOut, onClick: logout }
  ];

  return (
    <header className="bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 sticky top-0 z-50">
      <div className="max-w-7xl mx-auto">
        <div className="flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8">
          {/* Logo */}
          <div className="flex items-center">
            <Logo />
          </div>

          {/* Desktop Navigation */}
          <nav className="hidden md:flex items-center space-x-8">
            {navItems.map((item) => (
              <div key={item.label} className="relative group">
                <button className="inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400">
                  {item.label}
                  <ChevronDown className="ml-1 h-4 w-4" />
                </button>
                <div className="absolute left-0 mt-2 w-48 rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
                  <div className="py-1" role="menu">
                    {item.items.map((subItem) => (
                      <Link
                        key={subItem.href}
                        to={subItem.href}
                        className="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"
                        role="menuitem"
                      >
                        {subItem.label}
                      </Link>
                    ))}
                  </div>
                </div>
              </div>
            ))}
            <Link
              to="/roadmap"
              className="inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400"
            >
              <Map className="h-4 w-4 mr-1" />
              Roadmaps
            </Link>
            <Link
              to="/pricing"
              className="inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400"
            >
              Pricing
            </Link>
          </nav>

          {/* Right Section */}
          <div className="hidden md:flex items-center space-x-4">
            <ThemeToggle />

            {isAuthenticated ? (
              <div className="flex items-center space-x-4">
                <div className="relative" ref={notificationRef}>
                  <button
                    onClick={() => setIsNotificationsOpen(!isNotificationsOpen)}
                    className="relative text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800"
                  >
                    <Bell className="h-6 w-6" />
                    {unreadCount > 0 && (
                      <span className="absolute top-0 right-0 block h-4 w-4 rounded-full bg-red-500 border-2 border-white dark:border-gray-900 text-xs text-white flex items-center justify-center">
                        {unreadCount}
                      </span>
                    )}
                  </button>
                  <NotificationDropdown
                    isOpen={isNotificationsOpen}
                    onClose={() => setIsNotificationsOpen(false)}
                  />
                </div>
                <button 
                  onClick={handleDashboardClick}
                  className="text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 font-medium"
                >
                  Dashboard
                </button>
                <div className="relative">
                  <button
                    onClick={() => setIsUserMenuOpen(!isUserMenuOpen)}
                    className="flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400"
                  >
                    <div className="w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center text-white">
                      {user?.name.charAt(0)}
                    </div>
                    <ChevronDown className="h-4 w-4" />
                  </button>

                  {isUserMenuOpen && (
                    <div className="absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg py-1 ring-1 ring-black ring-opacity-5">
                      <div className="px-4 py-2 border-b border-gray-200 dark:border-gray-700">
                        <div className="font-medium text-gray-900 dark:text-white">{user?.name}</div>
                        <div className="flex items-center text-sm text-yellow-500">
                          <Star className="h-4 w-4 mr-1 fill-current" />
                          {totalXp} XP
                        </div>
                      </div>
                      {userMenuItems.map((item) => (
                        item.href ? (
                          <Link
                            key={item.label}
                            to={item.href}
                            className="flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"
                            onClick={() => setIsUserMenuOpen(false)}
                          >
                            <item.icon className="h-4 w-4 mr-2" />
                            {item.label}
                          </Link>
                        ) : (
                          <button
                            key={item.label}
                            onClick={() => {
                              item.onClick?.();
                              setIsUserMenuOpen(false);
                            }}
                            className="flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"
                          >
                            <item.icon className="h-4 w-4 mr-2" />
                            {item.label}
                          </button>
                        )
                      ))}
                    </div>
                  )}
                </div>
              </div>
            ) : (
              <div className="flex items-center space-x-4">
                <Link 
                  to="/login"
                  state={{ from: location }}
                  className="bg-brand-green hover:bg-brand-green/90 text-white px-4 py-2 rounded-lg"
                >
                  Sign In
                </Link>
              </div>
            )}
          </div>

          {/* Mobile Menu Button */}
          <div className="flex md:hidden">
            <ThemeToggle />
            <Button
              variant="outline"
              icon={Menu}
              onClick={() => setIsMenuOpen(!isMenuOpen)}
              className="ml-2"
            />
          </div>
        </div>
      </div>

      {/* Mobile Menu */}
      {isMenuOpen && (
        <div className="md:hidden">
          <div className="px-2 pt-2 pb-3 space-y-1">
            {navItems.map((item) => (
              <div key={item.label}>
                <div className="px-3 py-2 text-base font-medium text-gray-700 dark:text-gray-300">
                  {item.label}
                </div>
                {item.items.map((subItem) => (
                  <Link
                    key={subItem.href}
                    to={subItem.href}
                    className="block px-3 py-2 text-base font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-800"
                  >
                    {subItem.label}
                  </Link>
                ))}
              </div>
            ))}
            <Link
              to="/roadmap"
              className="block px-3 py-2 text-base font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-800"
            >
              <div className="flex items-center">
                <Map className="h-4 w-4 mr-2" />
                Roadmaps
              </div>
            </Link>
            <Link
              to="/pricing"
              className="block px-3 py-2 text-base font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-800"
            >
              Pricing
            </Link>
          </div>
          <div className="pt-4 pb-3 border-t border-gray-200 dark:border-gray-700">
            <div className="px-2 space-y-1">
              {!isAuthenticated ? (
                <Link
                  to="/login"
                  state={{ from: location }}
                  className="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"
                >
                  Sign In
                </Link>
              ) : (
                <>
                  <div className="px-3 py-2 border-b border-gray-200 dark:border-gray-700 mb-2">
                    <div className="font-medium text-gray-900 dark:text-white">{user?.name}</div>
                    <div className="flex items-center text-sm text-yellow-500">
                      <Star className="h-4 w-4 mr-1 fill-current" />
                      {totalXp} XP
                    </div>
                  </div>
                  {userMenuItems.map((item) => (
                    item.href ? (
                      <Link
                        key={item.label}
                        to={item.href}
                        className="flex items-center px-3 py-2 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"
                      >
                        <item.icon className="h-5 w-5 mr-2" />
                        {item.label}
                      </Link>
                    ) : (
                      <button
                        key={item.label}
                        onClick={item.onClick}
                        className="flex items-center w-full px-3 py-2 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"
                      >
                        <item.icon className="h-5 w-5 mr-2" />
                        {item.label}
                      </button>
                    )
                  ))}
                </>
              )}
            </div>
          </div>
        </div>
      )}
    </header>
  );
};

export default Header;

/== components/organisms/HeroSection.tsx
import React from 'react';
import { Link } from 'react-router-dom';
import { ArrowRight, Code } from 'lucide-react';
import Button from '../atoms/Button';

interface HeroSectionProps {
  title: string;
  description: string;
  image?: string;
  primaryAction?: {
    text: string;
    link: string;
  };
  secondaryAction?: {
    text: string;
    link: string;
  };
  background?: string;
}

const HeroSection: React.FC<HeroSectionProps> = ({
  title,
  description,
  image,
  primaryAction,
  secondaryAction,
  background = 'bg-gradient-to-r from-gray-900 to-gray-800'
}) => {
  return (
    <section className={`${background} relative overflow-hidden`}>
      {/* Background Pattern */}
      <div className="absolute inset-0 bg-grid-pattern opacity-10"></div>
      
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 relative">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
          <div className="text-center md:text-left">
            <div className="inline-flex items-center bg-brand-green bg-opacity-10 rounded-full px-4 py-2 mb-6">
              <Code className="h-5 w-5 text-brand-green mr-2" />
              <span className="text-sm font-medium text-brand-green">Learn to code for free</span>
            </div>
            
            <h1 className="text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6 leading-tight">
              {title}
            </h1>
            
            <p className="text-xl text-gray-300 mb-8 leading-relaxed">
              {description}
            </p>
            
            <div className="flex flex-col sm:flex-row justify-center md:justify-start space-y-4 sm:space-y-0 sm:space-x-4">
              {primaryAction && (
                <Button
                  href={primaryAction.link}
                  variant="primary"
                  className="text-lg px-8 py-4 bg-brand-green hover:bg-brand-green/90"
                >
                  {primaryAction.text}
                  <ArrowRight className="ml-2 h-5 w-5" />
                </Button>
              )}
              
              {secondaryAction && (
                <Button
                  href={secondaryAction.link}
                  variant="outline"
                  className="text-lg px-8 py-4 text-white border-white hover:bg-white/10"
                >
                  {secondaryAction.text}
                </Button>
              )}
            </div>
          </div>
          
          {image && (
            <div className="hidden md:block relative">
              <div className="absolute -inset-4 bg-brand-green/20 rounded-lg blur-xl"></div>
              <img
                src={image}
                alt="Hero"
                className="relative rounded-lg shadow-2xl transform hover:scale-105 transition-transform duration-300"
              />
            </div>
          )}
        </div>
      </div>
    </section>
  );
};

export default HeroSection;

/== components/organisms/IntegrationsDashboard.tsx
import React from 'react';
import { Link } from 'react-router-dom';
import { Server, CreditCard, Shield, Globe, Webhook, AlertCircle, CheckCircle } from 'lucide-react';
import Card from '../atoms/Card';
import Heading from '../atoms/Heading';
import Text from '../atoms/Text';
import Button from '../atoms/Button';

interface IntegrationStatusProps {
  title: string;
  status: 'active' | 'inactive' | 'error';
  count: number;
  icon: React.ReactNode;
  path: string;
}

const IntegrationStatus: React.FC<IntegrationStatusProps> = ({ title, status, count, icon, path }) => {
  const getStatusColor = () => {
    switch (status) {
      case 'active':
        return 'text-green-500';
      case 'inactive':
        return 'text-gray-400';
      case 'error':
        return 'text-red-500';
      default:
        return 'text-gray-400';
    }
  };

  const getStatusIcon = () => {
    switch (status) {
      case 'active':
        return <CheckCircle className={`h-5 w-5 ${getStatusColor()}`} />;
      case 'inactive':
        return <AlertCircle className={`h-5 w-5 ${getStatusColor()}`} />;
      case 'error':
        return <AlertCircle className={`h-5 w-5 ${getStatusColor()}`} />;
      default:
        return null;
    }
  };

  return (
    <Card className="p-4">
      <div className="flex items-center justify-between mb-2">
        <div className="flex items-center">
          <div className="p-2 rounded-full bg-brand-green/10 text-brand-green mr-3">
            {icon}
          </div>
          <Heading level="h3" className="text-lg font-medium text-gray-600 dark:text-white">{title}</Heading>
        </div>
        <div className="flex items-center">
          {getStatusIcon()}
          <span className={`ml-2 text-sm font-medium text-gray-600 dark:text-white ${getStatusColor()}`}>
            {status === 'active' ? 'Aktif' : status === 'inactive' ? 'Tidak Aktif' : 'Error'}
          </span>
        </div>
      </div>
      <div className="flex items-center justify-between">
        <Text className="text-2xl font-bold text-gray-600 dark:text-white">{count}</Text>
        <Link to={path}>
          <Button variant="secondary" size="sm" className="text-sm">
            Kelola
          </Button>
        </Link>
      </div>
    </Card>
  );
};

interface IntegrationsDashboardProps {
  apiKeysCount?: number;
  paymentGatewaysCount?: number;
  ssoProvidersCount?: number;
  thirdPartyCount?: number;
  webhooksCount?: number;
}

const IntegrationsDashboard: React.FC<IntegrationsDashboardProps> = ({
  apiKeysCount = 0,
  paymentGatewaysCount = 0,
  ssoProvidersCount = 0,
  thirdPartyCount = 0,
  webhooksCount = 0
}) => {
  const integrationStats = [
    {
      title: 'API Keys',
      status: apiKeysCount > 0 ? 'active' : 'inactive' as 'active' | 'inactive' | 'error',
      count: apiKeysCount,
      icon: <Server className="h-5 w-5" />,
      path: '/cms/integrations/api-management'
    },
    {
      title: 'Gateway Pembayaran',
      status: paymentGatewaysCount > 0 ? 'active' : 'inactive' as 'active' | 'inactive' | 'error',
      count: paymentGatewaysCount,
      icon: <CreditCard className="h-5 w-5" />,
      path: '/cms/integrations/payment-gateways'
    },
    {
      title: 'SSO Providers',
      status: ssoProvidersCount > 0 ? 'active' : 'inactive' as 'active' | 'inactive' | 'error',
      count: ssoProvidersCount,
      icon: <Shield className="h-5 w-5" />,
      path: '/cms/integrations/sso'
    },
    {
      title: 'Integrasi Pihak Ketiga',
      status: thirdPartyCount > 0 ? 'active' : 'inactive' as 'active' | 'inactive' | 'error',
      count: thirdPartyCount,
      icon: <Globe className="h-5 w-5" />,
      path: '/cms/integrations/third-party'
    },
    {
      title: 'Webhooks',
      status: webhooksCount > 0 ? 'active' : 'inactive' as 'active' | 'inactive' | 'error',
      count: webhooksCount,
      icon: <Webhook className="h-5 w-5" />,
      path: '/cms/integrations/webhooks'
    }
  ];

  return (
    <div>
      <div className="mb-6">
        <Heading level="h2" className="text-xl font-bold mb-2">Status Integrasi</Heading>
        <Text className="text-gray-600 dark:text-white">
          Ringkasan status semua integrasi sistem
        </Text>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-gray-600 dark:text-white">
        {integrationStats.map((stat, index) => (
          <IntegrationStatus
            key={index}
            title={stat.title}
            status={stat.status}
            count={stat.count}
            icon={stat.icon}
            path={stat.path}
          />
        ))}
      </div>
    </div>
  );
};

export default IntegrationsDashboard;

/== components/organisms/LessonContent.tsx
import React from 'react';
import { LearningStep } from '../../store/learningStore';
import Button from '../atoms/Button';
import { CheckCircle } from 'lucide-react';

interface LessonContentProps {
  step: LearningStep;
  selectedOption: string | null;
  isAnswerCorrect: boolean | null;
  testPassed: boolean;
  onOptionSelect: (optionId: string) => void;
}

const LessonContent: React.FC<LessonContentProps> = ({
  step,
  selectedOption,
  isAnswerCorrect,
  testPassed,
  onOptionSelect
}) => {
  const renderQuizContent = () => (
    <div>
      <div className="prose max-w-none" dangerouslySetInnerHTML={{ __html: step.content }} />
      
      <div className="mt-8 space-y-4">
        {step.options?.map((option) => (
          <div 
            key={option.id}
            className={`p-4 rounded-lg border ${
              selectedOption === option.id
                ? option.isCorrect
                  ? 'bg-green-100 border-green-500'
                  : 'bg-red-100 border-red-500'
                : 'bg-white border-gray-300 hover:border-blue-500'
            } cursor-pointer transition-colors`}
            onClick={() => onOptionSelect(option.id)}
          >
            <div className="flex items-center">
              <div className="mr-4 font-medium">{option.id.toUpperCase()}:</div>
              <div className="font-mono">{option.text}</div>
            </div>
          </div>
        ))}
      </div>
      
      {isAnswerCorrect !== null && (
        <div className={`mt-6 p-4 rounded-lg ${isAnswerCorrect ? 'bg-green-100' : 'bg-red-100'}`}>
          <div className="flex items-center">
            {isAnswerCorrect ? (
              <CheckCircle className="h-5 w-5 text-green-600 mr-2" />
            ) : (
              <div className="h-5 w-5 text-red-600 mr-2">✗</div>
            )}
            <div className="font-medium">
              {isAnswerCorrect ? 'Correct Answer!' : 'Incorrect Answer!'}
            </div>
          </div>
        </div>
      )}
    </div>
  );

  const renderPracticeContent = () => (
    <div>
      <div className="prose max-w-none" dangerouslySetInnerHTML={{ __html: step.content }} />
      
      {testPassed && (
        <div className="mt-6 p-4 bg-green-100 rounded-lg">
          <div className="flex items-center">
            <CheckCircle className="h-5 w-5 text-green-600 mr-2" />
            <div className="font-medium">Great job! You've completed this practice exercise!</div>
          </div>
        </div>
      )}
    </div>
  );

  const renderLessonContent = () => (
    <div className="prose max-w-none" dangerouslySetInnerHTML={{ __html: step.content }} />
  );

  switch (step.type) {
    case 'quiz':
      return renderQuizContent();
    case 'practice':
      return renderPracticeContent();
    default:
      return renderLessonContent();
  }
};

export default LessonContent;

/== components/organisms/PricingSection.tsx
import React from 'react';
import { Info } from 'lucide-react';
import PricingToggle from '../atoms/PricingToggle';
import PricingCard from '../molecules/PricingCard';

interface PricingSectionProps {
  billingCycle: 'yearly' | 'monthly';
  onBillingCycleChange: (cycle: 'yearly' | 'monthly') => void;
  onSubscribe: (plan: string) => void;
}

const PricingSection: React.FC<PricingSectionProps> = ({
  billingCycle,
  onBillingCycleChange,
  onSubscribe
}) => {
  const plans = {
    free: {
      name: 'Free',
      description: 'Remains free forever',
      price: 0,
      features: [
        { name: 'Early chapters', included: true },
        { name: 'Limited challenges', included: true },
        { name: 'Unlimited AI guidance', included: false },
        { name: 'Practice projects', included: false },
        { name: 'Professional certifications', included: false },
        { name: 'Unlimited coding playground', included: false }
      ]
    },
    premium: {
      name: 'Premium',
      description: 'Access to everything',
      monthlyPrice: 48194,
      yearlyPrice: 578317,
      features: [
        { name: 'Full course catalog', included: true },
        { name: 'Coding challenges', included: true },
        { name: 'Unlimited AI guidance', included: true },
        { name: 'Practice projects', included: true },
        { name: 'Interview preparation courses', included: true },
        { name: 'Professional certifications', included: true },
        { name: 'Unlimited coding playground', included: true }
      ]
    },
    lifetime: {
      name: 'Lifetime',
      description: 'Access to PRO forever',
      price: 1923097,
      features: [
        { name: 'Everything in Premium plus:', included: true },
        { name: 'Lifetime access', included: true },
        { name: 'No recurring payments', included: true }
      ]
    }
  };

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
      <div className="text-center">
        <h1 className="text-4xl font-bold text-gray-900 mb-4">
          Choose the best plan for you.
        </h1>
        
        <div className="flex justify-center items-center space-x-4 mb-8">
          <PricingToggle
            value={billingCycle}
            onChange={onBillingCycleChange}
          />
          {billingCycle === 'yearly' && (
            <span className="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
              Save 66%
            </span>
          )}
        </div>

        <div className="flex items-center justify-center text-sm text-gray-600 mb-12">
          <Info className="h-4 w-4 mr-2" />
          Price discounted based on your region
        </div>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
        <PricingCard
          name={plans.free.name}
          description={plans.free.description}
          price={plans.free.price}
          period="month"
          features={plans.free.features}
          onSubscribe={() => onSubscribe('free')}
          buttonText="Start for free"
          buttonVariant="outline"
        />

        <PricingCard
          name={plans.premium.name}
          description={plans.premium.description}
          price={billingCycle === 'yearly' ? plans.premium.yearlyPrice : plans.premium.monthlyPrice}
          period={billingCycle === 'yearly' ? 'year' : 'month'}
          features={plans.premium.features}
          popular={true}
          onSubscribe={() => onSubscribe('premium')}
          buttonText="Get premium"
        />

        <PricingCard
          name={plans.lifetime.name}
          description={plans.lifetime.description}
          price={plans.lifetime.price}
          features={plans.lifetime.features}
          onSubscribe={() => onSubscribe('lifetime')}
          buttonText="Get lifetime access"
          buttonVariant="secondary"
        />
      </div>
    </div>
  );
};

export default PricingSection;

/== components/organisms/RelatedCourses.tsx
import React from 'react';
import Card from '../atoms/Card';
import Button from '../atoms/Button';

interface RelatedCoursesProps {
  courses: {
    title: string;
    description: string;
    image: string;
    link: string;
  }[];
}

const RelatedCourses: React.FC<RelatedCoursesProps> = ({ courses }) => {
  return (
    <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
      {courses.map((course, index) => (
        <Card key={index} className="overflow-hidden">
          <img
            src={course.image}
            alt={course.title}
            className="w-full h-48 object-cover"
          />
          <div className="p-6">
            <h3 className="text-xl font-bold text-gray-900 mb-2">{course.title}</h3>
            <p className="text-gray-600 mb-4">{course.description}</p>
            <Button
              variant="primary"
              onClick={() => window.location.href = course.link}
            >
              View Course
            </Button>
          </div>
        </Card>
      ))}
    </div>
  );
};

export default RelatedCourses;

/== components/organisms/RevenueAnalytics.tsx
import React, { useState } from "react";
import Button from "../atoms/Button";
import Card from "../atoms/Card";
import Heading from "../atoms/Heading";
import Input from "../atoms/Input";
import Select from "../atoms/Select";
import { 
  KpiMetric,
  DemographicItem,
  CohortData,
  DiscountData,
  MarketingChannel,
  SelectOption,
  ChartDataItem,
  TableDataItem
} from "../../types";

const RevenueAnalytics: React.FC = () => {
    // State declarations
    const [activeTab, setActiveTab] = useState<string>('overview');
    const [period, setPeriod] = useState<string>('monthly');
    const [dataView, setDataView] = useState<string>('chart');
    const [selectedMetric, setSelectedMetric] = useState<string>('revenue');
    const [showAnomalyAlert, setShowAnomalyAlert] = useState<boolean>(true);
    const [startDate, setStartDate] = useState<string>("2023-01-01");
    const [endDate, setEndDate] = useState<string>("2023-12-31");
    
    // Pilihan period filter
    const periodOptions: SelectOption[] = [
      { value: 'daily', label: 'Harian' },
      { value: 'weekly', label: 'Mingguan' },
      { value: 'monthly', label: 'Bulanan' },
      { value: 'quarterly', label: 'Kuartalan' },
      { value: 'yearly', label: 'Tahunan' }
    ];
    
    // Data untuk KPI metrics
    const kpiMetrics: KpiMetric[] = [
      { 
        name: 'MRR', 
        value: 'Rp 42.500.000', 
        trend: '+8.5%', 
        description: 'Monthly Recurring Revenue' 
      },
      { 
        name: 'LTV', 
        value: 'Rp 1.250.000', 
        trend: '+12.2%', 
        description: 'Lifetime Value' 
      },
      { 
        name: 'CAC', 
        value: 'Rp 320.000', 
        trend: '-5.1%', 
        description: 'Customer Acquisition Cost' 
      },
      { 
        name: 'ARPU', 
        value: 'Rp 175.000', 
        trend: '+3.2%', 
        description: 'Average Revenue Per User' 
      }
    ];
    
    // Data untuk chart
    const chartData: ChartDataItem[] = [
      { month: "Jan", value: 65 },
      { month: "Feb", value: 59 },
      { month: "Mar", value: 80 },
      { month: "Apr", value: 81 },
      { month: "Mei", value: 56 },
      { month: "Jun", value: 55 },
      { month: "Jul", value: 40 },
      { month: "Ags", value: 70 },
      { month: "Sep", value: 90 },
      { month: "Okt", value: 75 },
      { month: "Nov", value: 85 },
      { month: "Des", value: 100 },
    ];
    
    // Data untuk table view
    const tableData: TableDataItem[] = [
      { month: "Jan", revenue: 9750000, growth: "+5.2%", newCustomers: 85 },
      { month: "Feb", revenue: 8850000, growth: "-9.2%", newCustomers: 72 },
      { month: "Mar", revenue: 12000000, growth: "+35.6%", newCustomers: 124 },
      { month: "Apr", revenue: 12150000, growth: "+1.3%", newCustomers: 118 },
      { month: "Mei", revenue: 8400000, growth: "-30.9%", newCustomers: 95 },
      { month: "Jun", revenue: 8250000, growth: "-1.8%", newCustomers: 89 },
      { month: "Jul", revenue: 6000000, growth: "-27.3%", newCustomers: 68 },
      { month: "Ags", revenue: 10500000, growth: "+75.0%", newCustomers: 112 },
      { month: "Sep", revenue: 13500000, growth: "+28.6%", newCustomers: 139 },
      { month: "Okt", revenue: 11250000, growth: "-16.7%", newCustomers: 108 },
      { month: "Nov", revenue: 12750000, growth: "+13.3%", newCustomers: 125 },
      { month: "Des", revenue: 15000000, growth: "+17.6%", newCustomers: 145 },
    ];
    
    // Data untuk demografi
    const demographicData: DemographicItem[] = [
      { location: 'Jakarta', percentage: 35, revenue: 44012500 },
      { location: 'Bandung', percentage: 15, revenue: 18862500 },
      { location: 'Surabaya', percentage: 12, revenue: 15090000 },
      { location: 'Yogyakarta', percentage: 10, revenue: 12575000 },
      { location: 'Medan', percentage: 8, revenue: 10060000 },
      { location: 'Other', percentage: 20, revenue: 25150000 }
    ];
    
    // Data untuk analisis kohort
    const cohortData: CohortData[] = [
      { month: 'Jan 2023', m1: '100%', m2: '85%', m3: '72%', m4: '68%', m5: '65%', m6: '62%' },
      { month: 'Feb 2023', m1: '100%', m2: '82%', m3: '75%', m4: '70%', m5: '68%', m6: '65%' },
      { month: 'Mar 2023', m1: '100%', m2: '88%', m3: '80%', m4: '76%', m5: '72%', m6: '70%' },
      { month: 'Apr 2023', m1: '100%', m2: '85%', m3: '78%', m4: '73%', m5: '70%', m6: '-' },
      { month: 'May 2023', m1: '100%', m2: '87%', m3: '80%', m4: '75%', m5: '-', m6: '-' },
      { month: 'Jun 2023', m1: '100%', m2: '84%', m3: '75%', m4: '-', m5: '-', m6: '-' },
    ];
    
    // Data untuk efektivitas diskon
    const discountData: DiscountData[] = [
      { name: 'WELCOME25', redemptions: 450, revenue: 15750000, avgOrder: 350000 },
      { name: 'BUNDLE10', redemptions: 320, revenue: 25600000, avgOrder: 800000 },
      { name: 'FLASH50', redemptions: 280, revenue: 7000000, avgOrder: 250000 },
      { name: 'SUMMER20', redemptions: 210, revenue: 10500000, avgOrder: 500000 },
    ];
    
    // Data untuk channel marketing
    const marketingData: MarketingChannel[] = [
      { channel: 'Organic Search', visits: 15200, conversions: 380, convRate: '2.5%', revenue: 38000000, roi: '650%' },
      { channel: 'Paid Search', visits: 8500, conversions: 255, convRate: '3.0%', revenue: 25500000, roi: '320%' },
      { channel: 'Social Media', visits: 12600, conversions: 189, convRate: '1.5%', revenue: 18900000, roi: '210%' },
      { channel: 'Email', visits: 7800, conversions: 312, convRate: '4.0%', revenue: 31200000, roi: '780%' },
      { channel: 'Referral', visits: 4200, conversions: 168, convRate: '4.0%', revenue: 16800000, roi: '540%' },
    ];
    
    // Helper functions
    const formatCurrency = (value: number): string => {
      return `Rp ${value.toLocaleString('id-ID')}`;
    };
    
    // Event handlers
    const handleTabChange = (tab: string): void => {
      setActiveTab(tab);
    };
    
    const toggleDataView = (): void => {
      setDataView(dataView === 'chart' ? 'table' : 'chart');
    };
    return (
        <div className="p-4 md:p-6 lg:p-8 dark:bg-gray-900">
          {/* Header dan tools */}
          <div className="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
            <Heading level={2} className="text-gray-900 dark:text-white mb-4 md:mb-0">Analitik Pendapatan</Heading>
            
            <div className="flex items-center space-x-3">
              <Button 
                variant="outline" 
                className="text-sm py-1 px-3 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700"
                onClick={toggleDataView}
              >
                <span className="flex items-center">
                  {dataView === 'chart' ? (
                    <>
                      <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
                      </svg>
                      Tabel
                    </>
                  ) : (
                    <>
                      <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                      </svg>
                      Grafik
                    </>
                  )}
                </span>
              </Button>
              
              <div className="dropdown relative">
                <Button 
                  variant="outline" 
                  className="text-sm py-1 px-3 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700"
                >
                  <span className="flex items-center">
                    <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                    </svg>
                    Ekspor
                    <svg className="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 9l-7 7-7-7" />
                    </svg>
                  </span>
                </Button>
                {/* Dropdown menu untuk ekspor */}
                <div className="hidden absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg z-10 border border-gray-200 dark:border-gray-700">
                  <ul className="py-1">
                    <li>
                      <button className="block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700">
                        Ekspor CSV
                      </button>
                    </li>
                    <li>
                      <button className="block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700">
                        Ekspor Excel
                      </button>
                    </li>
                    <li>
                      <button className="block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700">
                        Ekspor PDF
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          
          {/* Anomaly Alert */}
          {showAnomalyAlert && (
            <div className="mb-6 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 dark:border-yellow-600 p-4 rounded">
              <div className="flex items-start">
                <div className="flex-shrink-0">
                  <svg className="h-5 w-5 text-yellow-400 dark:text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                  </svg>
                </div>
                <div className="ml-3">
                  <h3 className="text-sm font-medium text-yellow-800 dark:text-yellow-200">Deteksi Anomali</h3>
                  <div className="mt-1 text-sm text-yellow-700 dark:text-yellow-300">
                    Terjadi peningkatan pendapatan 75% pada Agustus 2023 dibandingkan bulan sebelumnya. Ini mungkin terkait dengan peluncuran bundle Web Development.
                  </div>
                  <div className="mt-2">
                    <Button 
                      size="sm" 
                      variant="outline"
                      className="text-xs py-1 px-2 dark:border-yellow-600 dark:text-yellow-300 dark:hover:bg-yellow-900/40"
                      onClick={() => setShowAnomalyAlert(false)}
                    >
                      Dismiss
                    </Button>
                  </div>
                </div>
              </div>
            </div>
          )}
          
          {/* Tab Navigation */}
          <div className="border-b border-gray-200 dark:border-gray-700 mb-6 overflow-x-auto">
            <ul className="flex flex-nowrap -mb-px whitespace-nowrap">
              {[
                { id: 'overview', label: 'Ikhtisar' },
                { id: 'metrics', label: 'Metrik Kunci' },
                { id: 'product', label: 'Analisis Produk' },
                { id: 'demographic', label: 'Demografis' },
                { id: 'discount', label: 'Efektivitas Diskon' },
                { id: 'marketing', label: 'ROI Pemasaran' },
                { id: 'advanced', label: 'Pelaporan Lanjutan' }
              ].map((tab) => (
                <li key={tab.id} className="mr-2">
                  <button
                    className={`inline-block py-3 px-4 text-sm font-medium border-b-2 rounded-t-lg ${
                      activeTab === tab.id
                        ? 'border-indigo-600 text-indigo-600 dark:border-indigo-500 dark:text-indigo-500'
                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'
                    }`}
                    onClick={() => handleTabChange(tab.id)}
                  >
                    {tab.label}
                  </button>
                </li>
              ))}
            </ul>
          </div>
          
          {/* Filter Controls */}
          <div className="flex flex-col md:flex-row md:items-end gap-3 md:gap-4 my-6 bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
            <div className="flex-1 grid grid-cols-1 md:grid-cols-3 gap-4">
              <Input 
                type="date" 
                label="Tanggal Mulai" 
                value={startDate}
                onChange={(e) => setStartDate(e.target.value)}
                className="w-full dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"
              />
              <Input 
                type="date" 
                label="Tanggal Akhir" 
                value={endDate}
                onChange={(e) => setEndDate(e.target.value)}
                className="w-full dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"
              />
              <Select
                label="Periode"
                value={period}
                onChange={(e) => setPeriod(e.target.value)}
                className="w-full dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"
                options={periodOptions}
              />
            </div>
            <Button className="mt-2 md:mt-0 w-full md:w-auto dark:bg-indigo-600 dark:hover:bg-indigo-700">
              Terapkan Filter
            </Button>
          </div>
           {/* Overview Tab Content */}
      {activeTab === 'overview' && (
        <>
          {/* Stats cards */}
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 mb-6">
            <Card className="p-4 md:p-5 dark:bg-gray-800 dark:border-gray-700 shadow-md hover:shadow-lg transition-shadow">
              <Heading level={4} className="text-gray-700 dark:text-gray-300">Total Pendapatan</Heading>
              <div className="text-2xl font-bold mt-2 text-gray-900 dark:text-white">Rp 125.750.000</div>
              <div className="text-green-600 dark:text-green-400 mt-1 flex items-center">
                <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
                </svg>
                +12.5% dari periode sebelumnya
              </div>
            </Card>
            
            <Card className="p-4 md:p-5 dark:bg-gray-800 dark:border-gray-700 shadow-md hover:shadow-lg transition-shadow">
              <Heading level={4} className="text-gray-700 dark:text-gray-300">Langganan Aktif</Heading>
              <div className="text-2xl font-bold mt-2 text-gray-900 dark:text-white">1,250</div>
              <div className="text-green-600 dark:text-green-400 mt-1 flex items-center">
                <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
                </svg>
                +8.2% dari periode sebelumnya
              </div>
            </Card>
            
            <Card className="p-4 md:p-5 dark:bg-gray-800 dark:border-gray-700 shadow-md hover:shadow-lg transition-shadow">
              <Heading level={4} className="text-gray-700 dark:text-gray-300">Pendapatan per Kursus</Heading>
              <div className="text-2xl font-bold mt-2 text-gray-900 dark:text-white">Rp 2.450.000</div>
              <div className="text-green-600 dark:text-green-400 mt-1 flex items-center">
                <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
                </svg>
                +5.7% dari periode sebelumnya
              </div>
            </Card>
          </div>

          {/* Revenue chart */}
          <Card className="mb-6 dark:bg-gray-800 dark:border-gray-700 shadow-md">
            <div className="p-4 md:p-6">
              <div className="flex justify-between items-center mb-6">
                <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-0">
                  Tren Pendapatan {period === 'monthly' ? 'Bulanan' : period === 'daily' ? 'Harian' : period === 'weekly' ? 'Mingguan' : period === 'quarterly' ? 'Kuartalan' : 'Tahunan'}
                </Heading>
                <div className="flex items-center space-x-2">
                  <select 
                    value={selectedMetric}
                    onChange={(e) => setSelectedMetric(e.target.value)}
                    className="text-sm border border-gray-300 rounded-md p-1 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200"
                  >
                    <option value="revenue">Pendapatan</option>
                    <option value="customers">Pelanggan</option>
                    <option value="orders">Pesanan</option>
                  </select>
                  <div className="text-sm text-gray-500 dark:text-gray-400">2023</div>
                </div>
              </div>
              
              {dataView === 'chart' ? (
                <div className="relative h-64 md:h-80">
                  {/* Y-axis labels */}
                  <div className="absolute top-0 left-0 h-full flex flex-col justify-between text-xs text-gray-500 dark:text-gray-400 py-2">
                    <div>Rp 15M</div>
                    <div>Rp 10M</div>
                    <div>Rp 5M</div>
                    <div>Rp 0</div>
                  </div>
                  
                  {/* Chart */}
                  <div className="ml-12 h-full flex items-end space-x-1 md:space-x-2">
                    {chartData.map((item) => (
                      <div key={item.month} className="flex-1 flex flex-col items-center">
                        <div className="group relative w-full">
                          <div 
                            className="w-4/5 mx-auto bg-emerald-500 dark:bg-emerald-600 hover:bg-emerald-600 dark:hover:bg-emerald-500 rounded-t transition-all cursor-pointer"
                            style={{ height: `${item.value * 2}px` }}
                          >
                            {/* Tooltip */}
                            <div className="opacity-0 group-hover:opacity-100 absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap transition-opacity">
                              Rp {(item.value * 150000).toLocaleString('id-ID')}
                            </div>
                          </div>
                        </div>
                        <div className="mt-2 text-xs text-gray-500 dark:text-gray-400">{item.month}</div>
                      </div>
                    ))}
                  </div>
                </div>
              ) : (
                <div className="overflow-x-auto">
                  <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                    <thead>
                      <tr>
                        <th className="px-6 py-3 bg-gray-50 dark:bg-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                          Bulan
                        </th>
                        <th className="px-6 py-3 bg-gray-50 dark:bg-gray-700 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                          Pendapatan
                        </th>
                        <th className="px-6 py-3 bg-gray-50 dark:bg-gray-700 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                          Pertumbuhan
                        </th>
                        <th className="px-6 py-3 bg-gray-50 dark:bg-gray-700 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                          Pelanggan Baru
                        </th>
                      </tr>
                    </thead>
                    <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                      {tableData.map((item, index) => (
                        <tr key={index} className="hover:bg-gray-50 dark:hover:bg-gray-700">
                          <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">
                            {item.month}
                          </td>
                          <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right">
                            Rp {item.revenue.toLocaleString('id-ID')}
                          </td>
                          <td className={`px-6 py-4 whitespace-nowrap text-sm ${
                            item.growth.startsWith('+') ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'
                          } text-right`}>
                            {item.growth}
                          </td>
                          <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right">
                            {item.newCustomers}
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              )}
            </div>
          </Card>

          {/* Bottom cards */}
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6">
            <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md">
              <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">Sumber Pendapatan</Heading>
              <div className="space-y-4">
                <div>
                  <div className="flex justify-between items-center mb-1">
                    <div className="text-sm font-medium text-gray-700 dark:text-gray-300">Langganan</div>
                    <div className="text-sm font-medium text-gray-700 dark:text-gray-300">65%</div>
                  </div>
                  <div className="h-2 bg-gray-200 dark:bg-gray-700 rounded-full">
                    <div className="h-2 bg-emerald-500 dark:bg-emerald-600 rounded-full" style={{ width: "65%" }} />
                  </div>
                </div>
                
                <div>
                  <div className="flex justify-between items-center mb-1">
                    <div className="text-sm font-medium text-gray-700 dark:text-gray-300">Kursus Individual</div>
                    <div className="text-sm font-medium text-gray-700 dark:text-gray-300">25%</div>
                  </div>
                  <div className="h-2 bg-gray-200 dark:bg-gray-700 rounded-full">
                    <div className="h-2 bg-blue-500 dark:bg-blue-600 rounded-full" style={{ width: "25%" }} />
                  </div>
                </div>
                
                <div>
                  <div className="flex justify-between items-center mb-1">
                    <div className="text-sm font-medium text-gray-700 dark:text-gray-300">Bundle Kursus</div>
                    <div className="text-sm font-medium text-gray-700 dark:text-gray-300">10%</div>
                  </div>
                  <div className="h-2 bg-gray-200 dark:bg-gray-700 rounded-full">
                    <div className="h-2 bg-purple-500 dark:bg-purple-600 rounded-full" style={{ width: "10%" }} />
                  </div>
                </div>
              </div>
            </Card>
            
            <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md">
              <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">Top Produk</Heading>
              <div className="divide-y divide-gray-200 dark:divide-gray-700">
                <div className="flex justify-between items-center py-3">
                  <div className="text-sm font-medium text-gray-800 dark:text-gray-200">
                    <span className="text-gray-500 dark:text-gray-400 mr-2">1.</span>
                    Paket Premium
                  </div>
                  <div className="text-sm font-medium text-gray-800 dark:text-gray-200">Rp 45.500.000</div>
                </div>
                <div className="flex justify-between items-center py-3">
                  <div className="text-sm font-medium text-gray-800 dark:text-gray-200">
                    <span className="text-gray-500 dark:text-gray-400 mr-2">2.</span>
                    Web Development Bundle
                  </div>
                  <div className="text-sm font-medium text-gray-800 dark:text-gray-200">Rp 32.750.000</div>
                </div>
                <div className="flex justify-between items-center py-3">
                  <div className="text-sm font-medium text-gray-800 dark:text-gray-200">
                    <span className="text-gray-500 dark:text-gray-400 mr-2">3.</span>
                    JavaScript Masterclass
                  </div>
                  <div className="text-sm font-medium text-gray-800 dark:text-gray-200">Rp 28.900.000</div>
                </div>
                <div className="flex justify-between items-center py-3">
                  <div className="text-sm font-medium text-gray-800 dark:text-gray-200">
                    <span className="text-gray-500 dark:text-gray-400 mr-2">4.</span>
                    Data Science Complete
                  </div>
                  <div className="text-sm font-medium text-gray-800 dark:text-gray-200">Rp 18.600.000</div>
                </div>
              </div>
            </Card>
          </div>
        </>
      )}
      
      {/* Metrics Tab Content */}
      {activeTab === 'metrics' && (
        <>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6">
            {kpiMetrics.map((metric, index) => (
              <Card key={index} className="p-4 md:p-5 dark:bg-gray-800 dark:border-gray-700 shadow-md hover:shadow-lg transition-shadow">
                <div className="flex items-center justify-between mb-2">
                  <Heading level={4} className="text-gray-700 dark:text-gray-300">{metric.name}</Heading>
                  <div className="text-xs text-gray-500 dark:text-gray-400">{metric.description}</div>
                </div>
                <div className="text-2xl font-bold mt-2 text-gray-900 dark:text-white">{metric.value}</div>
                <div className={`${
                  metric.trend.startsWith('+') ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'
                } mt-1 flex items-center`}>
                  <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d={
                      metric.trend.startsWith('+') 
                        ? "M5 10l7-7m0 0l7 7m-7-7v18" 
                        : "M19 14l-7 7m0 0l-7-7m7 7V3"
                    } />
                  </svg>
                  {metric.trend} dari periode sebelumnya
                </div>
              </Card>
            ))}
          </div>
          
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6">
            <Card className="dark:bg-gray-800 dark:border-gray-700 shadow-md overflow-hidden">
              <div className="p-4 md:p-6 border-b border-gray-200 dark:border-gray-700">
                <Heading level={4} className="text-gray-700 dark:text-gray-300">Retensi vs Akuisisi</Heading>
              </div>
              <div className="p-4 md:p-6">
                <div className="h-60 md:h-72 relative">
                  {/* Placeholder for Retention vs Acquisition chart */}
                  <div className="absolute inset-0 flex items-center justify-center text-gray-400 dark:text-gray-500">
                    Chart akan ditampilkan di sini
                  </div>
                </div>
              </div>
            </Card>
            
            <Card className="dark:bg-gray-800 dark:border-gray-700 shadow-md overflow-hidden">
              <div className="p-4 md:p-6 border-b border-gray-200 dark:border-gray-700">
                <Heading level={4} className="text-gray-700 dark:text-gray-300">Proyeksi Pendapatan</Heading>
              </div>
              <div className="p-4 md:p-6">
                <div className="h-60 md:h-72 relative">
                  {/* Placeholder for Revenue Projection chart */}
                  <div className="absolute inset-0 flex items-center justify-center text-gray-400 dark:text-gray-500">
                    Chart akan ditampilkan di sini
                  </div>
                </div>
              </div>
            </Card>
          </div>
        </>
      )}
            {/* Demographic Tab Content */}
            {activeTab === 'demographic' && (
        <>
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6">
            <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md">
              <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">Pendapatan berdasarkan Lokasi</Heading>
              <div className="space-y-4">
                {demographicData.map((item, index) => (
                  <div key={index}>
                    <div className="flex justify-between items-center mb-1">
                      <div className="text-sm font-medium text-gray-700 dark:text-gray-300">
                        {item.location}
                      </div>
                      <div className="text-sm font-medium text-gray-700 dark:text-gray-300">
                        {item.percentage}% - {formatCurrency(item.revenue)}
                      </div>
                    </div>
                    <div className="h-2 bg-gray-200 dark:bg-gray-700 rounded-full">
                      <div 
                        className="h-2 bg-indigo-500 dark:bg-indigo-600 rounded-full" 
                        style={{ width: `${item.percentage}%` }}
                      />
                    </div>
                  </div>
                ))}
              </div>
            </Card>
            
            <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md">
              <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">Pendapatan berdasarkan Kelompok Usia</Heading>
              <div className="h-60 md:h-72 relative">
                {/* Placeholder for Age Group chart */}
                <div className="absolute inset-0 flex items-center justify-center text-gray-400 dark:text-gray-500">
                  Chart akan ditampilkan di sini
                </div>
              </div>
            </Card>
          </div>
          
          <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md mb-6">
            <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">Peta Distribusi Pendapatan</Heading>
            <div className="h-96 relative">
              {/* Placeholder for Revenue Distribution Map */}
              <div className="absolute inset-0 flex items-center justify-center text-gray-400 dark:text-gray-500">
                Peta akan ditampilkan di sini
              </div>
            </div>
          </Card>
        </>
      )}

            {/* Product Analysis Tab Content */}
            {activeTab === 'product' && (
        <>
          <div className="grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 mb-6">
            <Card className="p-4 md:p-5 dark:bg-gray-800 dark:border-gray-700 shadow-md hover:shadow-lg transition-shadow">
              <Heading level={4} className="text-gray-700 dark:text-gray-300">Total Kursus</Heading>
              <div className="text-2xl font-bold mt-2 text-gray-900 dark:text-white">35</div>
              <div className="text-green-600 dark:text-green-400 mt-1 flex items-center">
                <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
                </svg>
                +4 dari periode sebelumnya
              </div>
            </Card>
            
            <Card className="p-4 md:p-5 dark:bg-gray-800 dark:border-gray-700 shadow-md hover:shadow-lg transition-shadow">
              <Heading level={4} className="text-gray-700 dark:text-gray-300">Total Pendaftaran</Heading>
              <div className="text-2xl font-bold mt-2 text-gray-900 dark:text-white">3,785</div>
              <div className="text-green-600 dark:text-green-400 mt-1 flex items-center">
                <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
                </svg>
                +15.2% dari periode sebelumnya
              </div>
            </Card>
            
            <Card className="p-4 md:p-5 dark:bg-gray-800 dark:border-gray-700 shadow-md hover:shadow-lg transition-shadow">
              <Heading level={4} className="text-gray-700 dark:text-gray-300">Tingkat Penyelesaian</Heading>
              <div className="text-2xl font-bold mt-2 text-gray-900 dark:text-white">68.4%</div>
              <div className="text-green-600 dark:text-green-400 mt-1 flex items-center">
                <svg className="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
                </svg>
                +3.7% dari periode sebelumnya
              </div>
            </Card>
          </div>
          
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6">
            <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md">
              <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">Pendapatan per Kursus</Heading>
              <div className="overflow-x-auto">
                <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                  <thead>
                    <tr>
                      <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                        Kursus
                      </th>
                      <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                        Pendapatan
                      </th>
                      <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                        Pendaftaran
                      </th>
                      <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                        Penyelesaian
                      </th>
                    </tr>
                  </thead>
                  <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                    {[
                      { name: "JavaScript Masterclass", revenue: 28900000, enrollments: 125, completion: "87%" },
                      { name: "React Framework", revenue: 25600000, enrollments: 110, completion: "82%" },
                      { name: "Data Science Complete", revenue: 18600000, enrollments: 85, completion: "75%" },
                      { name: "Flutter Development", revenue: 16400000, enrollments: 72, completion: "68%" },
                      { name: "Python Programming", revenue: 14250000, enrollments: 65, completion: "79%" },
                    ].map((item, index) => (
                      <tr key={index} className="hover:bg-gray-50 dark:hover:bg-gray-700">
                        <td className="px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">
                          {item.name}
                        </td>
                        <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right">
                          {formatCurrency(item.revenue)}
                        </td>
                        <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right">
                          {item.enrollments}
                        </td>
                        <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right">
                          {item.completion}
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </Card>
            
            <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md">
              <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">Popularitas Kategori</Heading>
              <div className="space-y-4">
                {[
                  { name: "Web Development", percentage: 35, enrollment: 1325 },
                  { name: "Data Science", percentage: 25, enrollment: 945 },
                  { name: "Mobile Development", percentage: 18, enrollment: 685 },
                  { name: "Cloud Computing", percentage: 12, enrollment: 455 },
                  { name: "DevOps", percentage: 10, enrollment: 375 },
                ].map((item, index) => (
                  <div key={index}>
                    <div className="flex justify-between items-center mb-1">
                      <div className="text-sm font-medium text-gray-700 dark:text-gray-300">
                        {item.name}
                      </div>
                      <div className="text-sm font-medium text-gray-700 dark:text-gray-300">
                        {item.percentage}% ({item.enrollment})
                      </div>
                    </div>
                    <div className="h-2 bg-gray-200 dark:bg-gray-700 rounded-full">
                      <div 
                        className="h-2 bg-indigo-500 dark:bg-indigo-600 rounded-full" 
                        style={{ width: `${item.percentage}%` }}
                      />
                    </div>
                  </div>
                ))}
              </div>
            </Card>
          </div>
          
          <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md mb-6">
            <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">Aktivitas Pengguna per Kursus</Heading>
            <div className="h-80 relative">
              {/* Placeholder for User Activity chart */}
              <div className="absolute inset-0 flex items-center justify-center text-gray-400 dark:text-gray-500">
                Grafik aktivitas pengguna akan ditampilkan di sini
              </div>
            </div>
          </Card>
        </>
      )}
      {/* Discount Effectiveness Tab Content */}
      {activeTab === 'discount' && (
        <>
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6">
            <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md">
              <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">Efektivitas Kupon</Heading>
              <div className="overflow-x-auto">
                <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                  <thead>
                    <tr>
                      <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                        Kode Kupon
                      </th>
                      <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                        Penggunaan
                      </th>
                      <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                        Pendapatan
                      </th>
                      <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                        Rata-Rata Order
                      </th>
                    </tr>
                  </thead>
                  <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                    {discountData.map((item, index) => (
                      <tr key={index} className="hover:bg-gray-50 dark:hover:bg-gray-700">
                        <td className="px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">
                          {item.name}
                        </td>
                        <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right">
                          {item.redemptions}
                        </td>
                        <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right">
                          {formatCurrency(item.revenue)}
                        </td>
                        <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right">
                          {formatCurrency(item.avgOrder)}
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </Card>
            
            <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md">
              <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">Perbandingan Konversi dengan/tanpa Diskon</Heading>
              <div className="h-60 md:h-72 relative">
                {/* Placeholder for Conversion Comparison chart */}
                <div className="absolute inset-0 flex items-center justify-center text-gray-400 dark:text-gray-500">
                  Chart perbandingan akan ditampilkan di sini
                </div>
              </div>
            </Card>
          </div>
          
          <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md mb-6">
            <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">Dampak Diskon pada Margin</Heading>
            <div className="h-60 md:h-72 relative">
              {/* Placeholder for Discount Impact chart */}
              <div className="absolute inset-0 flex items-center justify-center text-gray-400 dark:text-gray-500">
                Chart dampak diskon akan ditampilkan di sini
              </div>
            </div>
          </Card>
        </>
      )}
         {/* Marketing ROI Tab Content */}
         {activeTab === 'marketing' && (
        <>
          <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md mb-6">
            <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">ROI Pemasaran berdasarkan Channel</Heading>
            <div className="overflow-x-auto">
              <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                <thead>
                  <tr>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Channel
                    </th>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Kunjungan
                    </th>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Konversi
                    </th>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Rate Konversi
                    </th>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Pendapatan
                    </th>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      ROI
                    </th>
                  </tr>
                </thead>
                <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                  {marketingData.map((item, index) => (
                    <tr key={index} className="hover:bg-gray-50 dark:hover:bg-gray-700">
                      <td className="px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">
                        {item.channel}
                      </td>
                      <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right">
                        {item.visits.toLocaleString()}
                      </td>
                      <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right">
                        {item.conversions.toLocaleString()}
                      </td>
                      <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right">
                        {item.convRate}
                      </td>
                      <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right">
                        {formatCurrency(item.revenue)}
                      </td>
                      <td className="px-4 py-4 whitespace-nowrap text-sm font-medium text-green-600 dark:text-green-400 text-right">
                        {item.roi}
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </Card>
          
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6">
            <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md">
              <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">Alur Konversi</Heading>
              <div className="h-60 md:h-72 relative">
                {/* Placeholder for Conversion Funnel chart */}
                <div className="absolute inset-0 flex items-center justify-center text-gray-400 dark:text-gray-500">
                  Alur konversi akan ditampilkan di sini
                </div>
              </div>
            </Card>
            
            <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md">
              <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">Evolusi ROI dari Waktu ke Waktu</Heading>
              <div className="h-60 md:h-72 relative">
                {/* Placeholder for ROI evolution chart */}
                <div className="absolute inset-0 flex items-center justify-center text-gray-400 dark:text-gray-500">
                  Evolusi ROI akan ditampilkan di sini
                </div>
              </div>
            </Card>
          </div>
        </>
      )}
       {/* Advanced Reporting Tab Content */}
       {activeTab === 'advanced' && (
        <>
          <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md mb-6">
            <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">Analisis Kohort Retensi</Heading>
            <div className="overflow-x-auto">
              <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                <thead>
                  <tr>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Kohort
                    </th>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Bulan 1
                    </th>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Bulan 2
                    </th>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Bulan 3
                    </th>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Bulan 4
                    </th>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Bulan 5
                    </th>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Bulan 6
                    </th>
                  </tr>
                </thead>
                <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                  {cohortData.map((item, index) => (
                    <tr key={index} className="hover:bg-gray-50 dark:hover:bg-gray-700">
                      <td className="px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">
                        {item.month}
                      </td>
                      <td className="px-4 py-4 whitespace-nowrap text-sm text-center bg-green-50 dark:bg-green-900/20">
                        <span className="font-medium text-green-800 dark:text-green-400">{item.m1}</span>
                      </td>
                      <td className="px-4 py-4 whitespace-nowrap text-sm text-center bg-green-50/80 dark:bg-green-900/10">
                        <span className="font-medium text-green-700 dark:text-green-300">{item.m2}</span>
                      </td>
                      <td className="px-4 py-4 whitespace-nowrap text-sm text-center">
                        <span className="font-medium text-green-600 dark:text-green-400">{item.m3}</span>
                      </td>
                      <td className="px-4 py-4 whitespace-nowrap text-sm text-center">
                        <span className="font-medium text-green-500 dark:text-green-500">{item.m4}</span>
                      </td>
                      <td className="px-4 py-4 whitespace-nowrap text-sm text-center">
                        <span className="font-medium text-green-400 dark:text-green-600">{item.m5}</span>
                      </td>
                      <td className="px-4 py-4 whitespace-nowrap text-sm text-center">
                        <span className="font-medium text-green-300 dark:text-green-700">{item.m6}</span>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </Card>
          
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6">
            <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md">
              <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">Segmentasi Pendapatan</Heading>
              <div className="h-60 md:h-72 relative">
                {/* Placeholder for Revenue Segmentation chart */}
                <div className="absolute inset-0 flex items-center justify-center text-gray-400 dark:text-gray-500">
                  Segmentasi pendapatan akan ditampilkan di sini
                </div>
              </div>
            </Card>
            
            <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md">
              <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-4">Prediksi Arus Kas</Heading>
              <div className="h-60 md:h-72 relative">
                {/* Placeholder for Cash Flow prediction chart */}
                <div className="absolute inset-0 flex items-center justify-center text-gray-400 dark:text-gray-500">
                  Prediksi arus kas akan ditampilkan di sini
                </div>
              </div>
            </Card>
          </div>
          
          <Card className="p-4 md:p-6 dark:bg-gray-800 dark:border-gray-700 shadow-md mb-6">
            <div className="flex items-center justify-between mb-4">
              <Heading level={4} className="text-gray-700 dark:text-gray-300 mb-0">Pengingat Batas Waktu Langganan</Heading>
              <Button size="sm" variant="outline" className="text-xs py-1 px-2 dark:border-gray-600 dark:text-gray-300">
                Lihat Semua
              </Button>
            </div>
            <div className="overflow-x-auto">
              <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                <thead>
                  <tr>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Pelanggan
                    </th>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Paket
                    </th>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Berakhir Pada
                    </th>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Status
                    </th>
                    <th className="px-4 py-3 bg-gray-50 dark:bg-gray-700 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                      Aksi
                    </th>
                  </tr>
                </thead>
                <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                  {[
                    { id: 1, name: "Rizal Fakhri", package: "Premium Annual", expiry: "2023-08-15", status: "critical" },
                    { id: 2, name: "Siti Rahma", package: "Basic Monthly", expiry: "2023-08-22", status: "warning" },
                    { id: 3, name: "Budi Santoso", package: "Professional", expiry: "2023-09-05", status: "normal" },
                    { id: 4, name: "Dewi Lestari", package: "Premium Monthly", expiry: "2023-09-12", status: "normal" },
                  ].map((item, index) => (
                    <tr key={index} className="hover:bg-gray-50 dark:hover:bg-gray-700">
                      <td className="px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">
                        {item.name}
                      </td>
                      <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300">
                        {item.package}
                      </td>
                      <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 text-right">
                        {item.expiry}
                      </td>
                      <td className="px-4 py-4 whitespace-nowrap text-center">
                        <span className={`inline-flex px-2 text-xs font-semibold leading-5 rounded-full ${
                          item.status === 'critical'
                            ? 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300'
                            : item.status === 'warning'
                            ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300'
                            : 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300'
                        }`}>
                          {item.status === 'critical' ? 'Kritis' : item.status === 'warning' ? 'Perhatian' : 'Normal'}
                        </span>
                      </td>
                      <td className="px-4 py-4 whitespace-nowrap text-sm text-right">
                        <Button size="sm" className="text-xs py-1 px-2">
                          Kirim Pengingat
                        </Button>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </Card>
        </>
      )}
    </div>
  );
};

export default RevenueAnalytics;

/== components/organisms/RoadmapFlow.tsx
import React, { useCallback, useState } from 'react';
import ReactFlow, {
  Node,
  Edge,
  Background,
  Controls,
  MiniMap,
  useNodesState,
  useEdgesState,
  addEdge,
  Connection,
  MarkerType
} from 'reactflow';
import 'reactflow/dist/style.css';
import { useRoadmapStore } from '../../store/roadmapStore';
import { Check, Plus } from 'lucide-react';
import Button from '../atoms/Button';

interface RoadmapFlowProps {
  nodes: Node[];
  edges: Edge[];
  onNodeClick?: (nodeId: string) => void;
}

interface AddNodeModalProps {
  isOpen: boolean;
  onClose: () => void;
  onAdd: (title: string, type: 'primary' | 'secondary' | 'highlight') => void;
}

const AddNodeModal: React.FC<AddNodeModalProps> = ({ isOpen, onClose, onAdd }) => {
  const [title, setTitle] = useState('');
  const [type, setType] = useState<'primary' | 'secondary' | 'highlight'>('secondary');

  if (!isOpen) return null;

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    onAdd(title, type);
    setTitle('');
    onClose();
  };

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/50">
      <div className="bg-white dark:bg-gray-800 rounded-lg p-6 w-96">
        <h3 className="text-lg font-medium mb-4">Add New Node</h3>
        <form onSubmit={handleSubmit}>
          <div className="mb-4">
            <label className="block text-sm font-medium mb-1">Title</label>
            <input
              type="text"
              value={title}
              onChange={(e) => setTitle(e.target.value)}
              className="w-full px-3 py-2 border rounded-lg"
              required
            />
          </div>
          <div className="mb-4">
            <label className="block text-sm font-medium mb-1">Type</label>
            <select
              value={type}
              onChange={(e) => setType(e.target.value as any)}
              className="w-full px-3 py-2 border rounded-lg"
            >
              <option value="primary">Primary</option>
              <option value="secondary">Secondary</option>
              <option value="highlight">Highlight</option>
            </select>
          </div>
          <div className="flex justify-end space-x-2">
            <Button variant="outline" onClick={onClose}>Cancel</Button>
            <Button variant="primary" type="submit">Add Node</Button>
          </div>
        </form>
      </div>
    </div>
  );
};

const CustomNode = ({ data }: { data: any }) => (
  <div className="relative">
    <div className={`px-4 py-2 rounded-lg font-medium ${data.className}`} style={{ width: '180px' }}>
      {data.label}
      {data.isCompleted && (
        <div className="absolute -top-2 -right-2 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center">
          <Check className="h-3 w-3 text-white" />
        </div>
      )}
    </div>
  </div>
);

const nodeTypes = {
  custom: CustomNode,
};

const getNodeStyle = (type: 'primary' | 'secondary' | 'highlight') => {
  switch (type) {
    case 'primary':
      return 'bg-yellow-100 text-yellow-800 border-2 border-yellow-500';
    case 'highlight':
      return 'bg-purple-100 text-purple-800 border-2 border-purple-500';
    default:
      return 'bg-gray-100 text-gray-800 border-2 border-gray-500';
  }
};

const RoadmapFlow: React.FC<RoadmapFlowProps> = ({
  nodes: initialNodes,
  edges: initialEdges,
  onNodeClick
}) => {
  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);
  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);
  const { completedNodes, activeNode } = useRoadmapStore();
  const [isAddingNode, setIsAddingNode] = useState(false);
  const [isConnecting, setIsConnecting] = useState(false);

  // Update nodes to include completion status
  React.useEffect(() => {
    setNodes(
      initialNodes.map(node => ({
        ...node,
        type: 'custom',
        data: {
          ...node.data,
          isCompleted: completedNodes.includes(node.id),
          className: completedNodes.includes(node.id)
            ? 'bg-green-100 text-green-800 border-2 border-green-500'
            : node.id === activeNode
            ? 'bg-blue-100 text-blue-800 border-2 border-blue-500'
            : node.data.className
        }
      }))
    );
  }, [initialNodes, completedNodes, activeNode, setNodes]);

  const onConnect = useCallback(
    (params: Connection) => {
      const newEdge = {
        ...params,
        type: 'smoothstep',
        animated: false,
        style: { stroke: '#94a3b8', strokeWidth: 1 },
        markerEnd: {
          type: MarkerType.ArrowClosed,
          width: 20,
          height: 20,
          color: '#94a3b8',
        },
      };
      setEdges((eds) => addEdge(newEdge, eds));
    },
    [setEdges]
  );

  const handleNodeClick = (_: React.MouseEvent, node: Node) => {
    if (isConnecting) {
      setIsConnecting(false);
    } else {
      onNodeClick?.(node.id);
    }
  };

  const handleAddNode = (title: string, type: 'primary' | 'secondary' | 'highlight') => {
    // Get the center of the viewport
    const centerX = window.innerWidth / 2;
    const centerY = window.innerHeight / 2;
    
    // Create new node with consistent styling
    const newNode = {
      id: `node-${Date.now()}`,
      type: 'custom',
      position: { x: centerX - 90, y: centerY - 20 }, // Center the node, accounting for node width
      data: {
        label: title,
        className: getNodeStyle(type)
      },
      sourcePosition: 'right',
      targetPosition: 'left',
    };
    
    setNodes((nds) => [...nds, newNode]);
  };

  return (
    <div className="h-[800px] w-full bg-gray-50 dark:bg-gray-900 rounded-lg relative">
      <ReactFlow
        nodes={nodes}
        edges={edges}
        onNodesChange={onNodesChange}
        onEdgesChange={onEdgesChange}
        onConnect={onConnect}
        onNodeClick={handleNodeClick}
        nodeTypes={nodeTypes}
        fitView
        attributionPosition="bottom-right"
      >
        <Background />
        <Controls />
        <MiniMap
          nodeColor={(node) => {
            if (completedNodes.includes(node.id)) return '#22c55e';
            if (node.id === activeNode) return '#3b82f6';
            return '#94a3b8';
          }}
        />
      </ReactFlow>

      {/* Custom panel implementation */}
      <div className="absolute top-4 right-4 z-10">
        <div className="flex space-x-2">
          <Button
            variant="primary"
            onClick={() => setIsAddingNode(true)}
            className="flex items-center"
          >
            <Plus className="h-4 w-4 mr-1" />
            Add Node
          </Button>
          <Button
            variant={isConnecting ? 'primary' : 'outline'}
            onClick={() => setIsConnecting(!isConnecting)}
          >
            {isConnecting ? 'Cancel Connection' : 'Connect Nodes'}
          </Button>
        </div>
      </div>

      <AddNodeModal
        isOpen={isAddingNode}
        onClose={() => setIsAddingNode(false)}
        onAdd={handleAddNode}
      />
    </div>
  );
};

export default RoadmapFlow;

/== components/organisms/RoadmapGrid.tsx
import React from 'react';
import RoadmapSection from '../molecules/RoadmapSection';

interface RoadmapItem {
  id: string;
  title: string;
  isCompleted?: boolean;
  isActive?: boolean;
  type?: 'primary' | 'secondary' | 'highlight';
}

interface RoadmapSection {
  id: string;
  title: string;
  items: RoadmapItem[];
}

interface RoadmapGridProps {
  sections: RoadmapSection[];
  onItemClick?: (sectionId: string, itemId: string) => void;
}

const RoadmapGrid: React.FC<RoadmapGridProps> = ({
  sections,
  onItemClick
}) => {
  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {sections.map((section) => (
        <RoadmapSection
          key={section.id}
          title={section.title}
          items={section.items}
          onItemClick={(itemId) => onItemClick?.(section.id, itemId)}
        />
      ))}
    </div>
  );
};

export default RoadmapGrid;

/== components/organisms/RoadmapViewer.tsx
import React from 'react';
import { motion } from 'framer-motion';
import RoadmapNodeComponent from '../molecules/RoadmapNodeComponent';
import { RoadmapNode, useRoadmapStore } from '../../store/roadmapStore';

interface RoadmapViewerProps {
  nodes: RoadmapNode[];
  onNodeClick: (node: RoadmapNode) => void;
}

const RoadmapViewer: React.FC<RoadmapViewerProps> = ({
  nodes,
  onNodeClick
}) => {
  const { completedNodes, activeNode } = useRoadmapStore();

  const renderNode = (node: RoadmapNode) => {
    const isCompleted = completedNodes.includes(node.id);
    const isActive = activeNode === node.id;

    return (
      <div key={node.id} className="space-y-4">
        <RoadmapNodeComponent
          node={node}
          onClick={onNodeClick}
          isActive={isActive}
          isCompleted={isCompleted}
        />
        
        {node.children && node.children.length > 0 && (
          <div className="pl-8 space-y-4 border-l-2 border-gray-200">
            {node.children.map((child) => renderNode(child))}
          </div>
        )}
      </div>
    );
  };

  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      className="space-y-6 p-6"
    >
      {nodes.map((node) => renderNode(node))}
    </motion.div>
  );
};

export default RoadmapViewer;

/== components/organisms/SubmissionGuidance.tsx
import React, { useState } from 'react';
import { Trophy, Book, Target, Lightbulb, Library, MoreHorizontal } from 'lucide-react';
import SubmissionTab from '../molecules/SubmissionTab';
import CriteriaItem from '../molecules/CriteriaItem';
import SubmissionResource from '../molecules/SubmissionResource';

interface TabContentProps {
  type: 'introduction' | 'criteria' | 'evaluation' | 'resources' | 'tips' | 'others';
}

const TabContent: React.FC<TabContentProps> = ({ type }) => {
  switch (type) {
    case 'introduction':
      return (
        <div className="space-y-6">
          <div className="bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white">
            <h2 className="text-2xl font-bold mb-4">Welcome to Your Final Project!</h2>
            <p className="text-lg opacity-90">
              Congratulations on reaching this milestone! This project will challenge you to apply everything 
              you've learned about Go programming. You'll be building a real-world application that demonstrates 
              your mastery of key concepts.
            </p>
          </div>
          
          <div className="bg-white dark:bg-gray-800 rounded-lg p-6 space-y-4">
            <h3 className="text-xl font-semibold text-gray-900 dark:text-white">Project Overview</h3>
            <p className="text-gray-600 dark:text-gray-300">
              You'll be developing a complete web application that showcases your understanding of:
            </p>
            <ul className="space-y-2 text-gray-600 dark:text-gray-300">
              <li className="flex items-center">
                <span className="w-2 h-2 bg-blue-500 rounded-full mr-2"></span>
                Core Go concepts and syntax
              </li>
              <li className="flex items-center">
                <span className="w-2 h-2 bg-blue-500 rounded-full mr-2"></span>
                Web server implementation
              </li>
              <li className="flex items-center">
                <span className="w-2 h-2 bg-blue-500 rounded-full mr-2"></span>
                Database integration
              </li>
              <li className="flex items-center">
                <span className="w-2 h-2 bg-blue-500 rounded-full mr-2"></span>
                API development
              </li>
            </ul>
          </div>
        </div>
      );

    case 'criteria':
      return (
        <div className="space-y-4">
          <CriteriaItem
            title="Project Structure"
            description="Well-organized code following Go best practices and project layout conventions"
            points={20}
          />
          <CriteriaItem
            title="Core Functionality"
            description="Implementation of all required features with proper error handling"
            points={30}
          />
          <CriteriaItem
            title="Code Quality"
            description="Clean, maintainable code with appropriate comments and documentation"
            points={25}
          />
          <CriteriaItem
            title="Testing"
            description="Comprehensive test coverage including unit and integration tests"
            points={15}
          />
          <CriteriaItem
            title="Documentation"
            description="Clear README and API documentation"
            points={10}
          />
        </div>
      );

    case 'evaluation':
      return (
        <div className="space-y-6">
          <div className="bg-white dark:bg-gray-800 rounded-lg p-6">
            <h3 className="text-xl font-semibold text-gray-900 dark:text-white mb-4">
              Evaluation Process
            </h3>
            <div className="space-y-4">
              <div className="flex items-start space-x-4">
                <div className="w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center flex-shrink-0">
                  <span className="text-blue-600 dark:text-blue-400 font-semibold">1</span>
                </div>
                <div>
                  <h4 className="text-lg font-medium text-gray-900 dark:text-white">Code Review</h4>
                  <p className="text-gray-600 dark:text-gray-300">
                    Your code will be reviewed for structure, quality, and best practices
                  </p>
                </div>
              </div>
              
              <div className="flex items-start space-x-4">
                <div className="w-8 h-8 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center flex-shrink-0">
                  <span className="text-green-600 dark:text-green-400 font-semibold">2</span>
                </div>
                <div>
                  <h4 className="text-lg font-medium text-gray-900 dark:text-white">Testing</h4>
                  <p className="text-gray-600 dark:text-gray-300">
                    Automated tests will verify functionality and performance
                  </p>
                </div>
              </div>
              
              <div className="flex items-start space-x-4">
                <div className="w-8 h-8 rounded-full bg-purple-100 dark:bg-purple-900 flex items-center justify-center flex-shrink-0">
                  <span className="text-purple-600 dark:text-purple-400 font-semibold">3</span>
                </div>
                <div>
                  <h4 className="text-lg font-medium text-gray-900 dark:text-white">Documentation</h4>
                  <p className="text-gray-600 dark:text-gray-300">
                    Review of project documentation and API specifications
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      );

    case 'resources':
      return (
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <SubmissionResource
            title="Go Documentation"
            description="Official Go programming language documentation and guides"
            link="https://golang.org/doc/"
          />
          <SubmissionResource
            title="Testing in Go"
            description="Learn about testing best practices in Go"
            link="https://golang.org/pkg/testing/"
          />
          <SubmissionResource
            title="Project Layout"
            description="Standard Go project layout and organization"
            link="https://github.com/golang-standards/project-layout"
          />
          <SubmissionResource
            title="API Design"
            description="RESTful API design guidelines and best practices"
            link="https://golang.org/doc/tutorial/web-service-gin"
          />
        </div>
      );

    case 'tips':
      return (
        <div className="space-y-6">
          <div className="bg-white dark:bg-gray-800 rounded-lg p-6">
            <h3 className="text-xl font-semibold text-gray-900 dark:text-white mb-4">
              Tips for Success
            </h3>
            <div className="space-y-4">
              <div className="flex items-start space-x-4">
                <div className="flex-shrink-0">
                  <Lightbulb className="h-6 w-6 text-yellow-500" />
                </div>
                <div>
                  <h4 className="text-lg font-medium text-gray-900 dark:text-white">Plan First</h4>
                  <p className="text-gray-600 dark:text-gray-300">
                    Spend time planning your project structure and features before coding
                  </p>
                </div>
              </div>
              
              <div className="flex items-start space-x-4">
                <div className="flex-shrink-0">
                  <Target className="h-6 w-6 text-red-500" />
                </div>
                <div>
                  <h4 className="text-lg font-medium text-gray-900 dark:text-white">Start Small</h4>
                  <p className="text-gray-600 dark:text-gray-300">
                    Begin with core features and gradually add complexity
                  </p>
                </div>
              </div>
              
              <div className="flex items-start space-x-4">
                <div className="flex-shrink-0">
                  <Book className="h-6 w-6 text-blue-500" />
                </div>
                <div>
                  <h4 className="text-lg font-medium text-gray-900 dark:text-white">Document As You Go</h4>
                  <p className="text-gray-600 dark:text-gray-300">
                    Keep documentation updated while developing, don't leave it for the end
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      );

    case 'others':
      return (
        <div className="space-y-6">
          <div className="bg-white dark:bg-gray-800 rounded-lg p-6">
            <h3 className="text-xl font-semibold text-gray-900 dark:text-white mb-4">
              Additional Information
            </h3>
            <div className="space-y-4 text-gray-600 dark:text-gray-300">
              <p>
                Remember to check the submission deadline and requirements carefully.
                If you have any questions, don't hesitate to ask in the discussion forum.
              </p>
              <div className="bg-blue-50 dark:bg-blue-900/50 p-4 rounded-lg">
                <h4 className="font-medium text-blue-800 dark:text-blue-200 mb-2">
                  Need Help?
                </h4>
                <p className="text-blue-600 dark:text-blue-300">
                  Join our community discussion or contact a mentor for guidance.
                </p>
              </div>
            </div>
          </div>
        </div>
      );

    default:
      return null;
  }
};

const SubmissionGuidance: React.FC = () => {
  const [activeTab, setActiveTab] = useState<
    'introduction' | 'criteria' | 'evaluation' | 'resources' | 'tips' | 'others'
  >('introduction');

  const tabs = [
    { id: 'introduction', label: 'Introduction', icon: Trophy },
    { id: 'criteria', label: 'Criteria', icon: Target },
    { id: 'evaluation', label: 'Evaluation', icon: Book },
    { id: 'resources', label: 'Resources', icon: Library },
    { id: 'tips', label: 'Tips & Tricks', icon: Lightbulb },
    { id: 'others', label: 'Others', icon: MoreHorizontal }
  ] as const;

  return (
    <div className="min-h-screen bg-gray-50 dark:bg-gray-900">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden">
          <div className="border-b border-gray-200 dark:border-gray-700">
            <div className="flex overflow-x-auto">
              {tabs.map((tab) => (
                <SubmissionTab
                  key={tab.id}
                  label={tab.label}
                  isActive={activeTab === tab.id}
                  onClick={() => setActiveTab(tab.id)}
                />
              ))}
            </div>
          </div>
          
          <div className="p-6">
            <TabContent type={activeTab} />
          </div>
        </div>
      </div>
    </div>
  );
};

export default SubmissionGuidance;

/== components/organisms/SubmissionReview.tsx
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import SubmissionStatus from '../molecules/SubmissionStatus';
import ReviewFeedback from '../molecules/ReviewFeedback';
import Button from '../atoms/Button';

interface SubmissionReviewProps {
  status: 'reviewing' | 'rejected' | 'approved';
  feedback?: {
    type: 'success' | 'error';
    message: string;
  }[];
  reviewerNotes?: string;
  submissionFiles?: {
    name: string;
    path: string;
    comments: number;
  }[];
  onResubmit?: () => void;
}

const SubmissionReview: React.FC<SubmissionReviewProps> = ({
  status,
  feedback = [],
  reviewerNotes,
  submissionFiles,
  onResubmit
}) => {
  const navigate = useNavigate();
  const [isResubmitting, setIsResubmitting] = useState(false);

  const handleResubmit = async () => {
    if (onResubmit) {
      setIsResubmitting(true);
      await onResubmit();
      setIsResubmitting(false);
    }
  };

  const statusMessages = {
    reviewing: 'Your submission is currently being reviewed. We will notify you once the review is complete.',
    rejected: 'Your submission needs some improvements. Please review the feedback below and resubmit.',
    approved: 'Congratulations! Your submission has been approved.'
  };

  return (
    <div className="min-h-screen bg-gray-50 dark:bg-gray-900">
      <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="space-y-8">
          {/* Status Banner */}
          <SubmissionStatus 
            status={status} 
            message={statusMessages[status]} 
          />

          {/* Review Feedback */}
          {(status === 'rejected' || status === 'approved') && (
            <ReviewFeedback
              feedback={feedback}
              reviewerNotes={reviewerNotes}
              submissionFiles={submissionFiles}
            />
          )}

          {/* Action Buttons */}
          <div className="flex justify-end space-x-4">
            <Button
              variant="outline"
              onClick={() => navigate('/dashboard')}
              className="text-gray-600 hover:text-gray-900"
            >
              Back to Dashboard
            </Button>
            
            {status === 'rejected' && (
              <Button
                variant="primary"
                onClick={handleResubmit}
                disabled={isResubmitting}
                className="bg-blue-600 hover:bg-blue-700"
              >
                {isResubmitting ? 'Preparing Resubmission...' : 'Resubmit Project'}
              </Button>
            )}
          </div>
        </div>
      </div>
    </div>
  );
};

export default SubmissionReview;

/== components/organisms/SubscriptionList.tsx
import React, { useState, useEffect } from 'react';
import SubscriptionCard from '../../components/molecules/SubscriptionCard';
import Toast from '../atoms/Toast';
import { useSubscriptionStore } from '../../store/subscriptionStore';

const SubscriptionList: React.FC = () => {
  const { subscriptions, deleteSubscription, updateSubscription, settings, updateSettings } = useSubscriptionStore();
  const [toast, setToast] = useState({ 
    show: false, 
    message: '', 
    type: 'info' 
  });
  
  const [billingCycle, setBillingCycle] = useState('yearly'); // 'yearly' or 'monthly'
  
  // State for editable texts
  const [editingDiscount, setEditingDiscount] = useState(false);
  const [editingRegionText, setEditingRegionText] = useState(false);
  const [editingYearlyButton, setEditingYearlyButton] = useState(false);
  const [editingMonthlyButton, setEditingMonthlyButton] = useState(false);
  
  const [discountText, setDiscountText] = useState(settings?.discountText || 'Save 66%');
  const [regionText, setRegionText] = useState(settings?.regionText || 'Price discounted based on your region');
  const [yearlyButtonText, setYearlyButtonText] = useState(settings?.yearlyButtonText || 'Yearly');
  const [monthlyButtonText, setMonthlyButtonText] = useState(settings?.monthlyButtonText || 'Monthly');
  
  // Initialize settings from store when component mounts
  useEffect(() => {
    if (settings) {
      setDiscountText(settings.discountText || 'Save 66%');
      setRegionText(settings.regionText || 'Price discounted based on your region');
      setYearlyButtonText(settings.yearlyButtonText || 'Yearly');
      setMonthlyButtonText(settings.monthlyButtonText || 'Monthly');
    }
  }, [settings]);
  
  const handleDelete = (subscriptionId: string) => {
    deleteSubscription(subscriptionId);
    setToast({ 
      show: true, 
      message: 'Paket langganan berhasil dihapus', 
      type: 'success' 
    });
  };
  
  const handleUpdate = (id: string, updatedData: any) => {
    updateSubscription(id, updatedData);
    setToast({
      show: true,
      message: 'Paket langganan berhasil diperbarui',
      type: 'success'
    });
  };
  
  const handleSubscribe = (subscriptionName: string) => {
    setToast({
      show: true,
      message: `Berlangganan paket ${subscriptionName} berhasil`,
      type: 'success'
    });
  };
  
  // Handle saving text changes
  const handleSaveDiscountText = () => {
    updateSettings({ ...settings, discountText });
    setEditingDiscount(false);
    setToast({
      show: true,
      message: 'Teks diskon berhasil diperbarui',
      type: 'success'
    });
  };
  
  const handleSaveRegionText = () => {
    updateSettings({ ...settings, regionText });
    setEditingRegionText(false);
    setToast({
      show: true,
      message: 'Teks region berhasil diperbarui',
      type: 'success'
    });
  };
  
  const handleSaveYearlyButtonText = () => {
    updateSettings({ ...settings, yearlyButtonText });
    setEditingYearlyButton(false);
    setToast({
      show: true,
      message: 'Teks tombol tahunan berhasil diperbarui',
      type: 'success'
    });
  };
  
  const handleSaveMonthlyButtonText = () => {
    updateSettings({ ...settings, monthlyButtonText });
    setEditingMonthlyButton(false);
    setToast({
      show: true,
      message: 'Teks tombol bulanan berhasil diperbarui',
      type: 'success'
    });
  };

  return (
    <div className="max-w-6xl mx-auto px-4 py-8">
      {/* Billing cycle toggle */}
      <div className="flex items-center justify-center gap-4 mb-8">
        {/* Editable Yearly Button */}
        <div className={`relative ${billingCycle === 'yearly' ? 'bg-green-500 text-white' : 'bg-gray-200 text-gray-800 dark:text-gray-800'} rounded-lg overflow-hidden`}>
          {editingYearlyButton ? (
            <input
              type="text"
              value={yearlyButtonText}
              onChange={(e) => setYearlyButtonText(e.target.value)}
              className={`px-6 py-2.5 w-full text-center ${
                billingCycle === 'yearly' 
                  ? 'bg-green-500 text-white border-green-400' 
                  : 'bg-gray-200 text-gray-800 border-gray-300'
              } border focus:outline-none`}
              autoFocus
              onBlur={handleSaveYearlyButtonText}
              onKeyPress={(e) => e.key === 'Enter' && handleSaveYearlyButtonText()}
            />
          ) : (
            <button
              className="px-6 py-2.5 w-full h-full relative group"
              onClick={() => setBillingCycle('yearly')}
              onDoubleClick={() => setEditingYearlyButton(true)}
            >
              <span>{yearlyButtonText}</span>
              <div className="absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity cursor-text" />
              <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500 opacity-0 group-hover:opacity-100 transition-opacity"></div>
            </button>
          )}
        </div>
        
        {/* Editable Monthly Button */}
        <div className={`relative ${billingCycle === 'monthly' ? 'bg-green-500 text-white' : 'bg-gray-200 text-gray-800 dark:text-gray-800'} rounded-lg overflow-hidden`}>
          {editingMonthlyButton ? (
            <input
              type="text"
              value={monthlyButtonText}
              onChange={(e) => setMonthlyButtonText(e.target.value)}
              className={`px-6 py-2.5 w-full text-center ${
                billingCycle === 'monthly' 
                  ? 'bg-green-500 text-white border-green-400' 
                  : 'bg-gray-200 text-gray-800 border-gray-300'
              } border focus:outline-none`}
              autoFocus
              onBlur={handleSaveMonthlyButtonText}
              onKeyPress={(e) => e.key === 'Enter' && handleSaveMonthlyButtonText()}
            />
          ) : (
            <button
              className="px-6 py-2.5 w-full h-full relative group"
              onClick={() => setBillingCycle('monthly')}
              onDoubleClick={() => setEditingMonthlyButton(true)}
            >
              <span>{monthlyButtonText}</span>
              <div className="absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity cursor-text" />
              <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500 opacity-0 group-hover:opacity-100 transition-opacity"></div>
            </button>
          )}
        </div>
        
        {/* Editable discount text */}
        {editingDiscount ? (
          <div className="relative">
            <input
              type="text"
              value={discountText}
              onChange={(e) => setDiscountText(e.target.value)}
              className="bg-green-100 text-green-800 px-3 py-1 rounded-lg text-sm font-medium border border-green-300 w-32"
              autoFocus
              onBlur={handleSaveDiscountText}
              onKeyPress={(e) => e.key === 'Enter' && handleSaveDiscountText()}
            />
          </div>
        ) : (
          <span 
            className="bg-green-100 text-green-800 px-3 py-1 rounded-lg text-sm font-medium cursor-pointer hover:bg-green-200 transition-colors"
            onClick={() => setEditingDiscount(true)}
          >
            {discountText}
          </span>
        )}
      </div>
      
      {/* Editable price discounted badge */}
      <div className="flex items-center justify-center mb-10 text-gray-600">
        <svg className="w-5 h-5 mr-2 flex-shrink-0" viewBox="0 0 24 24" fill="none">
          <circle cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="2" />
          <path d="M12 8v4m0 4h.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        </svg>
        
        {editingRegionText ? (
          <div className="relative">
            <input
              type="text"
              value={regionText}
              onChange={(e) => setRegionText(e.target.value)}
              className="text-gray-800 dark:text-white border border-gray-300 dark:border-gray-600 rounded px-2 py-1 w-full"
              autoFocus
              onBlur={handleSaveRegionText}
              onKeyPress={(e) => e.key === 'Enter' && handleSaveRegionText()}
            />
          </div>
        ) : (
          <span 
            className="text-gray-800 dark:text-white cursor-pointer hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
            onClick={() => setEditingRegionText(true)}
          >
            {regionText}
          </span>
        )}
      </div>
      
      {/* Subscription cards */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
        {subscriptions.map((subscription) => (
          <SubscriptionCard
            key={subscription.id}
            id={subscription.id}
            type={subscription.type}
            title={subscription.title}
            subtitle={subscription.subtitle}
            price={billingCycle === 'yearly' ? subscription.yearlyPrice : subscription.monthlyPrice}
            pricePeriod={billingCycle === 'yearly' ? 'year' : 'month'}
            features={subscription.features}
            buttonText={subscription.buttonText}
            isPopular={subscription.isPopular}
            onSubscribe={() => handleSubscribe(subscription.title)}
            onDelete={() => handleDelete(subscription.id)}
            onUpdate={(updatedData) => handleUpdate(subscription.id, updatedData)}
            guarantee={subscription.guarantee}
          />
        ))}
      </div>
      
      {toast.show && (
        <Toast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast({ ...toast, show: false })}
        />
      )}
    </div>
  );
};

export default SubscriptionList;

/== components/organisms/TutorialContent.tsx
import React from 'react';
import { ChevronRight } from 'lucide-react';
import Card from '../atoms/Card';
import Button from '../atoms/Button';
import IconText from '../molecules/IconText';

interface TutorialContentProps {
  title: string;
  introduction: string;
  benefits: string[];
  topics: { title: string; path: string }[];
  resources: {
    icon: any;
    title: string;
    description: string;
    link: string;
    linkText: string;
    bgColor: string;
  }[];
  gettingStarted: string[];
  language: string;
}

const TutorialContent: React.FC<TutorialContentProps> = ({
  title,
  introduction,
  benefits,
  topics,
  resources,
  gettingStarted,
  language
}) => {
  return (
    <div className="grid grid-cols-1 lg:grid-cols-4 gap-8">
      {/* Sidebar */}
      <div className="lg:col-span-1">
        <Card className="p-6 sticky top-20">
          <h3 className="text-lg font-bold text-gray-900 mb-4">Table of Contents</h3>
          <ul className="space-y-2">
            {topics.map((topic) => (
              <li key={topic.path}>
                <IconText
                  icon={ChevronRight}
                  text={topic.title}
                  className="text-gray-700 hover:text-blue-600 cursor-pointer"
                />
              </li>
            ))}
          </ul>
        </Card>
      </div>

      {/* Main Content */}
      <div className="lg:col-span-3">
        <Card className="p-6 mb-8">
          <h2 className="text-2xl font-bold text-gray-900 mb-4">
            Introduction to {language?.toUpperCase()}
          </h2>
          <div className="prose max-w-none">
            <p>{introduction}</p>
            
            <h3>Why Learn {language?.toUpperCase()}?</h3>
            <ul>
              {benefits.map((benefit, index) => (
                <li key={index}>{benefit}</li>
              ))}
            </ul>
          </div>
        </Card>

        {/* Resources */}
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
          {resources.map((resource, index) => (
            <Card key={index} className={`p-6 ${resource.bgColor}`}>
              <IconText
                icon={resource.icon}
                text={resource.title}
                className="mb-4 font-medium text-gray-900"
              />
              <p className="text-gray-700 mb-4">{resource.description}</p>
              <Button
                variant="primary"
                onClick={() => window.location.href = resource.link}
              >
                {resource.linkText}
              </Button>
            </Card>
          ))}
        </div>

        {/* Getting Started */}
        <Card className="p-6">
          <h2 className="text-2xl font-bold text-gray-900 mb-4">Getting Started</h2>
          <div className="prose max-w-none">
            <p>Ready to start learning {language?.toUpperCase()}? Here's what you need to do:</p>
            <ol>
              {gettingStarted.map((step, index) => (
                <li key={index}>{step}</li>
              ))}
            </ol>
            <div className="mt-6">
              <Button
                variant="primary"
                onClick={() => window.location.href = topics[0]?.path || '#'}
              >
                Start with the First Tutorial
              </Button>
            </div>
          </div>
        </Card>
      </div>
    </div>
  );
};

export default TutorialContent;

/== components/organisms/TutorialHeader.tsx
import React from 'react';
import { Link } from 'react-router-dom';
import { ChevronRight } from 'lucide-react';
import Text from '../atoms/Text';

interface TutorialHeaderProps {
  language: string;
  title: string;
}

const TutorialHeader: React.FC<TutorialHeaderProps> = ({ language, title }) => {
  return (
    <div className="bg-gray-100 py-3">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex items-center text-sm text-gray-600">
          <Link to="/" className="hover:text-blue-600">Home</Link>
          <ChevronRight className="h-4 w-4 mx-2" />
          <Link to="/tutorials" className="hover:text-blue-600">Tutorials</Link>
          <ChevronRight className="h-4 w-4 mx-2" />
          <Text variant="body" color="default" className="font-medium">{title}</Text>
        </div>
      </div>
    </div>
  );
};

export default TutorialHeader;

/== components/organisms/TutorialIntroduction.tsx
import React from 'react';
import Card from '../atoms/Card';
import Text from '../atoms/Text';
import Heading from '../atoms/Heading';

interface TutorialIntroductionProps {
  title: string;
  introduction: string;
  benefits: string[];
  language: string;
}

const TutorialIntroduction: React.FC<TutorialIntroductionProps> = ({
  title,
  introduction,
  benefits,
  language
}) => {
  return (
    <Card className="p-6 mb-8">
      <Heading level={2} className="mb-4">Introduction to {language?.toUpperCase()}</Heading>
      <div className="prose max-w-none">
        <Text variant="body" color="muted" className="mb-6">{introduction}</Text>
        
        <Heading level={3} className="mb-4">Why Learn {language?.toUpperCase()}?</Heading>
        <ul className="space-y-2">
          {benefits.map((benefit, index) => (
            <li key={index} className="flex items-start">
              <span className="text-blue-600 mr-2">•</span>
              <Text variant="body" color="muted">{benefit}</Text>
            </li>
          ))}
        </ul>
      </div>
    </Card>
  );
};

export default TutorialIntroduction;

/== components/organisms/TutorialResources.tsx
import React from 'react';
import ResourceCard from '../molecules/ResourceCard';

interface TutorialResourcesProps {
  resources: {
    icon: any;
    title: string;
    description: string;
    link: string;
    linkText: string;
    bgColor: string;
  }[];
}

const TutorialResources: React.FC<TutorialResourcesProps> = ({ resources }) => {
  return (
    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
      {resources.map((resource, index) => (
        <ResourceCard
          key={index}
          icon={resource.icon}
          title={resource.title}
          description={resource.description}
          link={resource.link}
          linkText={resource.linkText}
          bgColor={resource.bgColor}
        />
      ))}
    </div>
  );
};

export default TutorialResources;

/== components/templates/AdminLayout.tsx
import React, { useState } from 'react';
import { Outlet, Link, useLocation, useNavigate } from 'react-router-dom';
import { Menu, X, ChevronDown, Home, Book, Users, Settings, LogOut, FileText, Image, Edit, Layout, PlayCircle, MessageSquare, Bell, MessageCircle, Tag, Calendar, Award, Star, Shield, Activity, TrendingUp, Globe, CreditCard, Server, Webhook, DollarSign, Gift, Package, Users2, PieChart } from 'lucide-react';
import Logo from '../atoms/Logo';
import { useAuthStore } from '../../store/authStore';
import { useThemeStore } from '../../store/themeStore';

const AdminLayout: React.FC = () => {
  const [isSidebarOpen, setIsSidebarOpen] = useState(true);
  const [isContentMenuOpen, setIsContentMenuOpen] = useState(false);
  const [isCommunicationMenuOpen, setIsCommunicationMenuOpen] = useState(false);
  const [isCourseFeaturesMenuOpen, setIsCourseFeaturesMenuOpen] = useState(false);
  const [isUserManagementMenuOpen, setIsUserManagementMenuOpen] = useState(false);
  const [isIntegrationsMenuOpen, setIsIntegrationsMenuOpen] = useState(false);
  const [isMonetizationMenuOpen, setIsMonetizationMenuOpen] = useState(false);
  const location = useLocation();
  const navigate = useNavigate();
  const { logout } = useAuthStore();
  const { isDarkMode, toggleTheme } = useThemeStore();

  const menuItems = [
    { icon: Home, label: 'Dashboard', path: '/cms' },
    { icon: Book, label: 'Courses', path: '/cms/courses' },
    {
      icon: Globe,
      label: 'Integrasi',
      children: [
        { icon: Layout, label: 'Dashboard', path: '/cms/integrations' },
        { icon: CreditCard, label: 'Payment Gateways', path: '/cms/integrations/payment-gateways' },
        { icon: Shield, label: 'SSO', path: '/cms/integrations/sso' },
        { icon: Server, label: 'API Management', path: '/cms/integrations/api' },
        { icon: Webhook, label: 'Webhooks', path: '/cms/integrations/webhooks' },
        { icon: Globe, label: 'Third Party', path: '/cms/integrations/third-party' },
      ]
    },
    {
      icon: FileText,
      label: 'Content',
      children: [
        { icon: Edit, label: 'Content Editor', path: '/cms/content/editor' },
        { icon: Image, label: 'Media Library', path: '/cms/media' },
        { icon: PlayCircle, label: 'Quiz Builder', path: '/cms/quizzes' },
        { icon: Layout, label: 'Curriculum Builder', path: '/cms/curriculum' },
      ]
    },
    {
      icon: MessageSquare,
      label: 'Communication',
      children: [
        { icon: MessageSquare, label: 'Messaging', path: '/cms/communication/messaging' },
        { icon: FileText, label: 'Email Templates', path: '/cms/communication/email-templates' },
        { icon: Layout, label: 'Announcements', path: '/cms/communication/announcements' },
        { icon: Bell, label: 'Notifications', path: '/cms/communication/notifications' },
        { icon: MessageCircle, label: 'Feedback', path: '/cms/communication/feedback' },
      ]
    },
    {
      icon: Layout,
      label: 'Course Features',
      children: [
        { icon: Tag, label: 'Categories', path: '/cms/course-features/categories' },
        { icon: Calendar, label: 'Scheduling', path: '/cms/course-features/scheduling' },
        { icon: Book, label: 'Prerequisites', path: '/cms/course-features/prerequisites' },
        { icon: Award, label: 'Certificates', path: '/cms/course-features/certificates' },
        { icon: Star, label: 'Reviews', path: '/cms/course-features/reviews' },
      ]
    },
    {
      icon: Users,
      label: 'User Management',
      children: [
        { icon: Users, label: 'Users', path: '/cms/users' },
        { icon: Shield, label: 'Roles & Permissions', path: '/cms/user-management/roles' },
        { icon: Activity, label: 'User Activity', path: '/cms/user-management/activity' },
        { icon: TrendingUp, label: 'User Progress', path: '/cms/user-management/progress' },
      ]
    },
    {
      icon: DollarSign,
      label: 'Monetisasi',
      children: [
        { icon: Tag, label: 'Dashboard', path: '/cms/monetization' },
        { icon: CreditCard, label: 'Manajemen Langganan', path: '/cms/monetization/subscription' },
        { icon: Gift, label: 'Diskon & Kupon', path: '/cms/monetization/coupons' },
        { icon: Package, label: 'Bundling Kursus', path: '/cms/monetization/bundles' },
        { icon: Users2, label: 'Afiliasi & Referral', path: '/cms/monetization/affiliates' },
        { icon: PieChart, label: 'Analitik Pendapatan', path: '/cms/monetization/revenue-analytics' },
      ]
    },
    { icon: Settings, label: 'Settings', path: '/cms/settings' },
  ];

  const handleLogout = () => {
    logout();
    navigate('/login');
  };

  return (
    <div className="min-h-screen bg-gray-50 dark:bg-gray-900">
      {/* Sidebar */}
      <aside className={`
        fixed top-0 left-0 z-40 w-64 h-screen 
        ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full'}
        bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700
        transition-transform flex flex-col
      `}>
        {/* Fixed Header */}
        <div className="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">
          <Logo showText={false} />
          <button onClick={() => setIsSidebarOpen(false)} className="lg:hidden">
            <X className="h-6 w-6 text-gray-500" />
          </button>
        </div>
        
        {/* Scrollable Content */}
        <div className="flex-1 overflow-y-auto">
          <nav className="p-4 space-y-2">
            {menuItems.map((item) =>
              item.children ? (
                <div key={item.label}>
                  <button
                    onClick={() => {
                      if (item.label === 'Content') {
                        setIsContentMenuOpen(!isContentMenuOpen);
                      } else if (item.label === 'Communication') {
                        setIsCommunicationMenuOpen(!isCommunicationMenuOpen);
                      } else if (item.label === 'Course Features') {
                        setIsCourseFeaturesMenuOpen(!isCourseFeaturesMenuOpen);
                      } else if (item.label === 'User Management') {
                        setIsUserManagementMenuOpen(!isUserManagementMenuOpen);
                      } else if (item.label === 'Integrasi') {
                        setIsIntegrationsMenuOpen(!isIntegrationsMenuOpen);
                      } else if (item.label === 'Monetisasi') {
                        setIsMonetizationMenuOpen(!isMonetizationMenuOpen);
                      }
                    }}
                    className={`
                      w-full flex items-center justify-between px-4 py-2 text-sm font-medium rounded-lg
                      ${(item.label === 'Content' && (location.pathname.startsWith('/cms/content') || location.pathname.startsWith('/cms/media') || location.pathname.startsWith('/cms/quizzes') || location.pathname.startsWith('/cms/curriculum'))) ||
                        (item.label === 'Communication' && location.pathname.startsWith('/cms/communication')) ||
                        (item.label === 'Course Features' && location.pathname.startsWith('/cms/course-features')) ||
                        (item.label === 'User Management' && location.pathname.startsWith('/cms/user-management')) ||
                        (item.label === 'Integrasi' && location.pathname.startsWith('/cms/integrations')) ||
                        (item.label === 'Monetisasi' && location.pathname.startsWith('/cms/monetization'))
                        ? 'bg-brand-green text-white'
                        : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'
                      }
                    `}
                  >
                    <div className="flex items-center">
                      <item.icon className="h-5 w-5 mr-3" />
                      {item.label}
                    </div>
                    <ChevronDown className={`h-4 w-4 transition-transform ${
                      (item.label === 'Content' && isContentMenuOpen) ||
                      (item.label === 'Communication' && isCommunicationMenuOpen) ||
                      (item.label === 'Course Features' && isCourseFeaturesMenuOpen) ||
                      (item.label === 'User Management' && isUserManagementMenuOpen) ||
                      (item.label === 'Integrasi' && isIntegrationsMenuOpen) ||
                      (item.label === 'Monetisasi' && isMonetizationMenuOpen)
                        ? 'rotate-180'
                        : ''
                    }`} />
                  </button>
                  {((item.label === 'Content' && isContentMenuOpen) ||
                    (item.label === 'Communication' && isCommunicationMenuOpen) ||
                    (item.label === 'Course Features' && isCourseFeaturesMenuOpen) ||
                    (item.label === 'User Management' && isUserManagementMenuOpen) ||
                    (item.label === 'Integrasi' && isIntegrationsMenuOpen) ||
                    (item.label === 'Monetisasi' && isMonetizationMenuOpen)) && (
                    <div className="mt-2 ml-6 space-y-2">
                      {item.children.map((child) => (
                        <Link
                          key={child.path}
                          to={child.path}
                          className={`
                            flex items-center px-4 py-2 text-sm font-medium rounded-lg
                            ${location.pathname.startsWith(child.path)
                              ? 'bg-brand-green/10 text-brand-green'
                              : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'
                            }
                          `}
                        >
                          <child.icon className="h-4 w-4 mr-3" />
                          {child.label}
                        </Link>
                      ))}
                    </div>
                  )}
                </div>
              ) : (
                <Link
                  key={item.path}
                  to={item.path}
                  className={`
                    flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200
                    ${location.pathname === item.path
                      ? 'bg-brand-green text-white'
                      : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'
                    }
                  `}
                >
                  <item.icon className="h-5 w-5 mr-3" />
                  {item.label}
                </Link>
              )
            )}
          </nav>
        </div>
      </aside>

      {/* Main Content */}
      <div className={`lg:ml-64 ${isSidebarOpen ? 'ml-64' : 'ml-0'}`}>
        {/* Header */}
        <header className="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
          <div className="flex items-center justify-between px-4 py-3">
            <button
              onClick={() => setIsSidebarOpen(!isSidebarOpen)}
              className="lg:hidden"
            >
              <Menu className="h-6 w-6 text-gray-500" />
            </button>
            
            <div className="flex items-center space-x-4">
              <button
                onClick={toggleTheme}
                className="p-2 text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700"
              >
                {isDarkMode ? (
                  <svg className="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                  </svg>
                ) : (
                  <svg className="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                  </svg>
                )}
              </button>
              <button
                onClick={handleLogout}
                className="flex items-center text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"
              >
                <LogOut className="h-5 w-5 mr-2" />
                Logout
              </button>
            </div>
          </div>
        </header>

        {/* Page Content */}
        <main className="p-4">
          <Outlet />
        </main>
      </div>
    </div>
  );
};

export default AdminLayout;

/== components/templates/AuthLayout.tsx
import React from 'react';

interface AuthLayoutProps {
  children: React.ReactNode;
}

const AuthLayout: React.FC<AuthLayoutProps> = ({ children }) => {
  return (
    <div className="min-h-screen bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8">
      <div className="max-w-md w-full mx-auto">
        {children}
      </div>
    </div>
  );
};

export default AuthLayout;

/== components/templates/CustomerLayout.tsx


/== components/templates/DashboardBundleLayout.tsx
import React, { ReactNode } from 'react';

interface DashboardLayoutProps {
  children: ReactNode;
  title: string;
  actions?: ReactNode;
}

export const DashboardBundleLayout: React.FC<DashboardLayoutProps> = ({
  children,
  title,
  actions,
}) => {
  
  return (
    <div className="bg-gray-800"> 
      <div className="py-6">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center mb-6">
            <h1 className="text-2xl font-semibold text-gray-900 dark:text-white">{title}</h1>
            {actions}
          </div>
          <div className="bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg">
            <div className="p-6">
              {children}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

/== components/templates/DashboardLayout.tsx
import React from 'react';
import Header from '../organisms/Header';

interface DashboardLayoutProps {
  children: React.ReactNode;
  sidebar?: React.ReactNode;
}

const DashboardLayout: React.FC<DashboardLayoutProps> = ({
  children,
  sidebar
}) => {
  return (
    <div className="min-h-screen bg-gray-50">
      <Header />
      
      <div className="flex">
        {sidebar && (
          <aside className="w-64 bg-white border-r border-gray-200 min-h-screen">
            {sidebar}
          </aside>
        )}
        
        <main className="flex-1">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            {children}
          </div>
        </main>
      </div>
    </div>
  );
};

export default DashboardLayout;

/== components/templates/MainLayout.tsx
import React from 'react';
import { Outlet } from 'react-router-dom';
import Header from '../organisms/Header';
import Footer from '../organisms/Footer';

const MainLayout: React.FC = () => {
  return (
    <div className="min-h-screen flex flex-col">
      <Header />
      <main className="flex-grow">
        <Outlet />
      </main>
      <Footer />
    </div>
  );
}

export default MainLayout;

/== data/courses/go/beginner.json
{
  "id": "go-beginner",
  "title": "Go | Beginner",
  "description": "Start your Go programming journey with basic concepts and syntax.",
  "lessons": [
    {
      "id": "basic-syntax",
      "level": "basic-syntax",
      "title": "Basic Syntax and Data Types",
      "description": "Learn the fundamental syntax and data types in Go",
      "steps": [
        {
          "id": "introduction",
          "title": "Introduction to Go",
          "type": "lesson",
          "content": "<h2>Welcome to Go Programming</h2><p>Go (or Golang) is a statically typed, compiled programming language designed at Google. It provides excellent support for multithreading and is used to build scalable network applications.</p><h3>Key Features:</h3><ul><li>Simple and clean syntax</li><li>Efficient garbage collection</li><li>Built-in concurrency support</li><li>Fast compilation</li></ul>",
          "code": "package main\n\nimport \"fmt\"\n\nfunc main() {\n    fmt.Println(\"Hello, Go!\")\n}"
        },
        {
          "id": "variables",
          "title": "Variables and Data Types",
          "type": "lesson",
          "content": "<h2>Variables in Go</h2><p>Go supports various ways to declare variables:</p><pre>var name type = value\nname := value // Short declaration</pre><h3>Basic Data Types:</h3><ul><li>bool</li><li>string</li><li>int, int8, int16, int32, int64</li><li>uint, uint8, uint16, uint32, uint64</li><li>float32, float64</li></ul>",
          "code": "package main\n\nimport \"fmt\"\n\nfunc main() {\n    // Variable declarations\n    var age int = 25\n    name := \"John\"\n    var isStudent bool = true\n    \n    fmt.Printf(\"Name: %s, Age: %d, Student: %t\\n\", name, age, isStudent)\n}"
        }
      ],
      "nextLessonId": "control-structures"
    },
    {
      "id": "mini-project",
      "level": "beginner",
      "title": "Mini project Structures",
      "description": "Master control flow in Go with if statements, loops, and switches",
      "steps": [
        {
          "id": "if-statementszzzxxxx",
          "title": "If Statements",
          "type": "lesson",
          "content": "<h2>Conditional Statements in Go</h2><p>Go supports standard if-else statements with a clean syntax:</p><pre>if condition {\n    // code\n} else if condition {\n    // code\n} else {\n    // code\n}</pre>",
          "code": "package main\n\nimport \"fmt\"\n\nfunc main() {\n    age := 18\n    \n    if age >= 18 {\n        fmt.Println(\"Adult\")\n    } else {\n        fmt.Println(\"Minor\")\n    }\n}"
        }
      ],
      "nextLessonId": "submit"
    },
    {
      "id": "control-structures",
      "level": "control-structures",
      "title": "Control Structures",
      "description": "Master control flow in Go with if statements, loops, and switches",
      "steps": [
        {
          "id": "if-statementsfinal",
          "title": "If Statements",
          "type": "lesson",
          "content": "<h2>Conditional Statements in Go</h2><p>Go supports standard if-else statements with a clean syntax:</p><pre>if condition {\n    // code\n} else if condition {\n    // code\n} else {\n    // code\n}</pre>",
          "code": "package main\n\nimport \"fmt\"\n\nfunc main() {\n    age := 18\n    \n    if age >= 18 {\n        fmt.Println(\"Adult\")\n    } else {\n        fmt.Println(\"Minor\")\n    }\n}"
        }
      ],
      "nextLessonId": "finish"
    }
  ]
}

/== data/courses/go/expert.json
{
  "id": "go-expert",
  "title": "Go | Expert",
  "description": "Become a Go expert with microservices, performance optimization, and advanced design patterns",
  "lessons": {
    "microservices": {
      "id": "microservices",
      "title": "Microservices Architecture",
      "description": "Build scalable microservices with Go",
      "steps": [
        {
          "id": "intro",
          "title": "Introduction to Microservices",
          "type": "lesson",
          "content": "<h2>Microservices in Go</h2><p>Learn how to build and deploy microservices using Go:</p><ul><li>Service Discovery</li><li>Load Balancing</li><li>Fault Tolerance</li></ul>",
          "code": "package main\n\nimport (\n    \"net/http\"\n    \"encoding/json\"\n)\n\ntype Service struct {\n    Name string `json:\"name\"`\n    URL  string `json:\"url\"`\n}\n\nfunc main() {\n    http.HandleFunc(\"/services\", handleServices)\n    http.ListenAndServe(\":8080\", nil)\n}"
        }
      ],
      "nextLessonId": "performance"
    },
    "performance": {
      "id": "performance",
      "title": "Performance Optimization",
      "description": "Learn advanced techniques for optimizing Go applications",
      "steps": [
        {
          "id": "profiling",
          "title": "Profiling",
          "type": "lesson",
          "content": "<h2>Profiling in Go</h2><p>Learn how to profile and optimize Go applications:</p><ul><li>CPU Profiling</li><li>Memory Profiling</li><li>Goroutine Profiling</li></ul>",
          "code": "package main\n\nimport (\n    \"runtime/pprof\"\n    \"os\"\n)\n\nfunc main() {\n    f, _ := os.Create(\"cpu.prof\")\n    pprof.StartCPUProfile(f)\n    defer pprof.StopCPUProfile()\n    \n    // Your code here\n}"
        }
      ]
    }
  }
}

/== data/courses/go/fundamentals.json
{
  "id": "go-fundamentals",
  "title": "Go | Fundamentals",
  "description": "Master Go fundamentals including structs, interfaces, error handling, and basic web development",
  "lessons": {
    "structs-interfaces": {
      "id": "structs-interfaces",
      "title": "Structs and Interfaces",
      "description": "Learn about Go's type system and how to create custom types",
      "steps": [
        {
          "id": "structs",
          "title": "Structs",
          "type": "lesson",
          "content": "<h2>Structs in Go</h2><p>Structs are user-defined types that group related data:</p><pre>type Person struct {\n    Name string\n    Age  int\n}</pre>",
          "code": "package main\n\nimport \"fmt\"\n\ntype Person struct {\n    Name string\n    Age  int\n}\n\nfunc main() {\n    p := Person{Name: \"John\", Age: 25}\n    fmt.Printf(\"%+v\\n\", p)\n}"
        }
      ],
      "nextLessonId": "error-handling"
    },
    "error-handling": {
      "id": "error-handling",
      "title": "Error Handling",
      "description": "Learn how to handle errors effectively in Go",
      "steps": [
        {
          "id": "error-basics",
          "title": "Error Basics",
          "type": "lesson",
          "content": "<h2>Error Handling in Go</h2><p>Go handles errors using the built-in error interface:</p><pre>type error interface {\n    Error() string\n}</pre>",
          "code": "package main\n\nimport \"fmt\"\n\nfunc divide(a, b float64) (float64, error) {\n    if b == 0 {\n        return 0, fmt.Errorf(\"division by zero\")\n    }\n    return a / b, nil\n}\n\nfunc main() {\n    result, err := divide(10, 2)\n    if err != nil {\n        fmt.Println(\"Error:\", err)\n        return\n    }\n    fmt.Printf(\"Result: %.2f\\n\", result)\n}"
        }
      ],
      "nextLessonId": "finish"
    }
  }
}

/== data/courses/go/index.ts
import beginner from './beginner.json';
import fundamentals from './fundamentals.json';
import intermediate from './intermediate.json';
import expert from './expert.json';

export const goCourses = {
  beginner,
  fundamentals,
  intermediate,
  expert
};

export default goCourses;

/== data/courses/go/intermediate.json
{
  "id": "go-intermediate",
  "title": "Go | Intermediate",
  "description": "Take your Go skills to the next level with advanced concurrency, testing, and API development",
  "lessons": {
    "advanced-concurrency": {
      "id": "advanced-concurrency",
      "title": "Advanced Concurrency",
      "description": "Master goroutines, channels, and synchronization primitives",
      "steps": [
        {
          "id": "goroutines",
          "title": "Goroutines",
          "type": "lesson",
          "content": "<h2>Goroutines in Go</h2><p>Goroutines are lightweight threads managed by the Go runtime:</p><pre>go functionName()</pre>",
          "code": "package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc say(s string) {\n    for i := 0; i < 3; i++ {\n        fmt.Println(s)\n        time.Sleep(time.Millisecond * 100)\n    }\n}\n\nfunc main() {\n    go say(\"Hello\")\n    say(\"World\")\n}"
        }
      ],
      "nextLessonId": "testing-benchmarking"
    },
    "testing-benchmarking": {
      "id": "testing-benchmarking",
      "title": "Testing and Benchmarking",
      "description": "Learn how to write tests and benchmarks in Go",
      "steps": [
        {
          "id": "testing-basics",
          "title": "Testing Basics",
          "type": "lesson",
          "content": "<h2>Testing in Go</h2><p>Go has built-in support for testing. Test files end with _test.go:</p>",
          "code": "package main\n\nimport \"testing\"\n\nfunc TestAdd(t *testing.T) {\n    sum := Add(2, 3)\n    if sum != 5 {\n        t.Errorf(\"expected 5, got %d\", sum)\n    }\n}"
        }
      ],
      "nextLessonId": "finish"
    }
  }
}

/== data/goCourseContent.json
{
  "courses": {
    "go-beginner": {
      "id": "go-beginner",
      "title": "Go | Beginner",
      "description": "Start your Go programming journey with basic concepts and syntax.",
      "lessons": {
        "basic-syntax": {
          "id": "basic-syntax",
          "title": "Basic Syntax and Data Types",
          "description": "Learn the fundamental syntax and data types in Go",
          "steps": [
            {
              "id": "introduction",
              "title": "Introduction to Go",
              "type": "lesson",
              "content": "<h2>Welcome to Go Programming</h2><p>Go (or Golang) is a statically typed, compiled programming language designed at Google. It provides excellent support for multithreading and is used to build scalable network applications.</p><h3>Key Features:</h3><ul><li>Simple and clean syntax</li><li>Efficient garbage collection</li><li>Built-in concurrency support</li><li>Fast compilation</li></ul>",
              "code": "package main\n\nimport \"fmt\"\n\nfunc main() {\n    fmt.Println(\"Hello, Go!\")\n}"
            },
            {
              "id": "variables",
              "title": "Variables and Data Types",
              "type": "lesson",
              "content": "<h2>Variables in Go</h2><p>Go supports various ways to declare variables:</p><pre>var name type = value\nname := value // Short declaration</pre><h3>Basic Data Types:</h3><ul><li>bool</li><li>string</li><li>int, int8, int16, int32, int64</li><li>uint, uint8, uint16, uint32, uint64</li><li>float32, float64</li></ul>",
              "code": "package main\n\nimport \"fmt\"\n\nfunc main() {\n    // Variable declarations\n    var age int = 25\n    name := \"John\"\n    var isStudent bool = true\n    \n    fmt.Printf(\"Name: %s, Age: %d, Student: %t\\n\", name, age, isStudent)\n}"
            }
          ],
          "nextLessonId": "control-structures"
        },
        "control-structures": {
          "id": "control-structures",
          "title": "Control Structures",
          "description": "Master control flow in Go with if statements, loops, and switches",
          "steps": [
            {
              "id": "if-statements",
              "title": "If Statements",
              "type": "lesson",
              "content": "<h2>Conditional Statements in Go</h2><p>Go supports standard if-else statements with a clean syntax:</p><pre>if condition {\n    // code\n} else if condition {\n    // code\n} else {\n    // code\n}</pre>",
              "code": "package main\n\nimport \"fmt\"\n\nfunc main() {\n    age := 18\n    \n    if age >= 18 {\n        fmt.Println(\"Adult\")\n    } else {\n        fmt.Println(\"Minor\")\n    }\n}"
            }
          ],
          "nextLessonId": "functions-packages"
        },
        "functions-packages": {
          "id": "functions-packages",
          "title": "Functions and Packages",
          "description": "Learn how to create and use functions, and organize code with packages",
          "steps": [
            {
              "id": "functions",
              "title": "Functions",
              "type": "lesson",
              "content": "<h2>Functions in Go</h2><p>Functions are declared using the func keyword:</p><pre>func functionName(parameter type) returnType {\n    // code\n}</pre>",
              "code": "package main\n\nimport \"fmt\"\n\nfunc add(x, y int) int {\n    return x + y\n}\n\nfunc main() {\n    result := add(5, 3)\n    fmt.Printf(\"5 + 3 = %d\\n\", result)\n}"
            }
          ],
          "nextLessonId": "arrays-slices"
        },
        "arrays-slices": {
          "id": "arrays-slices",
          "title": "Arrays and Slices",
          "description": "Work with collections using arrays and slices",
          "steps": [
            {
              "id": "arrays",
              "title": "Arrays",
              "type": "lesson",
              "content": "<h2>Arrays in Go</h2><p>Arrays have a fixed size and are declared as:</p><pre>var arrayName [size]type</pre>",
              "code": "package main\n\nimport \"fmt\"\n\nfunc main() {\n    var numbers [5]int = [5]int{1, 2, 3, 4, 5}\n    fmt.Println(\"Array:\", numbers)\n}"
            }
          ]
        }
      }
    },
    "go-fundamentals": {
      "id": "go-fundamentals",
      "title": "Go | Fundamentals",
      "description": "Master Go fundamentals including structs, interfaces, error handling, and basic web development",
      "lessons": {
        "structs-interfaces": {
          "id": "structs-interfaces",
          "title": "Structs and Interfaces",
          "description": "Learn about Go's type system and how to create custom types",
          "steps": [
            {
              "id": "structs",
              "title": "Structs",
              "type": "lesson",
              "content": "<h2>Structs in Go</h2><p>Structs are user-defined types that group related data:</p><pre>type Person struct {\n    Name string\n    Age  int\n}</pre>",
              "code": "package main\n\nimport \"fmt\"\n\ntype Person struct {\n    Name string\n    Age  int\n}\n\nfunc main() {\n    p := Person{Name: \"John\", Age: 25}\n    fmt.Printf(\"%+v\\n\", p)\n}"
            }
          ],
          "nextLessonId": "error-handling"
        }
      }
    },
    "go-intermediate": {
      "id": "go-intermediate",
      "title": "Go | Intermediate",
      "description": "Take your Go skills to the next level with advanced concurrency, testing, and API development",
      "lessons": {
        "advanced-concurrency": {
          "id": "advanced-concurrency",
          "title": "Advanced Concurrency",
          "description": "Master goroutines, channels, and synchronization primitives",
          "steps": [
            {
              "id": "goroutines",
              "title": "Goroutines",
              "type": "lesson",
              "content": "<h2>Goroutines in Go</h2><p>Goroutines are lightweight threads managed by the Go runtime:</p><pre>go functionName()</pre>",
              "code": "package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc say(s string) {\n    for i := 0; i < 3; i++ {\n        fmt.Println(s)\n        time.Sleep(time.Millisecond * 100)\n    }\n}\n\nfunc main() {\n    go say(\"Hello\")\n    say(\"World\")\n}"
            }
          ],
          "nextLessonId": "testing-benchmarking"
        }
      }
    },
    "go-expert": {
      "id": "go-expert",
      "title": "Go | Expert",
      "description": "Become a Go expert with microservices, performance optimization, and advanced design patterns",
      "lessons": {
        "microservices": {
          "id": "microservices",
          "title": "Microservices Architecture",
          "description": "Build scalable microservices with Go",
          "steps": [
            {
              "id": "intro",
              "title": "Introduction to Microservices",
              "type": "lesson",
              "content": "<h2>Microservices in Go</h2><p>Learn how to build and deploy microservices using Go:</p><ul><li>Service Discovery</li><li>Load Balancing</li><li>Fault Tolerance</li></ul>",
              "code": "package main\n\nimport (\n    \"net/http\"\n    \"encoding/json\"\n)\n\ntype Service struct {\n    Name string `json:\"name\"`\n    URL  string `json:\"url\"`\n}\n\nfunc main() {\n    http.HandleFunc(\"/services\", handleServices)\n    http.ListenAndServe(\":8080\", nil)\n}"
            }
          ],
          "nextLessonId": "performance"
        }
      }
    }
  }
}

/== data/roadmaps/backend.ts
import { RoadmapNode } from '../../store/roadmapStore';

export const backendRoadmap: RoadmapNode[] = [
  {
    id: 'internet',
    title: 'Internet',
    type: 'primary',
    children: [
      {
        id: 'how-internet-works',
        title: 'How does the Internet work?',
        type: 'secondary'
      },
      {
        id: 'http',
        title: 'What is HTTP?',
        type: 'secondary'
      },
      {
        id: 'browsers',
        title: 'Browsers and how they work',
        type: 'secondary'
      },
      {
        id: 'dns',
        title: 'DNS and how it works',
        type: 'secondary'
      },
      {
        id: 'domain-name',
        title: 'What is Domain Name?',
        type: 'secondary'
      },
      {
        id: 'hosting',
        title: 'What is hosting?',
        type: 'secondary'
      }
    ]
  },
  {
    id: 'programming-language',
    title: 'Pick a Language',
    type: 'primary',
    children: [
      {
        id: 'javascript',
        title: 'JavaScript',
        type: 'highlight'
      },
      {
        id: 'python',
        title: 'Python',
        type: 'highlight'
      },
      {
        id: 'go',
        title: 'Go',
        type: 'highlight'
      },
      {
        id: 'rust',
        title: 'Rust',
        type: 'secondary'
      },
      {
        id: 'java',
        title: 'Java',
        type: 'secondary'
      },
      {
        id: 'csharp',
        title: 'C#',
        type: 'secondary'
      }
    ]
  },
  {
    id: 'version-control',
    title: 'Version Control Systems',
    type: 'primary',
    children: [
      {
        id: 'git-basics',
        title: 'Git - Basic Commands',
        type: 'secondary'
      },
      {
        id: 'git-advanced',
        title: 'Git - Advanced Concepts',
        type: 'secondary'
      },
      {
        id: 'repo-hosting',
        title: 'Repo Hosting Services',
        type: 'secondary',
        children: [
          {
            id: 'github',
            title: 'GitHub',
            type: 'highlight'
          },
          {
            id: 'gitlab',
            title: 'GitLab',
            type: 'secondary'
          }
        ]
      }
    ]
  },
  {
    id: 'databases',
    title: 'Databases',
    type: 'primary',
    children: [
      {
        id: 'relational',
        title: 'Relational Databases',
        type: 'highlight',
        children: [
          {
            id: 'postgresql',
            title: 'PostgreSQL',
            type: 'highlight'
          },
          {
            id: 'mysql',
            title: 'MySQL',
            type: 'secondary'
          }
        ]
      },
      {
        id: 'nosql',
        title: 'NoSQL Databases',
        type: 'secondary',
        children: [
          {
            id: 'mongodb',
            title: 'MongoDB',
            type: 'secondary'
          },
          {
            id: 'redis',
            title: 'Redis',
            type: 'secondary'
          }
        ]
      }
    ]
  }
];

export default backendRoadmap;

/== data/tutorials.ts
import { BookOpen, Code, PlayCircle } from 'lucide-react';

export const tutorialData = {
  python: {
    title: 'Python Tutorial',
    description: 'Learn Python programming with our easy-to-follow tutorials, examples, and exercises.',
    image: 'https://images.unsplash.com/photo-1526379095098-d400fd0bf935?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60',
    color: 'bg-blue-600',
    introduction: 'Python is a high-level, interpreted programming language known for its readability and simplicity. It was created by Guido van Rossum and first released in 1991. Python is widely used in web development, data science, artificial intelligence, scientific computing, and many other fields.',
    benefits: [
      'Easy to learn and read',
      'Versatile and widely used in various domains',
      'Large community and extensive libraries',
      'High demand in the job market',
      'Great for beginners and professionals alike'
    ],
    topics: [
      { title: 'Introduction to Python', path: '/tutorials/python/introduction' },
      { title: 'Python Syntax', path: '/tutorials/python/syntax' },
      { title: 'Variables and Data Types', path: '/tutorials/python/variables' },
      { title: 'Control Flow', path: '/tutorials/python/control-flow' },
      { title: 'Functions', path: '/tutorials/python/functions' },
      { title: 'Object-Oriented Programming', path: '/tutorials/python/oop' }
    ],
    resources: [
      {
        icon: BookOpen,
        title: 'Tutorials',
        description: 'Step-by-step guides to learn Python concepts.',
        link: '/tutorials/python/introduction',
        linkText: 'Start Learning →',
        bgColor: 'bg-blue-50'
      },
      {
        icon: Code,
        title: 'Examples',
        description: 'Practical code examples to reinforce your understanding.',
        link: '/examples/python',
        linkText: 'View Examples →',
        bgColor: 'bg-green-50'
      },
      {
        icon: PlayCircle,
        title: 'Practice',
        description: 'Interactive exercises to test your knowledge.',
        link: '/compiler',
        linkText: 'Try Online Compiler →',
        bgColor: 'bg-purple-50'
      }
    ],
    gettingStarted: [
      'Follow our tutorials in sequential order',
      'Practice with the provided examples',
      'Test your code in our online compiler',
      'Complete the exercises at the end of each tutorial',
      'Build your own projects to reinforce your learning'
    ],
    relatedCourses: [
      {
        title: 'Python for Beginners',
        description: 'A comprehensive course for beginners to learn Python from scratch.',
        image: 'https://images.unsplash.com/photo-1526379095098-d400fd0bf935?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60',
        link: '/courses/python'
      },
      {
        title: 'Advanced Python',
        description: 'Take your Python skills to the next level with advanced concepts.',
        image: 'https://images.unsplash.com/photo-1517694712202-14dd9538aa97?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60',
        link: '/courses/advanced-python'
      },
      {
        title: 'Python Projects',
        description: 'Build real-world projects using Python to enhance your portfolio.',
        image: 'https://images.unsplash.com/photo-1516259762381-22954d7d3ad2?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60',
        link: '/courses/python-projects'
      }
    ]
  },
  // Add other language tutorials here...
};

export default tutorialData;

/== index.css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-100;
  }
}

.dark {
  color-scheme: dark;
}

.bg-grid-pattern {
  background-image: linear-gradient(to right, rgba(255, 255, 255, 0.1) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
  background-size: 24px 24px;
}

/* Intro.js Custom Styles */
.introjs-tooltip {
  @apply bg-gray-800 text-white border border-gray-700 rounded-lg shadow-xl;
}

.introjs-tooltiptext {
  @apply text-gray-300;
}

.introjs-button {
  @apply bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200 !important;
}

.introjs-skipbutton {
  @apply text-gray-400 hover:text-white !important;
}

.introjs-bullets ul li a {
  @apply bg-gray-600 !important;
}

.introjs-bullets ul li a.active {
  @apply bg-blue-500 !important;
}

.introjs-progress {
  @apply bg-gray-700 !important;
}

.introjs-progressbar {
  @apply bg-blue-500 !important;
}

.introjs-helperLayer {
  @apply bg-blue-500/10 border-blue-500/30 !important;
}

.introjs-overlay {
  @apply bg-black/70 !important;
}

/== main.tsx
// import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import { BrowserRouter } from 'react-router-dom';
import App from './App.tsx';
// import { useThemeStore } from './store/themeStore';
import './index.css';

// Initialize dark mode
document.documentElement.classList.add('dark');

createRoot(document.getElementById('root')!).render(
  // <StrictMode>
    <BrowserRouter>
      <App />
    </BrowserRouter>
  // </StrictMode>
);

/== pages/AffiliateDashboardPage.tsx
import React, { useState, useEffect } from 'react';
import DashboardLayout from '../components/templates/DashboardLayout';
import AffiliateDashboard from '../components/organisms/AffiliateDashboard';
import Heading from '../components/atoms/Heading';
import Text from '../components/atoms/Text';
import Card from '../components/atoms/Card';
import Button from '../components/atoms/Button';
import { useNavigate } from 'react-router-dom';

// Simulated affiliate user data
const mockUserData = {
  name: "John Doe",
  referralCode: "JOHNDOE2024",
  totalEarnings: 2500000,
  availableEarnings: 1500000,
  pendingEarnings: 1000000,
  referralCount: 18,
  conversionCount: 12,
  conversionRate: 66.7,
  level: "silver" as const,
  progress: 12,
  nextLevelThreshold: 20,
};

// Simulated referrals
const mockReferrals = [
  {
    id: "1",
    name: "Sarah Johnson",
    date: "8 Mei 2025",
    status: "converted" as const,
    commission: 250000,
  },
  {
    id: "2",
    name: "David Williams",
    date: "5 Mei 2025",
    status: "converted" as const,
    commission: 250000,
  },
  {
    id: "3",
    name: "Michael Brown",
    date: "2 Mei 2025",
    status: "converted" as const,
    commission: 250000,
  },
  {
    id: "4",
    name: "Emily Davis",
    date: "30 April 2025",
    status: "pending" as const,
    commission: 250000,
  },
  {
    id: "5",
    name: "James Wilson",
    date: "28 April 2025",
    status: "converted" as const,
    commission: 250000,
  },
  {
    id: "6",
    name: "Jennifer Lee",
    date: "25 April 2025",
    status: "expired" as const,
    commission: 0,
  },
  {
    id: "7",
    name: "Robert Garcia",
    date: "20 April 2025",
    status: "converted" as const,
    commission: 250000,
  },
];

// Simulated payout history
const mockPayouts = [
  {
    id: "PAY-123456",
    amount: 750000,
    status: "completed" as const,
    date: "1 Mei 2025",
    method: "Bank Transfer",
  },
  {
    id: "PAY-123457",
    amount: 500000,
    status: "processed" as const,
    date: "1 April 2025",
    method: "Bank Transfer",
  },
  {
    id: "PAY-123458",
    amount: 250000,
    status: "completed" as const,
    date: "1 Maret 2025",
    method: "Bank Transfer",
  },
];

const AffiliateDashboardPage: React.FC = () => {
  const [isAffiliate, setIsAffiliate] = useState<boolean | null>(null);
  const [isLoading, setIsLoading] = useState(true);
  const navigate = useNavigate();

  // Simulating API call to check if user is an affiliate
  useEffect(() => {
    // In a real app, this would be an API call to check user's affiliate status
    const checkAffiliateStatus = () => {
      setTimeout(() => {
        // For demo purposes, we're setting to true
        // In a real app, this would be based on API response
        setIsAffiliate(true);
        setIsLoading(false);
      }, 1000);
    };

    checkAffiliateStatus();
  }, []);

  if (isLoading) {
    return (
      <DashboardLayout>
        <div className="flex justify-center items-center h-64">
          <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
        </div>
      </DashboardLayout>
    );
  }

  if (isAffiliate === false) {
    return (
      <DashboardLayout>
        <div className="max-w-4xl mx-auto py-8 px-4">
          <Card className="p-8 text-center">
            <div className="mb-6">
              <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 text-blue-600">
                <svg 
                  className="w-8 h-8" 
                  fill="none" 
                  stroke="currentColor" 
                  viewBox="0 0 24 24" 
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path 
                    strokeLinecap="round" 
                    strokeLinejoin="round" 
                    strokeWidth={2} 
                    d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
              </div>
            </div>
            <Heading level={2} className="mb-4">Anda belum menjadi Afiliator</Heading>
            <Text className="text-gray-500 mb-6 max-w-lg mx-auto">
              Bergabunglah dengan program afiliasi kami dan dapatkan komisi untuk setiap orang yang 
              Anda referensikan ke kursus kami.
            </Text>
            <Button onClick={() => navigate('/affiliate/register')}>
              Daftar Program Afiliasi
            </Button>
          </Card>
        </div>
      </DashboardLayout>
    );
  }

  return (
    <DashboardLayout>
      <div className="max-w-7xl mx-auto py-8 px-4">
        <div className="mb-6">
          <Heading level={2}>Dashboard Afiliasi</Heading>
          <Text className="text-gray-500">
            Kelola program afiliasi dan pantau kinerja referral Anda
          </Text>
        </div>

        <AffiliateDashboard 
          userData={mockUserData}
          referrals={mockReferrals}
          payouts={mockPayouts}
        />
      </div>
    </DashboardLayout>
  );
};

export default AffiliateDashboardPage;

/== pages/AffiliateRegistrationPage.tsx
import React, { useState } from "react";
import Heading from "../components/atoms/Heading";
import Text from "../components/atoms/Text";
import AffiliateApplicationForm from "../components/organisms/AffiliateApplicationForm";
import MainLayout from "../components/templates/MainLayout";
import Card from "../components/atoms/Card";
import Button from "../components/atoms/Button";

const AffiliateRegistrationPage: React.FC = () => {
  const [applicationSubmitted, setApplicationSubmitted] = useState(false);

  const handleApplicationSubmit = (data: any) => {
    // Here you would normally send the data to your backend
    console.log("Application submitted:", data);
    setApplicationSubmitted(true);
    window.scrollTo(0, 0);
  };

  return (
    <MainLayout>
      <div className="py-10 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">
        <div className="max-w-4xl mx-auto">
          {applicationSubmitted ? (
            <Card className="p-8 text-center">
              <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 mb-6">
                <svg
                  className="w-8 h-8 text-green-600"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth={2}
                    d="M5 13l4 4L19 7"
                  />
                </svg>
              </div>
              <Heading level={2} className="mb-2">
                Aplikasi Anda Telah Diterima!
              </Heading>
              <Text className="text-gray-500 mb-6 max-w-lg mx-auto">
                Terima kasih telah mendaftar untuk program afiliasi kami. Kami akan meninjau
                aplikasi Anda dan menghubungi Anda melalui email dalam 2-3 hari kerja.
              </Text>
              <Button onClick={() => window.location.href = "/"}>
                Kembali ke Beranda
              </Button>
            </Card>
          ) : (
            <>
              <div className="text-center mb-10">
                <Heading level={1} className="mb-4">
                  Program Afiliasi
                </Heading>
                <Text className="text-xl text-gray-500 max-w-3xl mx-auto">
                  Dapatkan komisi untuk setiap orang yang Anda referensikan ke kursus kami. 
                  Bergabunglah dengan program afiliasi kami hari ini!
                </Text>
              </div>

              <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-12">
                <Card className="p-6 text-center">
                  <div className="inline-flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 text-blue-600 mb-4">
                    <svg
                      className="w-6 h-6"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        strokeWidth={2}
                        d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                      />
                    </svg>
                  </div>
                  <Heading level={3} className="mb-2">
                    Komisi Menarik
                  </Heading>
                  <Text className="text-gray-500">
                    Dapatkan komisi hingga 20% untuk setiap orang yang mendaftar melalui 
                    link referral Anda.
                  </Text>
                </Card>

                <Card className="p-6 text-center">
                  <div className="inline-flex items-center justify-center w-12 h-12 rounded-full bg-purple-100 text-purple-600 mb-4">
                    <svg
                      className="w-6 h-6"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        strokeWidth={2}
                        d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"
                      />
                      <path
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        strokeWidth={2}
                        d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"
                      />
                    </svg>
                  </div>
                  <Heading level={3} className="mb-2">
                    Pelacakan Real-time
                  </Heading>
                  <Text className="text-gray-500">
                    Pantau semua referral dan komisi Anda secara real-time
                    melalui dashboard afiliasi.
                  </Text>
                </Card>

                <Card className="p-6 text-center">
                  <div className="inline-flex items-center justify-center w-12 h-12 rounded-full bg-green-100 text-green-600 mb-4">
                    <svg
                      className="w-6 h-6"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        strokeWidth={2}
                        d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                      />
                    </svg>
                  </div>
                  <Heading level={3} className="mb-2">
                    Materi Promosi
                  </Heading>
                  <Text className="text-gray-500">
                    Akses berbagai materi promosi seperti banner, email template,
                    dan konten untuk sosial media.
                  </Text>
                </Card>
              </div>

              <div className="mb-12">
                <Card className="p-6">
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                      <Heading level={3} className="mb-4">
                        Bagaimana Cara Kerjanya
                      </Heading>
                      <div className="space-y-4">
                        <div className="flex items-start">
                          <div className="flex-shrink-0 inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 text-blue-600 mr-3">
                            1
                          </div>
                          <div>
                            <Heading level={5} className="mb-1">
                              Daftar sebagai Afiliator
                            </Heading>
                            <Text className="text-gray-500">
                              Isi formulir pendaftaran afiliasi dan tunggu persetujuan dari tim kami.
                            </Text>
                          </div>
                        </div>
                        <div className="flex items-start">
                          <div className="flex-shrink-0 inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 text-blue-600 mr-3">
                            2
                          </div>
                          <div>
                            <Heading level={5} className="mb-1">
                              Dapatkan Link Referral
                            </Heading>
                            <Text className="text-gray-500">
                              Setelah disetujui, Anda akan mendapatkan link referral unik dan akses ke dashboard afiliasi.
                            </Text>
                          </div>
                        </div>
                        <div className="flex items-start">
                          <div className="flex-shrink-0 inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 text-blue-600 mr-3">
                            3
                          </div>
                          <div>
                            <Heading level={5} className="mb-1">
                              Promosikan Kursus Kami
                            </Heading>
                            <Text className="text-gray-500">
                              Bagikan link referral Anda melalui sosial media, blog, email, atau metode promosi lainnya.
                            </Text>
                          </div>
                        </div>
                        <div className="flex items-start">
                          <div className="flex-shrink-0 inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 text-blue-600 mr-3">
                            4
                          </div>
                          <div>
                            <Heading level={5} className="mb-1">
                              Terima Komisi
                            </Heading>
                            <Text className="text-gray-500">
                              Dapatkan komisi untuk setiap pendaftaran yang berhasil melalui link referral Anda.
                            </Text>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div>
                      <Heading level={3} className="mb-4">
                        Keuntungan Program Afiliasi
                      </Heading>
                      <ul className="space-y-3">
                        <li className="flex items-start">
                          <svg
                            className="w-5 h-5 text-green-500 mr-2 mt-0.5"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              strokeLinecap="round"
                              strokeLinejoin="round"
                              strokeWidth={2}
                              d="M5 13l4 4L19 7"
                            />
                          </svg>
                          <Text>Komisi hingga 20% untuk setiap pendaftaran</Text>
                        </li>
                        <li className="flex items-start">
                          <svg
                            className="w-5 h-5 text-green-500 mr-2 mt-0.5"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              strokeLinecap="round"
                              strokeLinejoin="round"
                              strokeWidth={2}
                              d="M5 13l4 4L19 7"
                            />
                          </svg>
                          <Text>Cookie tracking selama 30 hari</Text>
                        </li>
                        <li className="flex items-start">
                          <svg
                            className="w-5 h-5 text-green-500 mr-2 mt-0.5"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              strokeLinecap="round"
                              strokeLinejoin="round"
                              strokeWidth={2}
                              d="M5 13l4 4L19 7"
                            />
                          </svg>
                          <Text>Dashboard pelacakan real-time</Text>
                        </li>
                        <li className="flex items-start">
                          <svg
                            className="w-5 h-5 text-green-500 mr-2 mt-0.5"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              strokeLinecap="round"
                              strokeLinejoin="round"
                              strokeWidth={2}
                              d="M5 13l4 4L19 7"
                            />
                          </svg>
                          <Text>Pembayaran komisi setiap bulan</Text>
                        </li>
                        <li className="flex items-start">
                          <svg
                            className="w-5 h-5 text-green-500 mr-2 mt-0.5"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              strokeLinecap="round"
                              strokeLinejoin="round"
                              strokeWidth={2}
                              d="M5 13l4 4L19 7"
                            />
                          </svg>
                          <Text>Berbagai pilihan metode pembayaran</Text>
                        </li>
                        <li className="flex items-start">
                          <svg
                            className="w-5 h-5 text-green-500 mr-2 mt-0.5"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              strokeLinecap="round"
                              strokeLinejoin="round"
                              strokeWidth={2}
                              d="M5 13l4 4L19 7"
                            />
                          </svg>
                          <Text>Akses ke materi promosi profesional</Text>
                        </li>
                        <li className="flex items-start">
                          <svg
                            className="w-5 h-5 text-green-500 mr-2 mt-0.5"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              strokeLinecap="round"
                              strokeLinejoin="round"
                              strokeWidth={2}
                              d="M5 13l4 4L19 7"
                            />
                          </svg>
                          <Text>Program reward tambahan untuk afiliator terbaik</Text>
                        </li>
                      </ul>
                    </div>
                  </div>
                </Card>
              </div>

              <AffiliateApplicationForm onSubmit={handleApplicationSubmit} />
            </>
          )}
        </div>
      </div>
    </MainLayout>
  );
};

export default AffiliateRegistrationPage;

/== pages/BillingPage.tsx
import React from 'react';
import { Download, CreditCard, Calendar } from 'lucide-react';

const BillingPage = () => {
  const transactions = [
    {
      id: 'INV-2024-001',
      date: '2024-03-25',
      amount: 578317,
      status: 'paid',
      description: 'Premium Plan - Annual Subscription'
    },
    {
      id: 'INV-2024-002', 
      date: '2024-02-25',
      amount: 48194,
      status: 'paid',
      description: 'Premium Plan - Monthly Subscription'
    }
  ];

  return (
    <div className="min-h-screen bg-gray-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div className="mb-8">
          <h1 className="text-2xl font-bold text-gray-900">Billing & Payments</h1>
          <p className="text-gray-600">Manage your subscription and view payment history</p>
        </div>

        {/* Current Plan */}
        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8">
          <div className="flex items-center justify-between">
            <div>
              <h2 className="text-lg font-medium text-gray-900 mb-1">Current Plan</h2>
              <p className="text-gray-600">Premium Plan - Annual Subscription</p>
            </div>
            <div className="flex items-center">
              <span className="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 mr-4">
                Active
              </span>
              <button className="text-primary-600 hover:text-primary-700 font-medium">
                Change Plan
              </button>
            </div>
          </div>

          <div className="mt-6 pt-6 border-t border-gray-200">
            <div className="flex items-center justify-between text-sm">
              <div className="text-gray-500">Next billing date</div>
              <div className="font-medium text-gray-900">March 25, 2025</div>
            </div>
          </div>
        </div>

        {/* Payment Method */}
        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8">
          <h2 className="text-lg font-medium text-gray-900 mb-4">Payment Method</h2>
          
          <div className="flex items-center">
            <div className="h-8 w-12 bg-gray-100 rounded flex items-center justify-center mr-3">
              <CreditCard className="h-4 w-4 text-gray-600" />
            </div>
            <div>
              <div className="font-medium text-gray-900">Visa ending in 4242</div>
              <div className="text-sm text-gray-500">Expires 12/24</div>
            </div>
            <button className="ml-auto text-primary-600 hover:text-primary-700 font-medium">
              Update
            </button>
          </div>
        </div>

        {/* Billing History */}
        <div className="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
          <div className="p-6 border-b border-gray-200">
            <h2 className="text-lg font-medium text-gray-900">Billing History</h2>
          </div>
          
          <div className="divide-y divide-gray-200">
            {transactions.map((transaction) => (
              <div key={transaction.id} className="p-6 flex items-center justify-between">
                <div className="flex items-center">
                  <div className="h-10 w-10 bg-gray-100 rounded-full flex items-center justify-center mr-4">
                    <Calendar className="h-5 w-5 text-gray-600" />
                  </div>
                  <div>
                    <div className="font-medium text-gray-900">{transaction.description}</div>
                    <div className="text-sm text-gray-500">
                      {new Date(transaction.date).toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                      })}
                    </div>
                  </div>
                </div>
                
                <div className="flex items-center">
                  <div className="mr-8">
                    <div className="font-medium text-gray-900">
                      Rp {transaction.amount.toLocaleString()}
                    </div>
                    <div className="text-sm">
                      <span className="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800">
                        {transaction.status}
                      </span>
                    </div>
                  </div>
                  <button className="text-gray-400 hover:text-gray-500">
                    <Download className="h-5 w-5" />
                  </button>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  );
};

export default BillingPage;

/== pages/CertificatePage.tsx
import React from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { Download, Share, ArrowLeft } from 'lucide-react';
import { useCourseStore } from '../store/courseStore';
import { useAuthStore } from '../store/authStore';
import Header from '../components/organisms/Header';

const CertificatePage: React.FC = () => {
  const { courseId } = useParams<{ courseId: string }>();
  const navigate = useNavigate();
  const { getCourseById } = useCourseStore();
  const { user } = useAuthStore();
  const course = getCourseById(courseId || '');

  if (!course || !user) {
    return null;
  }

  const certificateDate = new Date().toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 py-8">
      <Header />
      {/* Header Actions */}
      <div className="max-w-5xl mx-auto px-4 mb-8 mt-8">
        <div className="flex justify-between items-center">
          <button
            onClick={() => navigate(-1)}
            className="flex items-center px-4 py-2 text-gray-300 hover:text-white transition-colors"
          >
            <ArrowLeft className="h-5 w-5 mr-2" />
            Back
          </button>
          <div className="flex space-x-4">
            <button className="flex items-center px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors">
              <Share className="h-5 w-5 mr-2" />
              Share
            </button>
            <button className="flex items-center px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors">
              <Download className="h-5 w-5 mr-2" />
              Download
            </button>
          </div>
        </div>
      </div>

      {/* Certificate Card */}
      <div className="max-w-5xl mx-auto px-4">
        <div className="bg-[#1a1f2e] rounded-xl p-16 relative overflow-hidden">
          {/* Background Pattern */}
          <div className="absolute inset-0 bg-grid-pattern opacity-5"></div>
          
          {/* Certificate Content */}
          <div className="relative">
            {/* Header */}
            <div className="text-center mb-16">
              <div className="inline-flex items-center justify-center w-16 h-16 bg-primary-500 rounded-full mb-6">
                <img src="/logo.svg" alt="Logo" className="w-8 h-8" />
              </div>
              <h1 className="text-4xl font-serif text-white mb-4">Certificate of Completion</h1>
              <p className="text-gray-400">This is to certify that</p>
            </div>

            {/* Student Name */}
            <div className="text-center mb-16">
              <h2 className="text-4xl font-bold text-primary-400 mb-2">{user.name}</h2>
              <p className="text-gray-400">has successfully completed the course</p>
            </div>

            {/* Course Title */}
            <div className="text-center mb-16">
              <h3 className="text-3xl font-bold text-white mb-4">{course.title}</h3>
              <div className="flex items-center justify-center">
                <div className="h-px w-16 bg-gray-700"></div>
                <span className="mx-4 text-gray-400">{certificateDate}</span>
                <div className="h-px w-16 bg-gray-700"></div>
              </div>
            </div>

            {/* Footer */}
            <div className="flex justify-between items-end">
              <div className="text-center">
                <div className="mb-8">
                  <img src="/signature.png" alt="Signature" className="h-12 mx-auto mb-2" />
                  <div className="h-px w-48 bg-gray-700 mb-2"></div>
                  <p className="text-lg font-serif text-white">John Smith</p>
                  <p className="text-sm text-gray-400">Course Instructor</p>
                </div>
              </div>

              {/* Certificate Seal */}
              <div className="flex flex-col items-center">
                <div className="w-24 h-24 border-2 border-primary-500 rounded-full flex items-center justify-center mb-4">
                  <div className="text-primary-400 font-serif text-sm text-center">
                    Coder
                    <br />
                    Growth
                  </div>
                </div>
                <p className="text-sm text-gray-400">Certificate ID: {courseId}-{user.id}</p>
              </div>
            </div>
          </div>
        </div>

        {/* Certificate Details */}
        <div className="mt-8 bg-white/5 backdrop-blur-sm rounded-xl p-8">
          <h2 className="text-xl font-bold text-white mb-8">Certificate Details</h2>
          
          <div className="grid grid-cols-2 gap-8 mb-8">
            <div>
              <p className="text-sm text-gray-400 mb-1">Course</p>
              <p className="text-lg text-white">{course.title}</p>
            </div>
            <div>
              <p className="text-sm text-gray-400 mb-1">Completion Date</p>
              <p className="text-lg text-white">{certificateDate}</p>
            </div>
            <div>
              <p className="text-sm text-gray-400 mb-1">Duration</p>
              <p className="text-lg text-white">{course.duration}</p>
            </div>
            <div>
              <p className="text-sm text-gray-400 mb-1">Certificate ID</p>
              <p className="text-lg text-white">{courseId}-{user.id}</p>
            </div>
          </div>

          <div className="border-t border-gray-700 pt-8">
            <h3 className="text-lg font-medium text-white mb-4">Skills Verified</h3>
            <div className="flex flex-wrap gap-2">
              {course.features.map((feature, index) => (
                <span
                  key={index}
                  className="px-3 py-1 bg-primary-500/20 text-primary-300 rounded-full text-sm border border-primary-500/30"
                >
                  {feature}
                </span>
              ))}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default CertificatePage;

/== pages/CertificatesDashboardPage.tsx
import React from 'react';
import { useNavigate } from 'react-router-dom';
import { Award, ChevronRight, Download, Search, Calendar, Shield } from 'lucide-react';
import { useCourseStore } from '../store/courseStore';
import Card from '../components/atoms/Card';
import SearchInput from '../components/molecules/SearchInput';
import Header from '../components/organisms/Header';

const CertificatesDashboardPage: React.FC = () => {
  const navigate = useNavigate();
  const { enrolledCourses } = useCourseStore();
  const [searchQuery, setSearchQuery] = React.useState('');
  const [selectedCategory, setSelectedCategory] = React.useState('all');

  // Group courses by category
  const coursesByCategory = enrolledCourses.reduce((acc, course) => {
    const category = course.category || 'Other';
    if (!acc[category]) {
      acc[category] = [];
    }
    acc[category].push(course);
    return acc;
  }, {} as Record<string, typeof enrolledCourses>);

  // Filter courses based on search query and category
  const filteredCourses = enrolledCourses.filter(course => {
    const matchesSearch = course.title.toLowerCase().includes(searchQuery.toLowerCase());
    const matchesCategory = selectedCategory === 'all' || course.category === selectedCategory;
    return matchesSearch && matchesCategory;
  });

  const handleCertificateClick = (courseId: string) => {
    navigate(`/certificate/${courseId}`);
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-900 to-gray-800">
    <Header />
      
      {/* Header */}
      <div className="relative overflow-hidden">
        <div className="absolute inset-0 bg-grid-pattern opacity-10"></div>
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 relative">
          <div className="md:flex md:items-center md:justify-between">
            <div className="flex-1 min-w-0">
              <div className="flex items-center mb-4">
                <div className="bg-primary-500 p-3 rounded-xl mr-4">
                  <Award className="h-8 w-8 text-white" />
                </div>
                <div>
                  <h1 className="text-4xl font-bold text-white mb-2">
                    My Certificates
                  </h1>
                  <p className="text-xl text-gray-300">
                    View and manage your earned certificates
                  </p>
                </div>
              </div>

              <div className="mt-8 flex flex-wrap gap-4">
                <div className="bg-white/10 backdrop-blur-lg rounded-lg px-4 py-3 flex items-center">
                  <Award className="h-5 w-5 text-primary-400 mr-2" />
                  <div>
                    <div className="text-2xl font-bold text-white">{filteredCourses.length}</div>
                    <div className="text-sm text-gray-400">Total Certificates</div>
                  </div>
                </div>
                <div className="bg-white/10 backdrop-blur-lg rounded-lg px-4 py-3 flex items-center">
                  <Calendar className="h-5 w-5 text-green-400 mr-2" />
                  <div>
                    <div className="text-2xl font-bold text-white">May 2025</div>
                    <div className="text-sm text-gray-400">Latest Achievement</div>
                  </div>
                </div>
                <div className="bg-white/10 backdrop-blur-lg rounded-lg px-4 py-3 flex items-center">
                  <Shield className="h-5 w-5 text-yellow-400 mr-2" />
                  <div>
                    <div className="text-2xl font-bold text-white">Verified</div>
                    <div className="text-sm text-gray-400">Certificate Status</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Content */}
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 -mt-8">
        {/* Search and Filters */}
        <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 mb-8">
          <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
            <SearchInput
              value={searchQuery}
              onChange={setSearchQuery}
              placeholder="Search certificates..."
              className="max-w-md"
            />
            <div className="flex items-center space-x-4">
              <select
                value={selectedCategory}
                onChange={(e) => setSelectedCategory(e.target.value)}
                className="bg-white/10 text-white border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500"
              >
                <option value="all">All Categories</option>
                {Object.keys(coursesByCategory).map(category => (
                  <option key={category} value={category}>{category}</option>
                ))}
              </select>
            </div>
          </div>
        </div>

        {/* Certificates Grid */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {filteredCourses.map((course) => (
            <Card
              key={course.id}
              className="group hover:scale-105 transition-all duration-300 cursor-pointer bg-white/10 backdrop-blur-lg border border-white/10"
              onClick={() => handleCertificateClick(course.id)}
            >
              <div className="p-6">
                <div className="flex items-start justify-between">
                  <div className={`${course.color} p-3 rounded-xl`}>
                    <Award className="h-6 w-6 text-white" />
                  </div>
                  <button className="p-2 hover:bg-white/10 rounded-lg transition-colors">
                    <Download className="h-5 w-5 text-gray-400" />
                  </button>
                </div>

                <div className="mt-6">
                  <h3 className="text-xl font-semibold text-white mb-2">
                    {course.title}
                  </h3>
                  <div className="flex items-center text-sm text-gray-400 mb-4">
                    <Calendar className="h-4 w-4 mr-2" />
                    <span>Completed on May 15, 2025</span>
                  </div>
                  <div className="flex flex-wrap gap-2 mb-6">
                    {(course.features || []).slice(0, 3).map((feature, index) => (
                      <span
                        key={index}
                        className="px-2.5 py-1 rounded-full text-xs font-medium bg-primary-500/20 text-primary-300 border border-primary-500/30"
                      >
                        {feature}
                      </span>
                    ))}
                  </div>
                </div>

                <div className="pt-4 border-t border-gray-700">
                  <div className="flex items-center justify-between text-sm">
                    <div className="text-gray-400">
                      ID: {course.id}
                    </div>
                    <div className="flex items-center text-primary-400 font-medium">
                      View Certificate
                      <ChevronRight className="h-4 w-4 ml-1 group-hover:translate-x-1 transition-transform" />
                    </div>
                  </div>
                </div>
              </div>
            </Card>
          ))}
        </div>

        {/* Empty State */}
        {filteredCourses.length === 0 && (
          <div className="text-center py-16 bg-white/5 rounded-xl backdrop-blur-lg">
            <Award className="mx-auto h-16 w-16 text-gray-600 mb-4" />
            <h3 className="text-xl font-medium text-white mb-2">
              No certificates found
            </h3>
            <p className="text-gray-400">
              {searchQuery
                ? "No certificates match your search criteria"
                : "Complete courses to earn certificates"}
            </p>
          </div>
        )}
      </div>
    </div>
  );
};

export default CertificatesDashboardPage;

/== pages/CompilerPage.tsx
import React, { useState } from 'react';
import { Play, Download, Copy, Trash, Settings, ChevronDown } from 'lucide-react';
import Card from '../components/atoms/Card';
// ... other imports

const CompilerPage = () => {
  // ... component code stays the same, just remove MainLayout wrapper
  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      {/* ... rest of the JSX */}
    </div>
  );
};

export default CompilerPage;

/== pages/CompleteLearningPage.tsx
import React from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { Trophy, Download, Share, ArrowRight, Star, Clock, Users, CheckCircle } from 'lucide-react';
import { useCourseStore } from '../store/courseStore';
import Button from '../components/atoms/Button';
import Card from '../components/atoms/Card';
import Confetti from '../components/atoms/Confetti';
import UserAvatar from '../components/molecules/UserAvatar';
import ProgressBar from '../components/molecules/ProgressBar';
import Badge from '../components/atoms/Badge';
import Header from '../components/organisms/Header';

const CompleteLearningPage: React.FC = () => {
  const { courseId } = useParams<{ courseId: string }>();
  const navigate = useNavigate();
  const { getCourseById } = useCourseStore();
  const course = getCourseById(courseId || '');

  if (!course) {
    return null;
  }

  const handleViewCertificate = () => {
    navigate(`/certificate/${courseId}`);
  };

  const handleShareSuccess = () => {
    // Implement share functionality
  };

  const handleDownloadCertificate = () => {
    // Implement certificate download
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-600 to-purple-700">
      <Header />
      <Confetti />
      
      <div className="max-w-4xl mx-auto px-4 py-16">
        {/* Completion Card */}
        <Card className="text-center p-8 mb-8 bg-white/10 backdrop-blur-lg border border-white/20">
          <div className="mb-8">
            <div className="w-24 h-24 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6">
              <Trophy className="h-12 w-12 text-white" />
            </div>
            <h1 className="text-4xl font-bold text-white mb-4">
              Congratulations! 🎉
            </h1>
            <p className="text-xl text-white/90">
              You've successfully completed the course
            </p>
          </div>

          <div className="text-3xl font-bold text-white mb-8">
            {course.title}
          </div>

          <div className="grid grid-cols-3 gap-6 mb-8">
            <div className="bg-white/5 rounded-lg p-4">
              <div className="text-2xl font-bold text-white">100%</div>
              <div className="text-sm text-white/70">Completion Rate</div>
            </div>
            <div className="bg-white/5 rounded-lg p-4">
              <div className="text-2xl font-bold text-white">500</div>
              <div className="text-sm text-white/70">XP Earned</div>
            </div>
            <div className="bg-white/5 rounded-lg p-4">
              <div className="text-2xl font-bold text-white">12</div>
              <div className="text-sm text-white/70">Hours Spent</div>
            </div>
          </div>

          <div className="flex justify-center space-x-4">
            <Button
              variant="primary"
              onClick={handleViewCertificate}
              className="text-blue-600 hover:bg-gray-100"
            >
              View Certificate
            </Button>
            <Button
              variant="outline"
              onClick={handleShareSuccess}
              className="border-white text-white hover:bg-white/10"
            >
              Share Achievement
            </Button>
          </div>
        </Card>

        {/* Course Details */}
        <Card className="p-8 bg-white dark:bg-gray-800">
          <div className="flex items-center justify-between mb-8">
            <div>
              <h2 className="text-2xl font-bold text-gray-900 dark:text-white mb-2">
                Course Overview
              </h2>
              <p className="text-gray-600 dark:text-gray-300">
                Here's what you've accomplished
              </p>
            </div>
            <div className="flex items-center">
              <Star className="h-5 w-5 text-yellow-400 fill-current" />
              <span className="ml-2 text-gray-900 dark:text-white font-medium">
                {course.rating}
              </span>
            </div>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
            <div>
              <h3 className="font-medium text-gray-900 dark:text-white mb-4">
                Course Statistics
              </h3>
              <div className="space-y-4">
                <div className="flex items-center text-gray-600 dark:text-gray-300">
                  <Clock className="h-5 w-5 mr-3" />
                  <span>{course.duration}</span>
                </div>
                <div className="flex items-center text-gray-600 dark:text-gray-300">
                  <Users className="h-5 w-5 mr-3" />
                  <span>{course.students.toLocaleString()} students</span>
                </div>
                <div className="flex items-center text-gray-600 dark:text-gray-300">
                  <CheckCircle className="h-5 w-5 mr-3" />
                  <span>{course.level}</span>
                </div>
              </div>
            </div>

            <div>
              <h3 className="font-medium text-gray-900 dark:text-white mb-4">
                Your Progress
              </h3>
              <div className="space-y-4">
                <div>
                  <div className="flex justify-between mb-1">
                    <span className="text-sm text-gray-600 dark:text-gray-300">
                      Course Completion
                    </span>
                    <span className="text-sm font-medium text-gray-900 dark:text-white">
                      100%
                    </span>
                  </div>
                  <ProgressBar value={100} color="success" />
                </div>
                <div>
                  <div className="flex justify-between mb-1">
                    <span className="text-sm text-gray-600 dark:text-gray-300">
                      Quizzes Completed
                    </span>
                    <span className="text-sm font-medium text-gray-900 dark:text-white">
                      12/12
                    </span>
                  </div>
                  <ProgressBar value={100} color="success" />
                </div>
                <div>
                  <div className="flex justify-between mb-1">
                    <span className="text-sm text-gray-600 dark:text-gray-300">
                      Projects Completed
                    </span>
                    <span className="text-sm font-medium text-gray-900 dark:text-white">
                      3/3
                    </span>
                  </div>
                  <ProgressBar value={100} color="success" />
                </div>
              </div>
            </div>
          </div>

          <div className="border-t border-gray-200 dark:border-gray-700 pt-8">
            <h3 className="font-medium text-gray-900 dark:text-white mb-4">
              Skills Acquired
            </h3>
            <div className="flex flex-wrap gap-2">
              {course.features.map((feature, index) => (
                <Badge key={index} variant="primary">
                  {feature}
                </Badge>
              ))}
            </div>
          </div>
        </Card>
      </div>
    </div>
  );
};

export default CompleteLearningPage;

/== pages/CourseEnrollmentPage.tsx
import React, { useState } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { Play, ArrowRight, Share, CheckCircle, Star, Clock, Users, BookOpen, Award, ChevronDown, ChevronRight } from 'lucide-react';
import { useCourseStore } from '../store/courseStore';
import { useAuthStore } from '../store/authStore';

const CourseEnrollmentPage: React.FC = () => {
  const { courseId } = useParams<{ courseId: string }>();
  const navigate = useNavigate();
  const { enrolledCourses, enrollInCourse, getCourseById } = useCourseStore();
  const { isAuthenticated } = useAuthStore();
  const [showEnrollSuccess, setShowEnrollSuccess] = useState(false);
  const [expandedChapter, setExpandedChapter] = useState<string | null>('chapter-1');

  const course = getCourseById(courseId || '');
  const isEnrolled = enrolledCourses.some(c => c.id === courseId);

  if (!course) {
    return (
      <div className="min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4">
        <div className="bg-white dark:bg-gray-800 rounded-xl p-8 text-center max-w-lg">
          <h1 className="text-3xl font-bold text-gray-900 dark:text-white mb-4">Course Not Found</h1>
          <p className="text-gray-600 dark:text-gray-300 mb-6">
            The course you're looking for doesn't exist or has been moved.
          </p>
          <button
            onClick={() => navigate('/courses')}
            className="inline-flex items-center px-6 py-3 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition duration-200"
          >
            Browse Courses
          </button>
        </div>
      </div>
    );
  }

  const handleEnrollment = () => {
    if (!isAuthenticated) {
      // Show login modal or redirect to login
      return;
    }

    if (isEnrolled) {
      navigate(`/courses/${courseId}/lessons/${course.firstLessonId}`);
    } else {
      enrollInCourse(courseId || '');
      setShowEnrollSuccess(true);
      setTimeout(() => {
        navigate(`/courses/${courseId}/lessons/${course.firstLessonId}`);
      }, 2000);
    }
  };

  const curriculum = [
    {
      id: 'chapter-1',
      title: 'Introduction to Go',
      duration: '45 minutes',
      lessons: [
        { id: 'lesson-1', title: 'What is Go?', duration: '10 min', isCompleted: false },
        { id: 'lesson-2', title: 'Setting up Go Environment', duration: '15 min', isCompleted: false },
        { id: 'lesson-3', title: 'Your First Go Program', duration: '20 min', isCompleted: false },
      ]
    },
    {
      id: 'chapter-2',
      title: 'Basic Syntax and Data Types',
      duration: '1 hour',
      lessons: [
        { id: 'lesson-4', title: 'Variables and Constants', duration: '15 min', isCompleted: false },
        { id: 'lesson-5', title: 'Basic Data Types', duration: '25 min', isCompleted: false },
        { id: 'lesson-6', title: 'Type Conversion', duration: '20 min', isCompleted: false },
      ]
    },
    {
      id: 'chapter-3',
      title: 'Control Structures',
      duration: '1.5 hours',
      lessons: [
        { id: 'lesson-7', title: 'If Statements', duration: '30 min', isCompleted: false },
        { id: 'lesson-8', title: 'Loops in Go', duration: '30 min', isCompleted: false },
        { id: 'lesson-9', title: 'Switch Statements', duration: '30 min', isCompleted: false },
      ]
    }
  ];

  return (
    <div className="min-h-screen bg-gray-50 dark:bg-gray-900">
      {/* Success Alert */}
      {showEnrollSuccess && (
        <div className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-fade-in-down">
          <div className="flex items-center">
            <CheckCircle className="h-5 w-5 mr-2" />
            <span>Successfully enrolled! Redirecting to course...</span>
          </div>
        </div>
      )}

      {/* Hero Section */}
      <div className="relative overflow-hidden bg-gradient-to-br from-cyan-500 to-blue-600 dark:from-cyan-900 dark:to-blue-900">
        <div className="absolute inset-0 bg-grid-pattern opacity-10"></div>
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 relative">
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <div>
              {/* Breadcrumbs */}
              <nav className="flex mb-6" aria-label="Breadcrumb">
                <ol className="flex items-center space-x-2 text-white/80">
                  <li><a href="/" className="hover:text-white">Home</a></li>
                  <ChevronRight className="h-4 w-4" />
                  <li><a href="/courses" className="hover:text-white">Courses</a></li>
                  <ChevronRight className="h-4 w-4" />
                  <li className="text-white font-medium">{course.title}</li>
                </ol>
              </nav>

              <h1 className="text-4xl font-bold text-white mb-4">{course.title}</h1>
              <p className="text-xl text-white/90 mb-6">{course.description}</p>

              <div className="flex flex-wrap gap-6 mb-8">
                <div className="flex items-center text-white">
                  <Star className="h-5 w-5 text-yellow-400 fill-current mr-2" />
                  <span>{course.rating}</span>
                  <span className="mx-2">•</span>
                  <span>{course.students.toLocaleString()} students</span>
                </div>
                <div className="flex items-center text-white">
                  <Clock className="h-5 w-5 mr-2" />
                  <span>{course.duration}</span>
                </div>
                <div className="flex items-center text-white">
                  <BookOpen className="h-5 w-5 mr-2" />
                  <span>{course.level}</span>
                </div>
              </div>

              <div className="flex items-center mb-8">
                <img
                  src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
                  alt="Instructor"
                  className="w-12 h-12 rounded-full border-2 border-white"
                />
                <div className="ml-4">
                  <div className="text-white font-medium">John Smith</div>
                  <div className="text-white/80 text-sm">Senior Software Engineer</div>
                </div>
              </div>

              <button
                onClick={handleEnrollment}
                className="inline-flex items-center px-8 py-4 bg-white text-blue-600 rounded-lg hover:bg-gray-50 transition duration-200 font-medium text-lg shadow-lg"
              >
                {isEnrolled ? (
                  <>
                    <Play className="h-5 w-5 mr-2" />
                    Continue Learning
                  </>
                ) : (
                  <>
                    <BookOpen className="h-5 w-5 mr-2" />
                    Start Learning Now
                  </>
                )}
              </button>
            </div>

            <div className="hidden lg:block">
              <div className="relative">
                <div className="absolute -inset-4 bg-white/20 rounded-2xl blur-xl"></div>
                <img
                  src={course.image}
                  alt={course.title}
                  className="relative rounded-2xl shadow-2xl"
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Course Content */}
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
          {/* Main Content */}
          <div className="lg:col-span-2">
            {/* What You'll Learn */}
            <div className="bg-white dark:bg-gray-800 rounded-xl p-8 mb-8 shadow-sm">
              <h2 className="text-2xl font-bold text-gray-900 dark:text-white mb-6">
                What You'll Learn
              </h2>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                {course.features.map((feature, index) => (
                  <div key={index} className="flex items-start">
                    <CheckCircle className="h-5 w-5 text-green-500 mr-3 flex-shrink-0 mt-0.5" />
                    <span className="text-gray-700 dark:text-gray-300">{feature}</span>
                  </div>
                ))}
              </div>
            </div>

            {/* Course Curriculum */}
            <div className="bg-gray-800 rounded-xl shadow-sm overflow-hidden">
              <div className="p-6 border-b border-gray-700">
                <h2 className="text-2xl font-bold text-white">
                  Course Curriculum
                </h2>
              </div>
              
              <div className="divide-y divide-gray-700">
                {curriculum.map((chapter) => (
                  <div key={chapter.id} className="bg-gray-800">
                    <button
                      onClick={() => setExpandedChapter(
                        expandedChapter === chapter.id ? null : chapter.id
                      )}
                      className="flex items-center justify-between w-full p-6 hover:bg-gray-750 transition-colors duration-200"
                    >
                      <div className="flex items-center">
                        <div className="mr-4">
                          {expandedChapter === chapter.id ? (
                            <ChevronDown className="h-5 w-5 text-gray-400" />
                          ) : (
                            <ChevronRight className="h-5 w-5 text-gray-400" />
                          )}
                        </div>
                        <div className="text-left">
                          <h3 className="text-lg font-medium text-white">
                            {chapter.title}
                          </h3>
                          <p className="text-sm text-gray-400">
                            {chapter.duration}
                          </p>
                        </div>
                      </div>
                    </button>
                    
                    {expandedChapter === chapter.id && (
                      <div className="bg-gray-750 px-6 pb-6">
                        <div className="space-y-4">
                          {chapter.lessons.map((lesson) => (
                            <div
                              key={lesson.id}
                              className="flex items-center justify-between p-4 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors duration-200 cursor-pointer"
                            >
                              <div className="flex items-center">
                                <div className="w-8 h-8 bg-blue-900 rounded-full flex items-center justify-center mr-4">
                                  <Play className="h-4 w-4 text-blue-400" />
                                </div>
                                <div>
                                  <h4 className="text-white font-medium">
                                    {lesson.title}
                                  </h4>
                                  <p className="text-sm text-gray-400">
                                    {lesson.duration}
                                  </p>
                                </div>
                              </div>
                              {lesson.isCompleted && (
                                <CheckCircle className="h-5 w-5 text-green-500" />
                              )}
                            </div>
                          ))}
                        </div>
                      </div>
                    )}
                  </div>
                ))}
              </div>
            </div>
          </div>

          {/* Sidebar */}
          <div className="lg:col-span-1">
            <div className="sticky top-8">
              <div className="bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden">
                <div className="p-6">
                  <div className="space-y-4">
                    <div>
                      <div className="text-sm text-gray-500 dark:text-gray-400">Price</div>
                      <div className="text-2xl font-bold text-gray-900 dark:text-white">
                        {course.price}
                      </div>
                    </div>
                    
                    <button
                      onClick={handleEnrollment}
                      className="w-full inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200 font-medium"
                    >
                      {isEnrolled ? (
                        <>
                          <Play className="h-5 w-5 mr-2" />
                          Continue Learning
                        </>
                      ) : (
                        <>
                          <BookOpen className="h-5 w-5 mr-2" />
                          Enroll Now
                        </>
                      )}
                    </button>

                    <button
                      onClick={() => {/* Add share functionality */}}
                      className="w-full inline-flex items-center justify-center px-6 py-3 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-750 transition duration-200 font-medium"
                    >
                      <Share className="h-5 w-5 mr-2" />
                      Share Course
                    </button>

                    <div className="border-t border-gray-700 pt-4 mt-6">
                      <h3 className="text-lg font-medium text-white mb-4">
                        This course includes:
                      </h3>
                      <div className="space-y-3">
                        <div className="flex items-center text-gray-300">
                          <Clock className="h-5 w-5 mr-3" />
                          <span>{course.duration} of content</span>
                        </div>
                        <div className="flex items-center text-gray-300">
                          <BookOpen className="h-5 w-5 mr-3" />
                          <span>24/7 lifetime access</span>
                        </div>
                        <div className="flex items-center text-gray-300">
                          <Award className="h-5 w-5 mr-3" />
                          <span>Certificate of completion</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default CourseEnrollmentPage;

/== pages/CoursePage.tsx
import React, { useState } from 'react';
import { useCourseStore } from '../store/courseStore';
import { Search, Filter, Clock, Users, Star, ChevronDown } from 'lucide-react';

const CoursePage = () => {
  const { listCourses } = useCourseStore();
  const [searchQuery, setSearchQuery] = useState('');
  const [selectedLevel, setSelectedLevel] = useState('all');
  const [selectedCategory, setSelectedCategory] = useState('all');

  const levels = [
    { value: 'all', label: 'All Levels' },
    { value: 'beginner', label: 'Beginner' },
    { value: 'intermediate', label: 'Intermediate' },
    { value: 'advanced', label: 'Advanced' }
  ];

  const categories = [
    { value: 'all', label: 'All Categories' },
    { value: 'programming', label: 'Programming' },
    { value: 'web', label: 'Web Development' },
    { value: 'mobile', label: 'Mobile Development' },
    { value: 'data', label: 'Data Science' }
  ];

  const filteredCourses = listCourses.filter(course => {
    const matchesSearch = course.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                         course.description.toLowerCase().includes(searchQuery.toLowerCase());
    const matchesLevel = selectedLevel === 'all' || course.level.toLowerCase().includes(selectedLevel);
    const matchesCategory = selectedCategory === 'all';

    return matchesSearch && matchesLevel && matchesCategory;
  });

  return (
    <div className="min-h-screen bg-gray-50 dark:bg-gray-900">
      {/* Hero Section */}
      <div className="bg-gradient-to-br from-blue-600 to-blue-800 dark:from-blue-900 dark:to-blue-950">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
          <div className="text-center">
            <h1 className="text-4xl font-bold text-white mb-4">
              Explore Our Courses
            </h1>
            <p className="text-xl text-white/90 mb-8 max-w-2xl mx-auto">
              Learn from our comprehensive collection of courses designed to help you master programming and development skills.
            </p>
            <div className="max-w-2xl mx-auto">
              <div className="relative">
                <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
                <input
                  type="text"
                  placeholder="Search for courses..."
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  className="w-full pl-10 pr-4 py-3 bg-white/10 backdrop-blur-lg border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/30"
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Filters Section */}
      <div className="border-b dark:border-gray-800">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
          <div className="flex flex-wrap items-center gap-4">
            <div className="flex items-center">
              <Filter className="h-5 w-5 text-gray-400 mr-2" />
              <span className="text-gray-600 dark:text-gray-400">Filters:</span>
            </div>
            <div className="flex flex-wrap gap-4">
              <div className="relative">
                <select
                  value={selectedLevel}
                  onChange={(e) => setSelectedLevel(e.target.value)}
                  className="appearance-none bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg pl-4 pr-10 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  {levels.map(level => (
                    <option key={level.value} value={level.value}>
                      {level.label}
                    </option>
                  ))}
                </select>
                <ChevronDown className="absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none" />
              </div>
              <div className="relative">
                <select
                  value={selectedCategory}
                  onChange={(e) => setSelectedCategory(e.target.value)}
                  className="appearance-none bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg pl-4 pr-10 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  {categories.map(category => (
                    <option key={category.value} value={category.value}>
                      {category.label}
                    </option>
                  ))}
                </select>
                <ChevronDown className="absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none" />
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Course Grid */}
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {filteredCourses.map((course) => (
            <div
              key={course.id}
              className="bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-shadow duration-300 border border-gray-200 dark:border-gray-700"
            >
              <div className="relative">
                <img
                  src={course.image}
                  alt={course.title}
                  className="w-full h-48 object-cover"
                />
                <div className="absolute top-4 right-4 flex items-center bg-white dark:bg-gray-900 rounded-full px-2 py-1">
                  <Star className="h-4 w-4 text-yellow-400 fill-current" />
                  <span className="ml-1 text-sm font-medium">{course.rating}</span>
                </div>
                <div className="absolute bottom-4 left-4">
                  <span className={`${course.color} text-white px-3 py-1 rounded-full text-sm font-medium`}>
                    {course.level}
                  </span>
                </div>
              </div>
              
              <div className="p-6">
                <h3 className="text-xl font-bold text-gray-900 dark:text-white mb-2">
                  {course.title}
                </h3>
                <p className="text-gray-600 dark:text-gray-300 mb-4 line-clamp-2">
                  {course.description}
                </p>
                
                <div className="flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-4">
                  <div className="flex items-center">
                    <Clock className="h-4 w-4 mr-1" />
                    {course.duration}
                  </div>
                  <div className="flex items-center">
                    <Users className="h-4 w-4 mr-1" />
                    {course.students.toLocaleString()} students
                  </div>
                </div>
                
                <a
                  href={`/courses/${course.id}`}
                  className={`block w-full text-center px-4 py-2 ${course.color} text-white rounded-lg hover:opacity-90 transition duration-200 font-medium`}
                >
                  Enroll Now
                </a>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
};

export default CoursePage;

/== pages/DashboardPage.tsx
import React, { useEffect } from 'react';
import { useAuthStore } from '../store/authStore';
import { useCourseStore } from '../store/courseStore';
import { Link } from 'react-router-dom';
import { ChevronRight, Code, PlayCircle, Award, Users, Plus, BookOpen, Star, Globe, Zap, Crown, Check, AlignCenterVertical as Certificate } from 'lucide-react';
import Header from '../components/organisms/Header';
import { Steps } from 'intro.js-react';
import 'intro.js/introjs.css';

const DashboardPage: React.FC = () => {
  const { user, completeTour } = useAuthStore();
  const { 
    enrolledCourses, 
    recommendedCourses,
    currentStreak,
    highestStreak,
    totalXp,
    solvedChallenges,
    dailyChallenge,
    leaderboard
  } = useCourseStore();

  const [showTour, setShowTour] = React.useState(!user?.hasSeenTour);

  const steps = [
    {
      element: '.dashboard-welcome',
      intro: 'Welcome to your dashboard! Here you can track your progress and see your achievements.',
      position: 'bottom'
    },
    {
      element: '.dashboard-stats',
      intro: 'View your learning statistics including XP earned, challenges solved, and current streak.',
      position: 'bottom'
    },
    {
      element: '.daily-challenge',
      intro: 'Complete daily challenges to earn XP and maintain your learning streak.',
      position: 'top'
    },
    {
      element: '.enrolled-courses',
      intro: 'Access your enrolled courses and continue your learning journey.',
      position: 'top'
    },
    {
      element: '.leaderboard-section',
      intro: 'Compete with other learners and track your ranking on the leaderboard.',
      position: 'left'
    },
    {
      element: '.learning-path',
      intro: 'Follow your personalized learning path to master programming skills.',
      position: 'left'
    }
  ];

  const onTourExit = () => {
    setShowTour(false);
    completeTour();
  };

  if (!user) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 flex items-center justify-center">
        <div className="bg-white/10 backdrop-blur-lg rounded-xl p-8 text-center max-w-md w-full mx-4">
          <h2 className="text-2xl font-bold text-white mb-4">Please sign in to view your dashboard</h2>
          <p className="text-gray-300 mb-6">Sign in to track your progress and continue learning</p>
          <Link
            to="/"
            className="inline-block w-full py-3 px-6 bg-primary-500 text-white font-medium rounded-lg hover:bg-primary-600 transition duration-200"
          >
            Go to Home
          </Link>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-900 to-gray-800">
      <Header />
      
      <Steps
        enabled={showTour}
        steps={steps}
        initialStep={0}
        onExit={onTourExit}
        options={{
          dontShowAgain: true,
          dontShowAgainLabel: "Don't show this again",
          showProgress: true,
          showBullets: true,
          exitOnOverlayClick: false,
          nextLabel: 'Next →',
          prevLabel: '← Back',
          doneLabel: 'Done',
          overlayOpacity: 0.7
        }}
      />
      
      {/* User Stats Section */}
      <div className="bg-white/10 backdrop-blur-lg border-b border-white/10">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          <div className="flex flex-col md:flex-row md:items-center md:justify-between">
            <div className="dashboard-welcome">
              <div className="flex items-center mb-2">
                <div className="w-12 h-12 bg-primary-500 rounded-xl flex items-center justify-center text-white text-xl font-bold">
                  {user.name.charAt(0)}
                </div>
                <div className="ml-4">
                  <h1 className="text-2xl font-bold text-white">Welcome back, {user.name}!</h1>
                  <p className="text-gray-300">Continue your learning journey</p>
                </div>
              </div>
              <div className="flex items-center mt-4 space-x-6">
                <div className="flex items-center text-yellow-400">
                  <Star className="h-5 w-5 fill-current" />
                  <span className="ml-2 font-medium">{totalXp} XP</span>
                </div>
                <div className="flex items-center text-blue-400">
                  <Zap className="h-5 w-5" />
                  <span className="ml-2 font-medium">{currentStreak} day streak</span>
                </div>
              </div>
            </div>
            <div className="mt-6 md:mt-0 flex space-x-4">
              <Link
                to="/compiler"
                className="inline-flex items-center px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition duration-200"
              >
                <Code className="h-5 w-5 mr-2" />
                Open Compiler
              </Link>
              <Link
                to="/courses"
                className="inline-flex items-center px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition duration-200"
              >
                <Plus className="h-5 w-5 mr-2" />
                Explore Courses
              </Link>
            </div>
          </div>
        </div>
      </div>

      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
          {/* Main Content */}
          <div className="lg:col-span-2 space-y-8">
            {/* Stats Overview */}
            <div className="dashboard-stats grid grid-cols-2 md:grid-cols-4 gap-4">
              <div className="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white">
                <div className="flex items-center mb-2">
                  <Award className="h-8 w-8" />
                </div>
                <div className="text-2xl font-bold">{totalXp}</div>
                <div className="text-sm text-white/80">Total XP</div>
              </div>
              <div className="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white">
                <div className="flex items-center mb-2">
                  <PlayCircle className="h-8 w-8" />
                </div>
                <div className="text-2xl font-bold">{solvedChallenges}</div>
                <div className="text-sm text-white/80">Challenges Solved</div>
              </div>
              <div className="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white">
                <div className="flex items-center mb-2">
                  <Users className="h-8 w-8" />
                </div>
                <div className="text-2xl font-bold">{currentStreak}</div>
                <div className="text-sm text-white/80">Day Streak</div>
              </div>
              <Link 
                to="/certificates"
                className="bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl p-6 text-white hover:from-yellow-600 hover:to-yellow-700 transition-all duration-300"
              >
                <div className="flex items-center mb-2">
                  <Award className="h-8 w-8" />
                </div>
                <div className="text-2xl font-bold">View</div>
                <div className="text-sm text-white/80">Certificates</div>
              </Link>
            </div>

            {/* Daily Challenge */}
            {dailyChallenge && (
              <div className="daily-challenge bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl p-6 text-white">
                <div className="flex items-center justify-between mb-4">
                  <div className="flex items-center">
                    <div className="w-12 h-12 bg-white/10 rounded-xl flex items-center justify-center">
                      <PlayCircle className="h-6 w-6" />
                    </div>
                    <div className="ml-4">
                      <h3 className="text-xl font-bold">Daily Challenge</h3>
                      <p className="text-white/80">{dailyChallenge.description}</p>
                    </div>
                  </div>
                  <button className="px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition duration-200">
                    Start Challenge
                  </button>
                </div>
                <div className="flex items-center text-sm mt-4 pt-4 border-t border-white/10">
                  <Star className="h-4 w-4 mr-2" />
                  <span>{dailyChallenge.xpPoints} XP</span>
                  <span className="mx-2">•</span>
                  <span className="capitalize">{dailyChallenge.difficulty} Difficulty</span>
                </div>
              </div>
            )}

            {/* Enrolled Courses */}
            {enrolledCourses.length > 0 && (
              <div className="enrolled-courses">
                <div className="flex items-center justify-between mb-6">
                  <h2 className="text-xl font-bold text-white">My Courses</h2>
                  <Link
                    to="/my-learning"
                    className="text-primary-400 hover:text-primary-300 flex items-center"
                  >
                    View All
                    <ChevronRight className="h-4 w-4 ml-1" />
                  </Link>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  {enrolledCourses.map((course) => (
                    <div
                      key={course.id}
                      className="bg-white/10 backdrop-blur-lg rounded-xl p-6 hover:bg-white/20 transition duration-300"
                    >
                      <div className="flex items-center mb-4">
                        <div className={`w-12 h-12 ${course.color} rounded-xl flex items-center justify-center`}>
                          <BookOpen className="h-6 w-6 text-white" />
                        </div>
                        <div className="ml-4">
                          <h3 className="font-bold text-white">{course.title}</h3>
                          <div className="mt-2 w-32">
                            <div className="h-1.5 bg-white/20 rounded-full">
                              <div
                                className="h-1.5 bg-primary-500 rounded-full"
                                style={{ width: `${course.progress}%` }}
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                      <div className="grid grid-cols-2 gap-4 mb-4">
                        <div className="text-center p-3 bg-white/5 rounded-lg">
                          <div className="text-sm font-medium text-white">
                            {course.solvedProblems}/{course.totalProblems}
                          </div>
                          <div className="text-xs text-gray-400">Problems</div>
                        </div>
                        <div className="text-center p-3 bg-white/5 rounded-lg">
                          <div className="text-sm font-medium text-white">
                            {course.solvedQuizzes}/{course.totalQuizzes}
                          </div>
                          <div className="text-xs text-gray-400">Quizzes</div>
                        </div>
                      </div>
                      <Link
                        to={`/courses/${course.id}/lessons/${course.firstLessonId}`}
                        className="block w-full py-2 px-4 bg-primary-500 text-white text-center rounded-lg hover:bg-primary-600 transition duration-200"
                      >
                        Continue Learning
                      </Link>
                    </div>
                  ))}
                </div>
              </div>
            )}
          </div>

          {/* Sidebar */}
          <div className="space-y-8">
            {/* Leaderboard */}
            <div className="leaderboard-section bg-white/10 backdrop-blur-lg rounded-xl p-6">
              <h3 className="text-xl font-bold text-white mb-6">Leaderboard</h3>
              <div className="space-y-4">
                {leaderboard.slice(0, 5).map((entry, index) => (
                  <div
                    key={entry.id}
                    className={`flex items-center justify-between p-3 rounded-lg ${
                      index === 0 ? 'bg-yellow-500/20' : 'hover:bg-white/5'
                    }`}
                  >
                    <div className="flex items-center">
                      <div className="w-8 text-center font-medium text-gray-400">
                        {index + 1}
                      </div>
                      <img
                        src={entry.avatar}
                        alt={entry.name}
                        className="w-8 h-8 rounded-lg mx-3"
                      />
                      <div>
                        <div className="font-medium text-white text-sm">
                          {entry.name}
                        </div>
                        <div className="text-xs text-gray-400">
                          {entry.xp} XP
                        </div>
                      </div>
                    </div>
                    {index === 0 && (
                      <div className="w-6 h-6 bg-yellow-500/20 rounded-lg flex items-center justify-center">
                        <Crown className="h-4 w-4 text-yellow-500" />
                      </div>
                    )}
                  </div>
                ))}
              </div>
              <Link
                to="/leaderboard"
                className="block w-full text-center mt-6 py-2 px-4 bg-white/10 text-white rounded-lg hover:bg-white/20 transition duration-200"
              >
                View Full Leaderboard
              </Link>
            </div>

            {/* Learning Path */}
            <div className="learning-path bg-white/10 backdrop-blur-lg rounded-xl p-6">
              <h3 className="text-xl font-bold text-white mb-6">Learning Path</h3>
              <div className="relative">
                <div className="absolute left-4 top-0 bottom-0 w-0.5 bg-white/10"></div>
                <div className="space-y-6">
                  <div className="relative pl-10">
                    <div className="absolute left-2 w-5 h-5 rounded-lg bg-green-500 flex items-center justify-center">
                      <Check className="h-3 w-3 text-white" />
                    </div>
                    <h4 className="font-medium text-white">Python Basics</h4>
                    <p className="text-sm text-gray-400">Completed</p>
                  </div>
                  <div className="relative pl-10">
                    <div className="absolute left-2 w-5 h-5 rounded-lg bg-blue-500 flex items-center justify-center">
                      <span className="text-white text-xs">2</span>
                    </div>
                    <h4 className="font-medium text-white">Data Structures</h4>
                    <p className="text-sm text-gray-400">In Progress - 60%</p>
                  </div>
                  <div className="relative pl-10">
                    <div className="absolute left-2 w-5 h-5 rounded-lg bg-white/10 flex items-center justify-center">
                      <span className="text-gray-400 text-xs">3</span>
                    </div>
                    <h4 className="font-medium text-gray-400">Algorithms</h4>
                    <p className="text-sm text-gray-500">Locked</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default DashboardPage;

/== pages/HomePage.tsx
import React from 'react';
import { useAuthStore } from '../store/authStore';
import { BookOpen, Code, Terminal, Award, Users, Laptop, Star, Globe, Zap, ArrowRight, CheckCircle, Rocket, Brain } from 'lucide-react';
import Button from '../components/atoms/Button';
import Card from '../components/atoms/Card';

const HomePage = () => {
  const { isAuthenticated } = useAuthStore();

  const stats = [
    { value: '1M+', label: 'Active Learners', icon: <Users className="h-8 w-8 text-brand-green" /> },
    { value: '200+', label: 'Tutorials', icon: <BookOpen className="h-8 w-8 text-brand-green" /> },
    { value: '50+', label: 'Practice Projects', icon: <Code className="h-8 w-8 text-brand-green" /> },
    { value: '24/7', label: 'Support', icon: <Globe className="h-8 w-8 text-brand-green" /> },
  ];

  const features = [
    {
      icon: Brain,
      title: 'Smart Learning Path',
      description: 'Personalized learning journey tailored to your goals and skill level.',
      color: 'bg-gradient-to-br from-emerald-400/90 to-green-500/90'
    },
    {
      icon: Terminal,
      title: 'Interactive Coding',
      description: 'Write, compile, and run code directly in your browser with real-time feedback.',
      color: 'bg-gradient-to-br from-cyan-400/90 to-blue-500/90'
    },
    {
      icon: CheckCircle,
      title: 'Hands-on Practice',
      description: 'Learn by doing with practical exercises and real-world projects.',
      color: 'bg-gradient-to-br from-violet-400/90 to-purple-500/90'
    }
  ];

  const testimonials = [
    {
      name: "Sarah Chen",
      role: "Software Developer",
      image: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&auto=format&fit=crop&w=200&q=80",
      content: "Coder Growth transformed my learning journey. The structured approach and hands-on projects helped me land my dream job."
    },
    {
      name: "Michael Rodriguez",
      role: "Student",
      image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-1.2.1&auto=format&fit=crop&w=200&q=80",
      content: "The interactive lessons and community support made learning to code enjoyable and effective."
    },
    {
      name: "David Kim",
      role: "Tech Lead",
      image: "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-1.2.1&auto=format&fit=crop&w=200&q=80",
      content: "As a mentor, I recommend Coder Growth to all aspiring developers. The curriculum is comprehensive and up-to-date."
    }
  ];

  return (
    <div className="min-h-screen">
      {/* Hero Section */}
      <div className="relative overflow-hidden bg-gray-900">
        <div className="absolute inset-0 bg-grid-pattern opacity-10"></div>
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 relative">
          <div className="text-center">
            <h1 className="text-4xl md:text-6xl font-bold text-white mb-6 leading-tight">
              Master Programming with
              <span className="text-brand-green"> Hands-on Practice</span>
            </h1>
            <p className="text-xl text-gray-300 mb-8 max-w-3xl mx-auto">
              Join millions of learners worldwide and start your coding journey today.
              Interactive tutorials, real-time feedback, and expert-led courses.
            </p>
            <div className="flex flex-col sm:flex-row justify-center gap-4">
              <Button
                variant="primary"
                href={isAuthenticated ? '/dashboard' : '/courses'}
                className="bg-brand-green hover:bg-brand-green/90 text-lg px-8 py-4"
              >
                {isAuthenticated ? 'Continue Learning' : 'Start Learning'} <ArrowRight className="ml-2" />
              </Button>
              <Button
                variant="outline"
                href="/compiler"
                className="border-white text-white hover:bg-white/10 text-lg px-8 py-4"
              >
                Try Compiler <Terminal className="ml-2" />
              </Button>
            </div>
          </div>
        </div>
      </div>

      {/* Stats Section */}
      <div className="bg-white py-16">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="grid grid-cols-2 md:grid-cols-4 gap-8">
            {stats.map((stat, index) => (
              <div key={index} className="text-center">
                <div className="inline-flex items-center justify-center w-12 h-12 rounded-xl bg-brand-green/10 mb-4">
                  {stat.icon}
                </div>
                <div className="text-3xl font-bold text-gray-900 mb-2">{stat.value}</div>
                <div className="text-gray-600">{stat.label}</div>
              </div>
            ))}
          </div>
        </div>
      </div>

      {/* Features Section */}
      <div className="bg-gray-50 py-24">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="text-center mb-16">
            <h2 className="text-4xl font-bold text-gray-900 mb-4">
              Why Choose Coder Growth?
            </h2>
            <p className="text-xl text-gray-600 max-w-3xl mx-auto">
              Our platform provides all the tools and resources you need to become a successful programmer.
            </p>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {features.map((feature, index) => (
              <Card 
                key={index} 
                className="p-8 transform hover:scale-105 transition-all duration-300 bg-white border border-gray-100 hover:shadow-xl"
              >
                <div className={`w-16 h-16 ${feature.color} rounded-2xl flex items-center justify-center mb-6`}>
                  <feature.icon className="h-8 w-8 text-white" />
                </div>
                <h3 className="text-xl font-bold text-gray-800 mb-4">{feature.title}</h3>
                <p className="text-gray-600 leading-relaxed">{feature.description}</p>
              </Card>
            ))}
          </div>
        </div>
      </div>

      {/* Testimonials Section */}
      <div className="bg-white py-24">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="text-center mb-16">
            <h2 className="text-4xl font-bold text-gray-900 mb-4">
              What Our Students Say
            </h2>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {testimonials.map((testimonial, index) => (
              <Card 
                key={index} 
                className="p-8 bg-gradient-to-br from-gray-50 to-white border border-gray-100 hover:shadow-xl transition-all duration-300"
              >
                <div className="flex items-center mb-6">
                  <img
                    src={testimonial.image}
                    alt={testimonial.name}
                    className="w-12 h-12 rounded-full mr-4 border-2 border-brand-green/20"
                  />
                  <div>
                    <h4 className="font-bold text-gray-900">{testimonial.name}</h4>
                    <p className="text-brand-green text-sm">{testimonial.role}</p>
                  </div>
                </div>
                <p className="text-gray-700 leading-relaxed">"{testimonial.content}"</p>
              </Card>
            ))}
          </div>
        </div>
      </div>

      {/* CTA Section */}
      <div className="bg-brand-green py-24 relative overflow-hidden">
        <div className="absolute inset-0 bg-grid-pattern opacity-10"></div>
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative">
          <div className="text-center">
            <h2 className="text-4xl font-bold text-white mb-6">
              Ready to Start Your Coding Journey?
            </h2>
            <p className="text-xl text-white/90 mb-8 max-w-2xl mx-auto">
              Join our community of learners and start building your programming skills today.
              No credit card required.
            </p>
            <Button
              variant="primary"
              href="/courses"
              className="bg-brand-green hover:bg-brand-green/90 text-lg px-8 py-4"
            >
              Get Started for Free <Rocket className="ml-2" />
            </Button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default HomePage;

/== pages/LeaderboardPage.tsx
import React, { useState, useEffect } from 'react';
import { Link } from 'react-router-dom';
import Button from '../components/atoms/Button';

interface LeaderboardUser {
  id: string;
  name: string;
  avatarUrl: string;
  points: number;
  rank: number;
  coursesCompleted: number;
  streak: number;
  badges: string[];
  isCurrentUser: boolean;
}

interface LeaderboardCategory {
  id: string;
  name: string;
  description: string;
}

const LeaderboardPage: React.FC = () => {
  const [isLoading, setIsLoading] = useState(true);
  const [timeframe, setTimeframe] = useState<'weekly' | 'monthly' | 'allTime'>('weekly');
  const [category, setCategory] = useState<string>('all');
  const [leaderboardUsers, setLeaderboardUsers] = useState<LeaderboardUser[]>([]);
  const [categories, setCategories] = useState<LeaderboardCategory[]>([]);
  const [currentUserRank, setCurrentUserRank] = useState<number | null>(null);
  
  // Simulate fetching data
  useEffect(() => {
    const fetchLeaderboardData = async () => {
      setIsLoading(true);
      
      // Simulate API delay
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      // Mock categories
      const mockCategories = [
        { id: 'all', name: 'All Categories', description: 'Overall performance across all learning categories' },
        { id: 'programming', name: 'Programming', description: 'Coding and development challenges' },
        { id: 'design', name: 'Design', description: 'UI/UX and graphic design courses' },
        { id: 'business', name: 'Business', description: 'Management and entrepreneurship' },
        { id: 'data', name: 'Data Science', description: 'Analytics, machine learning, and data visualization' }
      ];
      
      // Generate mock leaderboard data
      const numberOfUsers = 20;
      const avatarStyles = [
        'adventurer', 'adventurer-neutral', 'avataaars', 'big-ears', 
        'big-smile', 'bottts', 'croodles', 'identicon', 'initials', 'micah'
      ];
      
      const generateRandomBadges = () => {
        const allBadges = ['Early Bird', 'Fast Learner', 'Perfectionist', 'Team Player', 'Problem Solver', 'Night Owl', 'Consistent', 'Top Contributor'];
        const count = Math.floor(Math.random() * 3); // 0-2 badges
        const badges: string[] = [];
        
        for (let i = 0; i < count; i++) {
          const randomBadge = allBadges[Math.floor(Math.random() * allBadges.length)];
          if (!badges.includes(randomBadge)) {
            badges.push(randomBadge);
          }
        }
        
        return badges;
      };
      
      // Generate users with descending points
      let mockUsers = Array.from({ length: numberOfUsers }, (_, i) => {
        // First rank is the highest points
        const pointsBase = 1000 - (i * (1000 / numberOfUsers));
        // Add some randomness
        const points = Math.round(pointsBase + (Math.random() * 50) - 25);
        
        // Randomly select one user to be the current user
        const isCurrentUser = i === 5; // User is ranked 6th
        
        if (isCurrentUser) {
          setCurrentUserRank(i + 1);
        }
        
        return {
          id: `user-${i + 1}`,
          name: `User ${i + 1}`,
          avatarUrl: `https://api.dicebear.com/7.x/${avatarStyles[i % avatarStyles.length]}/svg?seed=${i}`,
          points,
          rank: i + 1,
          coursesCompleted: Math.floor(Math.random() * 20) + 1,
          streak: Math.floor(Math.random() * 30) + 1,
          badges: generateRandomBadges(),
          isCurrentUser
        };
      });
      
      // Sort by points (descending)
      mockUsers.sort((a, b) => b.points - a.points);
      
      // Update ranks after sorting
      mockUsers = mockUsers.map((user, index) => ({
        ...user,
        rank: index + 1
      }));
      
      setCategories(mockCategories);
      setLeaderboardUsers(mockUsers);
      setIsLoading(false);
    };
    
    fetchLeaderboardData();
  }, [timeframe, category]);
  
  const getTimeframeLabel = () => {
    switch (timeframe) {
      case 'weekly': return 'This Week';
      case 'monthly': return 'This Month';
      case 'allTime': return 'All Time';
      default: return '';
    }
  };
  
  const currentUser = leaderboardUsers.find(user => user.isCurrentUser);
  
  // Utility function to format large numbers
  const formatNumber = (num: number) => {
    return new Intl.NumberFormat().format(num);
  };
  
  if (isLoading) {
    return (
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="animate-pulse space-y-8">
          <div className="h-10 bg-gray-200 dark:bg-gray-700 rounded w-1/4"></div>
          <div className="h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/2"></div>
          
          {/* Tab skeleton */}
          <div className="flex space-x-2">
            <div className="h-10 bg-gray-200 dark:bg-gray-700 rounded w-24"></div>
            <div className="h-10 bg-gray-200 dark:bg-gray-700 rounded w-24 opacity-60"></div>
            <div className="h-10 bg-gray-200 dark:bg-gray-700 rounded w-24 opacity-60"></div>
          </div>
          
          {/* Category selector skeleton */}
          <div className="h-12 bg-gray-200 dark:bg-gray-700 rounded w-full md:w-1/3"></div>
          
          {/* Leaderboard table skeleton */}
          <div className="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden">
            <div className="h-14 bg-gray-100 dark:bg-gray-700"></div>
            {[1, 2, 3, 4, 5].map(i => (
              <div key={i} className="h-20 border-t border-gray-200 dark:border-gray-700 flex">
                <div className="w-16 bg-gray-200 dark:bg-gray-700 m-2"></div>
                <div className="flex-1 py-4 px-2">
                  <div className="h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-2"></div>
                  <div className="h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/4"></div>
                </div>
                <div className="w-24 bg-gray-200 dark:bg-gray-700 m-2"></div>
              </div>
            ))}
          </div>
        </div>
      </div>
    );
  }
  
  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      {/* Header */}
      <div className="mb-8">
        <h1 className="text-3xl font-bold text-gray-900 dark:text-white mb-2">Leaderboard</h1>
        <p className="text-lg text-gray-600 dark:text-gray-400">
          See how you stack up against other learners and compete for the top spots
        </p>
      </div>
      
      {/* Current user stats summary */}
      {currentUser && (
        <div className="mb-8 bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-500 dark:to-indigo-500 rounded-xl shadow-md overflow-hidden">
          <div className="p-6 md:p-8">
            <div className="md:flex items-center">
              <div className="flex-shrink-0 mb-4 md:mb-0 md:mr-6">
                <div className="relative">
                  <img 
                    src={currentUser.avatarUrl} 
                    alt={currentUser.name}
                    className="w-20 h-20 rounded-full border-4 border-white dark:border-gray-800 object-cover bg-white" 
                  />
                  <div className="absolute -bottom-2 -right-2 flex items-center justify-center w-10 h-10 rounded-full bg-white dark:bg-gray-800 border-2 border-blue-600 dark:border-blue-500">
                    <span className="text-xl font-bold text-blue-600 dark:text-blue-400">
                      #{currentUser.rank}
                    </span>
                  </div>
                </div>
              </div>
              
              <div className="flex-1">
                <h2 className="text-xl font-bold text-white mb-1">
                  {currentUser.name} <span className="text-blue-200">(You)</span>
                </h2>
                <p className="text-blue-100 mb-4">You're currently ranked #{currentUser.rank} on the leaderboard</p>
                
                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                  <div className="bg-white/10 rounded-lg p-3">
                    <p className="text-sm text-blue-100">Total Points</p>
                    <p className="text-2xl font-bold text-white">{formatNumber(currentUser.points)}</p>
                  </div>
                  <div className="bg-white/10 rounded-lg p-3">
                    <p className="text-sm text-blue-100">Courses Completed</p>
                    <p className="text-2xl font-bold text-white">{currentUser.coursesCompleted}</p>
                  </div>
                  <div className="bg-white/10 rounded-lg p-3">
                    <p className="text-sm text-blue-100">Day Streak</p>
                    <p className="text-2xl font-bold text-white">{currentUser.streak} days</p>
                  </div>
                  <div className="bg-white/10 rounded-lg p-3">
                    <p className="text-sm text-blue-100">Rank Progress</p>
                    <div className="flex items-center space-x-2">
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 10l7-7m0 0l7 7m-7-7v18" />
                      </svg>
                      <p className="text-xl font-bold text-white">+3 this week</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      )}
      
      {/* Timeframe selector */}
      <div className="mb-6">
        <div className="flex flex-wrap space-x-2 mb-6">
          <button
            onClick={() => setTimeframe('weekly')}
            className={`py-2 px-4 rounded-lg font-medium text-sm transition-colors duration-200 ${
              timeframe === 'weekly'
                ? 'bg-blue-600 dark:bg-blue-500 text-white'
                : 'bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700'
            }`}
          >
            This Week
          </button>
          <button
            onClick={() => setTimeframe('monthly')}
            className={`py-2 px-4 rounded-lg font-medium text-sm transition-colors duration-200 ${
              timeframe === 'monthly'
                ? 'bg-blue-600 dark:bg-blue-500 text-white'
                : 'bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700'
            }`}
          >
            This Month
          </button>
          <button
            onClick={() => setTimeframe('allTime')}
            className={`py-2 px-4 rounded-lg font-medium text-sm transition-colors duration-200 ${
              timeframe === 'allTime'
                ? 'bg-blue-600 dark:bg-blue-500 text-white'
                : 'bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700'
            }`}
          >
            All Time
          </button>
        </div>
        
        {/* Category selector */}
        <div className="mb-6">
          <select
            value={category}
            onChange={(e) => setCategory(e.target.value)}
            className="block w-full md:w-1/3 px-4 py-3 text-base rounded-lg bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:text-white"
          >
            {categories.map(cat => (
              <option key={cat.id} value={cat.id}>
                {cat.name}
              </option>
            ))}
          </select>
          <p className="mt-2 text-sm text-gray-500 dark:text-gray-400">
            {categories.find(c => c.id === category)?.description}
          </p>
        </div>
      </div>
      
      {/* Leaderboard */}
      <div className="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden">
        {/* Table header */}
        <div className="bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700 px-6 py-4">
          <h3 className="text-lg font-semibold text-gray-900 dark:text-white">
            Top Learners - {getTimeframeLabel()}
          </h3>
        </div>
        
        {/* Table body */}
        <div className="divide-y divide-gray-200 dark:divide-gray-700">
          {leaderboardUsers.slice(0, 10).map((user) => (
            <div 
              key={user.id}
              className={`flex items-center py-4 px-6 transition-colors duration-150 ${
                user.isCurrentUser ? 'bg-blue-50 dark:bg-blue-900/20' : 'hover:bg-gray-50 dark:hover:bg-gray-750'
              }`}
            >
              {/* Rank */}
              <div className="flex-shrink-0 w-12 text-center mr-4">
                {user.rank <= 3 ? (
                  <div className={`inline-flex items-center justify-center w-8 h-8 rounded-full
                    ${user.rank === 1 ? 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400' : 
                      user.rank === 2 ? 'bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300' : 
                      'bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400'}`}>
                    <span className="text-lg font-bold">{user.rank}</span>
                  </div>
                ) : (
                  <span className={`text-lg font-medium ${
                    user.isCurrentUser ? 'text-blue-600 dark:text-blue-400' : 'text-gray-500 dark:text-gray-400'
                  }`}>
                    {user.rank}
                  </span>
                )}
              </div>
              
              {/* User info */}
              <div className="flex items-center flex-1">
                <div className="flex-shrink-0 relative">
                  <img 
                    src={user.avatarUrl} 
                    alt={user.name} 
                    className={`w-12 h-12 rounded-full object-cover bg-white border 
                      ${user.isCurrentUser ? 'border-blue-500 dark:border-blue-400' : 'border-gray-200 dark:border-gray-700'}`} 
                  />
                  {user.rank <= 3 && (
                    <div className={`absolute -top-1 -right-1 w-5 h-5 flex items-center justify-center text-white rounded-full
                      ${user.rank === 1 ? 'bg-yellow-500 dark:bg-yellow-400' : 
                        user.rank === 2 ? 'bg-gray-400 dark:bg-gray-300' : 
                        'bg-amber-500 dark:bg-amber-400'}`}>
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-3 w-3" viewBox="0 0 20 20" fill="currentColor">
                        <path fillRule="evenodd" d="M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z" clipRule="evenodd" />
                      </svg>
                    </div>
                  )}
                </div>
                
                <div className="ml-4">
                  <div className="font-medium text-gray-900 dark:text-white flex items-center">
                    {user.name}
                    {user.isCurrentUser && (
                      <span className="ml-2 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-0.5 rounded-full">
                        You
                      </span>
                    )}
                  </div>
                  
                  <div className="flex items-center mt-1">
                    <div className="flex space-x-1 mr-3">
                      <svg className="w-4 h-4 text-blue-500 dark:text-blue-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z" />
                      </svg>
                      <span className="text-sm text-gray-500 dark:text-gray-400">{user.coursesCompleted}</span>
                    </div>
                    
                    <div className="flex space-x-1">
                      <svg className="w-4 h-4 text-red-500 dark:text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path fillRule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clipRule="evenodd" />
                      </svg>
                      <span className="text-sm text-gray-500 dark:text-gray-400">{user.streak} day streak</span>
                    </div>
                    
                    {user.badges.length > 0 && (
                      <div className="ml-3 flex space-x-1">
                        {user.badges.map((badge, index) => (
                          <span 
                            key={index}
                            className="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"
                          >
                            {badge}
                          </span>
                        ))}
                      </div>
                    )}
                  </div>
                </div>
              </div>
              
              {/* Points */}
              <div className="flex-shrink-0 text-right">
                <div className="font-bold text-2xl text-gray-900 dark:text-white">
                  {formatNumber(user.points)}
                </div>
                <div className="text-xs text-gray-500 dark:text-gray-400">points</div>
              </div>
            </div>
          ))}
        </div>
        
        {/* See more */}
        <div className="bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700 px-6 py-4 text-center">
          <Button variant="outline" className="text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700">
            View Full Leaderboard
          </Button>
        </div>
      </div>
      
      {/* How to earn points */}
      <div className="mt-8 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden">
        <div className="bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700 px-6 py-4">
          <h3 className="text-lg font-semibold text-gray-900 dark:text-white">
            How to Earn Points
          </h3>
        </div>
        
        <div className="p-6">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div className="bg-gray-50 dark:bg-gray-900/30 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
              <div className="flex items-center mb-3">
                <div className="flex-shrink-0 bg-green-100 dark:bg-green-900/30 p-2 rounded-lg mr-3">
                  <svg className="w-6 h-6 text-green-600 dark:text-green-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
                <h4 className="text-lg font-medium text-gray-900 dark:text-white">Complete Courses</h4>
              </div>
              <p className="text-gray-600 dark:text-gray-400">
                Earn 100 points for each course you complete. Bonus points for completing courses within a bundle.
              </p>
            </div>
            
            <div className="bg-gray-50 dark:bg-gray-900/30 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
              <div className="flex items-center mb-3">
                <div className="flex-shrink-0 bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg mr-3">
                  <svg className="w-6 h-6 text-blue-600 dark:text-blue-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
                <h4 className="text-lg font-medium text-gray-900 dark:text-white">Daily Streaks</h4>
              </div>
              <p className="text-gray-600 dark:text-gray-400">
                Log in and learn daily to build your streak. Every 7 days, you'll earn bonus points (10, 25, 50).
              </p>
            </div>
            
            <div className="bg-gray-50 dark:bg-gray-900/30 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
              <div className="flex items-center mb-3">
                <div className="flex-shrink-0 bg-purple-100 dark:bg-purple-900/30 p-2 rounded-lg mr-3">
                  <svg className="w-6 h-6 text-purple-600 dark:text-purple-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                  </svg>
                </div>
                <h4 className="text-lg font-medium text-gray-900 dark:text-white">Earn Achievements</h4>
              </div>
              <p className="text-gray-600 dark:text-gray-400">
                Complete special challenges to unlock badges and earn bonus points. Each badge has different point values.
              </p>
            </div>
          </div>
        </div>
      </div>
      
      {/* Back to learning */}
      <div className="mt-8 text-center">
        <Link 
          to="/my-learning" 
          className="inline-flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium"
        >
          <svg className="mr-1 w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
          </svg>
          Back to My Learning
        </Link>
      </div>
    </div>
  );
};

export default LeaderboardPage;

/== pages/LearningPage.tsx
import React, { useState, useEffect } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { useLearningStore } from '../store/learningStore';
import { Play, Download, Copy, Trash, Maximize2, Code, ChevronLeft, ChevronRight } from 'lucide-react';
import Logo from '../components/atoms/Logo';

const LearningPage: React.FC = () => {
  const { courseId, lessonId } = useParams<{ courseId: string; lessonId: string }>();
  const navigate = useNavigate();
  const { getCurrentContent, currentStep, setCurrentStep } = useLearningStore();
  
  const [code, setCode] = useState('');
  const [output, setOutput] = useState('');
  const [isRunning, setIsRunning] = useState(false);
  const [selectedOption, setSelectedOption] = useState<string | null>(null);
  const [isAnswerCorrect, setIsAnswerCorrect] = useState<boolean | null>(null);
  const [showSolution, setShowSolution] = useState(false);
  const [testPassed, setTestPassed] = useState(false);
  const [consoleExpanded, setConsoleExpanded] = useState(false);
  
  const content = getCurrentContent(courseId || '', lessonId || '');
  const currentStepContent = content?.steps[currentStep - 1];
  const totalSteps = content?.steps?.length || 0;
  
  useEffect(() => {
    if (content?.steps && content.steps.length > 0) {
      setCurrentStep(1);
      setOutput('');
      setSelectedOption(null);
      setIsAnswerCorrect(null);
      setShowSolution(false);
      setTestPassed(false);
      
      if (content.steps[0].code) {
        setCode(content.steps[0].code);
      }
    }
  }, [lessonId, content]);

  const handleRunCode = () => {
    setIsRunning(true);
    setOutput('');
    
    setTimeout(() => {
      try {
        if (currentStepContent?.type === 'practice') {
          const expectedOutput = currentStepContent.expectedOutput || '';
          
          if (code.includes(`print("${expectedOutput}")`) || code.includes(`print('${expectedOutput}')`)) {
            setOutput(expectedOutput);
            setTestPassed(true);
          } else {
            setOutput('Your output does not match the expected output. Try again!');
            setTestPassed(false);
          }
        } else {
          const result = evaluateCode(code);
          setOutput(result);
        }
      } catch (error) {
        setOutput(`Error: ${error}`);
      }
      
      setIsRunning(false);
    }, 1000);
  };

  const handleCopyCode = () => {
    navigator.clipboard.writeText(code);
  };

  const handleClearCode = () => {
    if (currentStepContent?.code) {
      setCode(currentStepContent.code);
    }
    setOutput('');
    setTestPassed(false);
  };

  const handleDownloadCode = () => {
    const blob = new Blob([code], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'code.go';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  };

  const handleOptionSelect = (optionId: string) => {
    setSelectedOption(optionId);
    
    if (currentStepContent?.type === 'quiz') {
      const selectedOption = currentStepContent.options?.find(option => option.id === optionId);
      setIsAnswerCorrect(selectedOption?.isCorrect || false);
    }
  };

  const handleNextStep = () => {
    if (currentStep < totalSteps) {
      setCurrentStep(currentStep + 1);
      resetStepState();
    } else if (content?.nextLessonId === "submit") {
      navigate(`/courses/${courseId}/lessons/${lessonId}/submit`);
    } else if (content?.nextLessonId === "finish") {
      navigate(`/courses/${courseId}/complete`);
    } else if (content?.nextLessonId) {
      navigate(`/courses/${courseId}/lessons/${content.nextLessonId}`);
    }
  };

  const handlePreviousStep = () => {
    if (currentStep > 1) {
      setCurrentStep(currentStep - 1);
      resetStepState();
    }
  };

  const resetStepState = () => {
    setSelectedOption(null);
    setIsAnswerCorrect(null);
    setTestPassed(false);
    setOutput('');
    
    const nextStep = content?.steps[currentStep];
    if (nextStep?.code) {
      setCode(nextStep.code);
    }
  };

  const evaluateCode = (code: string) => {
    try {
      // Extract print statements
      const printMatch = code.match(/fmt\.Println\((["'])(.*?)\1\)/);
      if (printMatch) {
        return printMatch[2];
      }
      
      const printfMatch = code.match(/fmt\.Printf\((["'])(.*?)\1.*\)/);
      if (printfMatch) {
        return printfMatch[2];
      }
      
      return 'Program executed successfully';
    } catch (error) {
      return `Error: ${error}`;
    }
  };

  if (!content || !currentStepContent) {
    return (
      <div className="min-h-screen bg-gray-900 flex items-center justify-center p-4">
        <div className="bg-gray-800 rounded-xl p-8 text-center max-w-lg">
          <div className="bg-gray-700 rounded-full h-24 w-24 flex items-center justify-center mx-auto mb-6">
            <Code className="h-12 w-12 text-blue-400" />
          </div>
          <h1 className="text-4xl font-bold text-white mb-4">Lesson Not Found</h1>
          <p className="text-lg text-gray-300 mb-8">
            Oops! We couldn't find the lesson you're looking for. It might have been moved or doesn't exist.
          </p>
          <button
            onClick={() => navigate('/courses')}
            className="inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200"
          >
            Browse Courses
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gray-900 flex flex-col">
      {/* Header */}
      <header className="bg-gray-800 border-b border-gray-700 py-2 px-4">
        <div className="flex items-center justify-between">
          <div className="flex items-center">
            <Logo />
            <div className="h-6 w-px bg-gray-700 mx-4" />
            <div>
              <h1 className="text-lg font-medium text-white">{content.title}</h1>
              <p className="text-sm text-gray-400">{content.description}</p>
            </div>
          </div>
          <div className="flex items-center space-x-4">
            <button
              onClick={() => navigate('/courses')}
              className="text-gray-300 hover:text-white transition-colors"
            >
              Exit Course
            </button>
          </div>
        </div>
      </header>

      <div className="flex flex-1 overflow-hidden">
        {/* Left Panel - Lesson Content */}
        <div className="w-1/2 bg-gray-800 overflow-auto">
          <div className="p-6">
            {/* Progress Bar */}
            <div className="mb-6">
              <div className="flex items-center justify-between text-gray-400 text-sm mb-2">
                <span>Step {currentStep} of {totalSteps}</span>
                <div className="flex space-x-1">
                  {Array.from({ length: totalSteps }).map((_, i) => (
                    <div
                      key={i}
                      className={`h-1 w-8 rounded-full ${
                        i < currentStep ? 'bg-blue-500' : 'bg-gray-700'
                      }`}
                    />
                  ))}
                </div>
              </div>
            </div>

            {/* Step Content */}
            <div className="mb-6">
              <h2 className="text-2xl font-bold text-white mb-4">
                {currentStepContent.title}
              </h2>
              
              <div 
                className="prose prose-invert max-w-none mb-8"
                dangerouslySetInnerHTML={{ __html: currentStepContent.content }}
              />
            </div>
          </div>
        </div>
        
        {/* Right Panel - Code Editor */}
        <div className="w-1/2 bg-gray-900 flex flex-col">
          {/* Editor Header */}
          <div className="flex items-center justify-between p-2 border-b border-gray-800">
            <div className="flex items-center">
              <span className="text-sm font-medium text-gray-400">main.go</span>
            </div>
            <div className="flex items-center space-x-2">
              <button
                onClick={handleRunCode}
                disabled={isRunning}
                className={`flex items-center px-3 py-1.5 rounded-md text-sm font-medium ${
                  isRunning 
                    ? 'bg-gray-700 text-gray-400 cursor-not-allowed'
                    : 'bg-green-600 text-white hover:bg-green-700'
                }`}
              >
                <Play className="h-4 w-4 mr-2" />
                {isRunning ? 'Running...' : 'Run'}
              </button>
              <button
                onClick={handleCopyCode}
                className="p-1.5 text-gray-400 hover:text-white"
                title="Copy Code"
              >
                <Copy className="h-4 w-4" />
              </button>
              <button
                onClick={handleDownloadCode}
                className="p-1.5 text-gray-400 hover:text-white"
                title="Download Code"
              >
                <Download className="h-4 w-4" />
              </button>
              <button
                onClick={handleClearCode}
                className="p-1.5 text-gray-400 hover:text-white"
                title="Clear Code"
              >
                <Trash className="h-4 w-4" />
              </button>
            </div>
          </div>
          
          {/* Code Editor */}
          <div className="flex-1 relative">
            <textarea
              value={code}
              onChange={(e) => setCode(e.target.value)}
              className="w-full h-full bg-gray-900 text-gray-300 font-mono p-4 resize-none focus:outline-none"
              spellCheck="false"
            />
          </div>
          
          {/* Console Output */}
          <div className={`border-t border-gray-800 ${consoleExpanded ? 'h-1/2' : 'h-40'}`}>
            <div className="flex items-center justify-between p-2 bg-gray-800">
              <div className="text-sm font-medium text-gray-400">Console</div>
              <button
                onClick={() => setConsoleExpanded(!consoleExpanded)}
                className="p-1 text-gray-400 hover:text-white"
              >
                <Maximize2 className="h-4 w-4" />
              </button>
            </div>
            <div className="p-4 font-mono text-sm text-gray-300 overflow-auto h-[calc(100%-36px)] bg-gray-900">
              {output || 'Run your code to see the output here...'}
            </div>
          </div>
        </div>
      </div>

      {/* Footer */}
      <footer className="bg-gray-800 border-t border-gray-700 py-3 px-4">
        <div className="flex items-center justify-between">
          <button
            onClick={handlePreviousStep}
            disabled={currentStep === 1}
            className={`flex items-center px-4 py-2 rounded-md ${
              currentStep === 1
                ? 'bg-gray-700 text-gray-400 cursor-not-allowed'
                : 'bg-gray-700 text-white hover:bg-gray-600'
            }`}
          >
            <ChevronLeft className="mr-2 h-5 w-5" />
            Previous Step
          </button>
          
          <button
            onClick={handleNextStep}
            className="flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"
          >
            {currentStep === totalSteps && content.nextLessonId === "submit" 
              ? 'Continue to Submission'
              : currentStep === totalSteps && content.nextLessonId === "finish" 
                ? 'Complete Lesson' 
                : 'Next Step'}
            <ChevronRight className="ml-2 h-5 w-5" />
          </button>
        </div>
      </footer>
    </div>
  );
};

export default LearningPage;

/== pages/LoginPage.tsx
import React, { useState } from 'react';
import { useNavigate, useLocation } from 'react-router-dom';
import { useAuthStore } from '../store/authStore';
import AuthLayout from '../components/templates/AuthLayout';
import AuthHeader from '../components/molecules/AuthHeader';
import AuthForm from '../components/molecules/AuthForm';

const LoginPage = () => {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const navigate = useNavigate();
  const location = useLocation();
  const { login, isLoading, error } = useAuthStore();

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    
    try {
      await login(email, password);
      const { error: authError, user } = useAuthStore.getState();
      if (!authError) {
        // Redirect based on user role
        if (user?.role === 'admin') {
          navigate('/cms');
        } else {
          // Get the previous path from state or default to '/'
          const from = location.state?.from?.pathname || '/';
          
          // Redirect based on origin
          if (from === '/pricing') {
            navigate('/payment');
          } else if (from === '/') {
            navigate('/dashboard');
          } else {
            navigate(from);
          }
        }
      }
    } catch (err) {
      console.error('Login error:', err);
    }
  };

  return (
    <AuthLayout>
      <AuthHeader
        title="Welcome Back!"
        subtitle="Sign in to continue your learning journey"
      />
      <AuthForm
        isLogin={true}
        onSubmit={handleSubmit}
        isLoading={isLoading}
        error={error || undefined}
        email={email}
        setEmail={setEmail}
        password={password}
        setPassword={setPassword}
      />
    </AuthLayout>
  );
};

export default LoginPage;

/== pages/NotFoundPage.tsx
import Card from '../components/atoms/Card';

const NotFoundPage = () => {
  return (
    <div className="min-h-[calc(100vh-64px)] bg-gray-50 flex items-center justify-center px-4 py-12">
      <Card className="text-center p-8 max-w-lg">
        {/* ... card content */}
      </Card>
    </div>
  );
};

export default NotFoundPage;

/== pages/PaymentFailedPage.tsx
import React from 'react';
import { useNavigate } from 'react-router-dom';
import { XCircle } from 'lucide-react';

const PaymentFailedPage = () => {
  const navigate = useNavigate();

  return (
    <div className="min-h-screen bg-gray-50 flex items-center justify-center p-4">
      <div className="max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center">
        <div className="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6">
          <XCircle className="h-8 w-8 text-red-500" />
        </div>
        
        <h1 className="text-2xl font-bold text-gray-900 mb-2">
          Payment Failed
        </h1>
        
        <p className="text-gray-600 mb-8">
          We couldn't process your payment. Please try again or use a different payment method.
        </p>
        
        <div className="space-y-4">
          <button
            onClick={() => navigate(-1)}
            className="w-full py-3 px-4 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600"
          >
            Try Again
          </button>
          
          <button
            onClick={() => navigate('/support')}
            className="w-full py-3 px-4 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50"
          >
            Contact Support
          </button>
        </div>
      </div>
    </div>
  );
};

export default PaymentFailedPage;

/== pages/PaymentFailedPageBK.tsx
import React from 'react';
import { useNavigate } from 'react-router-dom';
import { XCircle } from 'lucide-react';

const PaymentFailedPage = () => {
  const navigate = useNavigate();

  return (
    <div className="min-h-screen bg-gray-50 flex items-center justify-center p-4">
      <div className="max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center">
        <div className="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6">
          <XCircle className="h-8 w-8 text-red-500" />
        </div>
        
        <h1 className="text-2xl font-bold text-gray-900 mb-2">
          Payment Failed
        </h1>
        
        <p className="text-gray-600 mb-8">
          We couldn't process your payment. Please try again or use a different payment method.
        </p>
        
        <div className="space-y-4">
          <button
            onClick={() => navigate(-1)}
            className="w-full py-3 px-4 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600"
          >
            Try Again
          </button>
          
          <button
            onClick={() => navigate('/support')}
            className="w-full py-3 px-4 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50"
          >
            Contact Support
          </button>
        </div>
      </div>
    </div>
  );
};

export default PaymentFailedPage;

/== pages/PaymentPage.tsx
import React, { useState, useEffect, useRef } from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import { useAuthStore } from '../store/authStore';
import { X } from 'lucide-react';
import PaymentSummary from '../components/molecules/PaymentSummary';
import PaymentForm from '../components/molecules/PaymentForm';

// Define payment method type
type PaymentMethodType = 'card' | 'paypal' | 'external';

const PaymentPage = () => {
  const location = useLocation();
  const navigate = useNavigate();
  const { user } = useAuthStore();
  const [paymentMethod, setPaymentMethod] = useState<PaymentMethodType>('card');
  const [cardNumber, setCardNumber] = useState('');
  const [cardName, setCardName] = useState('');
  const [expiry, setExpiry] = useState('');
  const [cvv, setCvv] = useState('');
  const [isProcessing, setIsProcessing] = useState(false);
  const [showExternalPayment, setShowExternalPayment] = useState(false);
  const iframeRef = useRef<HTMLIFrameElement>(null);
  
  // Extract plan and billing cycle from location state
  const { plan, billingCycle } = location.state || { plan: 'premium', billingCycle: 'yearly' };

  // Function to monitor iframe URL changes
  const setupIframeURLChangeDetection = () => {
    const iframe = iframeRef.current;
    if (!iframe) return;

    // Function to detect URL changes in iframe
    function iframeURLChange(iframe: HTMLIFrameElement, callback: (url: string) => void) {
      const unloadHandler = function() {
        // Timeout needed because the URL changes immediately after
        // the `unload` event is dispatched.
        setTimeout(function() {
          try {
            // This will throw a CORS error if iframe is on different domain
            // But we're catching the error, so it's okay
            const newUrl = iframe.contentWindow?.location.href;
            if (newUrl) {
              callback(newUrl);
            }
          } catch (e) {
            console.log("Cannot access iframe URL due to same-origin policy");
          }
        }, 0);
      };

      function attachUnload() {
        try {
          // This will throw if iframe is cross-origin
          if (iframe.contentWindow) {
            // Remove the unloadHandler in case it was already attached.
            // Otherwise, the change will be dispatched twice.
            iframe.contentWindow.removeEventListener("unload", unloadHandler);
            iframe.contentWindow.addEventListener("unload", unloadHandler);
          }
        } catch (e) {
          console.log("Cannot attach unload handler due to same-origin policy");
          // Fallback: check URL periodically
          setInterval(() => {
            try {
              const newUrl = iframe.contentWindow?.location.href;
              if (newUrl) {
                callback(newUrl);
              }
            } catch (e) {
              // Silently ignore CORS errors
            }
          }, 500);
        }
      }

      // Attach to load event
      iframe.addEventListener("load", attachUnload);
      
      // Try to attach immediately as well
      attachUnload();
    }

    // Use the iframeURLChange function
    if (iframe) {
      console.log("Setting up iframe URL change detection");
      iframeURLChange(iframe, (newURL) => {
        console.log("URL changed:", newURL);
        // Check if it's the success URL
        if (newURL.includes('goakal.com/payment/success')) {
          try {
            // Parse the URL to get parameters
            const url = new URL(newURL);
            const token = url.searchParams.get('token');
            const school = url.searchParams.get('school');
            
            if (token && school) {
              console.log(`Payment successful! Token: ${token}, School: ${school}`);
              
              // Save to localStorage as fallback
              localStorage.setItem('payment_token', token);
              localStorage.setItem('payment_school', school);
              localStorage.setItem('payment_status', 'success');
              
              // Redirect to success page
              navigate('/payment/success', { 
                state: { 
                  plan,
                  billingCycle,
                  amount: plan === 'lifetime' ? prices.lifetime.final : prices.premium[billingCycle as 'yearly' | 'monthly'].final,
                  token,
                  school
                }
              });
            }
          } catch (error) {
            console.error('Error processing success URL:', error);
          }
        }
      });
    }
  };

  // Set up iframe URL change detection when external payment is shown
  useEffect(() => {
    if (showExternalPayment) {
      // Allow a bit of time for the iframe to load
      setTimeout(setupIframeURLChangeDetection, 1000);
    }
  }, [showExternalPayment]);

  // Check for URL parameters on component mount
  useEffect(() => {
    const params = new URLSearchParams(location.search);
    const token = params.get('token');
    const school = params.get('school');
    
    // If we have token and school in URL, go to success page
    if (token && school) {
      navigate('/payment/success', { 
        state: { 
          plan,
          billingCycle,
          amount: plan === 'lifetime' ? prices.lifetime.final : prices.premium[billingCycle as 'yearly' | 'monthly'].final,
          token,
          school
        }
      });
    }
  }, [location, navigate, plan, billingCycle]);

  // Pricing configuration
  const prices = {
    premium: {
      yearly: {
        original: 1735125,
        discount: 1156807,
        final: 578317
      },
      monthly: {
        original: 162463,
        discount: 0,
        final: 162463
      }
    },
    lifetime: {
      final: 1923097
    }
  };

  // Function to handle URL paste from clipboard
  const handleUrlPaste = (e: React.ClipboardEvent<HTMLInputElement>) => {
    const pastedText = e.clipboardData.getData('text');
    if (pastedText.includes('https://lynk.id/payment-thankyou')) {
      try {
        const url = new URL(pastedText);
        const token = url.searchParams.get('token');
        const school = url.searchParams.get('school');
        
        if (token && school) {
          // Navigate to success page with the extracted data
          navigate('/payment/success', { 
            state: { 
              plan,
              billingCycle,
              amount: plan === 'lifetime' ? prices.lifetime.final : prices.premium[billingCycle as 'yearly' | 'monthly'].final,
              token,
              school
            }
          });
        }
      } catch (error) {
        console.error('Error parsing pasted URL:', error);
      }
    }
  };

  const handlePayment = async (e: React.FormEvent) => {
    e.preventDefault();
    
    if (paymentMethod === 'external') {
      // Show external payment iframe
      setShowExternalPayment(true);
      return;
    }
    
    setIsProcessing(true);

    try {
      // Simulate payment processing for card/PayPal
      await new Promise(resolve => setTimeout(resolve, 2000));
      
      // Randomly succeed or fail for demo purposes
      const success = Math.random() > 0.5;
      
      if (success) {
        navigate('/payment/success', { 
          state: { 
            plan,
            billingCycle,
            amount: plan === 'lifetime' ? prices.lifetime.final : prices.premium[billingCycle as 'yearly' | 'monthly'].final
          }
        });
      } else {
        navigate('/payment/failed');
      }
    } catch (error) {
      navigate('/payment/failed');
    } finally {
      setIsProcessing(false);
    }
  };

  if (!user) {
    navigate('/login');
    return null;
  }

  const currentPrice = plan === 'lifetime' 
    ? { original: prices.lifetime.final, discount: 0, final: prices.lifetime.final }
    : prices.premium[billingCycle as 'yearly' | 'monthly'];

  // Render external payment iframe if in external payment mode
  if (showExternalPayment) {
    return (
      <div className="min-h-screen bg-gray-900 flex flex-col p-6">
        <div className="flex items-center justify-between mb-6">
          <h2 className="text-xl font-bold text-white">External Payment Processing</h2>
          <button 
            onClick={() => setShowExternalPayment(false)}
            className="p-2 rounded-full bg-gray-700 hover:bg-gray-600 text-white"
          >
            <X className="h-6 w-6" />
          </button>
        </div>
        
        <div className="flex-grow bg-white rounded-xl shadow-lg p-6 flex flex-col">
          {/* Top part with iframe and monitoring */}
          <div className="flex-grow flex flex-col">
            <div className="flex-grow border border-gray-200 rounded-lg overflow-hidden">
              <iframe
                ref={iframeRef}
                src="https://lynk.id/codergrowth/8zqzq0lzw699/checkout"
                title="External Payment Form"
                className="w-full h-full border-0"
                id="payment-iframe"
              />
            </div>
            
            {/* Manual URL entry fallback */}
            <div className="mt-4 p-4 bg-gray-50 rounded-lg">
              <h3 className="font-medium text-gray-800 mb-2">If Automatic Detection Fails:</h3>
              <p className="text-gray-600 text-sm mb-3">
                After completing payment, if you're not automatically redirected, paste the success URL here:
              </p>
              <input
                type="text"
                className="w-full p-2 border border-gray-300 rounded"
                placeholder="https://lynk.id/payment-thankyou?sess=cmVmPTAzZTlkZDA1MjI5NzYwOTExMGI5MTc5ODQ0MGQ0ODgyJmJpbGxlZF9hbW91bnQ9SURSIDAmcmV0dXJuX3VyaT1odHRwOi8vbHluay5pZC9jb2Rlcmdyb3d0aC84enF6cTBsenc2OTkvY2hlY2tvdXQvY29kZXJncm93dGg="
                onPaste={handleUrlPaste}
              />
            </div>
          </div>
          
          {/* Payment details at bottom */}
          <div className="mt-4 p-4 bg-blue-50 border border-blue-100 rounded-lg">
            <div className="flex justify-between items-center text-blue-800">
              <span className="font-medium">Payment Amount:</span>
              <span className="font-bold">Rp {currentPrice.final.toLocaleString()}</span>
            </div>
            <div className="mt-2 text-xs text-blue-600">
              <p>Your payment is being processed securely. This page will automatically detect when payment is complete.</p>
            </div>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gray-900 flex">
      {/* Left Panel - Order Summary */}
      <div className="w-1/2 bg-gray-900 p-12">
        <div className="max-w-md mx-auto">
          <button onClick={() => navigate(-1)} className="text-white mb-8">
            <X className="h-6 w-6" />
          </button>
          
          <h1 className="text-2xl font-bold text-white mb-2">
            Enjoy unlimited access to our courses with Coder Growth PRO.
          </h1>
          
          <PaymentSummary
            originalPrice={currentPrice.original}
            discount={currentPrice.discount}
            finalPrice={currentPrice.final}
            plan={plan}
            billingCycle={billingCycle}
          />
        </div>
      </div>

      {/* Right Panel - Payment Form */}
      <div className="w-1/2 bg-white p-12">
        <div className="max-w-md mx-auto">
          <h2 className="text-2xl font-bold text-gray-900 mb-8">Payment Details</h2>
          
          {/* Payment method selector */}
          <div className="mb-6">
            <div className="flex space-x-4">
              <button
                type="button"
                onClick={() => setPaymentMethod('card')}
                className={`flex-1 py-2 px-4 rounded-md border ${
                  paymentMethod === 'card' 
                    ? 'border-primary-500 bg-primary-50 text-primary-700' 
                    : 'border-gray-300 text-gray-700'
                }`}
              >
                Credit Card
              </button>
              <button
                type="button"
                onClick={() => setPaymentMethod('paypal')}
                className={`flex-1 py-2 px-4 rounded-md border ${
                  paymentMethod === 'paypal'
                    ? 'border-primary-500 bg-primary-50 text-primary-700' 
                    : 'border-gray-300 text-gray-700'
                }`}
              >
                PayPal
              </button>
              <button
                type="button"
                onClick={() => setPaymentMethod('external')}
                className={`flex-1 py-2 px-4 rounded-md border ${
                  paymentMethod === 'external'
                    ? 'border-primary-500 bg-primary-50 text-primary-700' 
                    : 'border-gray-300 text-gray-700'
                }`}
              >
                External
              </button>
            </div>
          </div>
          
          {(paymentMethod === 'card' || paymentMethod === 'paypal') && (
            <PaymentForm
              paymentMethod={paymentMethod}
              setPaymentMethod={setPaymentMethod}
              cardNumber={cardNumber}
              setCardNumber={setCardNumber}
              cardName={cardName}
              setCardName={setCardName}
              expiry={expiry}
              setExpiry={setExpiry}
              cvv={cvv}
              setCvv={setCvv}
              onSubmit={handlePayment}
              isProcessing={isProcessing}
            />
          )}
          
          {paymentMethod === 'external' && (
            <div className="mt-6">
              <div className="mb-6 p-4 bg-gray-50 rounded-lg">
                <h3 className="font-medium text-gray-900 mb-2">About External Payment:</h3>
                <p className="text-gray-600 mb-4">
                  You'll be redirected to our external payment processor to complete your purchase.
                  The process is secure and this page will automatically update once payment is complete.
                </p>
              </div>
              
              <button
                onClick={handlePayment}
                className="w-full bg-primary-500 hover:bg-primary-600 text-white py-3 px-4 rounded-md font-medium"
                disabled={isProcessing}
              >
                {isProcessing ? 'Processing...' : 'Continue to External Payment'}
              </button>
            </div>
          )}
          
          <p className="mt-8 text-sm text-gray-500 text-center">
            By continuing, you agree to our Terms of Service and authorize this recurring charge.
          </p>
        </div>
      </div>
    </div>
  );
};

export default PaymentPage;

/== pages/PaymentPageBK.tsx
import React, { useState } from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import { useAuthStore } from '../store/authStore';
import { X } from 'lucide-react';
import PaymentSummary from '../components/molecules/PaymentSummary';
import PaymentForm from '../components/molecules/PaymentForm';

const PaymentPage = () => {
  const location = useLocation();
  const navigate = useNavigate();
  const { user } = useAuthStore();
  const [paymentMethod, setPaymentMethod] = useState<'card' | 'paypal'>('card');
  const [cardNumber, setCardNumber] = useState('');
  const [cardName, setCardName] = useState('');
  const [expiry, setExpiry] = useState('');
  const [cvv, setCvv] = useState('');
  const [isProcessing, setIsProcessing] = useState(false);

  const { plan, billingCycle } = location.state || { plan: 'premium', billingCycle: 'yearly' };

  const prices = {
    premium: {
      yearly: {
        original: 1735125,
        discount: 1156807,
        final: 578317
      },
      monthly: {
        original: 162463,
        discount: 0,
        final: 162463
      }
    },
    lifetime: {
      final: 1923097
    }
  };

  const handlePayment = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsProcessing(true);

    try {
      // Simulate payment processing
      await new Promise(resolve => setTimeout(resolve, 2000));
      
      // Randomly succeed or fail for demo purposes
      const success = Math.random() > 0.5;
      
      if (success) {
        navigate('/payment/success', { 
          state: { 
            plan,
            billingCycle,
            amount: plan === 'lifetime' ? prices.lifetime.final : prices.premium[billingCycle].final
          }
        });
      } else {
        navigate('/payment/failed');
      }
    } catch (error) {
      navigate('/payment/failed');
    }
  };

  if (!user) {
    navigate('/login');
    return null;
  }

  const currentPrice = plan === 'lifetime' 
    ? { original: prices.lifetime.final, discount: 0, final: prices.lifetime.final }
    : prices.premium[billingCycle];

  return (
    <div className="min-h-screen bg-gray-900 flex">
      {/* Left Panel - Order Summary */}
      <div className="w-1/2 bg-gray-900 p-12">
        <div className="max-w-md mx-auto">
          <button onClick={() => navigate(-1)} className="text-white mb-8">
            <X className="h-6 w-6" />
          </button>
          
          <h1 className="text-2xl font-bold text-white mb-2">
            Enjoy unlimited access to our courses with Coder Growth PRO.
          </h1>
          
          <PaymentSummary
            originalPrice={currentPrice.original}
            discount={currentPrice.discount}
            finalPrice={currentPrice.final}
            plan={plan}
            billingCycle={billingCycle}
          />
        </div>
      </div>

      {/* Right Panel - Payment Form */}
      <div className="w-1/2 bg-white p-12">
        <div className="max-w-md mx-auto">
          <h2 className="text-2xl font-bold text-gray-900 mb-8">Payment Details</h2>
          
          <PaymentForm
            paymentMethod={paymentMethod}
            setPaymentMethod={setPaymentMethod}
            cardNumber={cardNumber}
            setCardNumber={setCardNumber}
            cardName={cardName}
            setCardName={setCardName}
            expiry={expiry}
            setExpiry={setExpiry}
            cvv={cvv}
            setCvv={setCvv}
            onSubmit={handlePayment}
            isProcessing={isProcessing}
          />
          
          <p className="mt-8 text-sm text-gray-500 text-center">
            By continuing, you agree to our Terms of Service and authorize this recurring charge.
          </p>
        </div>
      </div>
    </div>
  );
};

export default PaymentPage;

/== pages/PaymentPageVer2.tsx
import React, { useState, useEffect, useRef } from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import { useAuthStore } from '../store/authStore';
import { X } from 'lucide-react';
import PaymentSummary from '../components/molecules/PaymentSummary';
import PaymentForm from '../components/molecules/PaymentForm';

// Define payment method type
type PaymentMethodType = 'card' | 'paypal' | 'external';

// Backend proxy server URL - Pastikan URL ini sesuai dengan server Puppeteer Anda
const PROXY_SERVER_URL = 'http://localhost:3001/api';

const PaymentPage = () => {
  const location = useLocation();
  const navigate = useNavigate();
  const { user } = useAuthStore();
  const [paymentMethod, setPaymentMethod] = useState<PaymentMethodType>('card');
  const [cardNumber, setCardNumber] = useState('');
  const [cardName, setCardName] = useState('');
  const [expiry, setExpiry] = useState('');
  const [cvv, setCvv] = useState('');
  const [isProcessing, setIsProcessing] = useState(false);
  const [showExternalPayment, setShowExternalPayment] = useState(false);
  const [activeSessionId, setActiveSessionId] = useState<string | null>(null);
  const paymentWindowRef = useRef<Window | null>(null);
  const pollIntervalRef = useRef<number | null>(null);
  const [paymentStatus, setPaymentStatus] = useState<string>('pending');
  
  // Extract plan and billing cycle from location state
  const { plan, billingCycle } = location.state || { plan: 'premium', billingCycle: 'yearly' };

  // Check URL for session ID
  useEffect(() => {
    const params = new URLSearchParams(location.search);
    const sessionIdParam = params.get('session');
    
    if (sessionIdParam) {
      setActiveSessionId(sessionIdParam);
      startPaymentStatusPolling(sessionIdParam);
    }
  }, [location]);

  // Start polling for payment status
  const startPaymentStatusPolling = (paymentSessionId: string) => {
    // Clear any existing interval
    if (pollIntervalRef.current) {
      window.clearInterval(pollIntervalRef.current);
    }
    
    console.log(`Starting polling for session: ${paymentSessionId}`);
    
    // Set up polling interval (every 2 seconds)
    pollIntervalRef.current = window.setInterval(() => {
      checkPaymentStatus(paymentSessionId);
    }, 2000);
  };

  // Check payment status with backend
  const checkPaymentStatus = async (paymentSessionId: string) => {
    try {
      console.log(`Checking payment status for: ${paymentSessionId}`);
      const response = await fetch(`${PROXY_SERVER_URL}/payment/check-status/${paymentSessionId}`);
      
      if (!response.ok) {
        throw new Error(`Server responded with status: ${response.status}`);
      }
      
      const data = await response.json();
      console.log('Payment status response:', data);
      
      // Update status
      setPaymentStatus(data.status || 'pending');
      
      if (data.status === 'success') {
        console.log('Payment successful! Redirecting to success page...');
        
        // Clear polling interval
        if (pollIntervalRef.current) {
          window.clearInterval(pollIntervalRef.current);
          pollIntervalRef.current = null;
        }
        
        // Calculate the final amount
        const currentPrice = data.plan === 'lifetime' 
          ? { final: prices.lifetime.final }
          : prices.premium[data.billingCycle as 'yearly' | 'monthly'];
        
        // Redirect to success page
        navigate('/payment/success', { 
          state: { 
            plan: data.plan,
            billingCycle: data.billingCycle,
            amount: currentPrice.final,
            token: data.token,
            school: data.school
          }
        });
      } else if (data.status === 'error' || data.status === 'timeout') {
        console.error(`Payment failed with status: ${data.status}`);
        
        // Clear polling interval
        if (pollIntervalRef.current) {
          window.clearInterval(pollIntervalRef.current);
          pollIntervalRef.current = null;
        }
        
        alert('Payment process encountered an error. Please try again.');
        setShowExternalPayment(false);
      }
    } catch (error) {
      console.error('Error checking payment status:', error);
    }
  };

  // Clean up intervals on unmount
  useEffect(() => {
    return () => {
      if (pollIntervalRef.current) {
        window.clearInterval(pollIntervalRef.current);
      }
    };
  }, []);

  // Pricing configuration
  const prices = {
    premium: {
      yearly: {
        original: 1735125,
        discount: 1156807,
        final: 578317
      },
      monthly: {
        original: 162463,
        discount: 0,
        final: 162463
      }
    },
    lifetime: {
      final: 1923097
    }
  };

  // Create payment session and redirect to payment gateway
  const initiateExternalPayment = async () => {
    setIsProcessing(true);
    
    try {
      console.log('Initiating external payment...');
      
      // Create payment session with the backend
      const response = await fetch(`${PROXY_SERVER_URL}/payment/create-session`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          plan,
          billingCycle,
          userId: user?.id
        }),
      });
      
      if (!response.ok) {
        throw new Error(`Server responded with status: ${response.status}`);
      }
      
      const data = await response.json();
      console.log('Payment session created:', data);
      
      if (data.sessionId && data.redirectUrl) {
        // Store session ID
        setActiveSessionId(data.sessionId);
        
        // Open payment window
        const paymentWindow = window.open(data.redirectUrl, '_blank');
        paymentWindowRef.current = paymentWindow;
        
        // Set external payment mode
        setShowExternalPayment(true);
        
        // Start polling for payment status
        startPaymentStatusPolling(data.sessionId);
      } else {
        throw new Error('Failed to create payment session');
      }
    } catch (error) {
      console.error('Error initiating external payment:', error);
      alert('Failed to initiate external payment. Please try again.');
    } finally {
      setIsProcessing(false);
    }
  };

  const handlePayment = async (e: React.FormEvent) => {
    e.preventDefault();
    
    if (paymentMethod === 'external') {
      // Initiate external payment
      await initiateExternalPayment();
      return;
    }
    
    setIsProcessing(true);

    try {
      // Simulate payment processing for card/PayPal
      await new Promise(resolve => setTimeout(resolve, 2000));
      
      // Randomly succeed or fail for demo purposes
      const success = Math.random() > 0.5;
      
      if (success) {
        navigate('/payment/success', { 
          state: { 
            plan,
            billingCycle,
            amount: plan === 'lifetime' ? prices.lifetime.final : prices.premium[billingCycle as 'yearly' | 'monthly'].final
          }
        });
      } else {
        navigate('/payment/failed');
      }
    } catch (error) {
      console.error('Error processing payment:', error);
      navigate('/payment/failed');
    } finally {
      setIsProcessing(false);
    }
  };

  if (!user) {
    navigate('/login');
    return null;
  }

  const currentPrice = plan === 'lifetime' 
    ? { original: prices.lifetime.final, discount: 0, final: prices.lifetime.final }
    : prices.premium[billingCycle as 'yearly' | 'monthly'];

  // Render external payment status panel if in external payment mode
  if (showExternalPayment) {
    return (
      <div className="min-h-screen bg-gray-900 flex flex-col p-6">
        <div className="flex items-center justify-between mb-6">
          <h2 className="text-xl font-bold text-white">External Payment in Progress</h2>
          <button 
            onClick={() => {
              // Clear polling interval
              if (pollIntervalRef.current) {
                window.clearInterval(pollIntervalRef.current);
                pollIntervalRef.current = null;
              }
              setShowExternalPayment(false);
            }}
            className="p-2 rounded-full bg-gray-700 hover:bg-gray-600 text-white"
          >
            <X className="h-6 w-6" />
          </button>
        </div>
        
        <div className="flex-grow bg-white rounded-xl shadow-lg p-6 flex flex-col">
          <div className="flex items-center justify-center flex-col flex-grow">
            <div className="w-20 h-20 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mb-6"></div>
            
            <h3 className="text-xl font-medium text-gray-900 mb-2">
              {paymentStatus === 'pending' 
                ? 'Processing Your Payment' 
                : paymentStatus === 'success' 
                  ? 'Payment Successful!' 
                  : 'Payment Processing...'}
            </h3>
            
            <p className="text-gray-600 text-center max-w-md mb-6">
              {paymentStatus === 'pending' 
                ? 'Please complete your payment in the newly opened tab. This page will automatically update once your payment is processed.' 
                : paymentStatus === 'success' 
                  ? 'Your payment has been successfully processed. You will be redirected shortly.' 
                  : 'We are waiting for confirmation of your payment. Please complete the payment in the opened tab.'}
            </p>
            
            <div className="w-full max-w-md bg-primary-50 border border-primary-200 rounded-lg p-4 mb-6">
              <h4 className="font-medium text-primary-800 mb-2">Payment Details:</h4>
              <div className="flex justify-between text-primary-700 mb-1">
                <span>Plan:</span>
                <span className="font-medium">{plan === 'lifetime' ? 'Lifetime Access' : 'Premium'}</span>
              </div>
              <div className="flex justify-between text-primary-700 mb-1">
                <span>Billing:</span>
                <span className="font-medium">{plan === 'lifetime' ? 'One-time' : (billingCycle === 'yearly' ? 'Annual' : 'Monthly')}</span>
              </div>
              <div className="flex justify-between text-primary-700 mt-2 pt-2 border-t border-primary-200">
                <span>Total:</span>
                <span className="font-medium">Rp {currentPrice.final.toLocaleString()}</span>
              </div>
              {activeSessionId && (
                <div className="mt-2 pt-2 border-t border-primary-200 text-xs text-primary-600">
                  <span>Session ID: {activeSessionId.substring(0, 8)}...</span>
                  <div className="mt-1">Status: <span className="font-semibold capitalize">{paymentStatus}</span></div>
                </div>
              )}
            </div>
            
            <button
              onClick={() => {
                // Re-focus payment window if it exists
                if (paymentWindowRef.current && !paymentWindowRef.current.closed) {
                  paymentWindowRef.current.focus();
                } else if (activeSessionId) {
                  // Restart payment if window was closed but we have a session
                  const paymentWindow = window.open(`https://goakal.com/haryadi/setup-home-server/ec0sb/apply`, '_blank');
                  paymentWindowRef.current = paymentWindow;
                } else {
                  // Start a new payment if no active session
                  initiateExternalPayment();
                }
              }}
              className="bg-primary-500 hover:bg-primary-600 text-white py-3 px-6 rounded-lg font-medium"
            >
              Return to Payment Window
            </button>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gray-900 flex">
      {/* Left Panel - Order Summary */}
      <div className="w-1/2 bg-gray-900 p-12">
        <div className="max-w-md mx-auto">
          <button onClick={() => navigate(-1)} className="text-white mb-8">
            <X className="h-6 w-6" />
          </button>
          
          <h1 className="text-2xl font-bold text-white mb-2">
            Enjoy unlimited access to our courses with Coder Growth PRO.
          </h1>
          
          <PaymentSummary
            originalPrice={currentPrice.original}
            discount={currentPrice.discount}
            finalPrice={currentPrice.final}
            plan={plan}
            billingCycle={billingCycle}
          />
        </div>
      </div>

      {/* Right Panel - Payment Form */}
      <div className="w-1/2 bg-white p-12">
        <div className="max-w-md mx-auto">
          <h2 className="text-2xl font-bold text-gray-900 mb-8">Payment Details</h2>
          
          {/* Payment method selector */}
          <div className="mb-6">
            <div className="flex space-x-4">
              <button
                type="button"
                onClick={() => setPaymentMethod('card')}
                className={`flex-1 py-2 px-4 rounded-md border ${
                  paymentMethod === 'card' 
                    ? 'border-primary-500 bg-primary-50 text-primary-700' 
                    : 'border-gray-300 text-gray-700'
                }`}
              >
                Credit Card
              </button>
              <button
                type="button"
                onClick={() => setPaymentMethod('paypal')}
                className={`flex-1 py-2 px-4 rounded-md border ${
                  paymentMethod === 'paypal'
                    ? 'border-primary-500 bg-primary-50 text-primary-700' 
                    : 'border-gray-300 text-gray-700'
                }`}
              >
                PayPal
              </button>
              <button
                type="button"
                onClick={() => setPaymentMethod('external')}
                className={`flex-1 py-2 px-4 rounded-md border ${
                  paymentMethod === 'external'
                    ? 'border-primary-500 bg-primary-50 text-primary-700' 
                    : 'border-gray-300 text-gray-700'
                }`}
              >
                External
              </button>
            </div>
          </div>
          
          {(paymentMethod === 'card' || paymentMethod === 'paypal') && (
            <PaymentForm
              paymentMethod={paymentMethod}
              setPaymentMethod={setPaymentMethod}
              cardNumber={cardNumber}
              setCardNumber={setCardNumber}
              cardName={cardName}
              setCardName={setCardName}
              expiry={expiry}
              setExpiry={setExpiry}
              cvv={cvv}
              setCvv={setCvv}
              onSubmit={handlePayment}
              isProcessing={isProcessing}
            />
          )}
          
          {paymentMethod === 'external' && (
            <div className="mt-6">
              <div className="mb-6 p-4 bg-gray-50 rounded-lg">
                <h3 className="font-medium text-gray-900 mb-2">About External Payment:</h3>
                <p className="text-gray-600 mb-4">
                  You'll be redirected to our external payment processor to complete your purchase.
                  The process is secure and this page will automatically update once payment is complete.
                </p>
                <div className="text-xs text-gray-500 p-2 bg-blue-50 rounded border border-blue-100">
                  <p className="mb-1 font-medium text-blue-700">How it works:</p>
                  <p>Our system will monitor the payment process and automatically detect when your payment is successful.</p>
                </div>
              </div>
              
              <button
                onClick={handlePayment}
                className="w-full bg-primary-500 hover:bg-primary-600 text-white py-3 px-4 rounded-md font-medium"
                disabled={isProcessing}
              >
                {isProcessing ? 'Processing...' : 'Continue to External Payment'}
              </button>
            </div>
          )}
          
          <p className="mt-8 text-sm text-gray-500 text-center">
            By continuing, you agree to our Terms of Service and authorize this recurring charge.
          </p>
        </div>
      </div>
    </div>
  );
};

export default PaymentPage;

/== pages/PaymentSuccessPage.tsx
import React, { useEffect } from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import { CheckCircle } from 'lucide-react';

const PaymentSuccessPage = () => {
  const location = useLocation();
  const navigate = useNavigate();
  const { plan, billingCycle, amount, token, school } = location.state || {};

  // Clean up localStorage when component mounts
  useEffect(() => {
    localStorage.removeItem('payment_token');
    localStorage.removeItem('payment_school');
    localStorage.removeItem('payment_status');
    localStorage.removeItem('payment_plan');
    localStorage.removeItem('payment_billing_cycle');
    
    // If no state is available, try to redirect back to payment page
    if (!location.state) {
      navigate('/payment');
    }
  }, [location, navigate]);

  // Calculate the display values, handling potential undefined values
  const displayAmount = amount || 0;
  const displayPlan = plan || 'premium';
  const displayBillingCycle = billingCycle || 'yearly';

  return (
    <div className="min-h-screen bg-gray-50 flex items-center justify-center p-4">
      <div className="max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center">
        <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
          <CheckCircle className="h-8 w-8 text-green-500" />
        </div>
        
        <h1 className="text-2xl font-bold text-gray-900 mb-2">
          Payment Successful!
        </h1>
        
        <p className="text-gray-600 mb-6">
          Thank you for subscribing to Coder Growth PRO. Your payment has been processed successfully.
        </p>
        
        <div className="bg-gray-50 rounded-lg p-4 mb-8">
          <div className="text-sm text-gray-600 mb-2">Payment Summary</div>
          <div className="text-lg font-medium text-gray-900">
            Rp {displayAmount.toLocaleString()}
          </div>
          <div className="text-sm text-gray-500">
            {displayPlan} Plan - {displayBillingCycle === 'yearly' ? 'Annual' : 'Monthly'} Billing
          </div>
          
          {token && (
            <div className="mt-2 pt-2 border-t border-gray-200 text-xs text-gray-500">
              <div>Reference: {token.substring(0, 8)}...</div>
              {school && <div>School: {school}</div>}
            </div>
          )}
        </div>
        
        <div className="space-y-4">
          <button
            onClick={() => navigate('/billing')}
            className="w-full py-3 px-4 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600"
          >
            View Billing History
          </button>
          
          <button
            onClick={() => navigate('/dashboard')}
            className="w-full py-3 px-4 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50"
          >
            Go to Dashboard
          </button>
        </div>
      </div>
    </div>
  );
};

export default PaymentSuccessPage;

/== pages/PaymentSuccessPageBK.tsx
import React from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import { CheckCircle } from 'lucide-react';

const PaymentSuccessPage = () => {
  const location = useLocation();
  const navigate = useNavigate();
  const { plan, billingCycle, amount } = location.state || {};

  return (
    <div className="min-h-screen bg-gray-50 flex items-center justify-center p-4">
      <div className="max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center">
        <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
          <CheckCircle className="h-8 w-8 text-green-500" />
        </div>
        
        <h1 className="text-2xl font-bold text-gray-900 mb-2">
          Payment Successful!
        </h1>
        
        <p className="text-gray-600 mb-6">
          Thank you for subscribing to Coder Growth PRO. Your payment has been processed successfully.
        </p>
        
        <div className="bg-gray-50 rounded-lg p-4 mb-8">
          <div className="text-sm text-gray-600 mb-2">Payment Summary</div>
          <div className="text-lg font-medium text-gray-900">
            Rp {amount?.toLocaleString() || '0'}
          </div>
          <div className="text-sm text-gray-500">
            {plan} Plan - {billingCycle === 'yearly' ? 'Annual' : 'Monthly'} Billing
          </div>
        </div>
        
        <div className="space-y-4">
          <button
            onClick={() => navigate('/billing')}
            className="w-full py-3 px-4 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600"
          >
            View Billing History
          </button>
          
          <button
            onClick={() => navigate('/dashboard')}
            className="w-full py-3 px-4 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50"
          >
            Go to Dashboard
          </button>
        </div>
      </div>
    </div>
  );
};

export default PaymentSuccessPage;

/== pages/PricingPage.tsx
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { useAuthStore } from '../store/authStore';
import PricingSection from '../components/organisms/PricingSection';

const PricingPage = () => {
  const [billingCycle, setBillingCycle] = useState<'yearly' | 'monthly'>('yearly');
  const navigate = useNavigate();
  const { isAuthenticated } = useAuthStore();

  const handleSubscribe = (plan: string) => {
    if (!isAuthenticated) {
      navigate('/login?redirect=/payment');
      return;
    }
    navigate('/payment', { state: { plan, billingCycle } });
  };

  return (
    <div className="min-h-screen bg-gray-50">
      <PricingSection
        billingCycle={billingCycle}
        onBillingCycleChange={setBillingCycle}
        onSubscribe={handleSubscribe}
      />
    </div>
  );
};

export default PricingPage;

/== pages/RegisterPage.tsx
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { useAuthStore } from '../store/authStore';
import AuthLayout from '../components/templates/AuthLayout';
import AuthHeader from '../components/molecules/AuthHeader';
import AuthForm from '../components/molecules/AuthForm';

const RegisterPage = () => {
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const navigate = useNavigate();
  const { register, isLoading, error } = useAuthStore();

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    
    try {
      await register(name, email, password);
      const { error: authError } = useAuthStore.getState();
      if (!authError) {
        navigate('/dashboard');
      }
    } catch (err) {
      console.error('Registration error:', err);
    }
  };

  return (
    <AuthLayout>
      <AuthHeader
        title="Create Account"
        subtitle="Join our community of learners"
      />
      <AuthForm
        isLogin={false}
        onSubmit={handleSubmit}
        isLoading={isLoading}
        error={error || undefined}
        email={email}
        setEmail={setEmail}
        password={password}
        setPassword={setPassword}
        name={name}
        setName={setName}
      />
    </AuthLayout>
  );
};

export default RegisterPage;

/== pages/RoadmapPage.tsx
import React, { useEffect, useMemo, useState } from 'react';
import { useParams } from 'react-router-dom';
import { Book, Code, Database, Server } from 'lucide-react';
import { useRoadmapStore } from '../store/roadmapStore';
import RoadmapFlow from '../components/organisms/RoadmapFlow';
import RoadmapModal from '../components/molecules/RoadmapModal';
import { transformToFlow } from '../utils/roadmapTransform';
import backendRoadmap from '../data/roadmaps/backend';
import Header from '../components/organisms/Header';

const RoadmapPage: React.FC = () => {
  const { name } = useParams<{ name: string }>();
  const { setCurrentRoadmap, setActiveNode, completedNodes, activeNode, completeNode } = useRoadmapStore();
  const [selectedNode, setSelectedNode] = useState<any>(null);
  const [isModalOpen, setIsModalOpen] = useState(false);

  useEffect(() => {
    if (name) {
      setCurrentRoadmap(name);
    }
  }, [name]);

  const { nodes, edges } = useMemo(
    () => transformToFlow(backendRoadmap, completedNodes, activeNode, { x: 50, y: 50 }),
    [backendRoadmap, completedNodes, activeNode]
  );

  const handleNodeClick = (nodeId: string) => {
    setActiveNode(nodeId);
    const node = backendRoadmap.find(n => n.id === nodeId) || 
                backendRoadmap.flatMap(n => n.children || []).find(n => n?.id === nodeId) ||
                backendRoadmap.flatMap(n => n.children || []).flatMap(n => n?.children || []).find(n => n?.id === nodeId);
    
    if (node) {
      setSelectedNode(node);
      setIsModalOpen(true);
    }
  };

  const handleCompleteNode = () => {
    if (selectedNode) {
      completeNode(selectedNode.id);
      setIsModalOpen(false);
    }
  };

  return (
    <div className="min-h-screen bg-gray-50 dark:bg-gray-900">
      <Header />
      
      {/* Hero Section */}
      <div className="bg-gradient-to-br from-blue-600 to-blue-800 dark:from-blue-900 dark:to-blue-950">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24">
          <div className="text-center">
            <h1 className="text-4xl font-bold text-white mb-4">
              Backend Development Roadmap
            </h1>
            <p className="text-xl text-white/90 mb-8">
              Step by step guide to becoming a modern backend developer
            </p>
          </div>
        </div>
      </div>

      {/* Content */}
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        {/* Progress Tracker */}
        <div className="bg-white dark:bg-gray-800 rounded-xl p-6 mb-12 shadow-sm">
          <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
            <div className="flex items-center">
              <div className="w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-xl flex items-center justify-center mr-4">
                <Code className="h-6 w-6 text-blue-600 dark:text-blue-400" />
              </div>
              <div>
                <div className="text-2xl font-bold text-gray-900 dark:text-white">0%</div>
                <div className="text-sm text-gray-500 dark:text-gray-400">Completed</div>
              </div>
            </div>
            <div className="flex items-center">
              <div className="w-12 h-12 bg-green-100 dark:bg-green-900 rounded-xl flex items-center justify-center mr-4">
                <Book className="h-6 w-6 text-green-600 dark:text-green-400" />
              </div>
              <div>
                <div className="text-2xl font-bold text-gray-900 dark:text-white">15</div>
                <div className="text-sm text-gray-500 dark:text-gray-400">Topics</div>
              </div>
            </div>
            <div className="flex items-center">
              <div className="w-12 h-12 bg-purple-100 dark:bg-purple-900 rounded-xl flex items-center justify-center mr-4">
                <Server className="h-6 w-6 text-purple-600 dark:text-purple-400" />
              </div>
              <div>
                <div className="text-2xl font-bold text-gray-900 dark:text-white">4</div>
                <div className="text-sm text-gray-500 dark:text-gray-400">Main Sections</div>
              </div>
            </div>
            <div className="flex items-center">
              <div className="w-12 h-12 bg-yellow-100 dark:bg-yellow-900 rounded-xl flex items-center justify-center mr-4">
                <Database className="h-6 w-6 text-yellow-600 dark:text-yellow-400" />
              </div>
              <div>
                <div className="text-2xl font-bold text-gray-900 dark:text-white">20+</div>
                <div className="text-sm text-gray-500 dark:text-gray-400">Resources</div>
              </div>
            </div>
          </div>
        </div>

        {/* Roadmap Content */}
        <div className="bg-white dark:bg-gray-800 rounded-xl shadow-sm">
          <div className="p-6 border-b border-gray-200 dark:border-gray-700">
            <div className="flex items-center justify-between">
              <h2 className="text-xl font-bold text-gray-900 dark:text-white">
                Learning Path
              </h2>
              <div className="text-sm text-gray-500 dark:text-gray-400">
                Click on a topic to learn more
              </div>
            </div>
          </div>
          
          <RoadmapFlow
            nodes={nodes}
            edges={edges}
            onNodeClick={handleNodeClick}
          />
        </div>
      </div>

      <RoadmapModal
        isOpen={isModalOpen}
        onClose={() => setIsModalOpen(false)}
        node={selectedNode}
        onComplete={handleCompleteNode}
        isCompleted={selectedNode ? completedNodes.includes(selectedNode.id) : false}
      />
    </div>
  );
};

export default RoadmapPage;

/== pages/RoadmapsListPage.tsx
import React from 'react';
import { Link } from 'react-router-dom';
import { Code, Server, Database, Cloud, Globe, File as Mobile, Brain, Shield } from 'lucide-react';
import Header from '../components/organisms/Header';

const RoadmapsListPage: React.FC = () => {
  const roadmaps = [
    {
      id: 'backend',
      title: 'Backend Development',
      description: 'Step by step guide to becoming a modern backend developer',
      icon: Server,
      color: 'bg-blue-500',
      progress: 0
    },
    {
      id: 'frontend',
      title: 'Frontend Development',
      description: 'Step by step guide to becoming a modern frontend developer',
      icon: Code,
      color: 'bg-purple-500',
      progress: 0
    },
    {
      id: 'devops',
      title: 'DevOps',
      description: 'Step by step guide to becoming a DevOps engineer',
      icon: Cloud,
      color: 'bg-green-500',
      progress: 0
    },
    {
      id: 'fullstack',
      title: 'Full Stack Development',
      description: 'Step by step guide to becoming a full stack developer',
      icon: Globe,
      color: 'bg-indigo-500',
      progress: 0
    }
  ];

  return (
    <div className="min-h-screen bg-gray-50 dark:bg-gray-900">
      <Header />
      {/* Hero Section */}
      <div className="bg-gradient-to-br from-gray-900 to-gray-800">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24">
          <div className="text-center">
            <h1 className="text-4xl font-bold text-white mb-4">
              Developer Roadmaps
            </h1>
            <p className="text-xl text-gray-300 mb-8">
              Step by step guides and paths to learn different tools or technologies
            </p>
          </div>
        </div>
      </div>

      {/* Roadmaps Grid */}
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {roadmaps.map((roadmap) => (
            <Link
              key={roadmap.id}
              to={`/roadmap/${roadmap.id}`}
              className="group"
            >
              <div className="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm hover:shadow-lg transition-all duration-200 h-full">
                <div className="flex items-center mb-4">
                  <div className={`${roadmap.color} p-3 rounded-xl`}>
                    <roadmap.icon className="h-6 w-6 text-white" />
                  </div>
                  {roadmap.progress > 0 && (
                    <div className="ml-auto">
                      <div className="text-sm font-medium text-gray-900 dark:text-white">
                        {roadmap.progress}% Complete
                      </div>
                    </div>
                  )}
                </div>
                <h3 className="text-xl font-bold text-gray-900 dark:text-white mb-2">
                  {roadmap.title}
                </h3>
                <p className="text-gray-600 dark:text-gray-300 mb-4">
                  {roadmap.description}
                </p>
                <div className="flex items-center text-sm text-gray-500 dark:text-gray-400">
                  <div className="flex items-center">
                    <div className="w-2 h-2 rounded-full bg-green-500 mr-2" />
                    <span>Beginner friendly</span>
                  </div>
                  <div className="flex items-center ml-4">
                    <div className="w-2 h-2 rounded-full bg-yellow-500 mr-2" />
                    <span>Interactive</span>
                  </div>
                </div>
              </div>
            </Link>
          ))}
        </div>
      </div>
    </div>
  );
};

export default RoadmapsListPage;

/== pages/SubmissionPage.tsx
import React, { useState } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { Upload, AlertCircle, CheckCircle } from 'lucide-react';
import Button from '../components/atoms/Button';
import SubmissionGuidance from '../components/organisms/SubmissionGuidance';
import SubmissionChecklist from '../components/molecules/SubmissionChecklist';

const SubmissionPage: React.FC = () => {
  const { courseId, lessonId } = useParams<{ courseId: string; lessonId: string }>();
  const navigate = useNavigate();
  const [showGuidance, setShowGuidance] = useState(true);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [checkedItems, setCheckedItems] = useState<string[]>([]);
  const [showChecklist, setShowChecklist] = useState(false);

  const checklistItems = [
    { id: 'tested', label: 'I have tested all features locally', required: true },
    { id: 'guidelines', label: 'My code follows the project guidelines', required: true },
    { id: 'docs', label: 'I have included necessary documentation', required: true },
    { id: 'clean', label: 'Code is clean and well-formatted', required: true },
    { id: 'tests', label: 'All tests are passing', required: true }
  ];

  const handleSubmit = async () => {
    if (!checkedItems.length) {
      setShowChecklist(true);
      return;
    }

    setIsSubmitting(true);
    // Simulate submission
    await new Promise(resolve => setTimeout(resolve, 2000));
    setIsSubmitting(false);
    navigate(`/courses/${courseId}/lessons/${lessonId}/review`);
  };

  const handleChecklistItemToggle = (id: string) => {
    setCheckedItems(prev => 
      prev.includes(id) 
        ? prev.filter(item => item !== id)
        : [...prev, id]
    );
  };

  if (showGuidance) {
    return (
      <div className="min-h-screen bg-gray-50 dark:bg-gray-900">
        <SubmissionGuidance />
        <div className="fixed bottom-8 right-8">
          <Button
            variant="primary"
            onClick={() => setShowGuidance(false)}
            className="bg-blue-600 hover:bg-blue-700"
          >
            Continue to Submission
          </Button>
        </div>
      </div>
    );
  }

  if (showChecklist) {
    return (
      <div className="min-h-screen bg-gray-50 dark:bg-gray-900 p-4">
        <div className="max-w-2xl mx-auto">
          <SubmissionChecklist
            items={checklistItems}
            checkedItems={checkedItems}
            onItemCheck={handleChecklistItemToggle}
          />
          <div className="mt-6 flex justify-end space-x-4">
            <Button
              variant="outline"
              onClick={() => setShowChecklist(false)}
              className="text-gray-600 hover:text-gray-900"
            >
              Back
            </Button>
            <Button
              variant="primary"
              onClick={handleSubmit}
              disabled={checkedItems.length !== checklistItems.length}
              className="bg-blue-600 hover:bg-blue-700"
            >
              Continue
            </Button>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gray-50 dark:bg-gray-900">
      <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden">
          <div className="p-6">
            <div className="flex items-center justify-between mb-8">
              <h1 className="text-2xl font-bold text-gray-900 dark:text-white">
                Submit Your Project
              </h1>
              <Button
                variant="outline"
                onClick={() => setShowGuidance(true)}
                className="text-gray-600 hover:text-gray-900"
              >
                View Guidelines
              </Button>
            </div>

            <div className="space-y-6">
              {/* Repository URL */}
              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                  Repository URL
                </label>
                <input
                  type="url"
                  className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"
                  placeholder="https://github.com/username/repository"
                />
              </div>

              {/* Deployment URL */}
              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                  Deployment URL (Optional)
                </label>
                <input
                  type="url"
                  className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"
                  placeholder="https://your-app.example.com"
                />
              </div>

              {/* Notes */}
              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                  Additional Notes
                </label>
                <textarea
                  rows={4}
                  className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"
                  placeholder="Any additional information about your submission..."
                />
              </div>

              {/* Submit Button */}
              <div className="flex justify-end space-x-4">
                <Button
                  variant="outline"
                  onClick={() => navigate(-1)}
                  className="text-gray-600 hover:text-gray-900"
                >
                  Cancel
                </Button>
                <Button
                  variant="primary"
                  onClick={() => setShowChecklist(true)}
                  disabled={isSubmitting}
                  className="bg-blue-600 hover:bg-blue-700"
                >
                  {isSubmitting ? (
                    <>
                      <Upload className="animate-bounce h-5 w-5 mr-2" />
                      Submitting...
                    </>
                  ) : (
                    'Continue'
                  )}
                </Button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default SubmissionPage;

/== pages/SubmissionReviewPage.tsx
import React, { useEffect } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { useSubmissionStore } from '../store/submissionStore';
import SubmissionReview from '../components/organisms/SubmissionReview';

const SubmissionReviewPage: React.FC = () => {
  const { courseId, lessonId } = useParams<{ courseId: string; lessonId: string }>();
  const navigate = useNavigate();
  const { status, feedback, reviewerNotes, submissionFiles, setStatus } = useSubmissionStore();

  useEffect(() => {
    // Simulate API call to get submission status
    const timer = setTimeout(() => {
      setStatus('reviewing');
    }, 1000);

    return () => clearTimeout(timer);
  }, []);

  const handleResubmit = async () => {
    navigate(`/courses/${courseId}/lessons/${lessonId}/submit`);
  };

  if (!status) {
    return (
      <div className="min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center">
        <div className="animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"></div>
      </div>
    );
  }

  return (
    <SubmissionReview
      status={status}
      feedback={feedback}
      reviewerNotes={reviewerNotes || undefined}
      submissionFiles={submissionFiles}
      onResubmit={handleResubmit}
    />
  );
};

export default SubmissionReviewPage;

/== pages/TutorialPage.tsx
import React from 'react';
import { useParams } from 'react-router-dom';
import MainLayout from '../components/templates/MainLayout';
import HeroSection from '../components/organisms/HeroSection';
import TutorialHeader from '../components/organisms/TutorialHeader';
import TableOfContents from '../components/molecules/TableOfContents';
import TutorialIntroduction from '../components/organisms/TutorialIntroduction';
import TutorialResources from '../components/organisms/TutorialResources';
import GettingStarted from '../components/organisms/GettingStarted';
import RelatedCourses from '../components/organisms/RelatedCourses';
import { tutorialData } from '../data/tutorials';

const TutorialPage = () => {
  const { language } = useParams<{ language: string }>();
  const tutorial = tutorialData[language || 'python'] || tutorialData.python;

  return (
    <MainLayout>
      {/* Hero Section */}
      <HeroSection
        title={tutorial.title}
        description={tutorial.description}
        image={tutorial.image}
        primaryAction={{
          text: 'Start Learning',
          link: tutorial.topics[0]?.path || '#'
        }}
        secondaryAction={{
          text: 'Try Online Compiler',
          link: '/compiler'
        }}
        background={tutorial.color}
      />

      {/* Breadcrumb Navigation */}
      <TutorialHeader
        language={language || 'python'}
        title={tutorial.title}
      />

      {/* Tutorial Content */}
      <section className="py-12">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="grid grid-cols-1 lg:grid-cols-4 gap-8">
            {/* Sidebar */}
            <div className="lg:col-span-1">
              <TableOfContents topics={tutorial.topics} />
            </div>

            {/* Main Content */}
            <div className="lg:col-span-3">
              <TutorialIntroduction
                title={tutorial.title}
                introduction={tutorial.introduction}
                benefits={tutorial.benefits}
                language={language || 'python'}
              />

              <TutorialResources resources={tutorial.resources} />

              <GettingStarted
                steps={tutorial.gettingStarted}
                firstTutorialPath={tutorial.topics[0]?.path || '#'}
              />
            </div>
          </div>
        </div>
      </section>

      {/* Related Courses */}
      <section className="py-12 bg-gray-50">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <RelatedCourses courses={tutorial.relatedCourses} />
        </div>
      </section>
    </MainLayout>
  );
};

export default TutorialPage;

/== pages/bundle-detail.tsx
import React, { useEffect, useState } from 'react';
import { useParams, Link } from 'react-router-dom';
// import { CustomerLayout } from '../components/templates/CustomerLayout';
import  Badge  from '../components/atoms/Badge';
import  Button  from '../components/atoms/Button';
// import { ProgressStats } from '../components/molecules/ProgressStats';
import useBundleStore from '../store/useBundleStore';

const BundleDetailPage: React.FC = () => {
  const { id } = useParams<{ id: string }>();
  const { bundles, courses, fetchBundles, fetchCourses, isLoading } = useBundleStore();
  const [bundle, setBundle] = useState<any>(null);
  const [bundleCourses, setBundleCourses] = useState<any[]>([]);

  useEffect(() => {
    fetchBundles();
    fetchCourses();
  }, [fetchBundles, fetchCourses]);

  useEffect(() => {
    if (bundles.length > 0 && id) {
      const foundBundle = bundles.find(b => b.id === id);
      if (foundBundle) {
        setBundle(foundBundle);
        
        // Get the courses in this bundle
        if (courses.length > 0) {
          const coursesInBundle = courses.filter(course => 
            foundBundle.courses.includes(course.id)
          );
          setBundleCourses(coursesInBundle);
        }
      }
    }
  }, [bundles, courses, id]);

  const getTotalDuration = () => {
    if (!bundleCourses) return 0;
    return bundleCourses.reduce((total, course) => total + course.duration, 0);
  };

  if (isLoading || !bundle) {
    return (
     // <CustomerLayout>
        <div className="flex justify-center items-center h-64">
          <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
        </div>
      // </CustomerLayout>
    );
  }

  return (
    // <CustomerLayout>
    <div>
      <div className="bg-gray-50 rounded-lg px-6 py-8 mb-8">
        <div className="max-w-4xl mx-auto">
          <div className="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
            <div>
              <div className="flex space-x-2 mb-2">
                <Badge variant={
                  bundle.difficultyLevel === 'beginner' ? 'info' : 
                  bundle.difficultyLevel === 'intermediate' ? 'warning' : 'danger'
                }>
                  {bundle.difficultyLevel}
                </Badge>
                <Badge variant="info">{bundle.theme}</Badge>
                {bundle.limitedTime && (
                  <Badge variant="warning">Limited Time</Badge>
                )}
              </div>
              <h1 className="text-3xl font-bold text-gray-900 mb-2">{bundle.title}</h1>
              <p className="text-gray-600">{bundle.description}</p>
            </div>
            <div className="mt-4 md:mt-0 text-right">
              <div className="text-3xl font-bold text-blue-600">${bundle.bundlePrice.toFixed(2)}</div>
              <div className="text-gray-500 line-through">${bundle.originalPrice.toFixed(2)}</div>
              <div className="text-sm text-green-600 font-medium">Save {bundle.discountPercentage}%</div>
            </div>
          </div>
          
          <div className="flex flex-col md:flex-row gap-4">
            <div className="flex-1">
              <div className="flex items-center justify-between mb-2">
                <div className="text-gray-600">{bundleCourses.length} Courses</div>
                <div className="text-gray-600">{getTotalDuration()} hours total</div>
              </div>
              <div className="w-full bg-gray-200 rounded-full h-2.5 mb-6">
                <div
                  className="h-2.5 rounded-full bg-blue-600"
                  style={{ width: '0%' }}
                ></div>
              </div>
            </div>
            <div>
              <Link to="/checkout">
                <Button className="w-full md:w-auto">Enroll in Bundle</Button>
              </Link>
            </div>
          </div>
        </div>
      </div>
      
      <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div className="md:col-span-2">
          <div className="bg-white rounded-lg shadow-sm border p-6 mb-8">
            <h2 className="text-xl font-semibold text-gray-900 mb-6">Bundle Contents</h2>
            <div className="space-y-6">
              {bundleCourses.map((course, index) => (
                <div key={course.id} className="border rounded-lg overflow-hidden">
                  <div className="bg-gray-50 p-4 border-b flex justify-between items-center">
                    <div className="flex items-center">
                      <div className="mr-3 text-gray-400 font-medium">{index + 1}</div>
                      <h3 className="font-medium text-gray-900">{course.title}</h3>
                    </div>
                    <Badge variant={
                      course.level === 'beginner' ? 'info' : 
                      course.level === 'intermediate' ? 'warning' : 'danger'
                    }>
                      {course.level}
                    </Badge>
                  </div>
                  <div className="p-4">
                    <p className="text-gray-600 mb-4">{course.description}</p>
                    <div className="flex justify-between text-sm text-gray-500">
                      <div>{course.duration} hours</div>
                      <div>${course.price.toFixed(2)}</div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
          
          {bundle.hasCertificate && (
            <div className="bg-white rounded-lg shadow-sm border p-6 mb-8">
              <div className="flex">
                <div className="mr-4 text-blue-500">
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                  </svg>
                </div>
                <div>
                  <h2 className="text-xl font-semibold text-gray-900 mb-2">Bundle Certificate</h2>
                  <p className="text-gray-600">Complete all courses in this bundle to receive a special certificate of completion.</p>
                </div>
              </div>
            </div>
          )}
        </div>
        
        <div>
          <div className="bg-white rounded-lg shadow-sm border p-6 mb-6">
            <h3 className="text-lg font-medium text-gray-900 mb-4">Bundle Includes</h3>
            <ul className="space-y-3">
              <li className="flex items-start">
                <svg className="h-5 w-5 text-green-500 mr-2 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                  <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
                </svg>
                <span className="text-gray-700">{bundleCourses.length} complete courses</span>
              </li>
              <li className="flex items-start">
                <svg className="h-5 w-5 text-green-500 mr-2 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                  <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
                </svg>
                <span className="text-gray-700">{getTotalDuration()} hours of content</span>
              </li>
              <li className="flex items-start">
                <svg className="h-5 w-5 text-green-500 mr-2 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                  <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
                </svg>
                <span className="text-gray-700">
                  {bundle.accessDuration === 'lifetime' 
                    ? 'Lifetime access' 
                    : `${bundle.accessDuration} days access`}
                </span>
              </li>
              {bundle.hasCertificate && (
                <li className="flex items-start">
                  <svg className="h-5 w-5 text-green-500 mr-2 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                    <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
                  </svg>
                  <span className="text-gray-700">Certificate of completion</span>
                </li>
              )}
              <li className="flex items-start">
                <svg className="h-5 w-5 text-green-500 mr-2 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                  <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
                </svg>
                <span className="text-gray-700">Learn at your own pace</span>
              </li>
            </ul>
          </div>
          
          <div className="bg-white rounded-lg shadow-sm border p-6">
            <h3 className="text-lg font-medium text-gray-900 mb-4">Bundle Savings</h3>
            <div className="space-y-4">
              <div>
                <div className="text-sm text-gray-500 mb-1">Courses if purchased separately</div>
                <div className="text-lg font-medium">${bundle.originalPrice.toFixed(2)}</div>
              </div>
              <div>
                <div className="text-sm text-gray-500 mb-1">Bundle price</div>
                <div className="text-lg font-medium text-blue-600">${bundle.bundlePrice.toFixed(2)}</div>
              </div>
              <div>
                <div className="text-sm text-gray-500 mb-1">You save</div>
                <div className="text-lg font-medium text-green-600">
                  ${(bundle.originalPrice - bundle.bundlePrice).toFixed(2)} ({bundle.discountPercentage}%)
                </div>
              </div>
              <Link to="/checkout">
                <Button className="w-full mt-4">Buy Now</Button>
              </Link>
            </div>
          </div>
        </div>
      </div>
      </div>
    // </CustomerLayout>
  );
};

export default BundleDetailPage;

/== pages/bundles.tsx
import React, { useEffect, useState } from 'react';
import { Link } from 'react-router-dom';
// import  CustomerLayout  from '../components/templates/CustomerLayout';
import Badge  from '../components/atoms/Badge';
import Button  from '../components/atoms/Button';
import useBundleStore from '../store/useBundleStore';

const BundlesPage: React.FC = () => {
  const { bundles, courses, fetchBundles, fetchCourses, isLoading } = useBundleStore();
  const [filter, setFilter] = useState<string>('all');
  const [filterThemes, setFilterThemes] = useState<string[]>([]);

  useEffect(() => {
    fetchBundles();
    fetchCourses();
  }, [fetchBundles, fetchCourses]);

  useEffect(() => {
    // Extract unique themes for filter
    if (bundles.length > 0) {
      const themes = [...new Set(bundles.map(bundle => bundle.theme))];
      setFilterThemes(themes);
    }
  }, [bundles]);

  const filteredBundles = bundles.filter(bundle => {
    if (!bundle.isActive) return false;
    if (filter === 'all') return true;
    return bundle.theme === filter;
  });

  const getBundleCoursesCount = (bundleId: string) => {
    const bundle = bundles.find(b => b.id === bundleId);
    return bundle?.courses.length || 0;
  };

  const getTotalDuration = (bundleId: string) => {
    const bundle = bundles.find(b => b.id === bundleId);
    
    if (!bundle || !bundle.courses) return 0;
    
    return bundle.courses.reduce((total, courseId) => {
      const course = courses.find(c => c.id === courseId);
      return total + (course?.duration || 0);
    }, 0);
  };

  if (isLoading) {
    return (
      // <CustomerLayout>
        <div className="flex justify-center items-center h-64">
          <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
        </div>
      // </CustomerLayout> 
    );
  }

  return (
    // <CustomerLayout>
    <div>
      <div className="mb-8">
        <h1 className="text-3xl font-bold text-gray-900 mb-2">Course Bundles</h1>
        <p className="text-lg text-gray-600">Save by purchasing our expertly curated course bundles</p>
      </div>
      
      <div className="flex flex-col md:flex-row gap-8">
        <div className="md:w-1/4">
          <div className="bg-white dark:bg-dark-800 dark:bg-gray-800 rounded-lg shadow-sm border p-4 sticky top-6">
            <h2 className="text-lg font-medium text-gray-900 mb-4">Filter by Theme</h2>
            <div className="space-y-2">
              <div
                className={`p-2 rounded cursor-pointer ${
                  filter === 'all' ? 'bg-blue-50 text-blue-700' : 'hover:bg-gray-50'
                }`}
                onClick={() => setFilter('all')}
              >
                All Bundles
              </div>
              {filterThemes.map(theme => (
                <div
                  key={theme}
                  className={`p-2 rounded cursor-pointer ${
                    filter === theme ? 'bg-blue-50 text-blue-700' : 'hover:bg-gray-50'
                  }`}
                  onClick={() => setFilter(theme)}
                >
                  {theme}
                </div>
              ))}
            </div>
          </div>
        </div>
        
        <div className="md:w-3/4">
          {filteredBundles.length === 0 ? (
            <div className="bg-white dark:bg-dark-800 p-6 rounded-lg border text-center">
              <h3 className="text-lg font-medium text-gray-900 mb-2">No bundles found</h3>
              <p className="text-gray-500">Try adjusting your filters or check back later</p>
            </div>
          ) : (
            <div className="space-y-6">
              {filteredBundles.map(bundle => (
                <div key={bundle.id} className="bg-white dark:bg-dark-800 rounded-lg shadow-sm border overflow-hidden">
                  <div className="md:flex">
                    <div className="md:w-1/3 bg-gray-800 p-6">
                      <div className="mb-4">
                        <Badge variant={
                          bundle.difficultyLevel === 'beginner' ? 'info' : 
                          bundle.difficultyLevel === 'intermediate' ? 'warning' : 'danger'
                        }>
                          {bundle.difficultyLevel}
                        </Badge>
                        {bundle.limitedTime && (
                          <Badge variant="warning" className="ml-2">Limited Time</Badge>
                        )}
                      </div>
                      <h2 className="text-xl font-bold text-gray-900 mb-2">{bundle.title}</h2>
                      <p className="text-gray-600 mb-4">{bundle.description}</p>
                      
                      <div className="flex justify-between mb-4">
                        <div>
                          <div className="text-sm text-gray-500">Total Duration</div>
                          <div className="font-medium">{getTotalDuration(bundle.id)} hours</div>
                        </div>
                        <div>
                          <div className="text-sm text-gray-500">Courses</div>
                          <div className="font-medium">{getBundleCoursesCount(bundle.id)} courses</div>
                        </div>
                      </div>
                      
                      <div className="flex items-end">
                        <div className="text-2xl font-bold text-blue-600">${bundle.bundlePrice.toFixed(2)}</div>
                        <div className="ml-2 text-sm text-gray-500 line-through">${bundle.originalPrice.toFixed(2)}</div>
                      </div>
                      <div className="text-sm text-green-600 font-medium">Save {bundle.discountPercentage}%</div>
                    </div>
                    
                    <div className="md:w-2/3 p-6">
                      <h3 className="text-lg font-medium text-gray-900 mb-4">Courses Included</h3>
                      <ul className="divide-y divide-gray-200 mb-6">
                        {bundle.courses.slice(0, 3).map(courseId => {
                          const course = courses.find(c => c.id === courseId);
                          return course ? (
                            <li key={course.id} className="py-3 flex justify-between items-center">
                              <div>
                                <div className="font-medium">{course.title}</div>
                                <div className="text-sm text-gray-500">{course.level} · {course.duration} hours</div>
                              </div>
                              <div className="text-gray-600">${course.price.toFixed(2)}</div>
                            </li>
                          ) : null;
                        })}
                      </ul>
                      {bundle.courses.length > 3 && (
                        <div className="text-center mb-6">
                          <Link to={`/bundles/${bundle.id}`} className="text-blue-600 hover:text-blue-800">
                            + {bundle.courses.length - 3} more courses
                          </Link>
                        </div>
                      )}
                      
                      <div className="flex space-x-4">
                        <Link to={`/bundles/${bundle.id}`} className="flex-1">
                          <Button variant="outline" className="w-full">View Details</Button>
                        </Link>
                        <Link to="/checkout" className="flex-1">
                          <Button variant="primary" className="w-full">Buy Bundle</Button>
                        </Link>
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          )}
        </div>
      </div>
      </div>
    // </CustomerLayout>
  );
};

export default BundlesPage;

/== pages/cms/AdminContentEditor.tsx
import React, { useState } from 'react';
import { useEditor, EditorContent } from '@tiptap/react';
import StarterKit from '@tiptap/starter-kit';
import Image from '@tiptap/extension-image';
import Link from '@tiptap/extension-link';
import { Save, Image as ImageIcon, Link as LinkIcon, List, ListOrdered, Bold, Italic, Code } from 'lucide-react';
import Button from '../../components/atoms/Button';
import Card from '../../components/atoms/Card';

const AdminContentEditor = () => {
  const [title, setTitle] = useState('');
  const [saving, setSaving] = useState(false);

  const editor = useEditor({
    extensions: [
      StarterKit,
      Image,
      Link.configure({
        openOnClick: false
      })
    ],
    content: '<p>Start writing your content here...</p>',
  });

  const handleSave = async () => {
    setSaving(true);
    // Simulate saving
    await new Promise(resolve => setTimeout(resolve, 1000));
    setSaving(false);
  };

  return (
    <div className="max-w-5xl mx-auto">
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Content Editor</h1>
        <Button
          variant="primary"
          onClick={handleSave}
          disabled={saving}
          className="bg-brand-green hover:bg-brand-green/90"
        >
          <Save className="h-5 w-5 mr-2" />
          {saving ? 'Saving...' : 'Save'}
        </Button>
      </div>

      <Card className="mb-6">
        <div className="p-6">
          <input
            type="text"
            value={title}
            onChange={(e) => setTitle(e.target.value)}
            placeholder="Enter title..."
            className="w-full text-2xl font-bold border-0 border-b-2 border-gray-200 dark:border-gray-700 pb-2 mb-6 bg-transparent focus:ring-0 focus:border-brand-green"
          />

          <div className="border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden">
            {/* Editor Toolbar */}
            <div className="border-b border-gray-200 dark:border-gray-700 p-2 bg-gray-50 dark:bg-gray-800">
              <div className="flex flex-wrap gap-2">
                <button
                  onClick={() => editor?.chain().focus().toggleBold().run()}
                  className={`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${
                    editor?.isActive('bold') ? 'bg-gray-200 dark:bg-gray-700' : ''
                  }`}
                >
                  <Bold className="h-5 w-5" />
                </button>
                <button
                  onClick={() => editor?.chain().focus().toggleItalic().run()}
                  className={`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${
                    editor?.isActive('italic') ? 'bg-gray-200 dark:bg-gray-700' : ''
                  }`}
                >
                  <Italic className="h-5 w-5" />
                </button>
                <button
                  onClick={() => editor?.chain().focus().toggleCode().run()}
                  className={`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${
                    editor?.isActive('code') ? 'bg-gray-200 dark:bg-gray-700' : ''
                  }`}
                >
                  <Code className="h-5 w-5" />
                </button>
                <button
                  onClick={() => editor?.chain().focus().toggleBulletList().run()}
                  className={`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${
                    editor?.isActive('bulletList') ? 'bg-gray-200 dark:bg-gray-700' : ''
                  }`}
                >
                  <List className="h-5 w-5" />
                </button>
                <button
                  onClick={() => editor?.chain().focus().toggleOrderedList().run()}
                  className={`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${
                    editor?.isActive('orderedList') ? 'bg-gray-200 dark:bg-gray-700' : ''
                  }`}
                >
                  <ListOrdered className="h-5 w-5" />
                </button>
                <button
                  onClick={() => {
                    const url = window.prompt('Enter image URL');
                    if (url) {
                      editor?.chain().focus().setImage({ src: url }).run();
                    }
                  }}
                  className="p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700"
                >
                  <ImageIcon className="h-5 w-5" />
                </button>
                <button
                  onClick={() => {
                    const url = window.prompt('Enter link URL');
                    if (url) {
                      editor?.chain().focus().setLink({ href: url }).run();
                    }
                  }}
                  className={`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${
                    editor?.isActive('link') ? 'bg-gray-200 dark:bg-gray-700' : ''
                  }`}
                >
                  <LinkIcon className="h-5 w-5" />
                </button>
              </div>
            </div>

            {/* Editor Content */}
            <div className="p-4 min-h-[400px] prose dark:prose-invert max-w-none">
              <EditorContent editor={editor} />
            </div>
          </div>
        </div>
      </Card>
    </div>
  );
};

export default AdminContentEditor;

/== pages/cms/AdminContentPreview.tsx
import React from 'react';

const AdminContentPreview = () => {
  return (
    <div className="p-6">
      <h1 className="text-2xl font-bold mb-6">Content Preview</h1>
      <div className="bg-white rounded-lg shadow p-6">
        <p className="text-gray-600">Content preview implementation coming soon...</p>
      </div>
    </div>
  );
};

export default AdminContentPreview;

/== pages/cms/AdminCourseForm.tsx
import React, { useState, useEffect } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { Save, ArrowLeft, Plus, Image as ImageIcon, Link as LinkIcon, List, ListOrdered } from 'lucide-react';
import { useEditor, EditorContent } from '@tiptap/react';
import StarterKit from '@tiptap/starter-kit';
import Image from '@tiptap/extension-image';
import Link from '@tiptap/extension-link';
import Button from '../../components/atoms/Button';
import Card from '../../components/atoms/Card';
import { useCourseStore } from '../../store/courseStore';
import { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';

const AdminCourseForm: React.FC = () => {
  const { id } = useParams();
  const navigate = useNavigate();
  const { getCourseById } = useCourseStore();
  
  const [formData, setFormData] = useState({
    title: '',
    description: '',
    level: 'beginner',
    duration: '',
    price: '',
    image: '',
    features: [''],
    curriculum: [
      { id: '1', title: 'Introduction', type: 'lesson', content: '' },
    ]
  });

  const editor = useEditor({
    extensions: [
      StarterKit,
      Image,
      Link.configure({
        openOnClick: false
      })
    ],
    content: '',
    onUpdate: ({ editor }) => {
      // Handle content update
      console.log(editor.getHTML());
    }
  });

  useEffect(() => {
    if (id) {
      const course = getCourseById(id);
      if (course) {
        setFormData({
          title: course.title,
          description: course.description,
          level: course.level.toLowerCase(),
          duration: course.duration,
          price: course.price,
          image: course.image,
          features: course.features,
          curriculum: [{ id: '1', title: 'Introduction', type: 'lesson', content: '' }]
        });
      }
    }
  }, [id]);

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    navigate('/cms/courses');
  };

  const addCurriculumItem = () => {
    setFormData(prev => ({
      ...prev,
      curriculum: [
        ...prev.curriculum,
        {
          id: String(prev.curriculum.length + 1),
          title: 'New Lesson',
          type: 'lesson',
          content: ''
        }
      ]
    }));
  };

  const handleDragEnd = (result: any) => {
    if (!result.destination) return;

    const items = Array.from(formData.curriculum);
    const [reorderedItem] = items.splice(result.source.index, 1);
    items.splice(result.destination.index, 0, reorderedItem);

    setFormData(prev => ({ ...prev, curriculum: items }));
  };

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <div className="flex items-center">
          <Button
            variant="outline"
            onClick={() => navigate('/cms/courses')}
            className="mr-4"
          >
            <ArrowLeft className="h-5 w-5 mr-2" />
            Back
          </Button>
          <h1 className="text-2xl font-bold text-gray-900 dark:text-white">
            {id ? 'Edit Course' : 'Create Course'}
          </h1>
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* Main Form */}
        <div className="lg:col-span-2">
          <Card className="overflow-hidden">
            <form onSubmit={handleSubmit} className="p-6 space-y-6">
              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                  Course Title
                </label>
                <input
                  type="text"
                  value={formData.title}
                  onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}
                  className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                  required
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                  Description
                </label>
                <textarea
                  value={formData.description}
                  onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}
                  rows={4}
                  className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                  required
                />
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                    Level
                  </label>
                  <select
                    value={formData.level}
                    onChange={(e) => setFormData(prev => ({ ...prev, level: e.target.value }))}
                    className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                  >
                    <option value="beginner">Beginner</option>
                    <option value="intermediate">Intermediate</option>
                    <option value="advanced">Advanced</option>
                  </select>
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                    Duration
                  </label>
                  <input
                    type="text"
                    value={formData.duration}
                    onChange={(e) => setFormData(prev => ({ ...prev, duration: e.target.value }))}
                    className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                    placeholder="e.g. 8 weeks"
                    required
                  />
                </div>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                  Course Image URL
                </label>
                <input
                  type="url"
                  value={formData.image}
                  onChange={(e) => setFormData(prev => ({ ...prev, image: e.target.value }))}
                  className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                  required
                />
              </div>

              {/* Rich Text Editor */}
              <div>
                <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                  Course Content
                </label>
                <Card className="p-4 bg-white dark:bg-gray-800">
                  <div className="border-b border-gray-200 dark:border-gray-700 pb-4 mb-4">
                    <div className="flex items-center space-x-2">
                      <button
                        type="button"
                        onClick={() => editor?.chain().focus().toggleBold().run()}
                        className={`p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 ${
                          editor?.isActive('bold') ? 'bg-gray-100 dark:bg-gray-700' : ''
                        }`}
                      >
                        <strong>B</strong>
                      </button>
                      <button
                        type="button"
                        onClick={() => editor?.chain().focus().toggleItalic().run()}
                        className={`p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 ${
                          editor?.isActive('italic') ? 'bg-gray-100 dark:bg-gray-700' : ''
                        }`}
                      >
                        <em>I</em>
                      </button>
                      <button
                        type="button"
                        onClick={() => editor?.chain().focus().toggleBulletList().run()}
                        className={`p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 ${
                          editor?.isActive('bulletList') ? 'bg-gray-100 dark:bg-gray-700' : ''
                        }`}
                      >
                        <List className="h-5 w-5" />
                      </button>
                      <button
                        type="button"
                        onClick={() => editor?.chain().focus().toggleOrderedList().run()}
                        className={`p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 ${
                          editor?.isActive('orderedList') ? 'bg-gray-100 dark:bg-gray-700' : ''
                        }`}
                      >
                        <ListOrdered className="h-5 w-5" />
                      </button>
                      <button
                        type="button"
                        onClick={() => {
                          const url = window.prompt('Enter image URL');
                          if (url) {
                            editor?.chain().focus().setImage({ src: url }).run();
                          }
                        }}
                        className="p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"
                      >
                        <ImageIcon className="h-5 w-5" />
                      </button>
                      <button
                        type="button"
                        onClick={() => {
                          const url = window.prompt('Enter link URL');
                          if (url) {
                            editor?.chain().focus().setLink({ href: url }).run();
                          }
                        }}
                        className={`p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 ${
                          editor?.isActive('link') ? 'bg-gray-100 dark:bg-gray-700' : ''
                        }`}
                      >
                        <LinkIcon className="h-5 w-5" />
                      </button>
                    </div>
                  </div>
                  <EditorContent editor={editor} className="prose dark:prose-invert max-w-none min-h-[200px]" />
                </Card>
              </div>

              {/* Curriculum Builder */}
              <div>
                <div className="flex items-center justify-between mb-4">
                  <label className="block text-sm font-medium text-gray-700 dark:text-gray-300">
                    Curriculum
                  </label>
                  <Button
                    type="button"
                    variant="outline"
                    onClick={addCurriculumItem}
                    className="text-sm"
                  >
                    <Plus className="h-4 w-4 mr-2" />
                    Add Lesson
                  </Button>
                </div>
                
                <DragDropContext onDragEnd={handleDragEnd}>
                  <Droppable droppableId="curriculum">
                    {(provided) => (
                      <div
                        {...provided.droppableProps}
                        ref={provided.innerRef}
                        className="space-y-2"
                      >
                        {formData.curriculum.map((item, index) => (
                          <Draggable key={item.id} draggableId={item.id} index={index}>
                            {(provided) => (
                              <div
                                ref={provided.innerRef}
                                {...provided.draggableProps}
                                {...provided.dragHandleProps}
                                className="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4"
                              >
                                <input
                                  type="text"
                                  value={item.title}
                                  onChange={(e) => {
                                    const newCurriculum = [...formData.curriculum];
                                    newCurriculum[index].title = e.target.value;
                                    setFormData(prev => ({ ...prev, curriculum: newCurriculum }));
                                  }}
                                  className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                                  placeholder="Lesson title"
                                />
                              </div>
                            )}
                          </Draggable>
                        ))}
                        {provided.placeholder}
                      </div>
                    )}
                  </Droppable>
                </DragDropContext>
              </div>

              <div className="flex justify-end pt-6 border-t border-gray-200 dark:border-gray-700">
                <Button
                  type="submit"
                  variant="primary"
                  className="bg-brand-green hover:bg-brand-green/90"
                >
                  <Save className="h-5 w-5 mr-2" />
                  {id ? 'Update Course' : 'Create Course'}
                </Button>
              </div>
            </form>
          </Card>
        </div>

        {/* Preview Panel */}
        <div className="lg:col-span-1">
          <Card className="sticky top-6">
            <div className="p-6">
              <h2 className="text-lg font-medium text-gray-900 dark:text-white mb-4">
                Course Preview
              </h2>
              <div className="aspect-video bg-gray-100 dark:bg-gray-700 rounded-lg mb-4">
                {formData.image && (
                  <img
                    src={formData.image}
                    alt={formData.title}
                    className="w-full h-full object-cover rounded-lg"
                  />
                )}
              </div>
              <div className="space-y-4">
                <div>
                  <h3 className="font-medium text-gray-900 dark:text-white">
                    {formData.title || 'Course Title'}
                  </h3>
                  <p className="text-sm text-gray-500 dark:text-gray-400">
                    {formData.description || 'Course description will appear here'}
                  </p>
                </div>
                <div>
                  <div className="text-sm text-gray-500 dark:text-gray-400">Level</div>
                  <div className="font-medium text-gray-900 dark:text-white capitalize">
                    {formData.level}
                  </div>
                </div>
                <div>
                  <div className="text-sm text-gray-500 dark:text-gray-400">Duration</div>
                  <div className="font-medium text-gray-900 dark:text-white">
                    {formData.duration || 'Not specified'}
                  </div>
                </div>
                <div>
                  <div className="text-sm text-gray-500 dark:text-gray-400">Curriculum</div>
                  <div className="font-medium text-gray-900 dark:text-white">
                    {formData.curriculum.length} lessons
                  </div>
                </div>
              </div>
            </div>
          </Card>
        </div>
      </div>
    </div>
  );
};

export default AdminCourseForm;

/== pages/cms/AdminCourseList.tsx
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { Plus, Pencil, Trash, Search } from 'lucide-react';
import Button from '../../components/atoms/Button';
import Card from '../../components/atoms/Card';
import { useCourseStore } from '../../store/courseStore';

const AdminCourseList: React.FC = () => {
  const navigate = useNavigate();
  const { listCourses } = useCourseStore();
  const [searchQuery, setSearchQuery] = useState('');

  const filteredCourses = listCourses.filter(course =>
    course.title.toLowerCase().includes(searchQuery.toLowerCase())
  );

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">
          Manage Courses
        </h1>
        <Button
          variant="primary"
          onClick={() => navigate('/cms/courses/create')}
          className="bg-brand-green hover:bg-brand-green/90"
        >
          <Plus className="h-5 w-5 mr-2" />
          Add Course
        </Button>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search courses..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-gray-50 dark:bg-gray-700">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Course
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Level
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Students
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Rating
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
              {filteredCourses.map((course) => (
                <tr key={course.id}>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="flex items-center">
                      <img
                        src={course.image}
                        alt={course.title}
                        className="h-10 w-10 rounded-lg object-cover"
                      />
                      <div className="ml-4">
                        <div className="text-sm font-medium text-gray-900 dark:text-white">
                          {course.title}
                        </div>
                        <div className="text-sm text-gray-500 dark:text-gray-400">
                          {course.duration}
                        </div>
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <span className="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                      {course.level}
                    </span>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                    {course.students.toLocaleString()}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                    {course.rating}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <button
                      onClick={() => navigate(`/cms/courses/edit/${course.id}`)}
                      className="text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-4"
                    >
                      <Pencil className="h-5 w-5" />
                    </button>
                    <button className="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300">
                      <Trash className="h-5 w-5" />
                    </button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>
    </div>
  );
};

export default AdminCourseList;

/== pages/cms/AdminCurriculumBuilder.tsx
import  { useState } from 'react';
import { Plus, Save, Trash, GripVertical, ChevronRight, ChevronDown, File, FolderPlus } from 'lucide-react';
import Button from '../../components/atoms/Button';
import { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';

interface Module {
  id: string;
  title: string;
  lessons: Lesson[];
  isExpanded?: boolean;
}

interface Lesson {
  id: string;
  title: string;
  type: 'content' | 'quiz' | 'assignment';
  duration: string;
}

const AdminCurriculumBuilder = () => {
  const [modules, setModules] = useState<Module[]>([
    {
      id: 'module-1',
      title: 'Introduction to Programming',
      isExpanded: true,
      lessons: [
        { id: 'lesson-1', title: 'What is Programming?', type: 'content', duration: '10 min' },
        { id: 'lesson-2', title: 'Basic Concepts Quiz', type: 'quiz', duration: '15 min' }
      ]
    }
  ]);

  const addModule = () => {
    const newModule: Module = {
      id: `module-${Date.now()}`,
      title: 'New Module',
      isExpanded: true,
      lessons: []
    };
    setModules([...modules, newModule]);
  };

  const addLesson = (moduleId: string) => {
    setModules(modules.map(module => {
      if (module.id === moduleId) {
        return {
          ...module,
          lessons: [
            ...module.lessons,
            {
              id: `lesson-${Date.now()}`,
              title: 'New Lesson',
              type: 'content',
              duration: '0 min'
            }
          ]
        };
      }
      return module;
    }));
  };

  const toggleModule = (moduleId: string) => {
    setModules(modules.map(module => {
      if (module.id === moduleId) {
        return { ...module, isExpanded: !module.isExpanded };
      }
      return module;
    }));
  };

  const handleDragEnd = (result: any) => {
    if (!result.destination) return;

    const { source, destination, type } = result;

    // Handle module reordering
    if (type === 'module') {
      const reorderedModules = Array.from(modules);
      const [removed] = reorderedModules.splice(source.index, 1);
      reorderedModules.splice(destination.index, 0, removed);
      setModules(reorderedModules);
      return;
    }

    // Handle lesson reordering
    const sourceModule = modules.find(m => m.id === source.droppableId);
    const destModule = modules.find(m => m.id === destination.droppableId);

    if (!sourceModule || !destModule) return;

    const newModules = [...modules];
    const sourceModuleIndex = modules.findIndex(m => m.id === source.droppableId);
    const destModuleIndex = modules.findIndex(m => m.id === destination.droppableId);

    if (source.droppableId === destination.droppableId) {
      // Reordering within the same module
      const newLessons = Array.from(sourceModule.lessons);
      const [removed] = newLessons.splice(source.index, 1);
      newLessons.splice(destination.index, 0, removed);
      newModules[sourceModuleIndex].lessons = newLessons;
    } else {
      // Moving between modules
      const sourceLessons = Array.from(sourceModule.lessons);
      const destLessons = Array.from(destModule.lessons);
      const [removed] = sourceLessons.splice(source.index, 1);
      destLessons.splice(destination.index, 0, removed);
      newModules[sourceModuleIndex].lessons = sourceLessons;
      newModules[destModuleIndex].lessons = destLessons;
    }

    setModules(newModules);
  };

  return (
    <div className="max-w-4xl mx-auto p-6">
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Curriculum Builder</h1>
        <Button
          variant="primary"
          className="bg-brand-green hover:bg-brand-green/90"
        >
          <Save className="h-5 w-5 mr-2" />
          Save Curriculum
        </Button>
      </div>

      <DragDropContext onDragEnd={handleDragEnd}>
        <div className="space-y-6">
          <Droppable droppableId="modules-list" type="module">
            {(provided) => (
              <div
                ref={provided.innerRef}
                {...provided.droppableProps}
              >
                {modules.map((module, moduleIndex) => (
                  <Draggable key={module.id} draggableId={module.id} index={moduleIndex}>
                    {(provided) => (
                      <div
                        ref={provided.innerRef}
                        {...provided.draggableProps}
                        className="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-4"
                      >
                        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
                          <div className="flex items-center">
                            <div {...provided.dragHandleProps} className="mr-2">
                              <GripVertical className="h-5 w-5 text-gray-400" />
                            </div>
                            <button
                              onClick={() => toggleModule(module.id)}
                              className="mr-2"
                            >
                              {module.isExpanded ? (
                                <ChevronDown className="h-5 w-5" />
                              ) : (
                                <ChevronRight className="h-5 w-5" />
                              )}
                            </button>
                            <input
                              type="text"
                              value={module.title}
                              onChange={(e) => {
                                const newModules = [...modules];
                                newModules[moduleIndex].title = e.target.value;
                                setModules(newModules);
                              }}
                              className="flex-1 font-medium bg-transparent border-0 focus:ring-0"
                              placeholder="Module Title"
                            />
                            <Button
                              variant="outline"
                              onClick={() => addLesson(module.id)}
                              className="ml-4 text-sm"
                            >
                              <Plus className="h-4 w-4 mr-2" />
                              Add Lesson
                            </Button>
                            <button
                              onClick={() => {
                                setModules(modules.filter(m => m.id !== module.id));
                              }}
                              className="ml-4 text-red-500 hover:text-red-600"
                            >
                              <Trash className="h-5 w-5" />
                            </button>
                          </div>
                        </div>

                        {module.isExpanded && (
                          <Droppable droppableId={module.id} type="lesson">
                            {(provided) => (
                              <div
                                ref={provided.innerRef}
                                {...provided.droppableProps}
                                className="p-4"
                              >
                                <div className="space-y-3">
                                  {module.lessons.map((lesson, lessonIndex) => (
                                    <Draggable
                                      key={lesson.id}
                                      draggableId={lesson.id}
                                      index={lessonIndex}
                                    >
                                      {(provided) => (
                                        <div
                                          ref={provided.innerRef}
                                          {...provided.draggableProps}
                                          className="flex items-center bg-gray-50 dark:bg-gray-800 rounded-lg p-3"
                                        >
                                          <div {...provided.dragHandleProps} className="mr-2">
                                            <GripVertical className="h-5 w-5 text-gray-400" />
                                          </div>
                                          <File className="h-5 w-5 text-gray-400 mr-2" />
                                          <input
                                            type="text"
                                            value={lesson.title}
                                            onChange={(e) => {
                                              const newModules = [...modules];
                                              newModules[moduleIndex].lessons[lessonIndex].title = e.target.value;
                                              setModules(newModules);
                                            }}
                                            className="flex-1 bg-transparent border-0 focus:ring-0"
                                            placeholder="Lesson Title"
                                          />
                                          <select
                                            value={lesson.type}
                                            onChange={(e) => {
                                              const newModules = [...modules];
                                              newModules[moduleIndex].lessons[lessonIndex].type = e.target.value as 'content' | 'quiz' | 'assignment';
                                              setModules(newModules);
                                            }}
                                            className="mx-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                                          >
                                            <option value="content">Content</option>
                                            <option value="quiz">Quiz</option>
                                            <option value="assignment">Assignment</option>
                                          </select>
                                          <input
                                            type="text"
                                            value={lesson.duration}
                                            onChange={(e) => {
                                              const newModules = [...modules];
                                              newModules[moduleIndex].lessons[lessonIndex].duration = e.target.value;
                                              setModules(newModules);
                                            }}
                                            className="w-20 bg-transparent border-0 focus:ring-0 text-right"
                                            placeholder="Duration"
                                          />
                                          <button
                                            onClick={() => {
                                              const newModules = [...modules];
                                              newModules[moduleIndex].lessons = newModules[moduleIndex].lessons.filter(
                                                (_, idx) => idx !== lessonIndex
                                              );
                                              setModules(newModules);
                                            }}
                                            className="ml-2 text-red-500 hover:text-red-600"
                                          >
                                            <Trash className="h-5 w-5" />
                                          </button>
                                        </div>
                                      )}
                                    </Draggable>
                                  ))}
                                  {provided.placeholder}
                                </div>
                              </div>
                            )}
                          </Droppable>
                        )}
                      </div>
                    )}
                  </Draggable>
                ))}
                {provided.placeholder}
              </div>
            )}
          </Droppable>
        </div>
      </DragDropContext>

      <div className="mt-6">
        <Button
          variant="outline"
          onClick={addModule}
          className="w-full"
        >
          <FolderPlus className="h-5 w-5 mr-2" />
          Add Module
        </Button>
      </div>
    </div>
  );
};

export default AdminCurriculumBuilder;

/== pages/cms/AdminDashboard.tsx
import React from 'react';
import { Book, Users, Star, TrendingUp, ArrowUp, ArrowDown, Clock, Award } from 'lucide-react';
import Card from '../../components/atoms/Card';

const AdminDashboard: React.FC = () => {
  const stats = [
    { 
      label: 'Total Courses', 
      value: '24', 
      icon: Book, 
      color: 'bg-blue-500/90 dark:bg-blue-600',
      trend: { value: '+12%', up: true }
    },
    { 
      label: 'Active Students', 
      value: '1,234', 
      icon: Users, 
      color: 'bg-green-500/90 dark:bg-green-600',
      trend: { value: '+8%', up: true }
    },
    { 
      label: 'Average Rating', 
      value: '4.8', 
      icon: Star, 
      color: 'bg-yellow-500/90 dark:bg-yellow-600',
      trend: { value: '-2%', up: false }
    },
    { 
      label: 'Monthly Growth', 
      value: '+12%', 
      icon: TrendingUp, 
      color: 'bg-purple-500/90 dark:bg-purple-600',
      trend: { value: '+5%', up: true }
    },
  ];

  const recentCourses = [
    {
      title: 'Advanced JavaScript',
      students: 234,
      rating: 4.9,
      image: 'https://images.unsplash.com/photo-1579468118864-1b9ea3c0db4a?ixlib=rb-1.2.1&auto=format&fit=crop&w=180&q=60'
    },
    {
      title: 'Python for Data Science',
      students: 189,
      rating: 4.8,
      image: 'https://images.unsplash.com/photo-1526379095098-d400fd0bf935?ixlib=rb-1.2.1&auto=format&fit=crop&w=180&q=60'
    },
    {
      title: 'React Fundamentals',
      students: 156,
      rating: 4.7,
      image: 'https://images.unsplash.com/photo-1633356122544-f134324a6cee?ixlib=rb-1.2.1&auto=format&fit=crop&w=180&q=60'
    }
  ];

  const recentUsers = [
    {
      name: 'Sarah Chen',
      email: 'sarah@example.com',
      joinDate: '2 days ago',
      courses: 3
    },
    {
      name: 'Michael Rodriguez',
      email: 'michael@example.com',
      joinDate: '3 days ago',
      courses: 2
    },
    {
      name: 'Emma Wilson',
      email: 'emma@example.com',
      joinDate: '5 days ago',
      courses: 4
    }
  ];

  return (
    <div className="space-y-8">
      {/* Welcome Section */}
      <div className="bg-gradient-to-r from-brand-green/90 to-emerald-600/90 dark:from-brand-green/80 dark:to-emerald-600/80 rounded-xl p-8 text-white backdrop-blur-sm shadow-lg">
        <h1 className="text-3xl font-bold mb-2">Welcome back, Admin! 👋</h1>
        <p className="text-white/90 text-lg">Here's what's happening with your courses today.</p>
      </div>

      {/* Stats Grid */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        {stats.map((stat, index) => (
          <Card 
            key={index} 
            className="p-6 hover:shadow-lg transition-all duration-300 backdrop-blur-sm bg-white/50 dark:bg-gray-800/50 border border-gray-200/20 dark:border-gray-700/20"
          >
            <div className="flex items-center justify-between mb-4">
              <div className={`${stat.color} p-3 rounded-xl shadow-lg backdrop-blur-sm`}>
                <stat.icon className="h-6 w-6 text-white" />
              </div>
              <div className={`flex items-center px-3 py-1.5 rounded-full text-sm font-medium ${
                stat.trend.up 
                  ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400'
                  : 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400'
              }`}>
                {stat.trend.up ? (
                  <ArrowUp className="h-4 w-4 mr-1" />
                ) : (
                  <ArrowDown className="h-4 w-4 mr-1" />
                )}
                {stat.trend.value}
              </div>
            </div>
            <div>
              <p className="text-3xl font-bold text-gray-900 dark:text-white mb-1">
                {stat.value}
              </p>
              <p className="text-sm font-medium text-gray-600 dark:text-gray-400">
                {stat.label}
              </p>
            </div>
          </Card>
        ))}
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        {/* Recent Courses */}
        <Card className="overflow-hidden backdrop-blur-sm bg-white/50 dark:bg-gray-800/50 border border-gray-200/20 dark:border-gray-700/20">
          <div className="p-6 border-b border-gray-200/20 dark:border-gray-700/20">
            <h2 className="text-xl font-bold text-gray-900 dark:text-white">Recent Courses</h2>
          </div>
          <div className="p-6">
            <div className="space-y-6">
              {recentCourses.map((course, index) => (
                <div key={index} className="flex items-center p-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200">
                  <img
                    src={course.image}
                    alt={course.title}
                    className="w-12 h-12 rounded-lg object-cover shadow-md"
                  />
                  <div className="ml-4 flex-1">
                    <h3 className="text-sm font-semibold text-gray-900 dark:text-white">
                      {course.title}
                    </h3>
                    <div className="flex items-center mt-1 text-sm text-gray-600 dark:text-gray-400">
                      <Users className="h-4 w-4 mr-1" />
                      {course.students} students
                      <span className="mx-2">•</span>
                      <Star className="h-4 w-4 mr-1 text-yellow-400 fill-current" />
                      {course.rating}
                    </div>
                  </div>
                  <button className="text-brand-green hover:text-brand-green/90 font-medium">
                    View
                  </button>
                </div>
              ))}
            </div>
          </div>
        </Card>

        {/* Recent Users */}
        <Card className="overflow-hidden backdrop-blur-sm bg-white/50 dark:bg-gray-800/50 border border-gray-200/20 dark:border-gray-700/20">
          <div className="p-6 border-b border-gray-200/20 dark:border-gray-700/20">
            <h2 className="text-xl font-bold text-gray-900 dark:text-white">Recent Users</h2>
          </div>
          <div className="p-6">
            <div className="space-y-6">
              {recentUsers.map((user, index) => (
                <div key={index} className="flex items-center p-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200">
                  <div className="w-12 h-12 rounded-full bg-gradient-to-br from-brand-green to-emerald-600 flex items-center justify-center text-white font-bold text-lg shadow-lg">
                    {user.name.charAt(0)}
                  </div>
                  <div className="ml-4 flex-1">
                    <h3 className="text-sm font-semibold text-gray-900 dark:text-white">
                      {user.name}
                    </h3>
                    <div className="flex items-center mt-1 text-sm text-gray-600 dark:text-gray-400">
                      <Clock className="h-4 w-4 mr-1" />
                      {user.joinDate}
                      <span className="mx-2">•</span>
                      <Award className="h-4 w-4 mr-1" />
                      {user.courses} courses
                    </div>
                  </div>
                  <button className="text-brand-green hover:text-brand-green/90 font-medium">
                    View
                  </button>
                </div>
              ))}
            </div>
          </div>
        </Card>
      </div>
    </div>
  );
};

export default AdminDashboard;

/== pages/cms/AdminMediaLibrary.tsx
import React, { useState } from 'react';
import { Upload, Search, Grid, List as ListIcon, Trash } from 'lucide-react';
import Button from '../../components/atoms/Button';
import Card from '../../components/atoms/Card';

const AdminMediaLibrary = () => {
  const [view, setView] = useState<'grid' | 'list'>('grid');
  const [searchQuery, setSearchQuery] = useState('');

  const mockMedia = [
    {
      id: '1',
      name: 'hero-image.jpg',
      url: 'https://images.unsplash.com/photo-1542831371-29b0f74f9713',
      size: '2.4 MB',
      type: 'image/jpeg',
      uploadedAt: '2024-03-20'
    },
    {
      id: '2',
      name: 'course-thumbnail.jpg',
      url: 'https://images.unsplash.com/photo-1517694712202-14dd9538aa97',
      size: '1.8 MB',
      type: 'image/jpeg',
      uploadedAt: '2024-03-19'
    },
    {
      id: '3',
      name: 'programming-basics.jpg',
      url: 'https://images.unsplash.com/photo-1526379095098-d400fd0bf935',
      size: '1.2 MB',
      type: 'image/jpeg',
      uploadedAt: '2024-03-18'
    }
  ];

  const filteredMedia = mockMedia.filter(item =>
    item.name.toLowerCase().includes(searchQuery.toLowerCase())
  );

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Media Library</h1>
        <Button
          variant="primary"
          className="bg-brand-green hover:bg-brand-green/90"
        >
          <Upload className="h-5 w-5 mr-2" />
          Upload Media
        </Button>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="flex items-center justify-between">
            <div className="relative flex-1 max-w-md">
              <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
              <input
                type="text"
                placeholder="Search media..."
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
                className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
              />
            </div>
            <div className="flex items-center space-x-2">
              <button
                onClick={() => setView('grid')}
                className={`p-2 rounded-lg ${
                  view === 'grid'
                    ? 'bg-gray-100 dark:bg-gray-700'
                    : 'hover:bg-gray-100 dark:hover:bg-gray-700'
                }`}
              >
                <Grid className="h-5 w-5" />
              </button>
              <button
                onClick={() => setView('list')}
                className={`p-2 rounded-lg ${
                  view === 'list'
                    ? 'bg-gray-100 dark:bg-gray-700'
                    : 'hover:bg-gray-100 dark:hover:bg-gray-700'
                }`}
              >
                <ListIcon className="h-5 w-5" />
              </button>
            </div>
          </div>
        </div>

        <div className="p-6">
          {view === 'grid' ? (
            <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
              {filteredMedia.map((item) => (
                <div
                  key={item.id}
                  className="group relative bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden aspect-square"
                >
                  <img
                    src={item.url}
                    alt={item.name}
                    className="w-full h-full object-cover"
                  />
                  <div className="absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                    <div className="text-white text-center p-4">
                      <p className="font-medium mb-2">{item.name}</p>
                      <p className="text-sm">{item.size}</p>
                      <button className="mt-4 text-red-500 hover:text-red-400">
                        <Trash className="h-5 w-5" />
                      </button>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead>
                  <tr className="text-left text-sm font-medium text-gray-500 dark:text-gray-400">
                    <th className="px-4 py-2">File</th>
                    <th className="px-4 py-2">Type</th>
                    <th className="px-4 py-2">Size</th>
                    <th className="px-4 py-2">Uploaded</th>
                    <th className="px-4 py-2">Actions</th>
                  </tr>
                </thead>
                <tbody>
                  {filteredMedia.map((item) => (
                    <tr key={item.id} className="border-t border-gray-200 dark:border-gray-700">
                      <td className="px-4 py-4">
                        <div className="flex items-center">
                          <div className="h-10 w-10 flex-shrink-0">
                            <img
                              src={item.url}
                              alt={item.name}
                              className="h-10 w-10 rounded object-cover"
                            />
                          </div>
                          <div className="ml-4">
                            <div className="font-medium text-gray-900 dark:text-white">
                              {item.name}
                            </div>
                          </div>
                        </div>
                      </td>
                      <td className="px-4 py-4 text-sm text-gray-500 dark:text-gray-400">
                        {item.type}
                      </td>
                      <td className="px-4 py-4 text-sm text-gray-500 dark:text-gray-400">
                        {item.size}
                      </td>
                      <td className="px-4 py-4 text-sm text-gray-500 dark:text-gray-400">
                        {item.uploadedAt}
                      </td>
                      <td className="px-4 py-4 text-sm">
                        <button className="text-red-500 hover:text-red-400">
                          <Trash className="h-5 w-5" />
                        </button>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          )}
        </div>
      </Card>
    </div>
  );
};

export default AdminMediaLibrary;

/== pages/cms/AdminQuizBuilder.tsx
import React, { useState } from 'react';
import { Plus, Save, Trash, GripVertical } from 'lucide-react';
import Button from '../../components/atoms/Button';
import Card from '../../components/atoms/Card';
import { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';

interface Question {
  id: string;
  text: string;
  type: 'multiple' | 'single';
  options: { id: string; text: string; isCorrect: boolean }[];
}

const AdminQuizBuilder = () => {
  const [title, setTitle] = useState('');
  const [description, setDescription] = useState('');
  const [questions, setQuestions] = useState<Question[]>([
    {
      id: '1',
      text: 'What is a variable?',
      type: 'single',
      options: [
        { id: '1', text: 'A container for storing data', isCorrect: true },
        { id: '2', text: 'A type of loop', isCorrect: false },
        { id: '3', text: 'A function name', isCorrect: false },
        { id: '4', text: 'A programming language', isCorrect: false }
      ]
    }
  ]);

  const addQuestion = () => {
    const newQuestion: Question = {
      id: String(questions.length + 1),
      text: '',
      type: 'single',
      options: [
        { id: '1', text: '', isCorrect: false },
        { id: '2', text: '', isCorrect: false }
      ]
    };
    setQuestions([...questions, newQuestion]);
  };

  const addOption = (questionId: string) => {
    setQuestions(questions.map(q => {
      if (q.id === questionId) {
        return {
          ...q,
          options: [
            ...q.options,
            {
              id: String(q.options.length + 1),
              text: '',
              isCorrect: false
            }
          ]
        };
      }
      return q;
    }));
  };

  const handleDragEnd = (result: any) => {
    if (!result.destination) return;

    const items = Array.from(questions);
    const [reorderedItem] = items.splice(result.source.index, 1);
    items.splice(result.destination.index, 0, reorderedItem);

    setQuestions(items);
  };

  return (
    <div className="max-w-4xl mx-auto">
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Quiz Builder</h1>
        <Button
          variant="primary"
          className="bg-brand-green hover:bg-brand-green/90"
        >
          <Save className="h-5 w-5 mr-2" />
          Save Quiz
        </Button>
      </div>

      <Card className="mb-6">
        <div className="p-6">
          <input
            type="text"
            value={title}
            onChange={(e) => setTitle(e.target.value)}
            placeholder="Quiz Title"
            className="w-full text-2xl font-bold border-0 border-b-2 border-gray-200 dark:border-gray-700 pb-2 mb-4 bg-transparent focus:ring-0 focus:border-brand-green"
          />
          <textarea
            value={description}
            onChange={(e) => setDescription(e.target.value)}
            placeholder="Quiz Description"
            rows={3}
            className="w-full border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
          />
        </div>
      </Card>

      <DragDropContext onDragEnd={handleDragEnd}>
        <Droppable droppableId="questions">
          {(provided) => (
            <div
              {...provided.droppableProps}
              ref={provided.innerRef}
              className="space-y-6"
            >
              {questions.map((question, index) => (
                <Draggable key={question.id} draggableId={question.id} index={index}>
                  {(provided) => (
                    <div
                      ref={provided.innerRef}
                      {...provided.draggableProps}
                      className="relative"
                    >
                      <Card>
                        <div className="absolute left-4 top-1/2 -translate-y-1/2" {...provided.dragHandleProps}>
                          <GripVertical className="h-5 w-5 text-gray-400" />
                        </div>
                        <div className="p-6 pl-12">
                          <div className="flex items-center justify-between mb-4">
                            <input
                              type="text"
                              value={question.text}
                              onChange={(e) => {
                                const newQuestions = [...questions];
                                newQuestions[index].text = e.target.value;
                                setQuestions(newQuestions);
                              }}
                              placeholder="Question text"
                              className="flex-1 text-lg font-medium border-0 border-b-2 border-gray-200 dark:border-gray-700 pb-2 bg-transparent focus:ring-0 focus:border-brand-green"
                            />
                            <select
                              value={question.type}
                              onChange={(e) => {
                                const newQuestions = [...questions];
                                newQuestions[index].type = e.target.value as 'multiple' | 'single';
                                setQuestions(newQuestions);
                              }}
                              className="ml-4 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                            >
                              <option value="single">Single Choice</option>
                              <option value="multiple">Multiple Choice</option>
                            </select>
                          </div>

                          <div className="space-y-3">
                            {question.options.map((option, optionIndex) => (
                              <div key={option.id} className="flex items-center space-x-3">
                                <input
                                  type={question.type === 'multiple' ? 'checkbox' : 'radio'}
                                  checked={option.isCorrect}
                                  onChange={(e) => {
                                    const newQuestions = [...questions];
                                    if (question.type === 'single') {
                                      newQuestions[index].options = newQuestions[index].options.map(
                                        (opt, idx) => ({ ...opt, isCorrect: idx === optionIndex })
                                      );
                                    } else {
                                      newQuestions[index].options[optionIndex].isCorrect = e.target.checked;
                                    }
                                    setQuestions(newQuestions);
                                  }}
                                  className="h-4 w-4 text-brand-green focus:ring-brand-green border-gray-300 rounded"
                                />
                                <input
                                  type="text"
                                  value={option.text}
                                  onChange={(e) => {
                                    const newQuestions = [...questions];
                                    newQuestions[index].options[optionIndex].text = e.target.value;
                                    setQuestions(newQuestions);
                                  }}
                                  placeholder={`Option ${optionIndex + 1}`}
                                  className="flex-1 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                                />
                                <button
                                  onClick={() => {
                                    const newQuestions = [...questions];
                                    newQuestions[index].options = newQuestions[index].options.filter(
                                      (_, idx) => idx !== optionIndex
                                    );
                                    setQuestions(newQuestions);
                                  }}
                                  className="text-red-500 hover:text-red-600"
                                >
                                  <Trash className="h-5 w-5" />
                                </button>
                              </div>
                            ))}
                          </div>

                          <div className="mt-4 flex justify-between">
                            <Button
                              variant="outline"
                              onClick={() => addOption(question.id)}
                              className="text-sm"
                            >
                              <Plus className="h-4 w-4 mr-2" />
                              Add Option
                            </Button>
                            <Button
                              variant="outline"
                              onClick={() => {
                                setQuestions(questions.filter(q => q.id !== question.id));
                              }}
                              className="text-sm text-red-500 hover:text-red-600"
                            >
                              <Trash className="h-4 w-4 mr-2" />
                              Delete Question
                            </Button>
                          </div>
                        </div>
                      </Card>
                    </div>
                  )}
                </Draggable>
              ))}
              {provided.placeholder}
            </div>
          )}
        </Droppable>
      </DragDropContext>

      <div className="mt-6">
        <Button
          variant="outline"
          onClick={addQuestion}
          className="w-full"
        >
          <Plus className="h-5 w-5 mr-2" />
          Add Question
        </Button>
      </div>
    </div>
  );
};

export default AdminQuizBuilder;

/== pages/cms/AdminSettings.tsx
import React, { useState } from 'react';
import { Save, Mail, Globe, Bell, Shield, Database } from 'lucide-react';
import Card from '../../components/atoms/Card';
import Button from '../../components/atoms/Button';

const AdminSettings: React.FC = () => {
  const [activeTab, setActiveTab] = useState('general');
  const [formData, setFormData] = useState({
    siteName: 'Coder Growth',
    siteUrl: 'https://codergrowth.com',
    adminEmail: 'admin@codergrowth.com',
    emailNotifications: true,
    maintenanceMode: false,
    registrationEnabled: true,
    backupFrequency: 'daily',
    maxUploadSize: '10',
    defaultUserRole: 'user'
  });

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    // Handle settings update
  };

  const tabs = [
    { id: 'general', label: 'General', icon: Globe },
    { id: 'email', label: 'Email', icon: Mail },
    { id: 'notifications', label: 'Notifications', icon: Bell },
    { id: 'security', label: 'Security', icon: Shield },
    { id: 'system', label: 'System', icon: Database }
  ];

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">
          Settings
        </h1>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-4 gap-6">
        {/* Sidebar */}
        <Card className="lg:col-span-1 overflow-hidden">
          <nav className="space-y-1 p-4">
            {tabs.map((tab) => (
              <button
                key={tab.id}
                onClick={() => setActiveTab(tab.id)}
                className={`
                  w-full flex items-center px-4 py-2 text-sm font-medium rounded-lg
                  ${activeTab === tab.id
                    ? 'bg-brand-green text-white'
                    : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'
                  }
                `}
              >
                <tab.icon className="h-5 w-5 mr-3" />
                {tab.label}
              </button>
            ))}
          </nav>
        </Card>

        {/* Main Content */}
        <Card className="lg:col-span-3">
          <form onSubmit={handleSubmit} className="p-6 space-y-6">
            {activeTab === 'general' && (
              <>
                <div>
                  <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                    Site Name
                  </label>
                  <input
                    type="text"
                    value={formData.siteName}
                    onChange={(e) => setFormData(prev => ({ ...prev, siteName: e.target.value }))}
                    className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                    Site URL
                  </label>
                  <input
                    type="url"
                    value={formData.siteUrl}
                    onChange={(e) => setFormData(prev => ({ ...prev, siteUrl: e.target.value }))}
                    className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                    Admin Email
                  </label>
                  <input
                    type="email"
                    value={formData.adminEmail}
                    onChange={(e) => setFormData(prev => ({ ...prev, adminEmail: e.target.value }))}
                    className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                  />
                </div>
              </>
            )}

            {activeTab === 'email' && (
              <>
                <div className="bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4 mb-6">
                  <div className="flex">
                    <Bell className="h-5 w-5 text-yellow-400" />
                    <div className="ml-3">
                      <h3 className="text-sm font-medium text-yellow-800 dark:text-yellow-200">
                        Email Configuration
                      </h3>
                      <p className="mt-2 text-sm text-yellow-700 dark:text-yellow-300">
                        Make sure to configure your SMTP settings properly to ensure email delivery.
                      </p>
                    </div>
                  </div>
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                    SMTP Host
                  </label>
                  <input
                    type="text"
                    placeholder="smtp.example.com"
                    className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                  />
                </div>

                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                      SMTP Port
                    </label>
                    <input
                      type="number"
                      placeholder="587"
                      className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                      Encryption
                    </label>
                    <select className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white">
                      <option value="tls">TLS</option>
                      <option value="ssl">SSL</option>
                      <option value="none">None</option>
                    </select>
                  </div>
                </div>
              </>
            )}

            {activeTab === 'notifications' && (
              <>
                <div className="space-y-4">
                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900 dark:text-white">
                        Email Notifications
                      </h3>
                      <p className="text-sm text-gray-500 dark:text-gray-400">
                        Receive email notifications for important events
                      </p>
                    </div>
                    <div className="flex items-center">
                      <input
                        type="checkbox"
                        checked={formData.emailNotifications}
                        onChange={(e) => setFormData(prev => ({ ...prev, emailNotifications: e.target.checked }))}
                        className="h-4 w-4 text-brand-green focus:ring-brand-green border-gray-300 rounded"
                      />
                    </div>
                  </div>

                  <div className="flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900 dark:text-white">
                        New User Registration
                      </h3>
                      <p className="text-sm text-gray-500 dark:text-gray-400">
                        Get notified when a new user registers
                      </p>
                    </div>
                    <div className="flex items-center">
                      <input
                        type="checkbox"
                        className="h-4 w-4 text-brand-green focus:ring-brand-green border-gray-300 rounded"
                      />
                    </div>
                  </div>

                  <div className="flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900 dark:text-white">
                        Course Completion
                      </h3>
                      <p className="text-sm text-gray-500 dark:text-gray-400">
                        Get notified when a user completes a course
                      </p>
                    </div>
                    <div className="flex items-center">
                      <input
                        type="checkbox"
                        className="h-4 w-4 text-brand-green focus:ring-brand-green border-gray-300 rounded"
                      />
                    </div>
                  </div>
                </div>
              </>
            )}

            {activeTab === 'security' && (
              <>
                <div className="space-y-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                      Default User Role
                    </label>
                    <select
                      value={formData.defaultUserRole}
                      onChange={(e) => setFormData(prev => ({ ...prev, defaultUserRole: e.target.value }))}
                      className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                    >
                      <option value="user">User</option>
                      <option value="admin">Admin</option>
                    </select>
                  </div>

                  <div className="flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900 dark:text-white">
                        Enable Registration
                      </h3>
                      <p className="text-sm text-gray-500 dark:text-gray-400">
                        Allow new users to register
                      </p>
                    </div>
                    <div className="flex items-center">
                      <input
                        type="checkbox"
                        checked={formData.registrationEnabled}
                        onChange={(e) => setFormData(prev => ({ ...prev, registrationEnabled: e.target.checked }))}
                        className="h-4 w-4 text-brand-green focus:ring-brand-green border-gray-300 rounded"
                      />
                    </div>
                  </div>
                </div>
              </>
            )}

            {activeTab === 'system' && (
              <>
                <div className="space-y-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                      Backup Frequency
                    </label>
                    <select
                      value={formData.backupFrequency}
                      onChange={(e) => setFormData(prev => ({ ...prev, backupFrequency: e.target.value }))}
                      className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                    >
                      <option value="daily">Daily</option>
                      <option value="weekly">Weekly</option>
                      <option value="monthly">Monthly</option>
                    </select>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                      Maximum Upload Size (MB)
                    </label>
                    <input
                      type="number"
                      value={formData.maxUploadSize}
                      onChange={(e) => setFormData(prev => ({ ...prev, maxUploadSize: e.target.value }))}
                      className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                    />
                  </div>

                  <div className="flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900 dark:text-white">
                        Maintenance Mode
                      </h3>
                      <p className="text-sm text-gray-500 dark:text-gray-400">
                        Put the site in maintenance mode
                      </p>
                    </div>
                    <div className="flex items-center">
                      <input
                        type="checkbox"
                        checked={formData.maintenanceMode}
                        onChange={(e) => setFormData(prev => ({ ...prev, maintenanceMode: e.target.checked }))}
                        className="h-4 w-4 text-brand-green focus:ring-brand-green border-gray-300 rounded"
                      />
                    </div>
                  </div>
                </div>
              </>
            )}

            <div className="flex justify-end pt-6 border-t border-gray-200 dark:border-gray-700">
              <Button
                type="submit"
                variant="primary"
                className="bg-brand-green hover:bg-brand-green/90"
              >
                <Save className="h-5 w-5 mr-2" />
                Save Changes
              </Button>
            </div>
          </form>
        </Card>
      </div>
    </div>
  );
};

export default AdminSettings;

/== pages/cms/AdminUserForm.tsx
import React, { useState, useEffect } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { Save, ArrowLeft } from 'lucide-react';
import Button from '../../components/atoms/Button';
import Card from '../../components/atoms/Card';
import { useAuthStore } from '../../store/authStore';

const AdminUserForm: React.FC = () => {
  const { id } = useParams();
  const navigate = useNavigate();
  const { mockUsers } = useAuthStore();
  
  const [formData, setFormData] = useState({
    name: '',
    email: '',
    password: '',
    role: 'user' as 'user' | 'admin'
  });

  useEffect(() => {
    if (id) {
      const user = mockUsers.find(u => u.id === id);
      if (user) {
        setFormData({
          name: user.name,
          email: user.email,
          password: '',
          role: user.role
        });
      }
    }
  }, [id]);

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    // Handle form submission
    navigate('/cms/users');
  };

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <div className="flex items-center">
          <Button
            variant="outline"
            onClick={() => navigate('/cms/users')}
            className="mr-4"
          >
            <ArrowLeft className="h-5 w-5 mr-2" />
            Back
          </Button>
          <h1 className="text-2xl font-bold text-gray-900 dark:text-white">
            {id ? 'Edit User' : 'Create User'}
          </h1>
        </div>
      </div>

      <Card className="max-w-2xl">
        <form onSubmit={handleSubmit} className="p-6 space-y-6">
          <div>
            <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
              Full Name
            </label>
            <input
              type="text"
              value={formData.name}
              onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}
              className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
              required
            />
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
              Email Address
            </label>
            <input
              type="email"
              value={formData.email}
              onChange={(e) => setFormData(prev => ({ ...prev, email: e.target.value }))}
              className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
              required
            />
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
              {id ? 'New Password (leave blank to keep current)' : 'Password'}
            </label>
            <input
              type="password"
              value={formData.password}
              onChange={(e) => setFormData(prev => ({ ...prev, password: e.target.value }))}
              className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
              {...(!id && { required: true })}
            />
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
              Role
            </label>
            <select
              value={formData.role}
              onChange={(e) => setFormData(prev => ({ ...prev, role: e.target.value as 'user' | 'admin' }))}
              className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            >
              <option value="user">User</option>
              <option value="admin">Admin</option>
            </select>
          </div>

          <div className="flex justify-end pt-6 border-t border-gray-200 dark:border-gray-700">
            <Button
              type="submit"
              variant="primary"
              className="bg-brand-green hover:bg-brand-green/90"
            >
              <Save className="h-5 w-5 mr-2" />
              {id ? 'Update User' : 'Create User'}
            </Button>
          </div>
        </form>
      </Card>
    </div>
  );
};

export default AdminUserForm;

/== pages/cms/AdminUserList.tsx
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { Plus, Pencil, Trash, Search, Shield } from 'lucide-react';
import Button from '../../components/atoms/Button';
import Card from '../../components/atoms/Card';
import { useAuthStore } from '../../store/authStore';

const AdminUserList: React.FC = () => {
  const navigate = useNavigate();
  const { mockUsers } = useAuthStore();
  const [searchQuery, setSearchQuery] = useState('');

  const filteredUsers = mockUsers.filter(user =>
    user.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
    user.email.toLowerCase().includes(searchQuery.toLowerCase())
  );

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">
          Manage Users
        </h1>
        <Button
          variant="primary"
          onClick={() => navigate('/cms/users/create')}
          className="bg-brand-green hover:bg-brand-green/90"
        >
          <Plus className="h-5 w-5 mr-2" />
          Add User
        </Button>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search users..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-gray-50 dark:bg-gray-700">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  User
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Email
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Role
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
              {filteredUsers.map((user) => (
                <tr key={user.id}>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="flex items-center">
                      <div className="h-10 w-10 rounded-full bg-brand-green flex items-center justify-center text-white font-medium">
                        {user.name.charAt(0)}
                      </div>
                      <div className="ml-4">
                        <div className="text-sm font-medium text-gray-900 dark:text-white">
                          {user.name}
                        </div>
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                    {user.email}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="flex items-center">
                      <Shield className={`h-4 w-4 mr-2 ${
                        user.role === 'admin' ? 'text-purple-500' : 'text-blue-500'
                      }`} />
                      <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${
                        user.role === 'admin'
                          ? 'bg-purple-100 text-purple-800'
                          : 'bg-blue-100 text-blue-800'
                      }`}>
                        {user.role}
                      </span>
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <button
                      onClick={() => navigate(`/cms/users/edit/${user.id}`)}
                      className="text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-4"
                    >
                      <Pencil className="h-5 w-5" />
                    </button>
                    <button className="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300">
                      <Trash className="h-5 w-5" />
                    </button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>
    </div>
  );
};

export default AdminUserList;

/== pages/cms/IntegrationsPage.tsx
import React, { useState, useEffect } from 'react';
import { Routes, Route, Navigate } from 'react-router-dom';
import { Server, CreditCard, Shield, Globe, Webhook } from 'lucide-react';
import Card from '../../components/atoms/Card';
import Heading from '../../components/atoms/Heading';
import Text from '../../components/atoms/Text';
import IntegrationsDashboard from '../../components/organisms/IntegrationsDashboard';
import IntegrationsIndex from './integrations/IntegrationsIndex';
import AdminApiManagement from './integrations/AdminApiManagement';
import AdminPaymentGateways from './integrations/AdminPaymentGateways';
import AdminSso from './integrations/AdminSso';
import AdminThirdParty from './integrations/AdminThirdParty';
import AdminWebhooks from './integrations/AdminWebhooks';

const IntegrationsPage: React.FC = () => {
  // Mock data untuk statistik integrasi
  const [stats, setStats] = useState({
    apiKeysCount: 2,
    paymentGatewaysCount: 2,
    ssoProvidersCount: 3,
    thirdPartyCount: 3,
    webhooksCount: 3
  });

  // Simulasi pemanggilan API untuk mendapatkan data statistik
  useEffect(() => {
    // Di implementasi nyata, ini akan memanggil API
    // fetchIntegrationStats().then(data => setStats(data));
  }, []);

  return (
    <div className="container mx-auto px-4 py-6">
      <Routes>
        <Route
          index
          element={
            <div>
              <div className="mb-8">
                <Heading level="h1" className="text-2xl font-bold mb-2">Manajemen Integrasi</Heading>
                <Text className="text-gray-600 dark:text-white">
                  Kelola semua integrasi sistem dengan layanan dan aplikasi eksternal.
                </Text>
              </div>
              
              <Card className="mb-8 p-6 bg-gradient-to-r from-brand-green/10 to-blue-500/10">
                <div className="flex flex-col md:flex-row items-start md:items-center justify-between">
                  <div className="mb-4 md:mb-0">
                    <Heading level="h2" className="text-xl font-bold mb-2 text-gray-600 dark:text-white">Pusat Integrasi</Heading>
                    <Text className="text-gray-600 dark:text-white">
                      Hubungkan platform pembelajaran Anda dengan berbagai layanan eksternal untuk meningkatkan fungsionalitas.
                    </Text>
                  </div>
                  <div className="flex space-x-2">
                    <div className="p-2 rounded-full bg-brand-green/20 text-brand-green">
                      <Server className="h-5 w-5" />
                    </div>
                    <div className="p-2 rounded-full bg-brand-green/20 text-brand-green">
                      <CreditCard className="h-5 w-5" />
                    </div>
                    <div className="p-2 rounded-full bg-brand-green/20 text-brand-green">
                      <Shield className="h-5 w-5" />
                    </div>
                    <div className="p-2 rounded-full bg-brand-green/20 text-brand-green">
                      <Globe className="h-5 w-5" />
                    </div>
                    <div className="p-2 rounded-full bg-brand-green/20 text-brand-green">
                      <Webhook className="h-5 w-5" />
                    </div>
                  </div>
                </div>
              </Card>
              
              <IntegrationsDashboard 
                apiKeysCount={stats.apiKeysCount}
                paymentGatewaysCount={stats.paymentGatewaysCount}
                ssoProvidersCount={stats.ssoProvidersCount}
                thirdPartyCount={stats.thirdPartyCount}
                webhooksCount={stats.webhooksCount}
              />
              
              <div className="mt-8">
                <IntegrationsIndex />
              </div>
            </div>
          }
        />
        <Route path="api-management" element={<AdminApiManagement />} />
        <Route path="payment-gateways" element={<AdminPaymentGateways />} />
        <Route path="sso" element={<AdminSso />} />
        <Route path="third-party" element={<AdminThirdParty />} />
        <Route path="webhooks" element={<AdminWebhooks />} />
        <Route path="*" element={<Navigate to="/cms/integrations" replace />} />
      </Routes>
    </div>
  );
};

export default IntegrationsPage;

/== pages/cms/communication/AdminAnnouncements.tsx
import React, { useState } from 'react';
import { Plus, Search, Edit, Trash, Bell, Globe, Users, Calendar } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';

const AdminAnnouncements = () => {
  const [searchQuery, setSearchQuery] = useState('');

  const mockAnnouncements = [
    {
      id: '1',
      title: 'New Course Launch',
      content: 'We are excited to announce our new Python Advanced course!',
      type: 'global',
      status: 'active',
      publishDate: '2024-03-20',
      audience: 'All Users'
    },
    {
      id: '2',
      title: 'Platform Maintenance',
      content: 'Scheduled maintenance on March 25th',
      type: 'system',
      status: 'scheduled',
      publishDate: '2024-03-25',
      audience: 'All Users'
    },
    {
      id: '3',
      title: 'Course Update',
      content: 'Important updates to JavaScript Fundamentals course',
      type: 'course',
      status: 'draft',
      publishDate: '2024-03-22',
      audience: 'Course Students'
    }
  ];

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Announcements</h1>
        <Button
          variant="primary"
          className="bg-brand-green hover:bg-brand-green/90"
        >
          <Plus className="h-5 w-5 mr-2" />
          New Announcement
        </Button>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search announcements..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-gray-50 dark:bg-gray-700">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Announcement
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Type
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Status
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Publish Date
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Audience
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
              {mockAnnouncements.map((announcement) => (
                <tr key={announcement.id}>
                  <td className="px-6 py-4">
                    <div>
                      <div className="font-medium text-gray-900 dark:text-white">
                        {announcement.title}
                      </div>
                      <div className="text-sm text-gray-500 dark:text-gray-400">
                        {announcement.content}
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="flex items-center">
                      {announcement.type === 'global' && <Globe className="h-5 w-5 text-blue-500 mr-2" />}
                      {announcement.type === 'system' && <Bell className="h-5 w-5 text-yellow-500 mr-2" />}
                      {announcement.type === 'course' && <Users className="h-5 w-5 text-green-500 mr-2" />}
                      <span className="capitalize">{announcement.type}</span>
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${
                      announcement.status === 'active'
                        ? 'bg-green-100 text-green-800'
                        : announcement.status === 'scheduled'
                        ? 'bg-yellow-100 text-yellow-800'
                        : 'bg-gray-100 text-gray-800'
                    }`}>
                      {announcement.status}
                    </span>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                    <div className="flex items-center">
                      <Calendar className="h-5 w-5 mr-2" />
                      {announcement.publishDate}
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                    {announcement.audience}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <Button
                      variant="outline"
                      className="mr-2"
                    >
                      <Edit className="h-5 w-5" />
                    </Button>
                    <Button
                      variant="outline"
                      className="text-red-500 hover:text-red-600"
                    >
                      <Trash className="h-5 w-5" />
                    </Button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>
    </div>
  );
};

export default AdminAnnouncements;

/== pages/cms/communication/AdminEmailTemplates.tsx
import React, { useState } from 'react';
import { Plus, Search, Edit, Trash, Mail } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';

const AdminEmailTemplates = () => {
  const [searchQuery, setSearchQuery] = useState('');

  const mockTemplates = [
    {
      id: '1',
      name: 'Welcome Email',
      subject: 'Welcome to Coder Growth!',
      lastModified: '2024-03-20',
      category: 'Onboarding'
    },
    {
      id: '2',
      name: 'Course Completion',
      subject: 'Congratulations on completing the course!',
      lastModified: '2024-03-19',
      category: 'Notifications'
    },
    {
      id: '3',
      name: 'Password Reset',
      subject: 'Reset your password',
      lastModified: '2024-03-18',
      category: 'Account'
    }
  ];

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Email Templates</h1>
        <Button
          variant="primary"
          className="bg-brand-green hover:bg-brand-green/90"
        >
          <Plus className="h-5 w-5 mr-2" />
          New Template
        </Button>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search templates..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-gray-50 dark:bg-gray-700">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Template Name
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Subject
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Category
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Last Modified
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
              {mockTemplates.map((template) => (
                <tr key={template.id}>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="flex items-center">
                      <Mail className="h-5 w-5 text-gray-400 mr-3" />
                      <span className="font-medium text-gray-900 dark:text-white">
                        {template.name}
                      </span>
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                    {template.subject}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <span className="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">
                      {template.category}
                    </span>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                    {template.lastModified}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <Button
                      variant="outline"
                      className="mr-2"
                    >
                      <Edit className="h-5 w-5" />
                    </Button>
                    <Button
                      variant="outline"
                      className="text-red-500 hover:text-red-600"
                    >
                      <Trash className="h-5 w-5" />
                    </Button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>
    </div>
  );
};

export default AdminEmailTemplates;

/== pages/cms/communication/AdminFeedback.tsx
import React, { useState } from 'react';
import { Search, Star, MessageSquare, ThumbsUp, Filter } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';

const AdminFeedback = () => {
  const [searchQuery, setSearchQuery] = useState('');
  const [selectedCategory, setSelectedCategory] = useState('all');

  const mockFeedback = [
    {
      id: '1',
      user: 'Sarah Chen',
      course: 'Python Basics',
      rating: 5,
      comment: 'Great course! The content was well-structured and easy to follow.',
      date: '2024-03-20',
      helpful: 12,
      category: 'course'
    },
    {
      id: '2',
      user: 'Michael Rodriguez',
      course: 'JavaScript Fundamentals',
      rating: 4,
      comment: 'Good course, but could use more practical examples.',
      date: '2024-03-19',
      helpful: 8,
      category: 'course'
    },
    {
      id: '3',
      user: 'Emma Wilson',
      type: 'Platform Feedback',
      rating: 5,
      comment: 'The new interface is much more intuitive and user-friendly.',
      date: '2024-03-18',
      helpful: 15,
      category: 'platform'
    }
  ];

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">User Feedback</h1>
        <div className="flex space-x-4">
          <select
            value={selectedCategory}
            onChange={(e) => setSelectedCategory(e.target.value)}
            className="border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white px-4 py-2"
          >
            <option value="all">All Categories</option>
            <option value="course">Course Feedback</option>
            <option value="platform">Platform Feedback</option>
          </select>
          <Button
            variant="outline"
            className="flex items-center"
          >
            <Filter className="h-5 w-5 mr-2" />
            Filter
          </Button>
        </div>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search feedback..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="divide-y divide-gray-200 dark:divide-gray-700">
          {mockFeedback.map((feedback) => (
            <div key={feedback.id} className="p-6">
              
              <div className="flex items-start justify-between">
                <div className="flex items-start space-x-4">
                  <div className="w-10 h-10 bg-brand-green rounded-full flex items-center justify-center text-white">
                    {feedback.user.charAt(0)}
                  </div>
                  <div>
                    <div className="flex items-center">
                      <h3 className="font-medium text-gray-900 dark:text-white">{feedback.user}</h3>
                      <span className="mx-2 text-gray-300 dark:text-gray-600">•</span>
                      <span className="text-sm text-gray-500">{feedback.date}</span>
                    </div>
                    {feedback.course && (
                      <div className="text-sm text-gray-500 dark:text-gray-400 mt-1">
                        Course: {feedback.course}
                      </div>
                    )}
                    <div className="flex items-center mt-2">
                      {[...Array(5)].map((_, index) => (
                        <Star
                          key={index}
                          className={`h-5 w-5 ${
                            index < feedback.rating
                              ? 'text-yellow-400 fill-current'
                              : 'text-gray-300 dark:text-gray-600'
                          }`}
                        />
                      ))}
                    </div>
                    <p className="mt-2 text-gray-600 dark:text-gray-300">{feedback.comment}</p>
                    <div className="flex items-center mt-4 space-x-4">
                      <button className="flex items-center text-gray-500 hover:text-gray-700">
                        <ThumbsUp className="h-5 w-5 mr-1" />
                        <span>{feedback.helpful}</span>
                      </button>
                      <button className="flex items-center text-gray-500 hover:text-gray-700">
                        <MessageSquare className="h-5 w-5 mr-1" />
                        Reply
                      </button>
                    </div>
                  </div>
                </div>
                <span className={`px-2 py-1 text-xs font-medium rounded-full ${
                  feedback.category === 'course'
                    ? 'bg-blue-100 text-blue-800'
                    : 'bg-purple-100 text-purple-800'
                }`}>
                  {feedback.category === 'course' ? 'Course Feedback' : 'Platform Feedback'}
                </span>
              </div>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );
};

export default AdminFeedback;

/== pages/cms/communication/AdminMessaging.tsx
import React, { useState } from 'react';
import { Search, MessageSquare, Send, Trash, User, Clock } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';

const AdminMessaging = () => {
  const [selectedChat, setSelectedChat] = useState<string | null>(null);
  const [message, setMessage] = useState('');

  const mockChats = [
    {
      id: '1',
      user: 'Sarah Chen',
      lastMessage: 'I need help with the Python course',
      timestamp: '2 min ago',
      unread: true
    },
    {
      id: '2',
      user: 'Michael Rodriguez',
      lastMessage: 'Thank you for your help!',
      timestamp: '1 hour ago',
      unread: false
    }
  ];

  const mockMessages = [
    {
      id: '1',
      sender: 'Sarah Chen',
      content: 'I need help with the Python course',
      timestamp: '2 min ago',
      isUser: true
    },
    {
      id: '2',
      sender: 'Admin',
      content: 'Of course! What specific topic are you struggling with?',
      timestamp: '1 min ago',
      isUser: false
    }
  ];

  return (
    <div className="h-[calc(100vh-12rem)]">
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Messaging System</h1>
        <Button
          variant="primary"
          className="bg-brand-green hover:bg-brand-green/90"
        >
          <MessageSquare className="h-5 w-5 mr-2" />
          New Message
        </Button>
      </div>

      <div className="grid grid-cols-3 gap-6 h-full">
        {/* Chat List */}
        <Card className="col-span-1 overflow-hidden">
          <div className="p-4 border-b border-gray-200 dark:border-gray-700">
            <div className="relative">
              <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
              <input
                type="text"
                placeholder="Search conversations..."
                className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
              />
            </div>
          </div>
          <div className="overflow-y-auto h-[calc(100vh-20rem)]">
            {mockChats.map((chat) => (
              <button
                key={chat.id}
                onClick={() => setSelectedChat(chat.id)}
                className={`w-full p-4 text-left hover:bg-gray-50 dark:hover:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700 ${
                  selectedChat === chat.id ? 'bg-gray-50 dark:bg-gray-700/50' : ''
                }`}
              >
                <div className="flex items-center">
                  <div className="w-10 h-10 bg-brand-green rounded-full flex items-center justify-center text-white">
                    {chat.user.charAt(0)}
                  </div>
                  <div className="ml-3 flex-1">
                    <div className="flex items-center justify-between">
                      <span className="font-medium text-gray-900 dark:text-white">{chat.user}</span>
                      <span className="text-xs text-gray-500">{chat.timestamp}</span>
                    </div>
                    <p className="text-sm text-gray-600 dark:text-gray-300 truncate">{chat.lastMessage}</p>
                  </div>
                  {chat.unread && (
                    <div className="w-2 h-2 bg-brand-green rounded-full ml-2"></div>
                  )}
                </div>
              </button>
            ))}
          </div>
        </Card>

        {/* Chat Window */}
        <Card className="col-span-2 flex flex-col">
          {selectedChat ? (
            <>
              <div className="p-4 border-b border-gray-200 dark:border-gray-700">
                <div className="flex items-center justify-between">
                  <div className="flex items-center">
                    <div className="w-10 h-10 bg-brand-green rounded-full flex items-center justify-center text-white">
                      S
                    </div>
                    <div className="ml-3">
                      <h3 className="font-medium text-gray-900 dark:text-white">Sarah Chen</h3>
                      <p className="text-sm text-gray-500">Online</p>
                    </div>
                  </div>
                  <Button variant="outline" className="text-red-500 hover:text-red-600">
                    <Trash className="h-5 w-5" />
                  </Button>
                </div>
              </div>

              <div className="flex-1 overflow-y-auto p-4 space-y-4">
                {mockMessages.map((msg) => (
                  <div
                    key={msg.id}
                    className={`flex ${msg.isUser ? 'justify-end' : 'justify-start'}`}
                  >
                    <div
                      className={`max-w-[70%] rounded-lg p-3 ${
                        msg.isUser
                          ? 'bg-brand-green text-white'
                          : 'bg-gray-100 dark:bg-gray-700'
                      }`}
                    >
                      <p className="text-sm">{msg.content}</p>
                      <div className={`text-xs mt-1 ${msg.isUser ? 'text-white/80' : 'text-gray-500'}`}>
                        {msg.timestamp}
                      </div>
                    </div>
                  </div>
                ))}
              </div>

              <div className="p-4 border-t border-gray-200 dark:border-gray-700">
                <div className="flex items-center space-x-2">
                  <input
                    type="text"
                    value={message}
                    onChange={(e) => setMessage(e.target.value)}
                    placeholder="Type your message..."
                    className="flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
                  />
                  <Button variant="primary" className="bg-brand-green hover:bg-brand-green/90">
                    <Send className="h-5 w-5" />
                  </Button>
                </div>
              </div>
            </>
          ) : (
            <div className="flex-1 flex items-center justify-center text-gray-500">
              Select a conversation to start messaging
            </div>
          )}
        </Card>
      </div>
    </div>
  );
};

export default AdminMessaging;

/== pages/cms/communication/AdminNotifications.tsx
import React, { useState } from 'react';
import { Plus, Search, Edit, Trash, Bell, Settings } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';

const AdminNotifications = () => {
  const [searchQuery, setSearchQuery] = useState('');

  const mockNotifications = [
    {
      id: '1',
      title: 'Course Completion',
      template: 'When a user completes a course',
      type: 'achievement',
      channels: ['email', 'in-app'],
      status: 'active'
    },
    {
      id: '2',
      title: 'New Comment',
      template: 'When someone comments on your post',
      type: 'social',
      channels: ['in-app'],
      status: 'active'
    },
    {
      id: '3',
      title: 'Assignment Due',
      template: 'Assignment deadline reminder',
      type: 'reminder',
      channels: ['email', 'in-app'],
      status: 'inactive'
    }
  ];

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Notification Settings</h1>
        <div className="flex space-x-4">
          <Button
            variant="outline"
            className="flex items-center"
          >
            <Settings className="h-5 w-5 mr-2" />
            Settings
          </Button>
          <Button
            variant="primary"
            className="bg-brand-green hover:bg-brand-green/90"
          >
            <Plus className="h-5 w-5 mr-2" />
            New Template
          </Button>
        </div>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search notification templates..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-gray-50 dark:bg-gray-700">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Template
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Type
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Channels
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Status
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
              {mockNotifications.map((notification) => (
                <tr key={notification.id}>
                  <td className="px-6 py-4">
                    <div className="flex items-center">
                      <Bell className="h-5 w-5 text-gray-400 mr-3" />
                      <div>
                        <div className="font-medium text-gray-900 dark:text-white">
                          {notification.title}
                        </div>
                        <div className="text-sm text-gray-500 dark:text-gray-400">
                          {notification.template}
                        </div>
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <span className="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">
                      {notification.type}
                    </span>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="flex space-x-2">
                      {notification.channels.map((channel) => (
                        <span
                          key={channel}
                          className="px-2 py-1 text-xs font-medium bg-gray-100 dark:bg-gray-700 rounded"
                        >
                          {channel}
                        </span>
                      ))}
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <label className="relative inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        className="sr-only peer"
                        checked={notification.status === 'active'}
                        onChange={() => {}}
                      />
                      <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-brand-green/20 dark:peer-focus:ring-brand-green/30 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-brand-green"></div>
                    </label>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <Button
                      variant="outline"
                      className="mr-2"
                    >
                      <Edit className="h-5 w-5" />
                    </Button>
                    <Button
                      variant="outline"
                      className="text-red-500 hover:text-red-600"
                    >
                      <Trash className="h-5 w-5" />
                    </Button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>
    </div>
  );
};

export default AdminNotifications;

/== pages/cms/course-features/AdminCertificates.tsx
import React, { useState } from 'react';
import { Plus, Search, Edit, Trash, Award, Download } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';

const AdminCertificates = () => {
  const [searchQuery, setSearchQuery] = useState('');
  const [certificates, setCertificates] = useState([
    {
      id: '1',
      course: 'Python Mastery',
      template: 'Professional Certificate',
      issued: 156,
      lastModified: '2024-03-20',
      status: 'active'
    },
    {
      id: '2',
      course: 'Web Development Bootcamp',
      template: 'Course Completion',
      issued: 89,
      lastModified: '2024-03-19',
      status: 'active'
    },
    {
      id: '3',
      course: 'Data Science Fundamentals',
      template: 'Specialization Certificate',
      issued: 45,
      lastModified: '2024-03-18',
      status: 'draft'
    }
  ]);

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Certificate Management</h1>
        <Button
          variant="primary"
          className="bg-brand-green hover:bg-brand-green/90"
        >
          <Plus className="h-5 w-5 mr-2" />
          Create Template
        </Button>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search certificates..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-gray-50 dark:bg-gray-700">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Course & Template
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Certificates Issued
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Last Modified
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Status
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
              {certificates.map((certificate) => (
                <tr key={certificate.id}>
                  <td className="px-6 py-4">
                    <div className="flex items-center">
                      <Award className="h-5 w-5 text-gray-400 mr-3" />
                      <div>
                        <div className="font-medium text-gray-900 dark:text-white">
                          {certificate.course}
                        </div>
                        <div className="text-sm text-gray-500 dark:text-gray-400">
                          {certificate.template}
                        </div>
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="text-sm text-gray-900 dark:text-white font-medium">
                      {certificate.issued}
                    </div>
                    <div className="text-sm text-gray-500 dark:text-gray-400">
                      Total Issued
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                    {certificate.lastModified}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <span className={`px-2 py-1 text-xs font-medium rounded-full ${
                      certificate.status === 'active'
                        ? 'bg-green-100 text-green-800'
                        : 'bg-gray-100 text-gray-800'
                    }`}>
                      {certificate.status}
                    </span>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <Button
                      variant="outline"
                      className="mr-2"
                    >
                      <Download className="h-5 w-5" />
                    </Button>
                    <Button
                      variant="outline"
                      className="mr-2"
                    >
                      <Edit className="h-5 w-5" />
                    </Button>
                    <Button
                      variant="outline"
                      className="text-red-500 hover:text-red-600"
                    >
                      <Trash className="h-5 w-5" />
                    </Button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>
    </div>
  );
};

export default AdminCertificates;

/== pages/cms/course-features/AdminCourseCategories.tsx
import React, { useState } from 'react';
import { Plus, Search, Edit, Trash, Tag, ChevronRight } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';

const AdminCourseCategories = () => {
  const [searchQuery, setSearchQuery] = useState('');
  const [categories, setCategories] = useState([
    {
      id: '1',
      name: 'Programming Languages',
      slug: 'programming-languages',
      description: 'Learn various programming languages',
      coursesCount: 12,
      subcategories: ['Python', 'JavaScript', 'Java', 'Go']
    },
    {
      id: '2',
      name: 'Web Development',
      slug: 'web-development',
      description: 'Master web development technologies',
      coursesCount: 8,
      subcategories: ['Frontend', 'Backend', 'Full Stack']
    },
    {
      id: '3',
      name: 'Data Science',
      slug: 'data-science',
      description: 'Explore data science and analytics',
      coursesCount: 6,
      subcategories: ['Machine Learning', 'Data Analysis', 'Statistics']
    }
  ]);

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Course Categories</h1>
        <Button
          variant="primary"
          className="bg-brand-green hover:bg-brand-green/90"
        >
          <Plus className="h-5 w-5 mr-2" />
          Add Category
        </Button>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search categories..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-gray-50 dark:bg-gray-700">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Category
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Slug
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Subcategories
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Courses
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
              {categories.map((category) => (
                <tr key={category.id}>
                  <td className="px-6 py-4">
                    <div className="flex items-center">
                      <Tag className="h-5 w-5 text-gray-400 mr-3" />
                      <div>
                        <div className="font-medium text-gray-900 dark:text-white">
                          {category.name}
                        </div>
                        <div className="text-sm text-gray-500 dark:text-gray-400">
                          {category.description}
                        </div>
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                    {category.slug}
                  </td>
                  <td className="px-6 py-4">
                    <div className="flex flex-wrap gap-2">
                      {category.subcategories.map((subcategory, index) => (
                        <span
                          key={index}
                          className="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full"
                        >
                          {subcategory}
                        </span>
                      ))}
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                    <div className="flex items-center">
                      <span className="font-medium">{category.coursesCount}</span>
                      <ChevronRight className="h-4 w-4 ml-1" />
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <Button
                      variant="outline"
                      className="mr-2"
                    >
                      <Edit className="h-5 w-5" />
                    </Button>
                    <Button
                      variant="outline"
                      className="text-red-500 hover:text-red-600"
                    >
                      <Trash className="h-5 w-5" />
                    </Button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>
    </div>
  );
};

export default AdminCourseCategories;

/== pages/cms/course-features/AdminCourseScheduling.tsx
import React, { useState } from 'react';
import { Plus, Search, Edit, Trash, Calendar, Clock, Users } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';

const AdminCourseScheduling = () => {
  const [searchQuery, setSearchQuery] = useState('');
  const [schedules, setSchedules] = useState([
    {
      id: '1',
      course: 'Python Basics',
      startDate: '2024-04-01',
      endDate: '2024-05-15',
      enrollmentDeadline: '2024-03-25',
      maxStudents: 50,
      enrolled: 32,
      status: 'upcoming'
    },
    {
      id: '2',
      course: 'JavaScript Fundamentals',
      startDate: '2024-04-15',
      endDate: '2024-05-30',
      enrollmentDeadline: '2024-04-10',
      maxStudents: 40,
      enrolled: 25,
      status: 'upcoming'
    },
    {
      id: '3',
      course: 'Go Programming',
      startDate: '2024-03-01',
      endDate: '2024-04-15',
      enrollmentDeadline: '2024-02-25',
      maxStudents: 45,
      enrolled: 45,
      status: 'in-progress'
    }
  ]);

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Course Scheduling</h1>
        <Button
          variant="primary"
          className="bg-brand-green hover:bg-brand-green/90"
        >
          <Plus className="h-5 w-5 mr-2" />
          Schedule Course
        </Button>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search schedules..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-gray-50 dark:bg-gray-700">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Course
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Duration
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Enrollment
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Status
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
              {schedules.map((schedule) => (
                <tr key={schedule.id}>
                  <td className="px-6 py-4">
                    <div className="font-medium text-gray-900 dark:text-white">
                      {schedule.course}
                    </div>
                    <div className="text-sm text-gray-500 dark:text-gray-400 flex items-center mt-1">
                      <Calendar className="h-4 w-4 mr-1" />
                      Deadline: {schedule.enrollmentDeadline}
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <div className="text-sm text-gray-500 dark:text-gray-400">
                      <div className="flex items-center">
                        <Clock className="h-4 w-4 mr-1" />
                        Start: {schedule.startDate}
                      </div>
                      <div className="flex items-center mt-1">
                        <Clock className="h-4 w-4 mr-1" />
                        End: {schedule.endDate}
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <div className="flex items-center">
                      <Users className="h-4 w-4 mr-1" />
                      <span className="text-gray-900 dark:text-white font-medium">
                        {schedule.enrolled}/{schedule.maxStudents}
                      </span>
                    </div>
                    <div className="w-full bg-gray-200 rounded-full h-2 mt-2">
                      <div
                        className="bg-brand-green h-2 rounded-full"
                        style={{ width: `${(schedule.enrolled / schedule.maxStudents) * 100}%` }}
                      ></div>
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <span className={`px-2 py-1 text-xs font-medium rounded-full ${
                      schedule.status === 'upcoming'
                        ? 'bg-blue-100 text-blue-800'
                        : schedule.status === 'in-progress'
                        ? 'bg-green-100 text-green-800'
                        : 'bg-gray-100 text-gray-800'
                    }`}>
                      {schedule.status === 'upcoming' ? 'Upcoming' : 'In Progress'}
                    </span>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <Button
                      variant="outline"
                      className="mr-2"
                    >
                      <Edit className="h-5 w-5" />
                    </Button>
                    <Button
                      variant="outline"
                      className="text-red-500 hover:text-red-600"
                    >
                      <Trash className="h-5 w-5" />
                    </Button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>
    </div>
  );
};

export default AdminCourseScheduling;

/== pages/cms/course-features/AdminPrerequisites.tsx
import React, { useState } from 'react';
import { Plus, Search, Edit, Trash, BookOpen, ArrowRight } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';

const AdminPrerequisites = () => {
  const [searchQuery, setSearchQuery] = useState('');
  const [prerequisites, setPrerequisites] = useState([
    {
      id: '1',
      course: 'Advanced Python',
      prerequisites: [
        { id: '1', name: 'Python Basics', type: 'course', required: true },
        { id: '2', name: 'Object-Oriented Programming', type: 'skill', required: true }
      ]
    },
    {
      id: '2',
      course: 'React Advanced',
      prerequisites: [
        { id: '3', name: 'JavaScript Fundamentals', type: 'course', required: true },
        { id: '4', name: 'React Basics', type: 'course', required: true },
        { id: '5', name: 'HTML/CSS', type: 'skill', required: false }
      ]
    }
  ]);

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Prerequisites Management</h1>
        <Button
          variant="primary"
          className="bg-brand-green hover:bg-brand-green/90"
        >
          <Plus className="h-5 w-5 mr-2" />
          Add Prerequisites
        </Button>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search courses..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="divide-y divide-gray-200 dark:divide-gray-700">
          {prerequisites.map((item) => (
            <div key={item.id} className="p-6">
              <div className="flex items-center justify-between mb-4">
                <div className="flex items-center">
                  <BookOpen className="h-5 w-5 text-gray-400 mr-3" />
                  <h3 className="text-lg font-medium text-gray-900 dark:text-white">
                    {item.course}
                  </h3>
                </div>
                <div>
                  <Button
                    variant="outline"
                    className="mr-2"
                  >
                    <Edit className="h-5 w-5" />
                  </Button>
                  <Button
                    variant="outline"
                    className="text-red-500 hover:text-red-600"
                  >
                    <Trash className="h-5 w-5" />
                  </Button>
                </div>
              </div>

              <div className="space-y-3">
                {item.prerequisites.map((prereq) => (
                  <div
                    key={prereq.id}
                    className="flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4"
                  >
                    <div className="flex items-center">
                      <ArrowRight className="h-5 w-5 text-gray-400 mr-3" />
                      <div>
                        <div className="font-medium text-gray-900 dark:text-white">
                          {prereq.name}
                        </div>
                        <div className="flex items-center mt-1">
                          <span className={`px-2 py-1 text-xs font-medium rounded-full ${
                            prereq.type === 'course'
                              ? 'bg-blue-100 text-blue-800'
                              : 'bg-purple-100 text-purple-800'
                          }`}>
                            {prereq.type}
                          </span>
                          {prereq.required && (
                            <span className="ml-2 px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full">
                              Required
                            </span>
                          )}
                        </div>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );
};

export default AdminPrerequisites;

/== pages/cms/course-features/AdminReviews.tsx
import React, { useState } from 'react';
import { Search, Star, MessageSquare, ThumbsUp, Filter, Flag } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';

const AdminReviews = () => {
  const [searchQuery, setSearchQuery] = useState('');
  const [selectedFilter, setSelectedFilter] = useState('all');

  const mockReviews = [
    {
      id: '1',
      user: 'Sarah Chen',
      course: 'Python Basics',
      rating: 5,
      review: 'Excellent course! The content was well-structured and easy to follow. The practical examples really helped me understand the concepts better.',
      date: '2024-03-20',
      helpful: 12,
      status: 'approved'
    },
    {
      id: '2',
      user: 'Michael Rodriguez',
      course: 'JavaScript Fundamentals',
      rating: 4,
      review: 'Good course overall. Would appreciate more advanced examples.',
      date: '2024-03-19',
      helpful: 8,
      status: 'pending'
    },
    {
      id: '3',
      user: 'Emma Wilson',
      course: 'React Advanced',
      rating: 5,
      review: 'This course took my React skills to the next level. The instructor explains complex concepts in a very understandable way.',
      date: '2024-03-18',
      helpful: 15,
      status: 'approved'
    }
  ];

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Course Reviews</h1>
        <div className="flex space-x-4">
          <select
            value={selectedFilter}
            onChange={(e) => setSelectedFilter(e.target.value)}
            className="border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white px-4 py-2"
          >
            <option value="all">All Reviews</option>
            <option value="pending">Pending</option>
            <option value="approved">Approved</option>
            <option value="flagged">Flagged</option>
          </select>
          <Button
            variant="outline"
            className="flex items-center"
          >
            <Filter className="h-5 w-5 mr-2" />
            Filter
          </Button>
        </div>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search reviews..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="divide-y divide-gray-200 dark:divide-gray-700">
          {mockReviews.map((review) => (
            <div key={review.id} className="p-6">
              <div className="flex items-start justify-between">
                <div className="flex items-start space-x-4">
                  <div className="w-10 h-10 bg-brand-green rounded-full flex items-center justify-center text-white">
                    {review.user.charAt(0)}
                  </div>
                  <div>
                    <div className="flex items-center">
                      <h3 className="font-medium text-gray-900 dark:text-white">{review.user}</h3>
                      <span className="mx-2 text-gray-300 dark:text-gray-600">•</span>
                      <span className="text-sm text-gray-500">{review.date}</span>
                    </div>
                    <div className="text-sm text-gray-500 dark:text-gray-400 mt-1">
                      Course: {review.course}
                    </div>
                    <div className="flex items-center mt-2">
                      {[...Array(5)].map((_, index) => (
                        <Star
                          key={index}
                          className={`h-5 w-5 ${
                            index < review.rating
                              ? 'text-yellow-400 fill-current'
                              : 'text-gray-300 dark:text-gray-600'
                          }`}
                        />
                      ))}
                    </div>
                    <p className="mt-2 text-gray-600 dark:text-gray-300">{review.review}</p>
                    <div className="flex items-center mt-4 space-x-4">
                      <button className="flex items-center text-gray-500 hover:text-gray-700">
                        <ThumbsUp className="h-5 w-5 mr-1" />
                        <span>{review.helpful}</span>
                      </button>
                      <button className="flex items-center text-gray-500 hover:text-gray-700">
                        <MessageSquare className="h-5 w-5  mr-1" />
                        Reply
                      </button>
                      <button className="flex items-center text-red-500 hover:text-red-600">
                        <Flag className="h-5 w-5 mr-1" />
                        Flag
                      </button>
                    </div>
                  </div>
                </div>
                <div className="flex items-center space-x-2">
                  <span className={`px-2 py-1 text-xs font-medium rounded-full ${
                    review.status === 'approved'
                      ? 'bg-green-100 text-green-800'
                      : review.status === 'pending'
                      ? 'bg-yellow-100 text-yellow-800'
                      : 'bg-red-100 text-red-800'
                  }`}>
                    {review.status}
                  </span>
                  <Button
                    variant="outline"
                    className={review.status === 'pending' ? 'text-green-500 hover:text-green-600' : 'text-red-500 hover:text-red-600'}
                  >
                    {review.status === 'pending' ? 'Approve' : 'Remove'}
                  </Button>
                </div>
              </div>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );
};

export default AdminReviews;

/== pages/cms/integrations/AdminApiManagement.tsx
import React, { useState } from 'react';
import { Search, Plus, Edit, Trash, Key, RefreshCw, Copy, Eye, EyeOff, AlertTriangle } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';
import Modal from '../../../components/atoms/Modal';
import IntegrationForm from '../../../components/molecules/IntegrationForm';

interface ApiKey {
  id: string;
  name: string;
  key: string;
  created: string;
  lastUsed: string;
  requests: number;
  description?: string;
  permissions?: string[];
}

const AdminApiManagement = () => {
  const [searchQuery, setSearchQuery] = useState('');
  const [showKeys, setShowKeys] = useState<Record<string, boolean>>({});
  const [isAddModalOpen, setIsAddModalOpen] = useState(false);
  const [isEditModalOpen, setIsEditModalOpen] = useState(false);
  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);
  const [currentApiKey, setCurrentApiKey] = useState<ApiKey | null>(null);
  const [formValues, setFormValues] = useState<Partial<ApiKey>>({});

  const [apiKeys, setApiKeys] = useState<Array<ApiKey>>([{
    id: '1',
    name: 'Production API Key',
    key: 'pk_live_123456789',
    created: '2024-03-01',
    lastUsed: '2024-03-20 14:30',
    requests: 1256
  },
  {
    id: '2',
    name: 'Development API Key',
    key: 'pk_test_987654321',
    created: '2024-03-15',
    lastUsed: '2024-03-19 10:15',
    requests: 892
  }]);

  const toggleKeyVisibility = (id: string) => {
    setShowKeys(prev => ({
      ...prev,
      [id]: !prev[id]
    }));
  };

  const copyToClipboard = (text: string) => {
    navigator.clipboard.writeText(text);
    // You could add a toast notification here
  };

  const filteredApiKeys = apiKeys.filter(apiKey => 
    apiKey.name.toLowerCase().includes(searchQuery.toLowerCase())
  );

  const handleOpenAddModal = () => {
    setFormValues({});
    setIsAddModalOpen(true);
  };

  const handleOpenEditModal = (apiKey: ApiKey) => {
    setCurrentApiKey(apiKey);
    setFormValues(apiKey);
    setIsEditModalOpen(true);
  };

  const handleOpenDeleteModal = (apiKey: ApiKey) => {
    setCurrentApiKey(apiKey);
    setIsDeleteModalOpen(true);
  };

  const handleFormChange = (id: string, value: any) => {
    setFormValues(prev => ({
      ...prev,
      [id]: value
    }));
  };

  const generateApiKey = () => {
    // Simulasi pembuatan API key
    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
    let result = '';
    const prefix = formValues.name?.toLowerCase().includes('production') ? 'pk_live_' : 'pk_test_';
    
    for (let i = 0; i < 20; i++) {
      result += characters.charAt(Math.floor(Math.random() * characters.length));
    }
    
    return prefix + result;
  };

  const handleAddApiKey = (e: React.FormEvent) => {
    e.preventDefault();
    const newApiKey: ApiKey = {
      id: Date.now().toString(),
      name: formValues.name || '',
      key: generateApiKey(),
      created: new Date().toISOString().split('T')[0],
      lastUsed: '-',
      requests: 0,
      description: formValues.description,
      permissions: formValues.permissions as string[]
    };

    setApiKeys([...apiKeys, newApiKey]);
    setIsAddModalOpen(false);
    setFormValues({});
  };

  const handleEditApiKey = (e: React.FormEvent) => {
    e.preventDefault();
    if (!currentApiKey) return;

    const updatedApiKeys = apiKeys.map(apiKey => 
      apiKey.id === currentApiKey.id ? { ...apiKey, ...formValues, key: apiKey.key } : apiKey
    );

    setApiKeys(updatedApiKeys);
    setIsEditModalOpen(false);
    setCurrentApiKey(null);
    setFormValues({});
  };

  const handleDeleteApiKey = () => {
    if (!currentApiKey) return;

    const updatedApiKeys = apiKeys.filter(apiKey => apiKey.id !== currentApiKey.id);
    setApiKeys(updatedApiKeys);
    setIsDeleteModalOpen(false);
    setCurrentApiKey(null);
  };

  const regenerateApiKey = (id: string) => {
    setApiKeys(apiKeys.map(apiKey => {
      if (apiKey.id === id) {
        return {
          ...apiKey,
          key: apiKey.key.startsWith('pk_live_') ? 'pk_live_' : 'pk_test_' + Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)
        };
      }
      return apiKey;
    }));
  };

  const formFields = [
    { id: 'name', label: 'Nama API Key', type: 'text', placeholder: 'Contoh: Production API Key', required: true },
    { id: 'description', label: 'Deskripsi', type: 'textarea', placeholder: 'Deskripsi penggunaan API key ini...' },
    { 
      id: 'permissions', 
      label: 'Permissions', 
      type: 'select', 
      options: [
        { value: 'read', label: 'Read' },
        { value: 'write', label: 'Write' },
        { value: 'delete', label: 'Delete' }
      ]
    }
  ];

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">API Management</h1>
        <Button
          variant="primary"
          className="bg-brand-green hover:bg-brand-green/90"
          onClick={handleOpenAddModal}
        >
          <Plus className="h-5 w-5 mr-2" />
          Generate New Key
        </Button>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search API keys..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-gray-50 dark:bg-gray-700">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Name
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  API Key
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Created
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Last Used
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Requests
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
              {filteredApiKeys.map((apiKey) => (
                <tr key={apiKey.id}>
                  <td className="px-6 py-4">
                    <div className="flex items-center">
                      <Key className="h-5 w-5 text-gray-400 mr-3" />
                      <div className="font-medium text-gray-900 dark:text-white">
                        {apiKey.name}
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <div className="flex items-center space-x-2">
                      <code className="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-sm font-mono">
                        {showKeys[apiKey.id] ? apiKey.key : '••••••••••••••••'}
                      </code>
                      <button
                        onClick={() => toggleKeyVisibility(apiKey.id)}
                        className="text-gray-500 hover:text-gray-700"
                      >
                        {showKeys[apiKey.id] ? (
                          <EyeOff className="h-4 w-4" />
                        ) : (
                          <Eye className="h-4 w-4" />
                        )}
                      </button>
                      <button
                        onClick={() => copyToClipboard(apiKey.key)}
                        className="text-gray-500 hover:text-gray-700"
                      >
                        <Copy className="h-4 w-4" />
                      </button>
                    </div>
                  </td>
                  <td className="px-6 py-4 text-sm text-gray-500 dark:text-gray-400">
                    {apiKey.created}
                  </td>
                  <td className="px-6 py-4 text-sm text-gray-500 dark:text-gray-400">
                    {apiKey.lastUsed}
                  </td>
                  <td className="px-6 py-4 text-sm text-gray-500 dark:text-gray-400">
                    {apiKey.requests.toLocaleString()}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <Button
                      variant="outline"
                      className="mr-2"
                      title="Regenerate Key"
                      onClick={() => regenerateApiKey(apiKey.id)}
                    >
                      <RefreshCw className="h-5 w-5" />
                    </Button>
                    <Button
                      variant="outline"
                      className="mr-2"
                      onClick={() => handleOpenEditModal(apiKey)}
                    >
                      <Edit className="h-5 w-5" />
                    </Button>
                    <Button
                      variant="outline"
                      className="text-red-500 hover:text-red-600"
                      onClick={() => handleOpenDeleteModal(apiKey)}
                    >
                      <Trash className="h-5 w-5" />
                    </Button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>

      {/* Add API Key Modal */}
      <Modal
        isOpen={isAddModalOpen}
        onClose={() => setIsAddModalOpen(false)}
        title="Generate API Key Baru"
      >
        <IntegrationForm
          fields={formFields}
          values={formValues}
          onChange={handleFormChange}
          onSubmit={handleAddApiKey}
          onCancel={() => setIsAddModalOpen(false)}
          submitText="Generate Key"
        />
      </Modal>

      {/* Edit API Key Modal */}
      <Modal
        isOpen={isEditModalOpen}
        onClose={() => setIsEditModalOpen(false)}
        title="Edit API Key"
      >
        <IntegrationForm
          fields={formFields}
          values={formValues}
          onChange={handleFormChange}
          onSubmit={handleEditApiKey}
          onCancel={() => setIsEditModalOpen(false)}
          submitText="Simpan Perubahan"
        />
      </Modal>

      {/* Delete Confirmation Modal */}
      <Modal
        isOpen={isDeleteModalOpen}
        onClose={() => setIsDeleteModalOpen(false)}
        title="Konfirmasi Hapus"
        size="sm"
        footer={
          <>
            <Button 
              variant="outline" 
              onClick={() => setIsDeleteModalOpen(false)}
            >
              Batal
            </Button>
            <Button 
              variant="secondary" 
              className="bg-red-600 hover:bg-red-700"
              onClick={handleDeleteApiKey}
            >
              Hapus
            </Button>
          </>
        }
      >
        <div className="flex items-center">
          <AlertTriangle className="h-12 w-12 text-red-500 mr-4" />
          <div>
            <p className="text-gray-700 dark:text-gray-300 mb-1">
              Apakah Anda yakin ingin menghapus API key <strong>{currentApiKey?.name}</strong>?
            </p>
            <p className="text-sm text-gray-500 dark:text-gray-400">
              Tindakan ini tidak dapat dibatalkan dan akan menghapus semua data terkait API key ini.
            </p>
          </div>
        </div>
      </Modal>
    </div>
  );
};

export default AdminApiManagement;

/== pages/cms/integrations/AdminPaymentGateways.tsx
import React, { useState } from 'react';
import { Search, CreditCard, Plus, Edit, Trash, CheckCircle, XCircle, AlertTriangle } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';
import Modal from '../../../components/atoms/Modal';
import IntegrationForm from '../../../components/molecules/IntegrationForm';

interface PaymentGateway {
  id: string;
  name: string;
  status: 'active' | 'inactive';
  mode: 'live' | 'test';
  lastSync: string;
  transactionsCount: number;
  apiKey?: string;
  secretKey?: string;
  webhookUrl?: string;
}

const AdminPaymentGateways = () => {
  const [searchQuery, setSearchQuery] = useState('');
  const [isAddModalOpen, setIsAddModalOpen] = useState(false);
  const [isEditModalOpen, setIsEditModalOpen] = useState(false);
  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);
  const [currentGateway, setCurrentGateway] = useState<PaymentGateway | null>(null);
  const [formValues, setFormValues] = useState<Partial<PaymentGateway>>({});

  const [gateways, setGateways] = useState<PaymentGateway[]>([
    {
      id: '1',
      name: 'Stripe',
      status: 'active',
      mode: 'live',
      lastSync: '2024-03-20 14:30',
      transactionsCount: 156
    },
    {
      id: '2',
      name: 'PayPal',
      status: 'inactive',
      mode: 'test',
      lastSync: '2024-03-19 10:15',
      transactionsCount: 89
    }
  ]);

  const filteredGateways = gateways.filter(gateway => 
    gateway.name.toLowerCase().includes(searchQuery.toLowerCase())
  );

  const handleOpenAddModal = () => {
    setFormValues({});
    setIsAddModalOpen(true);
  };

  const handleOpenEditModal = (gateway: PaymentGateway) => {
    setCurrentGateway(gateway);
    setFormValues(gateway);
    setIsEditModalOpen(true);
  };

  const handleOpenDeleteModal = (gateway: PaymentGateway) => {
    setCurrentGateway(gateway);
    setIsDeleteModalOpen(true);
  };

  const handleFormChange = (id: string, value: any) => {
    setFormValues(prev => ({
      ...prev,
      [id]: value
    }));
  };

  const handleAddGateway = (e: React.FormEvent) => {
    e.preventDefault();
    const newGateway: PaymentGateway = {
      id: Date.now().toString(),
      name: formValues.name || '',
      status: formValues.status as 'active' | 'inactive' || 'inactive',
      mode: formValues.mode as 'live' | 'test' || 'test',
      lastSync: new Date().toISOString().split('T')[0] + ' ' + new Date().toTimeString().split(' ')[0].substring(0, 5),
      transactionsCount: 0,
      apiKey: formValues.apiKey,
      secretKey: formValues.secretKey,
      webhookUrl: formValues.webhookUrl
    };

    setGateways([...gateways, newGateway]);
    setIsAddModalOpen(false);
    setFormValues({});
  };

  const handleEditGateway = (e: React.FormEvent) => {
    e.preventDefault();
    if (!currentGateway) return;

    const updatedGateways = gateways.map(gateway => 
      gateway.id === currentGateway.id ? { ...gateway, ...formValues } : gateway
    );

    setGateways(updatedGateways);
    setIsEditModalOpen(false);
    setCurrentGateway(null);
    setFormValues({});
  };

  const handleDeleteGateway = () => {
    if (!currentGateway) return;

    const updatedGateways = gateways.filter(gateway => gateway.id !== currentGateway.id);
    setGateways(updatedGateways);
    setIsDeleteModalOpen(false);
    setCurrentGateway(null);
  };

  const formFields = [
    { id: 'name', label: 'Nama Gateway', type: 'text', placeholder: 'Contoh: Stripe, PayPal', required: true },
    { 
      id: 'status', 
      label: 'Status', 
      type: 'select', 
      required: true,
      options: [
        { value: 'active', label: 'Aktif' },
        { value: 'inactive', label: 'Tidak Aktif' }
      ]
    },
    { 
      id: 'mode', 
      label: 'Mode', 
      type: 'select', 
      required: true,
      options: [
        { value: 'test', label: 'Test' },
        { value: 'live', label: 'Live' }
      ]
    },
    { id: 'apiKey', label: 'API Key', type: 'text', placeholder: 'Masukkan API key' },
    { id: 'secretKey', label: 'Secret Key', type: 'password', placeholder: 'Masukkan secret key' },
    { id: 'webhookUrl', label: 'Webhook URL', type: 'text', placeholder: 'https://example.com/webhook' }
  ];

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Payment Gateways</h1>
        <Button
          variant="primary"
          className="bg-brand-green hover:bg-brand-green/90"
          onClick={handleOpenAddModal}
        >
          <Plus className="h-5 w-5 mr-2" />
          Add Gateway
        </Button>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search gateways..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-gray-50 dark:bg-gray-700">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Gateway
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Status
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Mode
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Last Sync
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Transactions
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
              {filteredGateways.map((gateway) => (
                <tr key={gateway.id}>
                  <td className="px-6 py-4">
                    <div className="flex items-center">
                      <CreditCard className="h-5 w-5 text-gray-400 mr-3" />
                      <div className="font-medium text-gray-900 dark:text-white">
                        {gateway.name}
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <div className="flex items-center">
                      {gateway.status === 'active' ? (
                        <CheckCircle className="h-5 w-5 text-green-500 mr-2" />
                      ) : (
                        <XCircle className="h-5 w-5 text-red-500 mr-2" />
                      )}
                      <span className={`capitalize ${
                        gateway.status === 'active' ? 'text-green-600' : 'text-red-600'
                      }`}>
                        {gateway.status}
                      </span>
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <span className={`px-2 py-1 text-xs font-medium rounded-full ${
                      gateway.mode === 'live'
                        ? 'bg-green-100 text-green-800'
                        : 'bg-yellow-100 text-yellow-800'
                    }`}>
                      {gateway.mode}
                    </span>
                  </td>
                  <td className="px-6 py-4 text-sm text-gray-500 dark:text-gray-400">
                    {gateway.lastSync}
                  </td>
                  <td className="px-6 py-4 text-sm text-gray-500 dark:text-gray-400">
                    {gateway.transactionsCount}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <Button
                      variant="outline"
                      className="mr-2"
                      onClick={() => handleOpenEditModal(gateway)}
                    >
                      <Edit className="h-5 w-5" />
                    </Button>
                    <Button
                      variant="outline"
                      className="text-red-500 hover:text-red-600"
                      onClick={() => handleOpenDeleteModal(gateway)}
                    >
                      <Trash className="h-5 w-5" />
                    </Button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>

      {/* Add Gateway Modal */}
      <Modal
        isOpen={isAddModalOpen}
        onClose={() => setIsAddModalOpen(false)}
        title="Tambah Payment Gateway"
      >
        <IntegrationForm
          fields={formFields}
          values={formValues}
          onChange={handleFormChange}
          onSubmit={handleAddGateway}
          onCancel={() => setIsAddModalOpen(false)}
          submitText="Tambah Gateway"
        />
      </Modal>

      {/* Edit Gateway Modal */}
      <Modal
        isOpen={isEditModalOpen}
        onClose={() => setIsEditModalOpen(false)}
        title="Edit Payment Gateway"
      >
        <IntegrationForm
          fields={formFields}
          values={formValues}
          onChange={handleFormChange}
          onSubmit={handleEditGateway}
          onCancel={() => setIsEditModalOpen(false)}
          submitText="Simpan Perubahan"
        />
      </Modal>

      {/* Delete Confirmation Modal */}
      <Modal
        isOpen={isDeleteModalOpen}
        onClose={() => setIsDeleteModalOpen(false)}
        title="Konfirmasi Hapus"
        size="sm"
        footer={
          <>
            <Button 
              variant="outline" 
              onClick={() => setIsDeleteModalOpen(false)}
            >
              Batal
            </Button>
            <Button 
              variant="secondary" 
              className="bg-red-600 hover:bg-red-700"
              onClick={handleDeleteGateway}
            >
              Hapus
            </Button>
          </>
        }
      >
        <div className="flex items-center">
          <AlertTriangle className="h-12 w-12 text-red-500 mr-4" />
          <div>
            <p className="text-gray-700 dark:text-gray-300 mb-1">
              Apakah Anda yakin ingin menghapus gateway <strong>{currentGateway?.name}</strong>?
            </p>
            <p className="text-sm text-gray-500 dark:text-gray-400">
              Tindakan ini tidak dapat dibatalkan dan akan menghapus semua data terkait gateway ini.
            </p>
          </div>
        </div>
      </Modal>
    </div>
  );
};

export default AdminPaymentGateways;

/== pages/cms/integrations/AdminSso.tsx
import React, { useState } from 'react';
import { Search, Plus, Edit, Trash, Shield, CheckCircle, XCircle, Key, AlertTriangle } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';
import Modal from '../../../components/atoms/Modal';
import IntegrationForm from '../../../components/molecules/IntegrationForm';

interface SsoProvider {
  id: string;
  name: string;
  domain: string;
  status: 'active' | 'inactive';
  users: number;
  lastSync: string;
  clientId?: string;
  clientSecret?: string;
  callbackUrl?: string;
}

const AdminSso = () => {
  const [searchQuery, setSearchQuery] = useState('');
  const [isAddModalOpen, setIsAddModalOpen] = useState(false);
  const [isEditModalOpen, setIsEditModalOpen] = useState(false);
  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);
  const [currentProvider, setCurrentProvider] = useState<SsoProvider | null>(null);
  const [formValues, setFormValues] = useState<Partial<SsoProvider>>({});

  const [providers, setProviders] = useState<SsoProvider[]>([
    {
      id: '1',
      name: 'Google Workspace',
      domain: 'company.com',
      status: 'active',
      users: 156,
      lastSync: '2024-03-20 14:30'
    },
    {
      id: '2',
      name: 'Microsoft Azure AD',
      domain: 'enterprise.com',
      status: 'inactive',
      users: 89,
      lastSync: '2024-03-19 10:15'
    },
    {
      id: '3',
      name: 'Okta',
      domain: 'organization.com',
      status: 'active',
      users: 245,
      lastSync: '2024-03-18 09:45'
    }
  ]);

  const filteredProviders = providers.filter(provider => 
    provider.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
    provider.domain.toLowerCase().includes(searchQuery.toLowerCase())
  );

  const handleOpenAddModal = () => {
    setFormValues({});
    setIsAddModalOpen(true);
  };

  const handleOpenEditModal = (provider: SsoProvider) => {
    setCurrentProvider(provider);
    setFormValues(provider);
    setIsEditModalOpen(true);
  };

  const handleOpenDeleteModal = (provider: SsoProvider) => {
    setCurrentProvider(provider);
    setIsDeleteModalOpen(true);
  };

  const handleFormChange = (id: string, value: any) => {
    setFormValues(prev => ({
      ...prev,
      [id]: value
    }));
  };

  const handleAddProvider = (e: React.FormEvent) => {
    e.preventDefault();
    const newProvider: SsoProvider = {
      id: Date.now().toString(),
      name: formValues.name || '',
      domain: formValues.domain || '',
      status: formValues.status as 'active' | 'inactive' || 'inactive',
      users: 0,
      lastSync: '-',
      clientId: formValues.clientId,
      clientSecret: formValues.clientSecret,
      callbackUrl: formValues.callbackUrl
    };

    setProviders([...providers, newProvider]);
    setIsAddModalOpen(false);
    setFormValues({});
  };

  const handleEditProvider = (e: React.FormEvent) => {
    e.preventDefault();
    if (!currentProvider) return;

    const updatedProviders = providers.map(provider => 
      provider.id === currentProvider.id ? { ...provider, ...formValues } : provider
    );

    setProviders(updatedProviders);
    setIsEditModalOpen(false);
    setCurrentProvider(null);
    setFormValues({});
  };

  const handleDeleteProvider = () => {
    if (!currentProvider) return;

    const updatedProviders = providers.filter(provider => provider.id !== currentProvider.id);
    setProviders(updatedProviders);
    setIsDeleteModalOpen(false);
    setCurrentProvider(null);
  };

  const toggleProviderStatus = (id: string) => {
    setProviders(providers.map(provider => {
      if (provider.id === id) {
        return {
          ...provider,
          status: provider.status === 'active' ? 'inactive' : 'active'
        };
      }
      return provider;
    }));
  };

  const formFields = [
    { id: 'name', label: 'Nama Provider', type: 'text', placeholder: 'Contoh: Google Workspace', required: true },
    { id: 'domain', label: 'Domain', type: 'text', placeholder: 'example.com', required: true },
    { 
      id: 'status', 
      label: 'Status', 
      type: 'select', 
      required: true,
      options: [
        { value: 'active', label: 'Aktif' },
        { value: 'inactive', label: 'Tidak Aktif' }
      ]
    },
    { id: 'clientId', label: 'Client ID', type: 'text', placeholder: 'Masukkan Client ID' },
    { id: 'clientSecret', label: 'Client Secret', type: 'password', placeholder: 'Masukkan Client Secret' },
    { id: 'callbackUrl', label: 'Callback URL', type: 'text', placeholder: 'https://example.com/auth/callback' }
  ];

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">SSO Configuration</h1>
        <Button
          variant="primary"
          className="bg-brand-green hover:bg-brand-green/90"
          onClick={handleOpenAddModal}
        >
          <Plus className="h-5 w-5 mr-2" />
          Add Provider
        </Button>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search SSO providers..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-gray-50 dark:bg-gray-700">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Provider
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Domain
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Status
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Users
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Last Sync
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
              {filteredProviders.map((provider) => (
                <tr key={provider.id}>
                  <td className="px-6 py-4">
                    <div className="flex items-center">
                      <Shield className="h-5 w-5 text-gray-400 mr-3" />
                      <div className="font-medium text-gray-900 dark:text-white">
                        {provider.name}
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <div className="flex items-center">
                      <Key className="h-4 w-4 text-gray-400 mr-2" />
                      <span className="text-gray-500 dark:text-gray-400">
                        {provider.domain}
                      </span>
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <div className="flex items-center">
                      {provider.status === 'active' ? (
                        <CheckCircle className="h-5 w-5 text-green-500 mr-2" />
                      ) : (
                        <XCircle className="h-5 w-5 text-red-500 mr-2" />
                      )}
                      <span className={`capitalize ${
                        provider.status === 'active' ? 'text-green-600' : 'text-red-600'
                      }`}>
                        {provider.status}
                      </span>
                    </div>
                  </td>
                  <td className="px-6 py-4 text-sm text-gray-500 dark:text-gray-400">
                    {provider.users} users
                  </td>
                  <td className="px-6 py-4 text-sm text-gray-500 dark:text-gray-400">
                    {provider.lastSync}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <Button
                      variant="outline"
                      className="mr-2"
                      onClick={() => handleOpenEditModal(provider)}
                    >
                      <Edit className="h-5 w-5" />
                    </Button>
                    <Button
                      variant="outline"
                      className="text-red-500 hover:text-red-600"
                      onClick={() => handleOpenDeleteModal(provider)}
                    >
                      <Trash className="h-5 w-5" />
                    </Button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>

      {/* Add Provider Modal */}
      <Modal
        isOpen={isAddModalOpen}
        onClose={() => setIsAddModalOpen(false)}
        title="Tambah SSO Provider"
      >
        <IntegrationForm
          fields={formFields}
          values={formValues}
          onChange={handleFormChange}
          onSubmit={handleAddProvider}
          onCancel={() => setIsAddModalOpen(false)}
          submitText="Tambah Provider"
        />
      </Modal>

      {/* Edit Provider Modal */}
      <Modal
        isOpen={isEditModalOpen}
        onClose={() => setIsEditModalOpen(false)}
        title="Edit SSO Provider"
      >
        <IntegrationForm
          fields={formFields}
          values={formValues}
          onChange={handleFormChange}
          onSubmit={handleEditProvider}
          onCancel={() => setIsEditModalOpen(false)}
          submitText="Simpan Perubahan"
        />
      </Modal>

      {/* Delete Confirmation Modal */}
      <Modal
        isOpen={isDeleteModalOpen}
        onClose={() => setIsDeleteModalOpen(false)}
        title="Konfirmasi Hapus"
        size="sm"
        footer={
          <>
            <Button 
              variant="outline" 
              onClick={() => setIsDeleteModalOpen(false)}
            >
              Batal
            </Button>
            <Button 
              variant="secondary" 
              className="bg-red-600 hover:bg-red-700"
              onClick={handleDeleteProvider}
            >
              Hapus
            </Button>
          </>
        }
      >
        <div className="flex items-center">
          <AlertTriangle className="h-12 w-12 text-red-500 mr-4" />
          <div>
            <p className="text-gray-700 dark:text-gray-300 mb-1">
              Apakah Anda yakin ingin menghapus provider <strong>{currentProvider?.name}</strong>?
            </p>
            <p className="text-sm text-gray-500 dark:text-gray-400">
              Tindakan ini tidak dapat dibatalkan dan akan menghapus semua data terkait provider ini.
            </p>
          </div>
        </div>
      </Modal>
    </div>
  );
};

export default AdminSso;

/== pages/cms/integrations/AdminThirdParty.tsx
import React, { useState } from 'react';
import { Search, Plus, Edit, Trash, CheckCircle, XCircle, Globe, RefreshCw, AlertTriangle } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';
import Modal from '../../../components/atoms/Modal';
import IntegrationForm from '../../../components/molecules/IntegrationForm';

interface ThirdPartyIntegration {
  id: string;
  name: string;
  category: string;
  status: 'active' | 'inactive';
  lastSync: string;
  apiCalls: number;
  apiKey?: string;
  secretKey?: string;
  webhookUrl?: string;
  settings?: Record<string, any>;
}

const AdminThirdParty = () => {
  const [searchQuery, setSearchQuery] = useState('');
  const [isAddModalOpen, setIsAddModalOpen] = useState(false);
  const [isEditModalOpen, setIsEditModalOpen] = useState(false);
  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);
  const [currentIntegration, setCurrentIntegration] = useState<ThirdPartyIntegration | null>(null);
  const [formValues, setFormValues] = useState<Partial<ThirdPartyIntegration>>({});

  const [integrations, setIntegrations] = useState<Array<ThirdPartyIntegration>>([{
    id: '1',
    name: 'Google Analytics',
    category: 'Analytics',
    status: 'active',
    lastSync: '2024-03-20 14:30',
    apiCalls: 1256
  },
  {
    id: '2',
    name: 'Mailchimp',
    category: 'Email',
    status: 'active',
    lastSync: '2024-03-19 10:15',
    apiCalls: 892
  },
  {
    id: '3',
    name: 'Slack',
    category: 'Communication',
    status: 'inactive',
    lastSync: '2024-03-18 09:45',
    apiCalls: 456
  }]);

  const filteredIntegrations = integrations.filter(integration => 
    integration.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
    integration.category.toLowerCase().includes(searchQuery.toLowerCase())
  );

  const handleOpenAddModal = () => {
    setFormValues({});
    setIsAddModalOpen(true);
  };

  const handleOpenEditModal = (integration: ThirdPartyIntegration) => {
    setCurrentIntegration(integration);
    setFormValues(integration);
    setIsEditModalOpen(true);
  };

  const handleOpenDeleteModal = (integration: ThirdPartyIntegration) => {
    setCurrentIntegration(integration);
    setIsDeleteModalOpen(true);
  };

  const handleFormChange = (id: string, value: any) => {
    setFormValues(prev => ({
      ...prev,
      [id]: value
    }));
  };

  const handleAddIntegration = (e: React.FormEvent) => {
    e.preventDefault();
    const newIntegration: ThirdPartyIntegration = {
      id: Date.now().toString(),
      name: formValues.name || '',
      category: formValues.category || '',
      status: formValues.status as 'active' | 'inactive' || 'inactive',
      lastSync: '-',
      apiCalls: 0,
      apiKey: formValues.apiKey,
      secretKey: formValues.secretKey,
      webhookUrl: formValues.webhookUrl,
      settings: formValues.settings
    };

    setIntegrations([...integrations, newIntegration]);
    setIsAddModalOpen(false);
    setFormValues({});
  };

  const handleEditIntegration = (e: React.FormEvent) => {
    e.preventDefault();
    if (!currentIntegration) return;

    const updatedIntegrations = integrations.map(integration => 
      integration.id === currentIntegration.id ? { ...integration, ...formValues } : integration
    );

    setIntegrations(updatedIntegrations);
    setIsEditModalOpen(false);
    setCurrentIntegration(null);
    setFormValues({});
  };

  const handleDeleteIntegration = () => {
    if (!currentIntegration) return;

    const updatedIntegrations = integrations.filter(integration => integration.id !== currentIntegration.id);
    setIntegrations(updatedIntegrations);
    setIsDeleteModalOpen(false);
    setCurrentIntegration(null);
  };

  const syncIntegration = (id: string) => {
    setIntegrations(integrations.map(integration => {
      if (integration.id === id) {
        return {
          ...integration,
          lastSync: new Date().toISOString().split('T')[0] + ' ' + new Date().toTimeString().split(' ')[0].substring(0, 5)
        };
      }
      return integration;
    }));
  };

  const formFields = [
    { id: 'name', label: 'Nama Integrasi', type: 'text', placeholder: 'Contoh: Google Analytics', required: true },
    { 
      id: 'category', 
      label: 'Kategori', 
      type: 'select', 
      required: true,
      options: [
        { value: 'Analytics', label: 'Analytics' },
        { value: 'Email', label: 'Email' },
        { value: 'Communication', label: 'Communication' },
        { value: 'CRM', label: 'CRM' },
        { value: 'Marketing', label: 'Marketing' }
      ]
    },
    { 
      id: 'status', 
      label: 'Status', 
      type: 'select', 
      required: true,
      options: [
        { value: 'active', label: 'Aktif' },
        { value: 'inactive', label: 'Tidak Aktif' }
      ]
    },
    { id: 'apiKey', label: 'API Key', type: 'text', placeholder: 'Masukkan API key' },
    { id: 'secretKey', label: 'Secret Key', type: 'password', placeholder: 'Masukkan secret key' },
    { id: 'webhookUrl', label: 'Webhook URL', type: 'text', placeholder: 'https://example.com/webhook' },
    { id: 'settings', label: 'Settings (JSON)', type: 'textarea', placeholder: '{"tracking_id": "UA-XXXXX-Y", "anonymize_ip": true}' }
  ];

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Third-Party Integrations</h1>
        <Button
          variant="primary"
          className="bg-brand-green hover:bg-brand-green/90"
          onClick={handleOpenAddModal}
        >
          <Plus className="h-5 w-5 mr-2" />
          Add Integration
        </Button>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search integrations..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-gray-50 dark:bg-gray-700">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Integration
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Category
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Status
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Last Sync
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  API Calls
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
              {filteredIntegrations.map((integration) => (
                <tr key={integration.id}>
                  <td className="px-6 py-4">
                    <div className="flex items-center">
                      <Globe className="h-5 w-5 text-gray-400 mr-3" />
                      <div className="font-medium text-gray-900 dark:text-white">
                        {integration.name}
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <span className="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">
                      {integration.category}
                    </span>
                  </td>
                  <td className="px-6 py-4">
                    <div className="flex items-center">
                      {integration.status === 'active' ? (
                        <CheckCircle className="h-5 w-5 text-green-500 mr-2" />
                      ) : (
                        <XCircle className="h-5 w-5 text-red-500 mr-2" />
                      )}
                      <span className={`capitalize ${
                        integration.status === 'active' ? 'text-green-600' : 'text-red-600'
                      }`}>
                        {integration.status}
                      </span>
                    </div>
                  </td>
                  <td className="px-6 py-4 text-sm text-gray-500 dark:text-gray-400">
                    {integration.lastSync}
                  </td>
                  <td className="px-6 py-4 text-sm text-gray-500 dark:text-gray-400">
                    {integration.apiCalls.toLocaleString()}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <Button
                      variant="outline"
                      className="mr-2"
                      title="Sync Now"
                      onClick={() => syncIntegration(integration.id)}
                    >
                      <RefreshCw className="h-5 w-5" />
                    </Button>
                    <Button
                      variant="outline"
                      className="mr-2"
                      onClick={() => handleOpenEditModal(integration)}
                    >
                      <Edit className="h-5 w-5" />
                    </Button>
                    <Button
                      variant="outline"
                      className="text-red-500 hover:text-red-600"
                      onClick={() => handleOpenDeleteModal(integration)}
                    >
                      <Trash className="h-5 w-5" />
                    </Button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>

      {/* Add Integration Modal */}
      <Modal
        isOpen={isAddModalOpen}
        onClose={() => setIsAddModalOpen(false)}
        title="Tambah Integrasi"
      >
        <IntegrationForm
          fields={formFields}
          values={formValues}
          onChange={handleFormChange}
          onSubmit={handleAddIntegration}
          onCancel={() => setIsAddModalOpen(false)}
          submitText="Tambah Integrasi"
        />
      </Modal>

      {/* Edit Integration Modal */}
      <Modal
        isOpen={isEditModalOpen}
        onClose={() => setIsEditModalOpen(false)}
        title="Edit Integrasi"
      >
        <IntegrationForm
          fields={formFields}
          values={formValues}
          onChange={handleFormChange}
          onSubmit={handleEditIntegration}
          onCancel={() => setIsEditModalOpen(false)}
          submitText="Simpan Perubahan"
        />
      </Modal>

      {/* Delete Confirmation Modal */}
      <Modal
        isOpen={isDeleteModalOpen}
        onClose={() => setIsDeleteModalOpen(false)}
        title="Konfirmasi Hapus"
        size="sm"
        footer={
          <>
            <Button 
              variant="outline" 
              onClick={() => setIsDeleteModalOpen(false)}
            >
              Batal
            </Button>
            <Button 
              variant="secondary" 
              className="bg-red-600 hover:bg-red-700"
              onClick={handleDeleteIntegration}
            >
              Hapus
            </Button>
          </>
        }
      >
        <div className="flex items-center">
          <AlertTriangle className="h-12 w-12 text-red-500 mr-4" />
          <div>
            <p className="text-gray-700 dark:text-gray-300 mb-1">
              Apakah Anda yakin ingin menghapus integrasi <strong>{currentIntegration?.name}</strong>?
            </p>
            <p className="text-sm text-gray-500 dark:text-gray-400">
              Tindakan ini tidak dapat dibatalkan dan akan menghapus semua data terkait integrasi ini.
            </p>
          </div>
        </div>
      </Modal>
    </div>
  );
};

export default AdminThirdParty;

/== pages/cms/integrations/AdminWebhooks.tsx
import React, { useState } from 'react';
import { Search, Plus, Edit, Trash, Globe, CheckCircle, XCircle, Play, Pause, AlertTriangle } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';
import Modal from '../../../components/atoms/Modal';
import IntegrationForm from '../../../components/molecules/IntegrationForm';

interface Webhook {
  id: string;
  name: string;
  url: string;
  event: string;
  status: 'active' | 'inactive';
  lastTriggered: string;
  successRate: number;
  headers?: Record<string, string>;
  description?: string;
}

const AdminWebhooks = () => {
  const [searchQuery, setSearchQuery] = useState('');
  const [isAddModalOpen, setIsAddModalOpen] = useState(false);
  const [isEditModalOpen, setIsEditModalOpen] = useState(false);
  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);
  const [currentWebhook, setCurrentWebhook] = useState<Webhook | null>(null);
  const [formValues, setFormValues] = useState<Partial<Webhook>>({});

  const [webhooks, setWebhooks] = useState<Webhook[]>([
    {
      id: '1',
      name: 'Course Completion Webhook',
      url: 'https://api.example.com/webhooks/course-complete',
      event: 'course.completed',
      status: 'active',
      lastTriggered: '2024-03-20 14:30',
      successRate: 98.5
    },
    {
      id: '2',
      name: 'Payment Success Webhook',
      url: 'https://api.example.com/webhooks/payment',
      event: 'payment.success',
      status: 'active',
      lastTriggered: '2024-03-19 10:15',
      successRate: 100
    },
    {
      id: '3',
      name: 'User Registration Webhook',
      url: 'https://api.example.com/webhooks/user',
      event: 'user.created',
      status: 'inactive',
      lastTriggered: '2024-03-18 09:45',
      successRate: 95.2
    }
  ]);

  const filteredWebhooks = webhooks.filter(webhook => 
    webhook.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
    webhook.event.toLowerCase().includes(searchQuery.toLowerCase())
  );

  const handleOpenAddModal = () => {
    setFormValues({});
    setIsAddModalOpen(true);
  };

  const handleOpenEditModal = (webhook: Webhook) => {
    setCurrentWebhook(webhook);
    setFormValues(webhook);
    setIsEditModalOpen(true);
  };

  const handleOpenDeleteModal = (webhook: Webhook) => {
    setCurrentWebhook(webhook);
    setIsDeleteModalOpen(true);
  };

  const handleFormChange = (id: string, value: any) => {
    setFormValues(prev => ({
      ...prev,
      [id]: value
    }));
  };

  const handleAddWebhook = (e: React.FormEvent) => {
    e.preventDefault();
    const newWebhook: Webhook = {
      id: Date.now().toString(),
      name: formValues.name || '',
      url: formValues.url || '',
      event: formValues.event || '',
      status: formValues.status as 'active' | 'inactive' || 'inactive',
      lastTriggered: '-',
      successRate: 0,
      headers: formValues.headers as Record<string, string>,
      description: formValues.description
    };

    setWebhooks([...webhooks, newWebhook]);
    setIsAddModalOpen(false);
    setFormValues({});
  };

  const handleEditWebhook = (e: React.FormEvent) => {
    e.preventDefault();
    if (!currentWebhook) return;

    const updatedWebhooks = webhooks.map(webhook => 
      webhook.id === currentWebhook.id ? { ...webhook, ...formValues } : webhook
    );

    setWebhooks(updatedWebhooks);
    setIsEditModalOpen(false);
    setCurrentWebhook(null);
    setFormValues({});
  };

  const handleDeleteWebhook = () => {
    if (!currentWebhook) return;

    const updatedWebhooks = webhooks.filter(webhook => webhook.id !== currentWebhook.id);
    setWebhooks(updatedWebhooks);
    setIsDeleteModalOpen(false);
    setCurrentWebhook(null);
  };

  const toggleWebhookStatus = (id: string) => {
    setWebhooks(webhooks.map(webhook => {
      if (webhook.id === id) {
        return {
          ...webhook,
          status: webhook.status === 'active' ? 'inactive' : 'active'
        };
      }
      return webhook;
    }));
  };

  const formFields = [
    { id: 'name', label: 'Nama Webhook', type: 'text', placeholder: 'Contoh: Notifikasi Pembayaran', required: true },
    { id: 'url', label: 'URL Endpoint', type: 'text', placeholder: 'https://example.com/webhook', required: true },
    { 
      id: 'event', 
      label: 'Event', 
      type: 'select', 
      required: true,
      options: [
        { value: 'user.created', label: 'User Created' },
        { value: 'user.updated', label: 'User Updated' },
        { value: 'course.completed', label: 'Course Completed' },
        { value: 'payment.success', label: 'Payment Success' },
        { value: 'payment.failed', label: 'Payment Failed' }
      ]
    },
    { 
      id: 'status', 
      label: 'Status', 
      type: 'select', 
      required: true,
      options: [
        { value: 'active', label: 'Aktif' },
        { value: 'inactive', label: 'Tidak Aktif' }
      ]
    },
    { id: 'description', label: 'Deskripsi', type: 'textarea', placeholder: 'Deskripsi webhook ini...' },
    { id: 'headers', label: 'Headers (JSON)', type: 'textarea', placeholder: '{"Authorization": "Bearer token", "Content-Type": "application/json"}' }
  ];

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Webhook Configuration</h1>
        <Button
          variant="primary"
          className="bg-brand-green hover:bg-brand-green/90"
          onClick={handleOpenAddModal}
        >
          <Plus className="h-5 w-5 mr-2" />
          Add Webhook
        </Button>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search webhooks..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-gray-50 dark:bg-gray-700">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Webhook
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Event
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Status
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Last Triggered
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Success Rate
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
              {filteredWebhooks.map((webhook) => (
                <tr key={webhook.id}>
                  <td className="px-6 py-4">
                    <div className="flex items-center">
                      <Globe className="h-5 w-5 text-gray-400 mr-3" />
                      <div>
                        <div className="font-medium text-gray-900 dark:text-white">
                          {webhook.name}
                        </div>
                        <div className="text-sm text-gray-500 dark:text-gray-400">
                          {webhook.url}
                        </div>
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <span className="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">
                      {webhook.event}
                    </span>
                  </td>
                  <td className="px-6 py-4">
                    <div className="flex items-center">
                      {webhook.status === 'active' ? (
                        <CheckCircle className="h-5 w-5 text-green-500 mr-2" />
                      ) : (
                        <XCircle className="h-5 w-5 text-red-500 mr-2" />
                      )}
                      <span className={`capitalize ${
                        webhook.status === 'active' ? 'text-green-600' : 'text-red-600'
                      }`}>
                        {webhook.status}
                      </span>
                    </div>
                  </td>
                  <td className="px-6 py-4 text-sm text-gray-500 dark:text-gray-400">
                    {webhook.lastTriggered}
                  </td>
                  <td className="px-6 py-4">
                    <div className="flex items-center">
                      <div className="w-16 bg-gray-200 rounded-full h-2 mr-2">
                        <div
                          className={`h-2 rounded-full ${
                            webhook.successRate >= 98 ? 'bg-green-500' :
                            webhook.successRate >= 90 ? 'bg-yellow-500' : 'bg-red-500'
                          }`}
                          style={{ width: `${webhook.successRate}%` }}
                        />
                      </div>
                      <span className="text-sm text-gray-500 dark:text-gray-400">
                        {webhook.successRate}%
                      </span>
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <Button
                      variant="outline"
                      className="mr-2"
                      title={webhook.status === 'active' ? 'Pause' : 'Resume'}
                      onClick={() => toggleWebhookStatus(webhook.id)}
                    >
                      {webhook.status === 'active' ? (
                        <Pause className="h-5 w-5" />
                      ) : (
                        <Play className="h-5 w-5" />
                      )}
                    </Button>
                    <Button
                      variant="outline"
                      className="mr-2"
                      onClick={() => handleOpenEditModal(webhook)}
                    >
                      <Edit className="h-5 w-5" />
                    </Button>
                    <Button
                      variant="outline"
                      className="text-red-500 hover:text-red-600"
                      onClick={() => handleOpenDeleteModal(webhook)}
                    >
                      <Trash className="h-5 w-5" />
                    </Button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>

      {/* Add Webhook Modal */}
      <Modal
        isOpen={isAddModalOpen}
        onClose={() => setIsAddModalOpen(false)}
        title="Tambah Webhook"
      >
        <IntegrationForm
          fields={formFields}
          values={formValues}
          onChange={handleFormChange}
          onSubmit={handleAddWebhook}
          onCancel={() => setIsAddModalOpen(false)}
          submitText="Tambah Webhook"
        />
      </Modal>

      {/* Edit Webhook Modal */}
      <Modal
        isOpen={isEditModalOpen}
        onClose={() => setIsEditModalOpen(false)}
        title="Edit Webhook"
      >
        <IntegrationForm
          fields={formFields}
          values={formValues}
          onChange={handleFormChange}
          onSubmit={handleEditWebhook}
          onCancel={() => setIsEditModalOpen(false)}
          submitText="Simpan Perubahan"
        />
      </Modal>

      {/* Delete Confirmation Modal */}
      <Modal
        isOpen={isDeleteModalOpen}
        onClose={() => setIsDeleteModalOpen(false)}
        title="Konfirmasi Hapus"
        size="sm"
        footer={
          <>
            <Button 
              variant="outline" 
              onClick={() => setIsDeleteModalOpen(false)}
            >
              Batal
            </Button>
            <Button 
              variant="secondary" 
              className="bg-red-600 hover:bg-red-700"
              onClick={handleDeleteWebhook}
            >
              Hapus
            </Button>
          </>
        }
      >
        <div className="flex items-center">
          <AlertTriangle className="h-12 w-12 text-red-500 mr-4" />
          <div>
            <p className="text-gray-700 dark:text-gray-300 mb-1">
              Apakah Anda yakin ingin menghapus webhook <strong>{currentWebhook?.name}</strong>?
            </p>
            <p className="text-sm text-gray-500 dark:text-gray-400">
              Tindakan ini tidak dapat dibatalkan dan akan menghapus semua data terkait webhook ini.
            </p>
          </div>
        </div>
      </Modal>
    </div>
  );
};

export default AdminWebhooks;

/== pages/cms/integrations/IntegrationsIndex.tsx
import React from 'react';
import { Link } from 'react-router-dom';
import { Server, CreditCard, Shield, Globe, Webhook } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Heading from '../../../components/atoms/Heading';
import Text from '../../../components/atoms/Text';

interface IntegrationCardProps {
  title: string;
  description: string;
  icon: React.ReactNode;
  path: string;
}

const IntegrationCard: React.FC<IntegrationCardProps> = ({ title, description, icon, path }) => {
  return (
    <Link to={path} className="block">
      <Card className="h-full p-6 transition-all hover:shadow-lg hover:border-brand-green">
        <div className="flex items-start">
          <div className="p-3 rounded-full bg-brand-green/10 text-brand-green mr-4">
            {icon}
          </div>
          <div>
            <Heading level="h3" className="text-lg font-semibold mb-2 text-gray-200 text-white">{title}</Heading>
            <Text className="text-gray-600 dark:text-white">{description}</Text>
          </div>
        </div>
      </Card>
    </Link>
  );
};

const IntegrationsIndex = () => {
  const integrations = [
    {
      title: 'Manajemen API',
      description: 'Kelola API keys, rate limits, dan akses API untuk aplikasi eksternal.',
      icon: <Server className="h-6 w-6" />,
      path: '/cms/integrations/api-management'
    },
    {
      title: 'Gateway Pembayaran',
      description: 'Konfigurasi dan kelola gateway pembayaran seperti Stripe, PayPal, dan lainnya.',
      icon: <CreditCard className="h-6 w-6" />,
      path: '/cms/integrations/payment-gateways'
    },
    {
      title: 'SSO (Single Sign-On)',
      description: 'Atur integrasi dengan penyedia identitas untuk autentikasi terpusat.',
      icon: <Shield className="h-6 w-6" />,
      path: '/cms/integrations/sso'
    },
    {
      title: 'Integrasi Pihak Ketiga',
      description: 'Hubungkan dengan layanan pihak ketiga seperti Google Analytics, Mailchimp, dan lainnya.',
      icon: <Globe className="h-6 w-6" />,
      path: '/cms/integrations/third-party'
    },
    {
      title: 'Webhook',
      description: 'Konfigurasi webhook untuk mengirim notifikasi ke sistem eksternal saat terjadi peristiwa tertentu.',
      icon: <Webhook className="h-6 w-6" />,
      path: '/cms/integrations/webhooks'
    }
  ];

  return (
    <div>
      <div className="mb-8">
        <Heading level="h1" className="text-2xl font-bold mb-2">Integrasi</Heading>
        <Text className="text-gray-600 dark:text-white">
          Kelola semua integrasi sistem dengan layanan dan aplikasi eksternal.
        </Text>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {integrations.map((integration, index) => (
          <IntegrationCard
            key={index}
            title={integration.title}
            description={integration.description}
            icon={integration.icon}
            path={integration.path}
          />
        ))}
      </div>
    </div>
  );
};

export default IntegrationsIndex;

/== pages/cms/monetization/affiliates.tsx
import React, { useState, useEffect } from "react";
import Card from "../../../components/atoms/Card";
import Heading from "../../../components/atoms/Heading";
import Button from "../../../components/atoms/Button";
import Text from "../../../components/atoms/Text";
import TabGroup from "../../../components/molecules/TabGroup";
import AffiliateTable from "../../../components/molecules/AffiliateTable";
import AffiliateForm from "../../../components/organisms/AffiliateForm";
import AffiliateAnalytics from "../../../components/organisms/AffiliateAnalytics";
import AffiliatePromotionMaterials from "../../../components/organisms/AffiliatePromotionMaterials";
import AffiliatorList from "../../../components/organisms/AffiliatorList";
import AffiliateSettings from "../../../components/organisms/AffiliateSettings";
import Modal from "../../../components/atoms/Modal";
import IconButton from "../../../components/atoms/IconButton";
import { Plus } from "lucide-react";
import { useAffiliateStore } from "../../../store/affiliateStore";

const AffiliatesManagement: React.FC = () => {
  // Get data from store
  const { 
    programs, 
    affiliators, 
    promotionalMaterials, 
    settings, 
    analytics,
    addProgram, 
    updateProgram, 
    deleteProgram,
    updateAffiliator,
    deleteAffiliator,
    approveAffiliator,
    rejectAffiliator,
    addPromotionalMaterial,
    updatePromotionalMaterial,
    deletePromotionalMaterial,
    updateSettings,
    refreshAnalytics
  } = useAffiliateStore();

  const [activeTab, setActiveTab] = useState("programs");
  const [showFormModal, setShowFormModal] = useState(false);
  const [currentProgramId, setCurrentProgramId] = useState<string | null>(null);
  const [showConfirmDelete, setShowConfirmDelete] = useState(false);
  const [deleteId, setDeleteId] = useState<string | null>(null);
  const [deleteType, setDeleteType] = useState<"program" | "affiliator">("program");

  // Refresh analytics on load
  useEffect(() => {
    refreshAnalytics();
  }, [refreshAnalytics]);

  const handleAddProgram = (data: any) => {
    console.log("Form data received:", data);
    
    try {
      addProgram({
        name: data.name,
        referralCode: data.referralCode,
        commission: data.commission ? `${data.commission}%` : "0%",
        cookieDuration: Number(data.cookieDuration) || 30,
        description: data.description || "",
        terms: data.terms || "",
        status: data.status || "active",
        paymentSchedule: data.paymentSchedule || "monthly",
        multilevel: Boolean(data.multilevel),
        level2Commission: data.multilevel && data.level2Commission ? `${data.level2Commission}%` : "",
        minPayoutAmount: settings.globalSettings.minPayoutAmount,
      });
      console.log("Program added successfully");
      setShowFormModal(false);
    } catch (error) {
      console.error("Error adding program:", error);
      // You could add an error state here and display it to the user
    }
  };

  const handleEditProgram = (data: any) => {
    if (currentProgramId) {
      updateProgram(currentProgramId, {
        name: data.name,
        referralCode: data.referralCode,
        commission: `${data.commission}%`,
        cookieDuration: data.cookieDuration,
        description: data.description || "",
        terms: data.terms || "",
        status: data.status as any,
        paymentSchedule: data.paymentSchedule as any,
        multilevel: data.multilevel,
        level2Commission: data.level2Commission || "",
      });
      setShowFormModal(false);
      setCurrentProgramId(null);
    }
  };

  const handleEditClick = (id: string) => {
    setCurrentProgramId(id);
    setShowFormModal(true);
  };

  const handleDeleteClick = (id: string, type: "program" | "affiliator" = "program") => {
    setDeleteId(id);
    setDeleteType(type);
    setShowConfirmDelete(true);
  };

  const confirmDelete = () => {
    if (deleteId) {
      if (deleteType === "program") {
        deleteProgram(deleteId);
      } else {
        deleteAffiliator(deleteId);
      }
      setShowConfirmDelete(false);
      setDeleteId(null);
    }
  };

  const handleViewClick = (id: string) => {
    // Implement view logic here
    console.log("View program with ID:", id);
  };

  const handleAddMaterial = (material: any) => {
    addPromotionalMaterial({
      programId: material.programId || "1", // Default to first program if not specified
      name: material.name,
      type: material.type as any,
      preview: material.preview,
      description: material.description,
    });
  };

  const handleEditMaterial = (id: string, material: any) => {
    updatePromotionalMaterial(id, {
      name: material.name,
      type: material.type as any,
      preview: material.preview,
      description: material.description,
    });
  };

  const handleDeleteMaterial = (id: string) => {
    deletePromotionalMaterial(id);
  };

  const handleViewAffiliator = (id: string) => {
    console.log("View affiliator with ID:", id);
  };

  const handleEditAffiliator = (id: string) => {
    console.log("Edit affiliator with ID:", id);
  };

  const handleApproveAffiliator = (id: string) => {
    approveAffiliator(id);
  };

  const handleRejectAffiliator = (id: string) => {
    rejectAffiliator(id);
  };

  const handleDeleteAffiliator = (id: string) => {
    handleDeleteClick(id, "affiliator");
  };

  const handleUpdateSettings = (newSettings: any) => {
    updateSettings(newSettings);
  };

  const getCurrentProgram = () => {
    if (currentProgramId) {
      const program = programs.find(
        (program) => program.id === currentProgramId
      );
      if (program) {
        return {
          name: program.name,
          referralCode: program.referralCode,
          commission: program.commission.replace("%", ""),
          cookieDuration: program.cookieDuration,
          description: program.description,
          terms: program.terms,
          status: program.status,
          paymentSchedule: program.paymentSchedule,
          multilevel: program.multilevel,
          level2Commission: program.level2Commission.replace("%", ""),
        };
      }
    }
    return undefined;
  };

  const tabs = [
    { id: "programs", label: "Program Afiliasi" },
    { id: "analytics", label: "Analitik" },
    { id: "materials", label: "Materi Promosi" },
    { id: "settings", label: "Pengaturan" },
    { id: "affiliators", label: "Daftar Afiliator" },
  ];

  return (
    <div className="p-6 bg-white dark:bg-gray-900">
      <div className="flex justify-between items-center mb-6">
        <div>
          <Heading level={2} className="text-gray-900 dark:text-white">Afiliasi & Referral</Heading>
          <Text className="text-gray-500 dark:text-gray-400 mt-1">
            Kelola program afiliasi dan referral untuk meningkatkan jangkauan
          </Text>
        </div>
        {activeTab === "programs" && (
          <Button
            variant="primary"
            onClick={() => {
              setCurrentProgramId(null);
              setShowFormModal(true);
            }}
          >
            <Plus className="mr-2 h-5 w-5" /> Tambah Program Afiliasi
          </Button>
        )}
      </div>

      <Card className="mb-6">
        <TabGroup
          tabs={tabs}
          activeTab={activeTab}
          onChange={(id) => setActiveTab(id)}
        />
      </Card>

      {activeTab === "programs" && (
        <Card>
          <div className="p-4">
            <AffiliateTable
              affiliates={programs}
              onEdit={handleEditClick}
              onView={handleViewClick}
              onDelete={(id) => handleDeleteClick(id, "program")}
            />
          </div>
        </Card>
      )}

      {activeTab === "analytics" && (
        <AffiliateAnalytics data={analytics} />
      )}

      {activeTab === "materials" && (
        <Card className="p-4">
          <AffiliatePromotionMaterials
            materials={promotionalMaterials}
            onAdd={handleAddMaterial}
            onEdit={handleEditMaterial}
            onDelete={handleDeleteMaterial}
          />
        </Card>
      )}

      {activeTab === "settings" && (
        <AffiliateSettings 
          settings={settings}
          onSave={handleUpdateSettings}
        />
      )}

      {activeTab === "affiliators" && (
        <Card className="p-4">
          <AffiliatorList 
            affiliators={affiliators}
            onViewAffiliator={handleViewAffiliator}
            onEditAffiliator={handleEditAffiliator}
            onDeleteAffiliator={handleDeleteAffiliator}
            onApproveAffiliator={handleApproveAffiliator}
            onRejectAffiliator={handleRejectAffiliator}
          />
        </Card>
      )}

      {/* Add/Edit Program Modal */}
      <Modal
        open={showFormModal}
        onClose={() => setShowFormModal(false)}
        title={currentProgramId ? "Edit Program Afiliasi" : "Tambah Program Afiliasi"}
        size="lg"
      >
        <AffiliateForm
          initialData={getCurrentProgram()}
          onSubmit={currentProgramId ? handleEditProgram : handleAddProgram}
          onCancel={() => setShowFormModal(false)}
        />
      </Modal>

      {/* Confirm Delete Modal */}
      <Modal
        open={showConfirmDelete}
        onClose={() => setShowConfirmDelete(false)}
        title={`Konfirmasi Hapus ${deleteType === "program" ? "Program" : "Afiliator"}`}
        size="sm"
        footer={
          <div className="flex justify-end space-x-2">
            <Button variant="outline" onClick={() => setShowConfirmDelete(false)}>
              Batal
            </Button>
            <Button variant="danger" onClick={confirmDelete}>
              Hapus
            </Button>
          </div>
        }
      >
        <Text className="text-gray-700 dark:text-gray-300">
          {deleteType === "program" 
            ? "Apakah Anda yakin ingin menghapus program afiliasi ini? Tindakan ini tidak dapat dibatalkan."
            : "Apakah Anda yakin ingin menghapus afiliator ini? Semua data referral dan komisi juga akan dihapus. Tindakan ini tidak dapat dibatalkan."}
        </Text>
      </Modal>
    </div>
  );
};

export default AffiliatesManagement;

/== pages/cms/monetization/bundles.tsx
import React, { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { DashboardBundleLayout } from '../../../components/templates/DashboardBundleLayout';
import { BundlesList } from '../../../components/organisms/BundlesList';
import { BundleForm } from '../../../components/organisms/BundleForm';
import { BundleStatistics } from '../../../components/organisms/BundleStatistics';
import  Button  from '../../../components/atoms/Button';
import useBundleStore, { Bundle } from '../../../store/useBundleStore';
import BundlesManagement from '../../../classes/BundlesManagement';

enum View {
  LIST = 'list',
  CREATE = 'create',
  EDIT = 'edit',
  DETAILS = 'details',
}

const BundlesPage: React.FC = () => {
  const navigate = useNavigate();
  const [currentView, setCurrentView] = useState<View>(View.LIST);
  const { bundles, courses, selectedBundle, stats, isLoading, error, fetchBundles, fetchCourses, fetchBundleStats } = useBundleStore();
  const bundlesManager = BundlesManagement.getInstance();

  useEffect(() => {
    fetchBundles();
    fetchCourses();
  }, [fetchBundles, fetchCourses]);

  const handleCreateBundle = async (bundle: Omit<Bundle, 'id' | 'createdAt' | 'updatedAt'>) => {
    await bundlesManager.createBundle(bundle);
    setCurrentView(View.LIST);
  };

  const handleUpdateBundle = async (id: string, bundle: Partial<Bundle>) => {
    await bundlesManager.updateBundle(id, bundle);
    setCurrentView(View.LIST);
  };

  const handleDeleteBundle = async (id: string) => {
    if (window.confirm('Are you sure you want to delete this bundle?')) {
      await bundlesManager.deleteBundle(id);
    }
  };

  const handleViewBundle = (id: string) => {
    bundlesManager.selectBundle(id);
    fetchBundleStats(id);
    setCurrentView(View.DETAILS);
  };

  const handleEditBundle = (id: string) => {
    bundlesManager.selectBundle(id);
    setCurrentView(View.EDIT);
  };

  const renderView = () => {
    switch (currentView) {
      case View.CREATE:
        return (
          <BundleForm
            courses={courses}
            onSubmit={handleCreateBundle}
            isLoading={isLoading}
          />
        );
      case View.EDIT:
        return selectedBundle ? (
          <BundleForm
            courses={courses}
            initialData={selectedBundle}
            onSubmit={(bundle) => handleUpdateBundle(selectedBundle.id, bundle)}
            isLoading={isLoading}
          />
        ) : (
          <div>Loading...</div>
        );
      case View.DETAILS:
        return selectedBundle ? (
          <div className="space-y-6">
            <div className="flex justify-between items-center">
              <h2 className="text-xl font-semibold text-gray-900">{selectedBundle.title}</h2>
              <Button variant="primary" onClick={() => handleEditBundle(selectedBundle.id)}>
                Edit Bundle
              </Button>
            </div>
            
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div className="md:col-span-2">
                <div className="bg-gray-800 rounded-lg shadow-sm border p-4 mb-6">
                  <div className="mb-4">
                    <h3 className="text-lg font-medium text-gray-900 mb-2">Bundle Details</h3>
                    <p className="text-gray-600">{selectedBundle.description}</p>
                  </div>
                  
                  <div className="grid grid-cols-2 gap-4">
                    <div>
                      <div className="text-sm text-gray-500">Original Price</div>
                      <div className="text-lg font-medium line-through">${selectedBundle.originalPrice.toFixed(2)}</div>
                    </div>
                    <div>
                      <div className="text-sm text-gray-500">Bundle Price</div>
                      <div className="text-lg font-medium text-blue-600">${selectedBundle.bundlePrice.toFixed(2)}</div>
                    </div>
                    <div>
                      <div className="text-sm text-gray-500">Discount</div>
                      <div className="text-lg font-medium">{selectedBundle.discountPercentage}%</div>
                    </div>
                    <div>
                      <div className="text-sm text-gray-500">Access Duration</div>
                      <div className="text-lg font-medium">
                        {selectedBundle.accessDuration === 'lifetime' 
                          ? 'Lifetime' 
                          : `${selectedBundle.accessDuration} days`}
                      </div>
                    </div>
                  </div>
                </div>
                
                <div className="bg-white dark:bg-dark-800 dark:bg-dark-800 rounded-lg shadow-sm border p-4">
                  <h3 className="text-lg font-medium text-gray-900 mb-4">Courses in Bundle</h3>
                  <ul className="divide-y divide-gray-200">
                    {selectedBundle.courses.map((courseId) => {
                      const course = courses.find(c => c.id === courseId);
                      return course ? (
                        <li key={course.id} className="py-3 flex justify-between items-center">
                          <div>
                            <div className="font-medium">{course.title}</div>
                            <div className="text-sm text-gray-500">{course.level} · {course.duration} hours</div>
                          </div>
                          <div className="text-gray-600">${course.price.toFixed(2)}</div>
                        </li>
                      ) : null;
                    })}
                  </ul>
                </div>
              </div>
              
              <div>
                <BundleStatistics
                  stats={stats.find(s => s.bundleId === selectedBundle.id) || {
                    id: '',
                    bundleId: selectedBundle.id,
                    purchases: 0,
                    completionRate: 0,
                    averageCompletionTime: 0,
                    mostPopularCourse: '',
                    revenue: 0,
                    createdAt: new Date(),
                  }}
                  isLoading={isLoading}
                />
              </div>
            </div>
          </div>
        ) : (
          <div>Loading...</div>
        );
      case View.LIST:
      default:
        return (
          <BundlesList
            bundles={bundles}
            onEdit={handleEditBundle}
            onDelete={handleDeleteBundle}
            onView={handleViewBundle}
            isLoading={isLoading}
          />
        );
    }
  };

  const renderActions = () => {
    switch (currentView) {
      case View.LIST:
        return (
          <Button onClick={() => setCurrentView(View.CREATE)}>
            Create Bundle
          </Button>
        );
      case View.CREATE:
      case View.EDIT:
        return (
          <Button variant="outline" onClick={() => setCurrentView(View.LIST)}>
            Cancel
          </Button>
        );
      case View.DETAILS:
        return (
          <Button variant="outline" onClick={() => setCurrentView(View.LIST)}>
            Back to List
          </Button>
        );
      default:
        return null;
    }
  };

  return (
    <DashboardBundleLayout
      title={
        currentView === View.CREATE
          ? 'Create Bundle'
          : currentView === View.EDIT
          ? 'Edit Bundle'
          : currentView === View.DETAILS
          ? 'Bundle Details'
          : 'Course Bundles'
      }
      actions={renderActions()}
    >
      {error && (
        <div className="bg-red-50 border-l-4 border-red-400 p-4 mb-6">
          <div className="flex">
            <div className="flex-shrink-0">
              <svg className="h-5 w-5 text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clipRule="evenodd" />
              </svg>
            </div>
            <div className="ml-3">
              <p className="text-sm text-red-700">{error}</p>
            </div>
          </div>
        </div>
      )}
      {renderView()}
    </DashboardBundleLayout>
  );
};

export default BundlesPage;

/== pages/cms/monetization/coupons.tsx
import React, { useState } from "react";
import Button from "../../../components/atoms/Button";
import Card from "../../../components/atoms/Card";
import Heading from "../../../components/atoms/Heading";
import Input from "../../../components/atoms/Input";
import Modal from "../../../components/atoms/Modal";

const CouponsManagement: React.FC = () => {
  // State untuk mengelola kupon
  const [coupons, setCoupons] = useState([
    {
      id: 1,
      code: "HEMAT50",
      discountType: "percentage",
      discountValue: 50,
      validFrom: "2024-01-01",
      validUntil: "2024-12-31",
      usageLimit: 100,
      usageCount: 45,
      userLimit: 1,
      targetUser: "all",
      targetProduct: "all",
      minimumPurchase: 100000,
      status: "active"
    },
    {
      id: 2,
      code: "WELCOME10",
      discountType: "percentage",
      discountValue: 10,
      validFrom: "2024-01-01",
      validUntil: "2024-06-30",
      usageLimit: 500,
      usageCount: 123,
      userLimit: 1,
      targetUser: "new",
      targetProduct: "all",
      minimumPurchase: 0,
      status: "active"
    },
    {
      id: 3,
      code: "FLAT50K",
      discountType: "fixed",
      discountValue: 50000,
      validFrom: "2024-03-01",
      validUntil: "2024-05-31",
      usageLimit: 200,
      usageCount: 87,
      userLimit: 1,
      targetUser: "all",
      targetProduct: "premium",
      minimumPurchase: 200000,
      status: "active"
    }
  ]);

  // State untuk modal
  const [showModal, setShowModal] = useState(false);
  const [editingCoupon, setEditingCoupon] = useState<any>(null);
  const [formData, setFormData] = useState({
    code: "",
    discountType: "percentage",
    discountValue: 0,
    validFrom: "",
    validUntil: "",
    usageLimit: 0,
    userLimit: 1,
    targetUser: "all",
    targetProduct: "all",
    minimumPurchase: 0,
    status: "active"
  });

  // Handler untuk perubahan form
  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {
    const { name, value } = e.target;
    setFormData(prev => ({
      ...prev,
      [name]: name === "discountValue" || name === "usageLimit" || name === "userLimit" || name === "minimumPurchase" 
        ? parseInt(value) || 0 
        : value
    }));
  };

  // Handler untuk membuka modal tambah kupon
  const handleAddCoupon = () => {
    setEditingCoupon(null);
    setFormData({
      code: "",
      discountType: "percentage",
      discountValue: 0,
      validFrom: new Date().toISOString().split('T')[0],
      validUntil: "",
      usageLimit: 0,
      userLimit: 1,
      targetUser: "all",
      targetProduct: "all",
      minimumPurchase: 0,
      status: "active"
    });
    setShowModal(true);
  };

  // Handler untuk membuka modal edit kupon
  const handleEditCoupon = (coupon: any) => {
    setEditingCoupon(coupon);
    setFormData({
      ...coupon
    });
    setShowModal(true);
  };

  // Handler untuk menyimpan kupon
  const handleSaveCoupon = () => {
    if (editingCoupon) {
      // Update kupon yang sudah ada
      setCoupons(coupons.map(c => c.id === editingCoupon.id ? { ...formData, id: editingCoupon.id } : c));
    } else {
      // Tambah kupon baru
      setCoupons([...coupons, { ...formData, id: Date.now(), usageCount: 0 }]);
    }
    setShowModal(false);
  };

  // Handler untuk menghapus kupon
  const handleDeleteCoupon = (id: number) => {
    if (window.confirm("Apakah Anda yakin ingin menghapus kupon ini?")) {
      setCoupons(coupons.filter(c => c.id !== id));
    }
  };

  // Format tanggal untuk tampilan
  const formatDate = (dateString: string) => {
    const date = new Date(dateString);
    return date.toLocaleDateString('id-ID', { day: '2-digit', month: '2-digit', year: 'numeric' });
  };

  // Format diskon untuk tampilan
  const formatDiscount = (type: string, value: number) => {
    return type === "percentage" ? `${value}%` : `Rp ${value.toLocaleString('id-ID')}`;
  };

  return (
    <div className="p-6">
      <div className="flex justify-between items-center mb-6">
        <Heading level={2}>Diskon & Kupon</Heading>
        <Button 
          onClick={handleAddCoupon} 
          variant="primary"
          className="flex items-center"
        >
          Tambah Kupon
        </Button>
      </div>

      {/* Statistik Kupon */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
        <Card className="p-4">
          <div className="text-sm text-gray-500 mb-1">Total Kupon Aktif</div>
          <div className="text-2xl font-bold">{coupons.filter(c => c.status === "active").length}</div>
        </Card>
        <Card className="p-4">
          <div className="text-sm text-gray-500 mb-1">Total Penggunaan</div>
          <div className="text-2xl font-bold">{coupons.reduce((sum, c) => sum + c.usageCount, 0)}</div>
        </Card>
        <Card className="p-4">
          <div className="text-sm text-gray-500 mb-1">Kupon Akan Berakhir</div>
          <div className="text-2xl font-bold">
            {coupons.filter(c => {
              const now = new Date();
              const expiry = new Date(c.validUntil);
              const diffDays = Math.ceil((expiry.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));
              return diffDays <= 30 && diffDays > 0 && c.status === "active";
            }).length}
          </div>
        </Card>
      </div>

      {/* Tabel Kupon */}
      <Card className="overflow-hidden">
        <div className="overflow-x-auto">
          <table className="min-w-full divide-y divide-gray-200">
            <thead className="bg-gray-600 text-white">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-200 uppercase tracking-wider">Kode Kupon</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-200 uppercase tracking-wider">Diskon</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-200 uppercase tracking-wider">Periode</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-200 uppercase tracking-wider">Penggunaan</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-200 uppercase tracking-wider">Target</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-200 uppercase tracking-wider">Status</th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-200 uppercase tracking-wider">Aksi</th>
              </tr>
            </thead>
            <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200">
              {coupons.map((coupon) => (
                <tr key={coupon.id} className="hover:bg-gray-800">
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="font-medium text-gray-900 dark:text-white">{coupon.code}</div>
                    {coupon.minimumPurchase > 0 && (
                      <div className="text-xs text-gray-500">Min. Rp {coupon.minimumPurchase.toLocaleString('id-ID')}</div>
                    )}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <span className="px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800">
                      {formatDiscount(coupon.discountType, coupon.discountValue)}
                    </span>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div>{formatDate(coupon.validFrom)} - {formatDate(coupon.validUntil)}</div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div>{coupon.usageCount} / {coupon.usageLimit || "∞"}</div>
                    <div className="text-xs text-gray-500">Max {coupon.userLimit || "∞"}/pengguna</div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div>
                      {coupon.targetUser === "all" ? "Semua Pengguna" : "Pengguna Baru"}
                    </div>
                    <div className="text-xs text-gray-500">
                      {coupon.targetProduct === "all" ? "Semua Produk" : "Produk Premium"}
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <span className={`px-2 py-1 text-xs font-medium rounded-full ${coupon.status === "active" ? "bg-green-100 text-green-800" : "bg-gray-100 text-gray-800"}`}>
                      {coupon.status === "active" ? "Aktif" : "Tidak Aktif"}
                    </span>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <Button 
                      onClick={() => handleEditCoupon(coupon)} 
                      variant="outline" 
                      size="sm"
                      className="mr-2"
                    >
                      Edit
                    </Button>
                    <Button 
                      onClick={() => handleDeleteCoupon(coupon.id)} 
                      variant="outline" 
                      size="sm"
                      className="text-red-600 border-red-300 hover:bg-red-50"
                    >
                      Hapus
                    </Button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>

      {/* Modal Form */}
      <Modal 
        isOpen={showModal} 
        onClose={() => setShowModal(false)}
        title={editingCoupon ? "Edit Kupon" : "Tambah Kupon"}
        size="lg"
      >
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <Input 
            label="Kode Kupon" 
            name="code"
            value={formData.code} 
            onChange={handleChange}
            placeholder="Contoh: HEMAT50" 
          />
          
          <div className="w-full">
            <label className="block text-sm font-medium text-gray-700 mb-1">Tipe Diskon</label>
            <select 
              name="discountType" 
              value={formData.discountType}
              onChange={handleChange}
              className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
              <option value="percentage">Persentase (%)</option>
              <option value="fixed">Nominal Tetap (Rp)</option>
            </select>
          </div>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <Input 
            label={formData.discountType === "percentage" ? "Nilai Diskon (%)" : "Nilai Diskon (Rp)"} 
            name="discountValue"
            type="number" 
            value={formData.discountValue} 
            onChange={handleChange}
            placeholder={formData.discountType === "percentage" ? "Contoh: 50" : "Contoh: 50000"} 
          />
          
          <Input 
            label="Minimum Pembelian (Rp)" 
            name="minimumPurchase"
            type="number" 
            value={formData.minimumPurchase} 
            onChange={handleChange}
            placeholder="Contoh: 100000" 
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <Input 
            label="Berlaku Dari" 
            name="validFrom"
            type="date" 
            value={formData.validFrom} 
            onChange={handleChange}
          />
          
          <Input 
            label="Berlaku Sampai" 
            name="validUntil"
            type="date" 
            value={formData.validUntil} 
            onChange={handleChange}
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <Input 
            label="Batas Penggunaan Total" 
            name="usageLimit"
            type="number" 
            value={formData.usageLimit} 
            onChange={handleChange}
            placeholder="0 = tidak terbatas" 
          />
          
          <Input 
            label="Batas Per Pengguna" 
            name="userLimit"
            type="number" 
            value={formData.userLimit} 
            onChange={handleChange}
            placeholder="0 = tidak terbatas" 
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div className="w-full">
            <label className="block text-sm font-medium text-gray-700 mb-1">Target Pengguna</label>
            <select 
              name="targetUser" 
              value={formData.targetUser}
              onChange={handleChange}
              className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
              <option value="all">Semua Pengguna</option>
              <option value="new">Pengguna Baru</option>
            </select>
          </div>
          
          <div className="w-full">
            <label className="block text-sm font-medium text-gray-700 mb-1">Target Produk</label>
            <select 
              name="targetProduct" 
              value={formData.targetProduct}
              onChange={handleChange}
              className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
              <option value="all">Semua Produk</option>
              <option value="premium">Produk Premium</option>
            </select>
          </div>
        </div>

        <div className="mb-4">
          <label className="block text-sm font-medium text-gray-700 mb-1">Status</label>
          <select 
            name="status" 
            value={formData.status}
            onChange={handleChange}
            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
          >
            <option value="active">Aktif</option>
            <option value="inactive">Tidak Aktif</option>
          </select>
        </div>

        <div className="flex justify-end gap-2 mt-6">
          <Button 
            onClick={() => setShowModal(false)} 
            variant="outline"
          >
            Batal
          </Button>
          <Button 
            onClick={handleSaveCoupon} 
            variant="primary"
          >
            Simpan
          </Button>
        </div>
      </Modal>
    </div>
  );
};

export default CouponsManagement;

/== pages/cms/monetization/index.tsx
import React from "react";
import { useNavigate } from "react-router-dom";
import { CreditCard, Tag, Gift, Package, Users, BarChart } from "lucide-react";
import Card from "../../../components/atoms/Card";

const MonetizationIndex: React.FC = () => {
  const navigate = useNavigate();
  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">Monetisasi & Komersial</h1>
      </div>
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <Card className="p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors duration-200" onClick={() => navigate("/cms/monetization/subscription")}>
          <div className="flex items-center mb-4">
            <CreditCard className="h-8 w-8 text-brand-green mr-3" />
            <h3 className="text-lg font-semibold text-gray-900 dark:text-white">Manajemen Langganan</h3>
          </div>
          <p className="text-gray-600 dark:text-gray-300">Kelola model langganan dan paket berlangganan.</p>
        </Card>
        <Card className="p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors duration-200" onClick={() => navigate("/cms/monetization/coupons")}>
          <div className="flex items-center mb-4">
            <Tag className="h-8 w-8 text-brand-green mr-3" />
            <h3 className="text-lg font-semibold text-gray-900 dark:text-white">Diskon & Kupon</h3>
          </div>
          <p className="text-gray-600 dark:text-gray-300">Buat dan kelola promosi, diskon, serta kupon.</p>
        </Card>
        <Card className="p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors duration-200" onClick={() => navigate("/cms/monetization/pricing")}>
          <div className="flex items-center mb-4">
            <Gift className="h-8 w-8 text-brand-green mr-3" />
            <h3 className="text-lg font-semibold text-gray-900 dark:text-white">Manajemen Paket Harga</h3>
          </div>
          <p className="text-gray-600 dark:text-gray-300">Kelola paket harga dan fitur layanan.</p>
        </Card>
        <Card className="p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors duration-200" onClick={() => navigate("/cms/monetization/bundles")}>
          <div className="flex items-center mb-4">
            <Package className="h-8 w-8 text-brand-green mr-3" />
            <h3 className="text-lg font-semibold text-gray-900 dark:text-white">Bundling Kursus</h3>
          </div>
          <p className="text-gray-600 dark:text-gray-300">Buat dan jual paket kursus.</p>
        </Card>
        <Card className="p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors duration-200" onClick={() => navigate("/cms/monetization/affiliates")}>
          <div className="flex items-center mb-4">
            <Users className="h-8 w-8 text-brand-green mr-3" />
            <h3 className="text-lg font-semibold text-gray-900 dark:text-white">Afiliasi & Referral</h3>
          </div>
          <p className="text-gray-600 dark:text-gray-300">Kelola program afiliasi dan referral.</p>
        </Card>
        <Card className="p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors duration-200" onClick={() => navigate("/cms/monetization/revenue-analytics")}>
          <div className="flex items-center mb-4">
            <BarChart className="h-8 w-8 text-brand-green mr-3" />
            <h3 className="text-lg font-semibold text-gray-900 dark:text-white">Analitik Pendapatan</h3>
          </div>
          <p className="text-gray-600 dark:text-gray-300">Lihat insight dan tren pendapatan.</p>
        </Card>
      </div>
    </div>
  );
};

export default MonetizationIndex;

/== pages/cms/monetization/revenue-analytics.tsx
import React from 'react';
import RevenueAnalytics from '../../../components/organisms/RevenueAnalytics';

const RevenueAnalyticsPage = () => {
  return (
    <div className="revenue-analytics-container">
      <header className="analytics-header">
        <h1>Analitik Pendapatan</h1>
        <div className="header-actions">
          <button className="settings-button">Pengaturan Analitik</button>
          <button className="export-button">Ekspor Data</button>
        </div>
      </header>
      <main>
        <RevenueAnalytics />
      </main>
    </div>
  );
};

export default RevenueAnalyticsPage;

/== pages/cms/monetization/subscription/EditSubscriptionPage.tsx
import React, { useState, useEffect } from 'react';
import { useNavigate, useParams } from 'react-router-dom';
import Button from '../../../../components/atoms/Button';
import Heading from '../../../../components/atoms/Heading';
import Input from '../../../../components/atoms/Input';
import Text from '../../../../components/atoms/Text';
import Toast, { ToastType } from '../../../../components/atoms/Toast';
import { useSubscriptionStore, Subscription } from '../../../../store/subscriptionStore'; // Adjust the import path

const EditSubscriptionPage: React.FC = () => {
  const navigate = useNavigate();
  const { id } = useParams<{ id: string }>();
  const { subscriptions, updateSubscription } = useSubscriptionStore();
  
  const [toast, setToast] = useState<{ show: boolean; message: string; type: ToastType }>({ 
    show: false, message: '', type: 'info' 
  });
  
  const [editForm, setEditForm] = useState<Subscription>({
    id: '',
    name: '',
    price: 0,
    duration: 1,
    features: []
  });

  // Load subscription data when component mounts
  useEffect(() => {
    if (id) {
      const subscription = subscriptions.find(sub => sub.id === id);
      if (subscription) {
        setEditForm({
          ...subscription,
          features: [...subscription.features]
        });
      } else {
        // Subscription not found, show error and navigate back
        setToast({ 
          show: true, 
          message: 'Paket langganan tidak ditemukan', 
          type: 'error' 
        });
        setTimeout(() => {
          navigate('/cms/monetization/subscription');
        }, 2000);
      }
    }
  }, [id, subscriptions, navigate]);

  const handleSave = () => {
    updateSubscription(editForm);
    setToast({ 
      show: true, 
      message: 'Paket langganan berhasil diperbarui', 
      type: 'success' 
    });
    setTimeout(() => {
      navigate('/subscriptions');
    }, 1500);
  };

  const handleCancel = () => {
    navigate('/subscriptions');
  };

  const handleAddFeature = () => {
    setEditForm(prev => ({
      ...prev,
      features: [...prev.features, { name: '', included: true }]
    }));
  };

  const handleFeatureChange = (index: number, field: 'name' | 'included', value: string | boolean) => {
    const newFeatures = [...editForm.features];
    newFeatures[index] = { ...newFeatures[index], [field]: value };
    setEditForm(prev => ({ ...prev, features: newFeatures }));
  };
  
  return (
    <div className="p-6 max-w-3xl mx-auto">
      <div className="flex justify-between items-center mb-6">
        <Heading level={2}>Edit Paket Langganan</Heading>
      </div>

      <div className="bg-white rounded-lg shadow-md p-6">
        <div className="space-y-4">
          <Input
            label="Nama Paket"
            value={editForm.name}
            onChange={e => setEditForm(prev => ({ ...prev, name: e.target.value }))}
          />
          
          <Input
            label="Harga"
            type="number"
            value={editForm.price}
            onChange={e => setEditForm(prev => ({ ...prev, price: Number(e.target.value) }))}
          />
          
          <Input
            label="Durasi (bulan)"
            type="number"
            value={editForm.duration}
            onChange={e => setEditForm(prev => ({ ...prev, duration: Number(e.target.value) }))}
          />
          
          <div className="form-control">
            <label className="flex items-center space-x-2">
              <input
                type="checkbox"
                checked={editForm.isPopular || false}
                onChange={e => setEditForm(prev => ({ ...prev, isPopular: e.target.checked }))}
                className="checkbox"
              />
              <span>Paket Populer</span>
            </label>
          </div>
          
          <div>
            <Text className="font-medium mb-2">Fitur-fitur</Text>
            {editForm.features.map((feature, index) => (
              <div key={index} className="flex items-center space-x-2 mb-2">
                <Input
                  value={feature.name}
                  onChange={e => handleFeatureChange(index, 'name', e.target.value)}
                  placeholder="Nama fitur"
                />
                <label className="flex items-center">
                  <input
                    type="checkbox"
                    checked={feature.included}
                    onChange={e => handleFeatureChange(index, 'included', e.target.checked)}
                    className="mr-2"
                  />
                  <span>Termasuk</span>
                </label>
              </div>
            ))}
            <Button
              onClick={handleAddFeature}
              className="mt-2 bg-gray-500 hover:bg-gray-600"
            >
              Tambah Fitur
            </Button>
          </div>

          <div className="flex justify-end space-x-2 mt-6">
            <Button
              onClick={handleCancel}
              className="bg-gray-500 hover:bg-gray-600"
            >
              Batal
            </Button>
            <Button
              onClick={handleSave}
              className="bg-blue-500 hover:bg-blue-600"
            >
              Simpan
            </Button>
          </div>
        </div>
      </div>

      {toast.show && (
        <Toast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast({ ...toast, show: false })}
        />
      )}
    </div>
  );
};

export default EditSubscriptionPage;

/== pages/cms/monetization/subscription/SubscriptionManagement.tsx
import React, { useState, useEffect } from 'react';
import Button from '../../../../components/atoms/Button';
import Heading from '../../../../components/atoms/Heading';
import Toast, { ToastType } from '../../../../components/atoms/Toast';
import SubscriptionList from '../../../../components/organisms/SubscriptionList';
import { v4 as uuidv4 } from 'uuid';
import { useSubscriptionStore } from '../../../../store/subscriptionStore';

const SubscriptionManagement: React.FC = () => {
  const { subscriptions, addSubscription, initializeStore } = useSubscriptionStore();
  const [toast, setToast] = useState<{ show: boolean; message: string; type: ToastType }>({ 
    show: false, message: '', type: 'info' 
  });
  
  // Initialize store with sample data if empty
  useEffect(() => {
    if (subscriptions.length === 0) {
      initializeStore();
    }
  }, [subscriptions.length, initializeStore]);

  const [newSubscription, setNewSubscription] = useState({
    name: '',
    price: 0,
    duration: 1,
    features: [] as { name: string; included: boolean }[]
  });

  const showToast = (message: string, type: ToastType) => {
    setToast({ show: true, message, type });
  };

  const handleAddSubscription = () => {
    // Create a new subscription object with proper structure for the store
    const subscription = {
      id: uuidv4(),
      type: 'custom', // Or any default type
      title: 'New Subscription', // Default title
      subtitle: 'Custom plan', // Default subtitle
      monthlyPrice: 0, // Default monthly price
      yearlyPrice: 0, // Default yearly price
      buttonText: 'Subscribe', // Default button text
      features: [
        { name: 'Basic feature', included: true }
      ],
      isPopular: false
    };
    
    // Add the subscription to the store
    addSubscription(subscription);
    
    // Reset the form state
    setNewSubscription({ 
      name: '', 
      price: 0, 
      duration: 1, 
      features: [] 
    });
    
    // Show success message
    showToast('Paket langganan berhasil ditambahkan', 'success');
  };

  return (
    <div className="p-6">
      <div className="flex justify-between items-center mb-6">
        <Heading level={2}>Manajemen Langganan</Heading>
        {/* Fixed the onClick handler */}
        <Button onClick={handleAddSubscription}>Tambah Paket Langganan</Button>
      </div>

      <SubscriptionList />

      {toast.show && (
        <Toast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast({ ...toast, show: false })}
        />
      )}
    </div>
  );
};

export default SubscriptionManagement;

/== pages/cms/user-management/AdminUserActivity.tsx
import React, { useState } from 'react';
import { Search, Filter, Activity, Clock, User, BookOpen, Award } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';

const AdminUserActivity = () => {
  const [searchQuery, setSearchQuery] = useState('');
  const [selectedFilter, setSelectedFilter] = useState('all');

  const mockActivities = [
    {
      id: '1',
      user: 'Sarah Chen',
      action: 'completed_course',
      details: 'Completed Python Basics course',
      timestamp: '2024-03-20 14:30',
      type: 'achievement'
    },
    {
      id: '2',
      user: 'Michael Rodriguez',
      action: 'started_course',
      details: 'Started JavaScript Fundamentals course',
      timestamp: '2024-03-20 13:15',
      type: 'learning'
    },
    {
      id: '3',
      user: 'Emma Wilson',
      action: 'earned_certificate',
      details: 'Earned React Advanced Certificate',
      timestamp: '2024-03-20 12:00',
      type: 'achievement'
    }
  ];

  const getActivityIcon = (type: string) => {
    switch (type) {
      case 'achievement':
        return <Award className="h-5 w-5 text-green-500" />;
      case 'learning':
        return <BookOpen className="h-5 w-5 text-blue-500" />;
      default:
        return <Activity className="h-5 w-5 text-gray-500" />;
    }
  };

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">User Activity</h1>
        <div className="flex space-x-4">
          <select
            value={selectedFilter}
            onChange={(e) => setSelectedFilter(e.target.value)}
            className="border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white px-4 py-2"
          >
            <option value="all">All Activities</option>
            <option value="achievement">Achievements</option>
            <option value="learning">Learning</option>
          </select>
          <Button
            variant="outline"
            className="flex items-center"
          >
            <Filter className="h-5 w-5 mr-2" />
            Filter
          </Button>
        </div>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search activities..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="divide-y divide-gray-200 dark:divide-gray-700">
          {mockActivities.map((activity) => (
            <div key={activity.id} className="p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50">
              <div className="flex items-start">
                <div className="flex-shrink-0">
                  {getActivityIcon(activity.type)}
                </div>
                <div className="ml-4 flex-1">
                  <div className="flex items-center justify-between">
                    <div className="flex items-center">
                      <User className="h-5 w-5 text-gray-400 mr-2" />
                      <span className="font-medium text-gray-900 dark:text-white">
                        {activity.user}
                      </span>
                    </div>
                    <div className="flex items-center text-sm text-gray-500 dark:text-gray-400">
                      <Clock className="h-4 w-4 mr-1" />
                      {activity.timestamp}
                    </div>
                  </div>
                  <p className="mt-1 text-gray-600 dark:text-gray-300">
                    {activity.details}
                  </p>
                </div>
              </div>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );
};

export default AdminUserActivity;

/== pages/cms/user-management/AdminUserProgress.tsx
import React, { useState } from 'react';
import { Search, Filter, TrendingUp, Award, Clock, BookOpen, Star } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';
import Progress from '../../../components/atoms/Progress';

const AdminUserProgress = () => {
  const [searchQuery, setSearchQuery] = useState('');
  const [selectedFilter, setSelectedFilter] = useState('all');

  const mockProgress = [
    {
      id: '1',
      user: 'Sarah Chen',
      course: 'Python Basics',
      progress: 85,
      completedLessons: 17,
      totalLessons: 20,
      lastActivity: '2024-03-20',
      grade: 'A'
    },
    {
      id: '2',
      user: 'Michael Rodriguez',
      course: 'JavaScript Fundamentals',
      progress: 60,
      completedLessons: 12,
      totalLessons: 20,
      lastActivity: '2024-03-19',
      grade: 'B'
    },
    {
      id: '3',
      user: 'Emma Wilson',
      course: 'React Advanced',
      progress: 100,
      completedLessons: 15,
      totalLessons: 15,
      lastActivity: '2024-03-18',
      grade: 'A+'
    }
  ];

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">User Progress</h1>
        <div className="flex space-x-4">
          <select
            value={selectedFilter}
            onChange={(e) => setSelectedFilter(e.target.value)}
            className="border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white px-4 py-2"
          >
            <option value="all">All Courses</option>
            <option value="in_progress">In Progress</option>
            <option value="completed">Completed</option>
          </select>
          <Button
            variant="outline"
            className="flex items-center"
          >
            <Filter className="h-5 w-5 mr-2" />
            Filter
          </Button>
        </div>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search users or courses..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="divide-y divide-gray-200 dark:divide-gray-700">
          {mockProgress.map((item) => (
            <div key={item.id} className="p-6">
              <div className="flex items-start justify-between mb-4">
                <div>
                  <div className="flex items-center">
                    <h3 className="font-medium text-gray-900 dark:text-white">{item.user}</h3>
                    <span className="mx-2 text-gray-300 dark:text-gray-600">•</span>
                    <span className="text-gray-500 dark:text-gray-400">{item.course}</span>
                  </div>
                  <div className="flex items-center mt-1 text-sm text-gray-500 dark:text-gray-400">
                    <Clock className="h-4 w-4 mr-1" />
                    Last active: {item.lastActivity}
                  </div>
                </div>
                <div className="flex items-center">
                  <div className="text-right mr-4">
                    <div className="text-sm font-medium text-gray-900 dark:text-white">
                      Grade
                    </div>
                    <div className="text-2xl font-bold text-brand-green">
                      {item.grade}
                    </div>
                  </div>
                  {item.progress === 100 && (
                    <Award className="h-6 w-6 text-yellow-400" />
                  )}
                </div>
              </div>

              <div className="space-y-4">
                <div>
                  <div className="flex justify-between mb-1">
                    <div className="flex items-center text-sm text-gray-500 dark:text-gray-400">
                      <TrendingUp className="h-4 w-4 mr-1" />
                      Overall Progress
                    </div>
                    <span className="text-sm font-medium text-gray-900 dark:text-white">
                      {item.progress}%
                    </span>
                  </div>
                  <Progress value={item.progress} color="primary" />
                </div>

                <div className="grid grid-cols-3 gap-4">
                  <div className="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3">
                    <div className="flex items-center text-sm text-gray-500 dark:text-gray-400 mb-1">
                      <BookOpen className="h-4 w-4 mr-1" />
                      Lessons
                    </div>
                    <div className="font-medium text-gray-900 dark:text-white">
                      {item.completedLessons}/{item.totalLessons}
                    </div>
                  </div>

                  <div className="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3">
                    <div className="flex items-center text-sm text-gray-500 dark:text-gray-400 mb-1">
                      <Star className="h-4 w-4 mr-1" />
                      Achievements
                    </div>
                    <div className="font-medium text-gray-900 dark:text-white">
                      {Math.floor(item.progress / 20)}
                    </div>
                  </div>

                  <div className="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3">
                    <div className="flex items-center text-sm text-gray-500 dark:text-gray-400 mb-1">
                      <Clock className="h-4 w-4 mr-1" />
                      Time Spent
                    </div>
                    <div className="font-medium text-gray-900 dark:text-white">
                      {Math.floor(item.completedLessons * 1.5)}h
                    </div>
                  </div>
                </div>
              </div>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );
};

export default AdminUserProgress;

/== pages/cms/user-management/AdminUserRoles.tsx
import React, { useState } from 'react';
import { Plus, Search, Edit, Trash, Shield, Users } from 'lucide-react';
import Card from '../../../components/atoms/Card';
import Button from '../../../components/atoms/Button';

const AdminUserRoles = () => {
  const [searchQuery, setSearchQuery] = useState('');
  const [roles, setRoles] = useState([
    {
      id: '1',
      name: 'Admin',
      description: 'Full system access',
      permissions: ['manage_users', 'manage_courses', 'manage_content', 'manage_settings'],
      usersCount: 2
    },
    {
      id: '2',
      name: 'Instructor',
      description: 'Course management and content creation',
      permissions: ['manage_courses', 'manage_content'],
      usersCount: 8
    },
    {
      id: '3',
      name: 'Student',
      description: 'Course access and learning',
      permissions: ['access_courses', 'submit_assignments'],
      usersCount: 245
    }
  ]);

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">User Roles</h1>
        <Button
          variant="primary"
          className="bg-brand-green hover:bg-brand-green/90"
        >
          <Plus className="h-5 w-5 mr-2" />
          Add Role
        </Button>
      </div>

      <Card className="overflow-hidden">
        <div className="p-4 border-b border-gray-200 dark:border-gray-700">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
            <input
              type="text"
              placeholder="Search roles..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-green dark:bg-gray-700 dark:text-white"
            />
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-gray-50 dark:bg-gray-700">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Role
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Permissions
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Users
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody className="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
              {roles.map((role) => (
                <tr key={role.id}>
                  <td className="px-6 py-4">
                    <div className="flex items-center">
                      <Shield className="h-5 w-5 text-gray-400 mr-3" />
                      <div>
                        <div className="font-medium text-gray-900 dark:text-white">
                          {role.name}
                        </div>
                        <div className="text-sm text-gray-500 dark:text-gray-400">
                          {role.description}
                        </div>
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <div className="flex flex-wrap gap-2">
                      {role.permissions.map((permission, index) => (
                        <span
                          key={index}
                          className="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full"
                        >
                          {permission}
                        </span>
                      ))}
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <div className="flex items-center text-gray-500 dark:text-gray-400">
                      <Users className="h-5 w-5 mr-2" />
                      {role.usersCount} users
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <Button
                      variant="outline"
                      className="mr-2"
                    >
                      <Edit className="h-5 w-5" />
                    </Button>
                    <Button
                      variant="outline"
                      className="text-red-500 hover:text-red-600"
                      disabled={role.usersCount > 0}
                    >
                      <Trash className="h-5 w-5" />
                    </Button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>
    </div>
  );
};

export default AdminUserRoles;

/== pages/my-learning.tsx
import React, { useEffect, useState } from 'react';
import { Link } from 'react-router-dom';
import Badge from '../components/atoms/Badge';
import Button from '../components/atoms/Button';
import useBundleStore from '../store/useBundleStore';

interface UserProgress {
  bundleId: string;
  progress: number;
  lastAccessed: Date;
  coursesCompleted: number;
  totalCourses: number;
}

const MyLearningPage: React.FC = () => {
  const { bundles, courses, fetchBundles, fetchCourses, isLoading } = useBundleStore();
  const [userBundles, setUserBundles] = useState<string[]>([]);
  const [progress, setProgress] = useState<UserProgress[]>([]);
  const [activeTab, setActiveTab] = useState<'bundles' | 'recommended'>('bundles');

  useEffect(() => {
    fetchBundles();
    fetchCourses();
  }, [fetchBundles, fetchCourses]);

  useEffect(() => {
    // Simulate fetching user's purchased bundles
    // In a real application, this would come from your API
    setTimeout(() => {
      if (bundles.length > 0) {
        // For demo purposes, let's assume the user has purchased the first two bundles
        const purchasedBundleIds = bundles.slice(0, 2).map(bundle => bundle.id);
        setUserBundles(purchasedBundleIds);
        
        // Generate random progress for each bundle
        const userProgress: UserProgress[] = purchasedBundleIds.map(bundleId => {
          const bundle = bundles.find(b => b.id === bundleId);
          const totalCourses = bundle?.courses.length || 0;
          const coursesCompleted = Math.floor(Math.random() * (totalCourses + 1));
          const progress = totalCourses > 0 ? (coursesCompleted / totalCourses) * 100 : 0;
          
          return {
            bundleId,
            progress,
            lastAccessed: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000), // Random date in the last week
            coursesCompleted,
            totalCourses,
          };
        });
        
        setProgress(userProgress);
      }
    }, 1000);
  }, [bundles]);

  const getUserBundles = () => {
    return bundles.filter(bundle => userBundles.includes(bundle.id));
  };

  const getBundleProgress = (bundleId: string) => {
    return progress.find(p => p.bundleId === bundleId);
  };

  const formatLastAccessedDate = (date: Date) => {
    const now = new Date();
    const diffMs = now.getTime() - date.getTime();
    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
    
    if (diffDays === 0) return 'Today';
    if (diffDays === 1) return 'Yesterday';
    if (diffDays < 7) return `${diffDays} days ago`;
    return date.toLocaleDateString();
  };

  if (isLoading) {
    return (
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="animate-pulse space-y-8">
          <div className="h-10 bg-gray-200 dark:bg-gray-700 rounded w-1/4"></div>
          <div className="h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/2"></div>
          
          {/* Tab skeleton */}
          <div className="flex space-x-2 border-b border-gray-200 dark:border-gray-700">
            <div className="h-10 bg-gray-200 dark:bg-gray-700 rounded w-32"></div>
            <div className="h-10 bg-gray-200 dark:bg-gray-700 rounded w-32 opacity-60"></div>
          </div>
          
          {/* Bundle card skeletons */}
          {[1, 2].map(i => (
            <div key={i} className="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden">
              <div className="md:flex">
                <div className="md:w-2/3 p-6 space-y-4">
                  <div className="h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4"></div>
                  <div className="h-4 bg-gray-200 dark:bg-gray-700 rounded w-full"></div>
                  <div className="h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4"></div>
                  <div className="h-2 bg-gray-200 dark:bg-gray-700 rounded w-full"></div>
                  <div className="h-10 bg-gray-200 dark:bg-gray-700 rounded w-1/3"></div>
                </div>
                <div className="md:w-1/3 bg-gray-50 dark:bg-gray-900 p-6 space-y-4">
                  <div className="h-5 bg-gray-200 dark:bg-gray-700 rounded w-1/2"></div>
                  {[1, 2, 3].map(j => (
                    <div key={j} className="h-16 bg-gray-200 dark:bg-gray-700 rounded"></div>
                  ))}
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    );
  }

  const userBundlesList = getUserBundles();
  const recommendedBundles = bundles
    .filter(bundle => !userBundles.includes(bundle.id) && bundle.isActive)
    .slice(0, 6);

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      {/* Header */}
      <div className="mb-8">
        <h1 className="text-3xl font-bold text-gray-900 dark:text-white mb-2">My Learning</h1>
        <p className="text-lg text-gray-600 dark:text-gray-400">Track your progress through courses and bundles</p>
      </div>
      
      {/* Tabs */}
      <div className="mb-8 border-b border-gray-200 dark:border-gray-700">
        <div className="flex space-x-8">
          <button
            onClick={() => setActiveTab('bundles')}
            className={`py-4 px-1 font-medium text-sm border-b-2 transition-colors duration-200 ease-in-out ${
              activeTab === 'bundles'
                ? 'border-blue-600 text-blue-600 dark:text-blue-400 dark:border-blue-400'
                : 'border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'
            }`}
          >
            My Bundles
            {userBundlesList.length > 0 && (
              <span className="ml-2 px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">
                {userBundlesList.length}
              </span>
            )}
          </button>
          <button
            onClick={() => setActiveTab('recommended')}
            className={`py-4 px-1 font-medium text-sm border-b-2 transition-colors duration-200 ease-in-out ${
              activeTab === 'recommended'
                ? 'border-blue-600 text-blue-600 dark:text-blue-400 dark:border-blue-400'
                : 'border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'
            }`}
          >
            Recommended for You
            {recommendedBundles.length > 0 && (
              <span className="ml-2 px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300">
                {recommendedBundles.length}
              </span>
            )}
          </button>
        </div>
      </div>
      
      {/* My Bundles Tab */}
      {activeTab === 'bundles' && (
        <div className="space-y-8">
          {userBundlesList.length === 0 ? (
            <div className="bg-white dark:bg-gray-800 p-8 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 text-center">
              <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-50 dark:bg-blue-900 mb-4">
                <svg className="w-8 h-8 text-blue-500 dark:text-blue-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                </svg>
              </div>
              <h3 className="text-xl font-semibold text-gray-900 dark:text-white mb-2">No bundles purchased yet</h3>
              <p className="text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto">Browse our bundle collection to find the perfect learning path for your educational journey</p>
              <Link to="/bundles">
                <Button>Explore Bundles</Button>
              </Link>
            </div>
          ) : (
            <div className="grid grid-cols-1 gap-8">
              {userBundlesList.map(bundle => {
                const bundleProgress = getBundleProgress(bundle.id);
                return (
                  <div key={bundle.id} className="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden transition-all duration-200 hover:shadow-md">
                    <div className="md:flex">
                      <div className="md:w-2/3 p-6">
                        <div className="flex justify-between items-start mb-4">
                          <div>
                            <h3 className="text-xl font-semibold text-gray-900 dark:text-white mb-2">{bundle.title}</h3>
                            <p className="text-gray-600 dark:text-gray-400 mb-3">{bundle.description}</p>
                            <div className="flex flex-wrap gap-2">
                              <Badge variant="info" className="bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">
                                {bundle.theme}
                              </Badge>
                              <Badge 
                                variant={
                                  bundle.difficultyLevel === 'beginner' ? 'info' : 
                                  bundle.difficultyLevel === 'intermediate' ? 'warning' : 'danger'
                                }
                                className={
                                  bundle.difficultyLevel === 'beginner' 
                                    ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' 
                                    : bundle.difficultyLevel === 'intermediate'
                                    ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'
                                    : 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'
                                }
                              >
                                {bundle.difficultyLevel}
                              </Badge>
                            </div>
                          </div>
                          <div className="text-right text-sm text-gray-500 dark:text-gray-400 flex items-center">
                            <svg className="w-4 h-4 mr-1 text-gray-400 dark:text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            {formatLastAccessedDate(bundleProgress?.lastAccessed || new Date())}
                          </div>
                        </div>
                        
                        <div className="mb-6">
                          <div className="flex justify-between text-sm mb-2">
                            <span className="font-medium text-gray-700 dark:text-gray-300">
                              {bundleProgress?.coursesCompleted || 0} of {bundleProgress?.totalCourses || 0} courses completed
                            </span>
                            <span className="font-semibold text-blue-600 dark:text-blue-400">
                              {Math.round(bundleProgress?.progress || 0)}%
                            </span>
                          </div>
                          <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden">
                            <div
                              className="h-2.5 rounded-full bg-blue-600 dark:bg-blue-500 transition-all duration-500 ease-in-out"
                              style={{ width: `${bundleProgress?.progress || 0}%` }}
                            ></div>
                          </div>
                        </div>
                        
                        <div>
                          {bundleProgress?.progress === 100 ? (
                            <div className="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center">
                              <svg className="h-6 w-6 text-green-500 dark:text-green-400 mr-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
                              </svg>
                              <div>
                                <span className="text-green-800 dark:text-green-300 font-medium block">Congratulations!</span>
                                <span className="text-green-700 dark:text-green-400 text-sm">You've completed this bundle</span>
                              </div>
                            </div>
                          ) : (
                            <Link to={`/bundles/${bundle.id}`}>
                              <Button className="bg-blue-600 hover:bg-blue-700 text-white dark:bg-blue-500 dark:hover:bg-blue-600 transition-colors duration-200">
                                Continue Learning
                              </Button>
                            </Link>
                          )}
                        </div>
                      </div>
                      
                      <div className="md:w-1/3 bg-gray-50 dark:bg-gray-900/50 p-6 border-t md:border-t-0 md:border-l border-gray-200 dark:border-gray-700">
                        <h4 className="text-sm font-medium text-gray-500 dark:text-gray-400 mb-4 flex items-center">
                          <svg className="w-4 h-4 mr-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                          </svg>
                          Course Progress
                        </h4>
                        <div className="space-y-3">
                          {bundle.courses.map((courseId, index) => {
                            const course = courses.find(c => c.id === courseId);
                            // Generate random progress for each course
                            const courseProgress = index < (bundleProgress?.coursesCompleted || 0) 
                              ? 100 
                              : Math.floor(Math.random() * 100);
                            
                            return course ? (
                              <div key={course.id} className="border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 rounded-lg p-3 transition-all duration-200 hover:shadow-sm">
                                <div className="flex justify-between items-start mb-2">
                                  <div className="text-sm font-medium text-gray-800 dark:text-gray-200">{course.title}</div>
                                  <Badge 
                                    variant={courseProgress === 100 ? 'success' : 'info'}
                                    className={courseProgress === 100 
                                      ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' 
                                      : 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'
                                    }
                                  >
                                    {courseProgress === 100 ? 'Completed' : 'In Progress'}
                                  </Badge>
                                </div>
                                <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mb-1 overflow-hidden">
                                  <div
                                    className={`h-1.5 rounded-full transition-all duration-500 ease-in-out ${
                                      courseProgress === 100 
                                        ? 'bg-green-500 dark:bg-green-400' 
                                        : 'bg-blue-500 dark:bg-blue-400'
                                    }`}
                                    style={{ width: `${courseProgress}%` }}
                                  ></div>
                                </div>
                                <div className="flex justify-between items-center">
                                  <Link 
                                    to={`/courses/${course.id}`} 
                                    className="text-xs text-blue-600 dark:text-blue-400 hover:underline"
                                  >
                                    View Course
                                  </Link>
                                  <div className="text-xs text-gray-500 dark:text-gray-400">{courseProgress}%</div>
                                </div>
                              </div>
                            ) : null;
                          })}
                        </div>
                      </div>
                    </div>
                  </div>
                );
              })}
            </div>
          )}
        </div>
      )}
      
      {/* Recommended Bundles Tab */}
      {activeTab === 'recommended' && (
        <div>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {recommendedBundles.map(bundle => (
              <div 
                key={bundle.id} 
                className="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden transition-all duration-200 hover:shadow-md flex flex-col"
              >
                <div className="p-6 flex-grow">
                  <div className="flex justify-between items-start mb-4">
                    <div className="flex space-x-2">
                      <Badge 
                        variant={
                          bundle.difficultyLevel === 'beginner' ? 'info' : 
                          bundle.difficultyLevel === 'intermediate' ? 'warning' : 'danger'
                        }
                        className={
                          bundle.difficultyLevel === 'beginner' 
                            ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' 
                            : bundle.difficultyLevel === 'intermediate'
                            ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'
                            : 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'
                        }
                      >
                        {bundle.difficultyLevel}
                      </Badge>
                      <Badge 
                        variant="info"
                        className="bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"
                      >
                        {bundle.theme}
                      </Badge>
                    </div>
                    {bundle.bundlePrice < bundle.originalPrice && (
                      <Badge 
                        variant="danger"
                        className="bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"
                      >
                        {Math.round((1 - bundle.bundlePrice / bundle.originalPrice) * 100)}% OFF
                      </Badge>
                    )}
                  </div>
                  <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">{bundle.title}</h3>
                  <p className="text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-2">{bundle.description}</p>
                  
                  <div className="flex items-center text-sm text-gray-500 dark:text-gray-400 mb-3 space-x-4">
                    <div className="flex items-center">
                      <svg className="w-4 h-4 mr-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                      </svg>
                      {bundle.courses.length} courses
                    </div>
                    <div className="flex items-center">
                      <svg className="w-4 h-4 mr-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                      {bundle.courses.length * 2} hours
                    </div>
                  </div>
                </div>
                
                <div className="bg-gray-50 dark:bg-gray-900/50 p-4 border-t border-gray-200 dark:border-gray-700">
                  <div className="flex items-center justify-between mb-3">
                    <div className="text-xs text-gray-500 dark:text-gray-400">Bundle price</div>
                    <div className="flex items-baseline space-x-2">
                      <div className="text-xl font-bold text-blue-600 dark:text-blue-400">${bundle.bundlePrice.toFixed(2)}</div>
                      {bundle.bundlePrice < bundle.originalPrice && (
                        <div className="text-sm text-gray-500 dark:text-gray-400 line-through">${bundle.originalPrice.toFixed(2)}</div>
                      )}
                    </div>
                  </div>
                  
                  <div className="flex space-x-2">
                    <Link 
                      to={`/bundles/${bundle.id}`}
                      className="flex-1"
                    >
                      <Button 
                        variant="outline" 
                        className="w-full border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200"
                      >
                        Preview
                      </Button>
                    </Link>
                    <Button 
                      className="flex-1 bg-blue-600 hover:bg-blue-700 text-white dark:bg-blue-500 dark:hover:bg-blue-600 transition-colors duration-200"
                    >
                      Enroll Now
                    </Button>
                  </div>
                </div>
              </div>
            ))}
          </div>
          
          {recommendedBundles.length === 0 ? (
            <div className="bg-white dark:bg-gray-800 p-8 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 text-center">
              <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-700 mb-4">
                <svg className="w-8 h-8 text-gray-500 dark:text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </div>
              <h3 className="text-xl font-semibold text-gray-900 dark:text-white mb-2">No recommendations yet</h3>
              <p className="text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto">
                We're still learning about your preferences. Complete some courses to get personalized recommendations.
              </p>
              <Link to="/bundles">
                <Button variant="outline">Browse All Bundles</Button>
              </Link>
            </div>
          ) : (
            <div className="mt-8 text-center">
              <Link 
                to="/bundles" 
                className="inline-flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium"
              >
                View All Bundles
                <svg className="ml-1 w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                </svg>
              </Link>
            </div>
          )}
        </div>
      )}
    </div>
  );
};

export default MyLearningPage;

/== store/affiliateStore.ts
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

// Types
export type AffiliateStatus = 'active' | 'pending' | 'inactive' | 'rejected';
export type AffiliatorLevel = 'bronze' | 'silver' | 'gold' | 'platinum';
export type PaymentMethod = 'bank_transfer' | 'e_wallet' | 'paypal';
export type PaymentStatus = 'pending' | 'processing' | 'completed' | 'failed';
export type MaterialType = 'banner' | 'email' | 'text' | 'social';

export interface AffiliateProgram {
  id: string;
  name: string;
  referralCode: string;
  commission: string;
  cookieDuration: number;
  description: string;
  terms: string;
  status: AffiliateStatus;
  paymentSchedule: 'weekly' | 'monthly' | 'quarterly';
  multilevel: boolean;
  level2Commission: string;
  minPayoutAmount: number;
  createdAt: string;
  updatedAt: string;
  registrations: number;
  conversions: number;
  earnings: number;
}

export interface Affiliator {
  id: string;
  userId: string;
  name: string;
  email: string;
  phone: string;
  website: string;
  socialMedia: {
    instagram: string;
    facebook: string;
    twitter: string;
    linkedin: string;
    youtube: string;
  };
  profilePicture: string;
  balance: number;
  availableBalance: number;
  pendingBalance: number;
  totalEarnings: number;
  referralCode: string;
  referralLink: string;
  totalReferrals: number;
  totalConversions: number;
  conversionRate: number;
  status: AffiliateStatus;
  level: AffiliatorLevel;
  progress: number;
  nextLevelThreshold: number;
  paymentMethod: PaymentMethod;
  paymentDetails: {
    bankName?: string;
    accountNumber?: string;
    accountHolderName?: string;
    eWalletProvider?: string;
    eWalletNumber?: string;
    paypalEmail?: string;
  };
  registrationDate: string;
  approvalDate: string | null;
  notes: string;
}

export interface PromotionalMaterial {
  id: string;
  programId: string;
  name: string;
  type: MaterialType;
  preview: string;
  description: string;
  createdAt: string;
  updatedAt: string;
}

export interface Referral {
  id: string;
  affiliatorId: string;
  affiliatorName: string;
  referredUserId: string;
  referredUserName: string;
  referredUserEmail: string;
  date: string;
  status: 'pending' | 'converted' | 'expired';
  commission: number;
  programId: string;
  programName: string;
  conversionDate: string | null;
}

export interface Payout {
  id: string;
  affiliatorId: string;
  affiliatorName: string;
  amount: number;
  status: PaymentStatus;
  date: string;
  processedDate: string | null;
  method: PaymentMethod;
  reference: string;
  notes: string;
}

export interface AffiliateSettings {
  globalSettings: {
    enabled: boolean;
    defaultCommission: number;
    defaultCookieDuration: number;
    minPayoutAmount: number;
    multilevelEnabled: boolean;
    applicationRequiresApproval: boolean;
    defaultPaymentSchedule: 'weekly' | 'monthly' | 'quarterly';
  };
  paymentMethods: {
    bankTransfer: boolean;
    eWallet: boolean;
    paypal: boolean;
  };
  levelSettings: {
    enabled: boolean;
    levels: {
      bronze: {
        minReferrals: number;
        bonusCommission: number;
      };
      silver: {
        minReferrals: number;
        bonusCommission: number;
      };
      gold: {
        minReferrals: number;
        bonusCommission: number;
      };
      platinum: {
        minReferrals: number;
        bonusCommission: number;
      };
    };
  };
  termsAndConditions: string;
  applicationFormFields: {
    website: boolean;
    phone: boolean;
    socialMedia: boolean;
    marketingPlan: boolean;
  };
}

export interface AffiliateAnalytics {
  totalEarnings: number;
  totalRegistrations: number;
  totalConversions: number;
  conversionRate: number;
  monthlyStats: {
    name: string;
    registrations: number;
    conversions: number;
    earnings: number;
  }[];
  topAffiliates: {
    id: string;
    name: string;
    earnings: number;
    conversions: number;
    conversionRate: number;
  }[];
}

interface AffiliateState {
  // Data
  settings: AffiliateSettings;
  programs: AffiliateProgram[];
  affiliators: Affiliator[];
  promotionalMaterials: PromotionalMaterial[];
  referrals: Referral[];
  payouts: Payout[];
  analytics: AffiliateAnalytics;
  
  // Current selections
  currentProgramId: string | null;
  currentAffiliatorId: string | null;
  
  // UI states
  isLoading: boolean;
  error: string | null;

  // Program actions
  addProgram: (program: Omit<AffiliateProgram, 'id' | 'createdAt' | 'updatedAt' | 'registrations' | 'conversions' | 'earnings'>) => void;
  updateProgram: (id: string, programData: Partial<AffiliateProgram>) => void;
  deleteProgram: (id: string) => void;
  
  // Affiliator actions
  addAffiliator: (affiliator: Omit<Affiliator, 'id' | 'registrationDate' | 'approvalDate' | 'totalEarnings' | 'totalConversions' | 'totalReferrals' | 'conversionRate'>) => void;
  updateAffiliator: (id: string, affiliatorData: Partial<Affiliator>) => void;
  deleteAffiliator: (id: string) => void;
  approveAffiliator: (id: string) => void;
  rejectAffiliator: (id: string) => void;
  
  // Promotional materials actions
  addPromotionalMaterial: (material: Omit<PromotionalMaterial, 'id' | 'createdAt' | 'updatedAt'>) => void;
  updatePromotionalMaterial: (id: string, materialData: Partial<PromotionalMaterial>) => void;
  deletePromotionalMaterial: (id: string) => void;
  
  // Referral actions
  addReferral: (referral: Omit<Referral, 'id' | 'conversionDate'>) => void;
  updateReferral: (id: string, referralData: Partial<Referral>) => void;
  convertReferral: (id: string) => void;
  
  // Payout actions
  createPayout: (payout: Omit<Payout, 'id' | 'processedDate'>) => void;
  updatePayoutStatus: (id: string, status: PaymentStatus) => void;
  
  // Settings actions
  updateSettings: (newSettings: Partial<AffiliateSettings>) => void;
  
  // Analytics actions
  refreshAnalytics: () => void;
}

// Sample data - Affiliate Programs
const samplePrograms: AffiliateProgram[] = [
  {
    id: "1",
    name: "Program Influencer",
    referralCode: "INF2024",
    commission: "15%",
    cookieDuration: 30,
    description: "Program afiliasi khusus untuk influencer dengan jangkauan minimal 10.000 followers",
    terms: "Influencer harus mempromosikan kursus minimal 2 kali dalam sebulan",
    status: "active",
    paymentSchedule: "monthly",
    multilevel: false,
    level2Commission: "",
    minPayoutAmount: 300000,
    createdAt: "2025-01-15T08:00:00Z",
    updatedAt: "2025-04-01T10:30:00Z",
    registrations: 25,
    conversions: 18,
    earnings: 3750000,
  },
  {
    id: "2",
    name: "Program Kampus",
    referralCode: "CAMPUS2024",
    commission: "20%",
    cookieDuration: 45,
    description: "Program afiliasi untuk mahasiswa dan institusi pendidikan",
    terms: "Terbuka untuk mahasiswa, dosen, dan staf kampus",
    status: "active",
    paymentSchedule: "monthly",
    multilevel: true,
    level2Commission: "5%",
    minPayoutAmount: 200000,
    createdAt: "2025-01-20T09:00:00Z",
    updatedAt: "2025-04-05T11:15:00Z",
    registrations: 42,
    conversions: 35,
    earnings: 5250000,
  },
  {
    id: "3",
    name: "Program Komunitas",
    referralCode: "COMM2024",
    commission: "12%",
    cookieDuration: 30,
    description: "Program afiliasi untuk komunitas IT dan programming",
    terms: "Terbuka untuk grup atau komunitas dengan minimal 50 anggota",
    status: "pending",
    paymentSchedule: "monthly",
    multilevel: false,
    level2Commission: "",
    minPayoutAmount: 250000,
    createdAt: "2025-02-10T14:00:00Z",
    updatedAt: "2025-02-10T14:00:00Z",
    registrations: 15,
    conversions: 8,
    earnings: 1200000,
  },
];

// Sample data - Affiliators
const sampleAffiliators: Affiliator[] = [
  {
    id: "1",
    userId: "user123",
    name: "John Doe",
    email: "john.doe@example.com",
    phone: "+6281234567890",
    website: "https://johndoeblog.com",
    socialMedia: {
      instagram: "@johndoe_tech",
      facebook: "johndoe.tech",
      twitter: "@johndoe_tech",
      linkedin: "johndoe-tech",
      youtube: "JohnDoeTech",
    },
    profilePicture: "https://i.pravatar.cc/300?img=1",
    balance: 1500000,
    availableBalance: 1000000,
    pendingBalance: 500000,
    totalEarnings: 2500000,
    referralCode: "JOHNDOE2024",
    referralLink: "https://example.com/ref/JOHNDOE2024",
    totalReferrals: 18,
    totalConversions: 12,
    conversionRate: 66.7,
    status: "active",
    level: "silver",
    progress: 12,
    nextLevelThreshold: 20,
    paymentMethod: "bank_transfer",
    paymentDetails: {
      bankName: "BCA",
      accountNumber: "1234567890",
      accountHolderName: "John Doe",
    },
    registrationDate: "2025-01-18T08:30:00Z",
    approvalDate: "2025-01-19T10:15:00Z",
    notes: "Tech blogger dengan audience fokus di web development",
  },
  {
    id: "2",
    userId: "user456",
    name: "Jane Smith",
    email: "jane.smith@example.com",
    phone: "+6289876543210",
    website: "https://janesmith.dev",
    socialMedia: {
      instagram: "@janesmith_dev",
      facebook: "janesmith.dev",
      twitter: "@janesmith_dev",
      linkedin: "janesmith-dev",
      youtube: "JaneSmithDev",
    },
    profilePicture: "https://i.pravatar.cc/300?img=5",
    balance: 2000000,
    availableBalance: 1500000,
    pendingBalance: 500000,
    totalEarnings: 3500000,
    referralCode: "JANESMITH2024",
    referralLink: "https://example.com/ref/JANESMITH2024",
    totalReferrals: 25,
    totalConversions: 20,
    conversionRate: 80.0,
    status: "active",
    level: "gold",
    progress: 20,
    nextLevelThreshold: 30,
    paymentMethod: "e_wallet",
    paymentDetails: {
      eWalletProvider: "GoPay",
      eWalletNumber: "089876543210",
    },
    registrationDate: "2025-01-10T15:45:00Z",
    approvalDate: "2025-01-11T09:30:00Z",
    notes: "YouTuber dengan fokus tutorial programming",
  },
  {
    id: "3",
    userId: "user789",
    name: "Robert Garcia",
    email: "robert.garcia@example.com",
    phone: "+6282345678901",
    website: "https://roberttech.com",
    socialMedia: {
      instagram: "@robert_tech",
      facebook: "robert.tech",
      twitter: "@robert_tech",
      linkedin: "robert-garcia-tech",
      youtube: "",
    },
    profilePicture: "https://i.pravatar.cc/300?img=8",
    balance: 800000,
    availableBalance: 500000,
    pendingBalance: 300000,
    totalEarnings: 1200000,
    referralCode: "ROBERTG2024",
    referralLink: "https://example.com/ref/ROBERTG2024",
    totalReferrals: 10,
    totalConversions: 7,
    conversionRate: 70.0,
    status: "active",
    level: "bronze",
    progress: 7,
    nextLevelThreshold: 10,
    paymentMethod: "bank_transfer",
    paymentDetails: {
      bankName: "Mandiri",
      accountNumber: "9876543210",
      accountHolderName: "Robert Garcia",
    },
    registrationDate: "2025-02-05T11:20:00Z",
    approvalDate: "2025-02-06T14:10:00Z",
    notes: "IT Consultant dengan network di perusahaan teknologi",
  },
  {
    id: "4",
    userId: "user101",
    name: "Sarah Johnson",
    email: "sarah.johnson@example.com",
    phone: "+6283456789012",
    website: "",
    socialMedia: {
      instagram: "@sarah_codes",
      facebook: "",
      twitter: "@sarah_codes",
      linkedin: "sarah-johnson-dev",
      youtube: "",
    },
    profilePicture: "https://i.pravatar.cc/300?img=9",
    balance: 0,
    availableBalance: 0,
    pendingBalance: 0,
    totalEarnings: 0,
    referralCode: "SARAHJ2024",
    referralLink: "https://example.com/ref/SARAHJ2024",
    totalReferrals: 0,
    totalConversions: 0,
    conversionRate: 0,
    status: "pending",
    level: "bronze",
    progress: 0,
    nextLevelThreshold: 10,
    paymentMethod: "paypal",
    paymentDetails: {
      paypalEmail: "sarah.johnson@example.com",
    },
    registrationDate: "2025-04-02T09:15:00Z",
    approvalDate: null,
    notes: "Menunggu verifikasi dokumen",
  },
  {
    id: "5",
    userId: "user202",
    name: "David Lee",
    email: "david.lee@example.com",
    phone: "+6285678901234",
    website: "https://davidcodes.io",
    socialMedia: {
      instagram: "@david_codes",
      facebook: "david.codes",
      twitter: "@david_codes",
      linkedin: "david-lee-dev",
      youtube: "DavidCodesTutorials",
    },
    profilePicture: "https://i.pravatar.cc/300?img=3",
    balance: 0,
    availableBalance: 0,
    pendingBalance: 0,
    totalEarnings: 0,
    referralCode: "DAVIDL2024",
    referralLink: "https://example.com/ref/DAVIDL2024",
    totalReferrals: 0,
    totalConversions: 0,
    conversionRate: 0,
    status: "inactive",
    level: "bronze",
    progress: 0,
    nextLevelThreshold: 10,
    paymentMethod: "bank_transfer",
    paymentDetails: {
      bankName: "BNI",
      accountNumber: "5678901234",
      accountHolderName: "David Lee",
    },
    registrationDate: "2025-02-10T16:40:00Z",
    approvalDate: "2025-02-12T08:25:00Z",
    notes: "Akun dinonaktifkan karena tidak aktif selama 60 hari",
  }
];

// Sample referrals
const sampleReferrals: Referral[] = [
  {
    id: "1",
    affiliatorId: "1",
    affiliatorName: "John Doe",
    referredUserId: "user001",
    referredUserName: "Sarah Johnson",
    referredUserEmail: "sarah@example.com",
    date: "2025-04-08T10:30:00Z",
    status: "converted",
    commission: 250000,
    programId: "1",
    programName: "Program Influencer",
    conversionDate: "2025-04-10T14:15:00Z",
  },
  {
    id: "2",
    affiliatorId: "1",
    affiliatorName: "John Doe",
    referredUserId: "user002",
    referredUserName: "David Williams",
    referredUserEmail: "david@example.com",
    date: "2025-04-05T12:45:00Z",
    status: "converted",
    commission: 250000,
    programId: "1",
    programName: "Program Influencer",
    conversionDate: "2025-04-06T09:20:00Z",
  },
  {
    id: "3",
    affiliatorId: "1",
    affiliatorName: "John Doe",
    referredUserId: "user003",
    referredUserName: "Michael Brown",
    referredUserEmail: "michael@example.com",
    date: "2025-04-02T15:10:00Z",
    status: "converted",
    commission: 250000,
    programId: "1",
    programName: "Program Influencer",
    conversionDate: "2025-04-03T18:30:00Z",
  },
  {
    id: "4",
    affiliatorId: "1",
    affiliatorName: "John Doe",
    referredUserId: "user004",
    referredUserName: "Emily Davis",
    referredUserEmail: "emily@example.com",
    date: "2025-04-30T11:25:00Z",
    status: "pending",
    commission: 250000,
    programId: "1",
    programName: "Program Influencer",
    conversionDate: null,
  },
  {
    id: "5",
    affiliatorId: "2",
    affiliatorName: "Jane Smith",
    referredUserId: "user005",
    referredUserName: "James Wilson",
    referredUserEmail: "james@example.com",
    date: "2025-04-28T14:50:00Z",
    status: "converted",
    commission: 300000,
    programId: "2",
    programName: "Program Kampus",
    conversionDate: "2025-04-29T16:40:00Z",
  },
  {
    id: "6",
    affiliatorId: "2",
    affiliatorName: "Jane Smith",
    referredUserId: "user006",
    referredUserName: "Jennifer Lee",
    referredUserEmail: "jennifer@example.com",
    date: "2025-04-25T09:15:00Z",
    status: "expired",
    commission: 0,
    programId: "2",
    programName: "Program Kampus",
    conversionDate: null,
  },
  {
    id: "7",
    affiliatorId: "3",
    affiliatorName: "Robert Garcia",
    referredUserId: "user007",
    referredUserName: "Robert Johnson",
    referredUserEmail: "robert@example.com",
    date: "2025-04-20T13:40:00Z",
    status: "converted",
    commission: 180000,
    programId: "3",
    programName: "Program Komunitas",
    conversionDate: "2025-04-22T10:30:00Z",
  }
];

// Sample payouts
const samplePayouts: Payout[] = [
  {
    id: "PAY-123456",
    affiliatorId: "1",
    affiliatorName: "John Doe",
    amount: 750000,
    status: "completed",
    date: "2025-05-01T09:00:00Z",
    processedDate: "2025-05-03T14:30:00Z",
    method: "bank_transfer",
    reference: "TRF25050301",
    notes: "Pembayaran komisi bulan April 2025",
  },
  {
    id: "PAY-123457",
    affiliatorId: "1",
    affiliatorName: "John Doe",
    amount: 500000,
    status: "processing",
    date: "2025-04-01T10:15:00Z",
    processedDate: null,
    method: "bank_transfer",
    reference: "TRF25040105",
    notes: "Pembayaran komisi bulan Maret 2025",
  },
  {
    id: "PAY-123458",
    affiliatorId: "2",
    affiliatorName: "Jane Smith",
    amount: 1200000,
    status: "completed",
    date: "2025-05-01T09:30:00Z",
    processedDate: "2025-05-02T15:45:00Z",
    method: "e_wallet",
    reference: "GoPay25050201",
    notes: "Pembayaran komisi bulan April 2025",
  },
  {
    id: "PAY-123459",
    affiliatorId: "3",
    affiliatorName: "Robert Garcia",
    amount: 180000,
    status: "pending",
    date: "2025-05-01T11:20:00Z",
    processedDate: null,
    method: "bank_transfer",
    reference: "TRF25050106",
    notes: "Menunggu verifikasi informasi bank",
  }
];

// Sample promotional materials
const samplePromotionalMaterials: PromotionalMaterial[] = [
  {
    id: "1",
    programId: "1",
    name: "Banner Utama",
    type: "banner",
    preview: "https://via.placeholder.com/800x200?text=Main+Banner",
    description: "Banner berukuran 800x200px untuk digunakan di website",
    createdAt: "2025-02-15T09:00:00Z",
    updatedAt: "2025-02-15T09:00:00Z",
  },
  {
    id: "2",
    programId: "1",
    name: "Template Email",
    type: "email",
    preview: "Halo [Nama], Saya ingin merekomendasikan kursus coding yang sangat bagus di CodeCampus. Gunakan kode [REFERRAL_CODE] untuk mendapatkan diskon 10%!",
    description: "Template email untuk dikirim ke teman dan keluarga",
    createdAt: "2025-02-15T09:30:00Z",
    updatedAt: "2025-03-01T14:15:00Z",
  },
  {
    id: "3",
    programId: "1",
    name: "Post Instagram",
    type: "social",
    preview: "Belajar coding jadi lebih mudah dengan CodeCampus! 🚀 Daftar sekarang dengan kode referral [REFERRAL_CODE] dan dapatkan diskon 10%! #BelajarCoding #CodeCampus",
    description: "Konten untuk posting di Instagram dan platform sosial media lainnya",
    createdAt: "2025-02-15T10:00:00Z",
    updatedAt: "2025-02-15T10:00:00Z",
  },
  {
    id: "4",
    programId: "2",
    name: "Banner Kampus",
    type: "banner",
    preview: "https://via.placeholder.com/800x200?text=Campus+Banner",
    description: "Banner khusus untuk program kampus",
    createdAt: "2025-02-20T11:30:00Z",
    updatedAt: "2025-02-20T11:30:00Z",
  },
  {
    id: "5",
    programId: "2",
    name: "Flyer Digital",
    type: "banner",
    preview: "https://via.placeholder.com/400x600?text=Digital+Flyer",
    description: "Flyer digital untuk disebarkan via sosial media atau email",
    createdAt: "2025-02-20T12:00:00Z",
    updatedAt: "2025-03-15T09:45:00Z",
  }
];

// Sample settings
const sampleSettings: AffiliateSettings = {
  globalSettings: {
    enabled: true,
    defaultCommission: 15,
    defaultCookieDuration: 30,
    minPayoutAmount: 300000,
    multilevelEnabled: true,
    applicationRequiresApproval: true,
    defaultPaymentSchedule: "monthly",
  },
  paymentMethods: {
    bankTransfer: true,
    eWallet: true,
    paypal: true,
  },
  levelSettings: {
    enabled: true,
    levels: {
      bronze: {
        minReferrals: 0,
        bonusCommission: 0,
      },
      silver: {
        minReferrals: 10,
        bonusCommission: 2,
      },
      gold: {
        minReferrals: 20,
        bonusCommission: 5,
      },
      platinum: {
        minReferrals: 50,
        bonusCommission: 10,
      },
    },
  },
  termsAndConditions: "1. Afiliator harus mematuhi semua ketentuan dan kebijakan program afiliasi.\n2. Afiliator tidak diperkenankan untuk melakukan spam atau praktek pemasaran yang tidak etis.\n3. Afiliator tidak diperbolehkan menggunakan kata kunci merek atau variasinya dalam kampanye iklan PPC.\n4. Komisi hanya akan dibayarkan setelah mencapai batas minimum dan sesuai jadwal pembayaran yang ditetapkan.\n5. Perusahaan berhak untuk mengubah syarat dan ketentuan program afiliasi kapan saja.\n6. Perusahaan berhak untuk menolak atau memutus hubungan dengan afiliator yang melanggar ketentuan ini.",
  applicationFormFields: {
    website: true,
    phone: true,
    socialMedia: true,
    marketingPlan: true,
  },
};

// Sample analytics
const sampleAnalytics: AffiliateAnalytics = {
  totalEarnings: 10200000,
  totalRegistrations: 82,
  totalConversions: 61,
  conversionRate: 74.4,
  monthlyStats: [
    { name: "Jan", registrations: 12, conversions: 8, earnings: 1200000 },
    { name: "Feb", registrations: 15, conversions: 12, earnings: 1800000 },
    { name: "Mar", registrations: 21, conversions: 15, earnings: 2250000 },
    { name: "Apr", registrations: 34, conversions: 26, earnings: 4950000 },
  ],
  topAffiliates: [
    { id: "2", name: "Jane Smith", earnings: 3500000, conversions: 20, conversionRate: 80.0 },
    { id: "1", name: "John Doe", earnings: 2500000, conversions: 12, conversionRate: 66.7 },
    { id: "3", name: "Robert Garcia", earnings: 1200000, conversions: 7, conversionRate: 70.0 },
    { id: "5", name: "David Lee", earnings: 0, conversions: 0, conversionRate: 0 },
    { id: "4", name: "Sarah Johnson", earnings: 0, conversions: 0, conversionRate: 0 },
  ],
};

// Create the store
export const useAffiliateStore = create<AffiliateState>()(
  persist(
    (set, get) => ({
      // Initial state
      settings: sampleSettings,
      programs: samplePrograms,
      affiliators: sampleAffiliators,
      promotionalMaterials: samplePromotionalMaterials,
      referrals: sampleReferrals,
      payouts: samplePayouts,
      analytics: sampleAnalytics,
      currentProgramId: null,
      currentAffiliatorId: null,
      isLoading: false,
      error: null,

      // Program actions
      addProgram: (program) => {
        try {
          const now = new Date().toISOString();
          
          // Ensure all required fields are present and in the correct format
          const newProgram: AffiliateProgram = {
            ...program,
            id: Date.now().toString(),
            createdAt: now,
            updatedAt: now,
            registrations: 0,
            conversions: 0,
            earnings: 0,
            // Ensure numeric fields are numbers
            cookieDuration: typeof program.cookieDuration === 'string' 
              ? parseInt(program.cookieDuration, 10) 
              : program.cookieDuration,
            // Ensure commission has % symbol
            commission: program.commission.includes('%') 
              ? program.commission 
              : `${program.commission}%`,
            // Ensure level2Commission has % symbol if present
            level2Commission: program.level2Commission 
              ? (program.level2Commission.includes('%') 
                  ? program.level2Commission 
                  : `${program.level2Commission}%`) 
              : '',
            // Ensure minPayoutAmount is a number
            minPayoutAmount: typeof program.minPayoutAmount === 'string' 
              ? parseInt(program.minPayoutAmount, 10) 
              : program.minPayoutAmount,
          };

          console.log("Adding new program to store:", newProgram);

          set((state) => ({
            programs: [...state.programs, newProgram],
          }));
          
          return newProgram.id; // Return the new program ID for reference
        } catch (error) {
          console.error("Error in addProgram:", error);
          throw error; // Re-throw to allow handling in the UI
        }
      },

      updateProgram: (id, programData) => {
        set((state) => ({
          programs: state.programs.map((program) =>
            program.id === id
              ? { ...program, ...programData, updatedAt: new Date().toISOString() }
              : program
          ),
        }));
      },

      deleteProgram: (id) => {
        set((state) => ({
          programs: state.programs.filter((program) => program.id !== id),
        }));
      },

      // Affiliator actions
      addAffiliator: (affiliator) => {
        const now = new Date().toISOString();
        const newAffiliator: Affiliator = {
          ...affiliator,
          id: Date.now().toString(),
          registrationDate: now,
          approvalDate: null,
          totalEarnings: 0,
          totalConversions: 0,
          totalReferrals: 0,
          conversionRate: 0,
        };

        set((state) => ({
          affiliators: [...state.affiliators, newAffiliator],
        }));
      },

      updateAffiliator: (id, affiliatorData) => {
        set((state) => ({
          affiliators: state.affiliators.map((affiliator) =>
            affiliator.id === id ? { ...affiliator, ...affiliatorData } : affiliator
          ),
        }));
      },

      deleteAffiliator: (id) => {
        set((state) => ({
          affiliators: state.affiliators.filter((affiliator) => affiliator.id !== id),
        }));
      },

      approveAffiliator: (id) => {
        set((state) => ({
          affiliators: state.affiliators.map((affiliator) =>
            affiliator.id === id
              ? {
                  ...affiliator,
                  status: "active",
                  approvalDate: new Date().toISOString(),
                }
              : affiliator
          ),
        }));
      },

      rejectAffiliator: (id) => {
        set((state) => ({
          affiliators: state.affiliators.map((affiliator) =>
            affiliator.id === id
              ? {
                  ...affiliator,
                  status: "rejected",
                }
              : affiliator
          ),
        }));
      },

      // Promotional materials actions
      addPromotionalMaterial: (material) => {
        const now = new Date().toISOString();
        const newMaterial: PromotionalMaterial = {
          ...material,
          id: Date.now().toString(),
          createdAt: now,
          updatedAt: now,
        };

        set((state) => ({
          promotionalMaterials: [...state.promotionalMaterials, newMaterial],
        }));
      },

      updatePromotionalMaterial: (id, materialData) => {
        set((state) => ({
          promotionalMaterials: state.promotionalMaterials.map((material) =>
            material.id === id
              ? { ...material, ...materialData, updatedAt: new Date().toISOString() }
              : material
          ),
        }));
      },

      deletePromotionalMaterial: (id) => {
        set((state) => ({
          promotionalMaterials: state.promotionalMaterials.filter(
            (material) => material.id !== id
          ),
        }));
      },

      // Referral actions
      addReferral: (referral) => {
        const newReferral: Referral = {
          ...referral,
          id: Date.now().toString(),
          conversionDate: null,
        };

        set((state) => ({
          referrals: [...state.referrals, newReferral],
        }));
      },

      updateReferral: (id, referralData) => {
        set((state) => ({
          referrals: state.referrals.map((referral) =>
            referral.id === id ? { ...referral, ...referralData } : referral
          ),
        }));
      },

      convertReferral: (id) => {
        set((state) => {
          const referral = state.referrals.find((r) => r.id === id);
          if (!referral) return state;

          // Update referral
          const updatedReferrals = state.referrals.map((r) =>
            r.id === id
              ? {
                  ...r,
                  status: "converted" as const,
                  conversionDate: new Date().toISOString(),
                }
              : r
          );

          // Update affiliator stats
          const updatedAffiliators = state.affiliators.map((a) =>
            a.id === referral.affiliatorId
              ? {
                  ...a,
                  totalConversions: a.totalConversions + 1,
                  totalEarnings: a.totalEarnings + referral.commission,
                  pendingBalance: a.pendingBalance + referral.commission,
                  conversionRate: ((a.totalConversions + 1) / a.totalReferrals) * 100,
                }
              : a
          );

          return {
            referrals: updatedReferrals,
            affiliators: updatedAffiliators,
          };
        });
      },

      // Payout actions
      createPayout: (payout) => {
        const newPayout: Payout = {
          ...payout,
          id: `PAY-${Date.now().toString().substring(7)}`,
          processedDate: null,
        };

        set((state) => {
          // Update payout list
          const updatedPayouts = [...state.payouts, newPayout];

          // If status is completed, update affiliator balance
          let updatedAffiliators = [...state.affiliators];
          if (payout.status === "completed") {
            updatedAffiliators = state.affiliators.map((a) =>
              a.id === payout.affiliatorId
                ? {
                    ...a,
                    availableBalance: a.availableBalance - payout.amount,
                    balance: a.balance - payout.amount,
                  }
                : a
            );
          }

          return {
            payouts: updatedPayouts,
            affiliators: updatedAffiliators,
          };
        });
      },

      updatePayoutStatus: (id, status) => {
        set((state) => {
          const payout = state.payouts.find((p) => p.id === id);
          if (!payout) return state;

          // Update payout
          const updatedPayouts = state.payouts.map((p) =>
            p.id === id
              ? {
                  ...p,
                  status,
                  processedDate:
                    status === "completed" ? new Date().toISOString() : p.processedDate,
                }
              : p
          );

          // If status changed to completed, update affiliator balance
          let updatedAffiliators = [...state.affiliators];
          if (status === "completed" && payout.status !== "completed") {
            updatedAffiliators = state.affiliators.map((a) =>
              a.id === payout.affiliatorId
                ? {
                    ...a,
                    availableBalance: a.availableBalance - payout.amount,
                    balance: a.balance - payout.amount,
                  }
                : a
            );
          }
          // If status changed from completed, restore affiliator balance
          else if (status !== "completed" && payout.status === "completed") {
            updatedAffiliators = state.affiliators.map((a) =>
              a.id === payout.affiliatorId
                ? {
                    ...a,
                    availableBalance: a.availableBalance + payout.amount,
                    balance: a.balance + payout.amount,
                  }
                : a
            );
          }

          return {
            payouts: updatedPayouts,
            affiliators: updatedAffiliators,
          };
        });
      },

      // Settings actions
      updateSettings: (newSettings) => {
        set((state) => ({
          settings: {
            ...state.settings,
            ...newSettings,
          },
        }));
      },

      // Analytics actions
      refreshAnalytics: () => {
        // In a real app, this would make an API call to get analytics data
        set((state) => {
          // Calculate analytics from state data
          const totalEarnings = state.referrals
            .filter((r) => r.status === "converted")
            .reduce((sum, r) => sum + r.commission, 0);

          const totalRegistrations = state.referrals.length;
          
          const totalConversions = state.referrals.filter(
            (r) => r.status === "converted"
          ).length;
          
          const conversionRate = totalRegistrations > 0
            ? (totalConversions / totalRegistrations) * 100
            : 0;

          // Create monthly stats (simplified for this example)
          const currentYear = new Date().getFullYear();
          const monthlyStats = [
            { name: "Jan", registrations: 12, conversions: 8, earnings: 1200000 },
            { name: "Feb", registrations: 15, conversions: 12, earnings: 1800000 },
            { name: "Mar", registrations: 21, conversions: 15, earnings: 2250000 },
            { name: "Apr", registrations: 34, conversions: 26, earnings: 4950000 },
          ];

          // Calculate top affiliates
          const topAffiliates = state.affiliators
            .map((a) => ({
              id: a.id,
              name: a.name,
              earnings: a.totalEarnings,
              conversions: a.totalConversions,
              conversionRate: a.conversionRate,
            }))
            .sort((a, b) => b.earnings - a.earnings)
            .slice(0, 5);

          return {
            analytics: {
              totalEarnings,
              totalRegistrations,
              totalConversions,
              conversionRate,
              monthlyStats,
              topAffiliates,
            },
          };
        });
      },
    }),
    {
      name: 'affiliate-storage',
      partialize: (state) => ({
        settings: state.settings,
        programs: state.programs,
        affiliators: state.affiliators,
        promotionalMaterials: state.promotionalMaterials,
        referrals: state.referrals,
        payouts: state.payouts,
      }),
    }
  )
);

/== store/authStore.ts
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

interface User {
  id: string;
  name: string;
  email: string;
  profilePicture?: string;
  hasSeenTour?: boolean;
  role: 'user' | 'admin';
}

interface AuthState {
  user: User | null;
  isAuthenticated: boolean;
  isLoading: boolean;
  error: string | null;
  mockUsers: User[];
  login: (email: string, password: string) => Promise<void>;
  register: (name: string, email: string, password: string) => Promise<void>;
  logout: () => void;
  clearError: () => void;
  completeTour: () => void;
}

// Mock user data for demonstration
const mockUsers = [
  {
    id: '1',
    name: 'Unpam',
    email: 'unpam@example.com',
    password: 'password123',
    profilePicture: 'https://ui-avatars.com/api/?name=U&background=0D8ABC&color=fff',
    hasSeenTour: false,
    role: 'user' as const
  },
  {
    id: '2',
    name: 'Admin',
    email: 'admin@example.com',
    password: 'admin123',
    profilePicture: 'https://ui-avatars.com/api/?name=A&background=10B981&color=fff',
    hasSeenTour: true,
    role: 'admin' as const
  }
];

export const useAuthStore = create<AuthState>()(
  persist(
    (set) => ({
      user: null,
      isAuthenticated: false,
      isLoading: false,
      error: null,
      mockUsers,

      login: async (email, password) => {
        set({ isLoading: true, error: null });
        
        try {
          await new Promise(resolve => setTimeout(resolve, 800));
          
          const user = mockUsers.find(
            (u) => u.email === email && u.password === password
          );
          
          if (user) {
            const { password: _, ...userWithoutPassword } = user;
            set({
              user: userWithoutPassword,
              isAuthenticated: true,
              isLoading: false
            });
          } else {
            set({
              error: 'Invalid email or password',
              isLoading: false
            });
          }
        } catch (error) {
          set({
            error: 'An error occurred during login',
            isLoading: false
          });
        }
      },

      register: async (name, email, password) => {
        set({ isLoading: true, error: null });
        
        try {
          await new Promise(resolve => setTimeout(resolve, 800));
          
          const existingUser = mockUsers.find((u) => u.email === email);
          
          if (existingUser) {
            set({
              error: 'User with this email already exists',
              isLoading: false
            });
            return;
          }
          
          const newUser = {
            id: (mockUsers.length + 1).toString(),
            name,
            email,
            password,
            profilePicture: `https://ui-avatars.com/api/?name=${name.charAt(0)}&background=0D8ABC&color=fff`,
            hasSeenTour: false,
            role: 'user' as const
          };
          
          mockUsers.push(newUser);
          
          const { password: _, ...userWithoutPassword } = newUser;
          
          set({
            user: userWithoutPassword,
            isAuthenticated: true,
            isLoading: false
          });
        } catch (error) {
          set({
            error: 'An error occurred during registration',
            isLoading: false
          });
        }
      },

      logout: () => {
        set({
          user: null,
          isAuthenticated: false
        });
      },

      clearError: () => {
        set({ error: null });
      },

      completeTour: () => {
        set((state) => ({
          user: state.user ? { ...state.user, hasSeenTour: true } : null
        }));
      }
    }),
    {
      name: 'auth-storage',
      partialize: (state) => ({ 
        user: state.user,
        isAuthenticated: state.isAuthenticated 
      })
    }
  )
);

/== store/courseStore.ts
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

interface Course {
  id: string;
  title: string;
  description: string;
  image: string;
  rating: number;
  students: number;
  duration: string;
  level: string;
  features: string[];
  price: string;
  color: string;
  category?: string;
  progress?: number;
  totalProblems?: number;
  solvedProblems?: number;
  totalQuizzes?: number;
  solvedQuizzes?: number;
  firstLessonId?: string;
}

interface Challenge {
  id: string;
  title: string;
  description: string;
  difficulty: 'easy' | 'medium' | 'hard';
  xpPoints: number;
}

interface LeaderboardUser {
  id: string;
  name: string;
  xp: number;
  rank: number;
  avatar: string;
}

interface CourseState {
  enrolledCourses: Course[];
  recommendedCourses: Course[];
  allCourses: Course[];
  listCourses: Course[];
  dailyChallenge: Challenge | null;
  leaderboard: LeaderboardUser[];
  currentStreak: number;
  highestStreak: number;
  totalXp: number;
  solvedChallenges: number;
  enrollInCourse: (courseId: string) => void;
  updateCourseProgress: (courseId: string, progress: number) => void;
  getCourseById: (courseId: string) => Course | undefined;
}

const listCourses: Course[] = [
  {
    id: 'go-beginner',
    title: 'Go | Beginner',
    description: 'Start your Go programming journey with basic concepts and syntax.',
    image: 'https://images.unsplash.com/photo-1542831371-29b0f74f9713?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60',
    rating: 4.9,
    students: 4500,
    duration: '3 weeks',
    level: 'Beginner',
    features: [
      'Basic syntax and data types',
      'Control structures',
      'Functions and packages',
      'Basic error handling',
      'Certificate of completion',
    ],
    price: 'Free',
    color: 'bg-cyan-500',
    firstLessonId: 'basic-syntax'
  },
  {
    id: 'go-fundamentals',
    title: 'Go | Fundamentals',
    description: 'Master Go fundamentals including structs, interfaces, error handling, and basic web development.',
    image: 'https://images.unsplash.com/photo-1580894894513-541e068a3e2b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60',
    rating: 4.8,
    students: 3200,
    duration: '4 weeks',
    level: 'Fundamental',
    features: [
      'Structs and interfaces',
      'Error handling',
      'Goroutines basics',
      'Basic web development',
      'Certificate of completion',
    ],
    price: 'Free',
    color: 'bg-cyan-600',
    firstLessonId: 'structs-interfaces'
  },
  {
    id: 'go-intermediate',
    title: 'Go | Intermediate',
    description: 'Take your Go skills to the next level with advanced concurrency, testing, and API development.',
    image: 'https://images.unsplash.com/photo-1517694712202-14dd9538aa97?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60',
    rating: 4.7,
    students: 2400,
    duration: '6 weeks',
    level: 'Intermediate',
    features: [
      'Advanced concurrency',
      'Testing and benchmarking',
      'Database integration',
      'RESTful APIs',
      'Certificate of completion',
    ],
    price: 'Free',
    color: 'bg-cyan-700',
    firstLessonId: 'advanced-concurrency'
  },
  {
    id: 'go-expert',
    title: 'Go | Expert',
    description: 'Become a Go expert with microservices, performance optimization, and advanced design patterns.',
    image: 'https://images.unsplash.com/photo-1504639725590-34d0984388bd?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60',
    rating: 4.9,
    students: 1800,
    duration: '8 weeks',
    level: 'Expert',
    features: [
      'Microservices architecture',
      'Performance optimization',
      'Advanced patterns',
      'System design',
      'Certificate of completion',
    ],
    price: 'Free',
    color: 'bg-cyan-800',
    firstLessonId: 'microservices-intro'
  },
  {
    id: 'python',
    title: 'Python for Beginners',
    description: 'Learn Python programming from scratch with hands-on exercises and projects.',
    image: 'https://images.unsplash.com/photo-1526379095098-d400fd0bf935?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60',
    rating: 4.8,
    students: 12500,
    duration: '8 weeks',
    level: 'Beginner',
    features: [
      'Comprehensive Python fundamentals',
      'Interactive coding exercises',
      'Real-world projects',
      'Personalized feedback',
      'Certificate of completion',
    ],
    price: 'Free',
    color: 'bg-blue-600',
    firstLessonId: 'python-basics'
  },
  {
    id: 'javascript',
    title: 'JavaScript Fundamentals',
    description: 'Master JavaScript basics and build interactive web applications.',
    image: 'https://images.unsplash.com/photo-1579468118864-1b9ea3c0db4a?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60',
    rating: 4.7,
    students: 10800,
    duration: '6 weeks',
    level: 'Beginner',
    features: [
      'JavaScript core concepts',
      'DOM manipulation',
      'Event handling',
      'Interactive web projects',
      'Certificate of completion',
    ],
    price: 'Free',
    color: 'bg-yellow-500',
    firstLessonId: 'js-intro'
  },
  {
    id: 'dsa',
    title: 'Data Structures & Algorithms',
    description: 'Learn essential DSA concepts to ace coding interviews and become a better programmer.',
    image: 'https://images.unsplash.com/photo-1516259762381-22954d7d3ad2?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60',
    rating: 4.9,
    students: 8700,
    duration: '10 weeks',
    level: 'Intermediate',
    features: [
      'Comprehensive DSA coverage',
      'Problem-solving techniques',
      'Coding interview preparation',
      'Performance optimization',
      'Certificate of completion',
    ],
    price: 'Free',
    color: 'bg-indigo-600',
    firstLessonId: 'arrays-intro'
  },
  {
    id: 'java',
    title: 'Java Programming',
    description: 'Learn Java programming from basics to advanced concepts with practical examples.',
    image: 'https://images.unsplash.com/photo-1517694712202-14dd9538aa97?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60',
    rating: 4.6,
    students: 9200,
    duration: '8 weeks',
    level: 'Beginner to Intermediate',
    features: [
      'Java fundamentals and OOP',
      'Java collections framework',
      'Exception handling',
      'File I/O operations',
      'Certificate of completion',
    ],
    price: 'Free',
    color: 'bg-red-600',
    firstLessonId: 'java-basics'
  },
  {
    id: 'cpp',
    title: 'C++ Programming',
    description: 'Master C++ programming with comprehensive tutorials and practical projects.',
    image: 'https://images.unsplash.com/photo-1542831371-29b0f74f9713?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60',
    rating: 4.7,
    students: 7500,
    duration: '9 weeks',
    level: 'Intermediate',
    features: [
      'C++ fundamentals and OOP',
      'Memory management',
      'STL library',
      'Game development basics',
      'Certificate of completion',
    ],
    price: 'Free',
    color: 'bg-green-600',
    firstLessonId: 'cpp-intro'
  },
  {
    id: 'web-dev',
    title: 'Full Stack Web Development',
    description: 'Learn to build complete web applications with modern technologies.',
    image: 'https://images.unsplash.com/photo-1547658719-da2b51169166?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60',
    rating: 4.8,
    students: 11300,
    duration: '12 weeks',
    level: 'Intermediate to Advanced',
    features: [
      'HTML, CSS, and JavaScript',
      'React.js frontend',
      'Node.js backend',
      'Database integration',
      'Certificate of completion',
    ],
    price: 'Free',
    color: 'bg-purple-600',
    firstLessonId: 'html-basics'
  }
];

const courses: Course[] = listCourses;

export const useCourseStore = create<CourseState>()(
  persist(
    (set, get) => ({
      enrolledCourses: [
        {
          id: 'c-programming',
          title: 'Learn C Programming',
          category: 'Programming',
          progress: 7,
          image: 'https://images.unsplash.com/photo-1515879218367-8466d910aaa4?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60',
          color: 'bg-orange-100',
          totalProblems: 64,
          solvedProblems: 0,
          totalQuizzes: 82,
          solvedQuizzes: 0,
          firstLessonId: 'c-intro'
        }
      ],
      recommendedCourses: [
        {
          id: 'go-beginner',
          title: 'Go | Beginner',
          category: 'Programming',
          progress: 0,
          image: 'https://images.unsplash.com/photo-1542831371-29b0f74f9713?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60',
          color: 'bg-cyan-50',
          totalProblems: 90,
          solvedProblems: 0,
          totalQuizzes: 60,
          solvedQuizzes: 0,
          firstLessonId: 'basic-syntax'
        },
        {
          id: 'go-fundamentals',
          title: 'Go | Fundamentals',
          category: 'Programming',
          progress: 0,
          image: 'https://images.unsplash.com/photo-1580894894513-541e068a3e2b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60',
          color: 'bg-cyan-100',
          totalProblems: 120,
          solvedProblems: 0,
          totalQuizzes: 80,
          solvedQuizzes: 0,
          firstLessonId: 'structs-interfaces'
        },
        {
          id: 'go-intermediate',
          title: 'Go | Intermediate',
          category: 'Programming',
          progress: 0,
          image: 'https://images.unsplash.com/photo-1517694712202-14dd9538aa97?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60',
          color: 'bg-cyan-200',
          totalProblems: 150,
          solvedProblems: 0,
          totalQuizzes: 100,
          solvedQuizzes: 0,
          firstLessonId: 'advanced-concurrency'
        }
      ],
      allCourses: courses,
      listCourses,
      dailyChallenge: {
        id: 'challenge-1',
        title: 'Convert to snake_case',
        description: 'Convert a camelCase string to snake_case',
        difficulty: 'easy',
        xpPoints: 50
      },
      leaderboard: [
        {
          id: '1',
          name: 'Mohammad Mahmud',
          xp: 3540,
          rank: 1,
          avatar: 'https://ui-avatars.com/api/?name=MM&background=0D8ABC&color=fff'
        },
        {
          id: '2',
          name: 'Johnnie Eye',
          xp: 3280,
          rank: 2,
          avatar: 'https://ui-avatars.com/api/?name=JE&background=9C27B0&color=fff'
        },
        {
          id: '3',
          name: 'Sabira Kabir Sabah',
          xp: 3150,
          rank: 3,
          avatar: 'https://ui-avatars.com/api/?name=SK&background=2196F3&color=fff'
        }
      ],
      currentStreak: 1,
      highestStreak: 1,
      totalXp: 0,
      solvedChallenges: 0,
      
      enrollInCourse: (courseId) => {
        set((state) => {
          const course = state.recommendedCourses.find(c => c.id === courseId);
          if (!course) return state;
          
          return {
            enrolledCourses: [...state.enrolledCourses, course],
            recommendedCourses: state.recommendedCourses.filter(c => c.id !== courseId)
          };
        });
      },
      
      updateCourseProgress: (courseId, progress) => {
        set((state) => ({
          enrolledCourses: state.enrolledCourses.map(course => 
            course.id === courseId ? { ...course, progress } : course
          )
        }));
      },

      getCourseById: (courseId) => {
        return listCourses.find(course => course.id === courseId);
      }
    }),
    {
      name: 'course-storage',
      partialize: (state) => ({ 
        enrolledCourses: state.enrolledCourses,
        totalXp: state.totalXp,
        solvedChallenges: state.solvedChallenges,
        currentStreak: state.currentStreak,
        highestStreak: state.highestStreak
      })
    }
  )
);

/== store/integrationStore.ts
import { create } from 'zustand';

interface ApiKey {
  id: string;
  name: string;
  key: string;
  created: string;
  lastUsed: string;
  requests: number;
}

interface PaymentGateway {
  id: string;
  name: string;
  status: 'active' | 'inactive';
  mode: 'live' | 'test';
  lastSync: string;
  transactionsCount: number;
}

interface SsoProvider {
  id: string;
  name: string;
  domain: string;
  status: 'active' | 'inactive';
  users: number;
  lastSync: string;
}

interface ThirdPartyIntegration {
  id: string;
  name: string;
  category: string;
  status: 'active' | 'inactive';
  lastSync: string;
  apiCalls: number;
}

interface Webhook {
  id: string;
  name: string;
  url: string;
  event: string;
  status: 'active' | 'inactive';
  lastTriggered: string;
  successRate: number;
}

interface IntegrationState {
  apiKeys: ApiKey[];
  paymentGateways: PaymentGateway[];
  ssoProviders: SsoProvider[];
  thirdPartyIntegrations: ThirdPartyIntegration[];
  webhooks: Webhook[];
  isLoading: boolean;
  error: string | null;
  
  // API Keys actions
  fetchApiKeys: () => Promise<void>;
  addApiKey: (apiKey: Omit<ApiKey, 'id'>) => Promise<void>;
  updateApiKey: (id: string, apiKey: Partial<ApiKey>) => Promise<void>;
  deleteApiKey: (id: string) => Promise<void>;
  
  // Payment Gateways actions
  fetchPaymentGateways: () => Promise<void>;
  addPaymentGateway: (gateway: Omit<PaymentGateway, 'id'>) => Promise<void>;
  updatePaymentGateway: (id: string, gateway: Partial<PaymentGateway>) => Promise<void>;
  deletePaymentGateway: (id: string) => Promise<void>;
  
  // SSO Providers actions
  fetchSsoProviders: () => Promise<void>;
  addSsoProvider: (provider: Omit<SsoProvider, 'id'>) => Promise<void>;
  updateSsoProvider: (id: string, provider: Partial<SsoProvider>) => Promise<void>;
  deleteSsoProvider: (id: string) => Promise<void>;
  
  // Third Party Integrations actions
  fetchThirdPartyIntegrations: () => Promise<void>;
  addThirdPartyIntegration: (integration: Omit<ThirdPartyIntegration, 'id'>) => Promise<void>;
  updateThirdPartyIntegration: (id: string, integration: Partial<ThirdPartyIntegration>) => Promise<void>;
  deleteThirdPartyIntegration: (id: string) => Promise<void>;
  
  // Webhooks actions
  fetchWebhooks: () => Promise<void>;
  addWebhook: (webhook: Omit<Webhook, 'id'>) => Promise<void>;
  updateWebhook: (id: string, webhook: Partial<Webhook>) => Promise<void>;
  deleteWebhook: (id: string) => Promise<void>;
}

// Mock data untuk pengembangan
const mockApiKeys: ApiKey[] = [
  {
    id: '1',
    name: 'Production API Key',
    key: 'pk_live_123456789',
    created: '2024-03-01',
    lastUsed: '2024-03-20 14:30',
    requests: 1256
  },
  {
    id: '2',
    name: 'Development API Key',
    key: 'pk_test_987654321',
    created: '2024-03-15',
    lastUsed: '2024-03-19 10:15',
    requests: 892
  }
];

const mockPaymentGateways: PaymentGateway[] = [
  {
    id: '1',
    name: 'Stripe',
    status: 'active',
    mode: 'live',
    lastSync: '2024-03-20 14:30',
    transactionsCount: 156
  },
  {
    id: '2',
    name: 'PayPal',
    status: 'inactive',
    mode: 'test',
    lastSync: '2024-03-19 10:15',
    transactionsCount: 89
  }
];

const mockSsoProviders: SsoProvider[] = [
  {
    id: '1',
    name: 'Google Workspace',
    domain: 'company.com',
    status: 'active',
    users: 156,
    lastSync: '2024-03-20 14:30'
  },
  {
    id: '2',
    name: 'Microsoft Azure AD',
    domain: 'enterprise.com',
    status: 'inactive',
    users: 89,
    lastSync: '2024-03-19 10:15'
  },
  {
    id: '3',
    name: 'Okta',
    domain: 'organization.com',
    status: 'active',
    users: 245,
    lastSync: '2024-03-18 09:45'
  }
];

const mockThirdPartyIntegrations: ThirdPartyIntegration[] = [
  {
    id: '1',
    name: 'Google Analytics',
    category: 'Analytics',
    status: 'active',
    lastSync: '2024-03-20 14:30',
    apiCalls: 1256
  },
  {
    id: '2',
    name: 'Mailchimp',
    category: 'Email',
    status: 'active',
    lastSync: '2024-03-19 10:15',
    apiCalls: 892
  },
  {
    id: '3',
    name: 'Slack',
    category: 'Communication',
    status: 'inactive',
    lastSync: '2024-03-18 09:45',
    apiCalls: 456
  }
];

const mockWebhooks: Webhook[] = [
  {
    id: '1',
    name: 'Course Completion Webhook',
    url: 'https://api.example.com/webhooks/course-complete',
    event: 'course.completed',
    status: 'active',
    lastTriggered: '2024-03-20 14:30',
    successRate: 98.5
  },
  {
    id: '2',
    name: 'Payment Success Webhook',
    url: 'https://api.example.com/webhooks/payment',
    event: 'payment.success',
    status: 'active',
    lastTriggered: '2024-03-19 10:15',
    successRate: 100
  },
  {
    id: '3',
    name: 'User Registration Webhook',
    url: 'https://api.example.com/webhooks/user',
    event: 'user.created',
    status: 'inactive',
    lastTriggered: '2024-03-18 09:45',
    successRate: 95.2
  }
];

// Implementasi store dengan Zustand
const useIntegrationStore = create<IntegrationState>((set, get) => ({
  apiKeys: mockApiKeys,
  paymentGateways: mockPaymentGateways,
  ssoProviders: mockSsoProviders,
  thirdPartyIntegrations: mockThirdPartyIntegrations,
  webhooks: mockWebhooks,
  isLoading: false,
  error: null,
  
  // API Keys actions
  fetchApiKeys: async () => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      set({ apiKeys: mockApiKeys, isLoading: false });
    } catch (error) {
      set({ error: 'Gagal mengambil data API keys', isLoading: false });
    }
  },
  
  addApiKey: async (apiKey) => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      const newApiKey = {
        ...apiKey,
        id: Date.now().toString(),
        created: new Date().toISOString().split('T')[0],
        lastUsed: '-',
        requests: 0
      };
      set(state => ({
        apiKeys: [...state.apiKeys, newApiKey],
        isLoading: false
      }));
    } catch (error) {
      set({ error: 'Gagal menambahkan API key', isLoading: false });
    }
  },
  
  updateApiKey: async (id, apiKey) => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      set(state => ({
        apiKeys: state.apiKeys.map(key => key.id === id ? { ...key, ...apiKey } : key),
        isLoading: false
      }));
    } catch (error) {
      set({ error: 'Gagal memperbarui API key', isLoading: false });
    }
  },
  
  deleteApiKey: async (id) => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      set(state => ({
        apiKeys: state.apiKeys.filter(key => key.id !== id),
        isLoading: false
      }));
    } catch (error) {
      set({ error: 'Gagal menghapus API key', isLoading: false });
    }
  },
  
  // Payment Gateways actions
  fetchPaymentGateways: async () => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      set({ paymentGateways: mockPaymentGateways, isLoading: false });
    } catch (error) {
      set({ error: 'Gagal mengambil data gateway pembayaran', isLoading: false });
    }
  },
  
  addPaymentGateway: async (gateway) => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      const newGateway = {
        ...gateway,
        id: Date.now().toString(),
        lastSync: '-',
        transactionsCount: 0
      };
      set(state => ({
        paymentGateways: [...state.paymentGateways, newGateway],
        isLoading: false
      }));
    } catch (error) {
      set({ error: 'Gagal menambahkan gateway pembayaran', isLoading: false });
    }
  },
  
  updatePaymentGateway: async (id, gateway) => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      set(state => ({
        paymentGateways: state.paymentGateways.map(g => g.id === id ? { ...g, ...gateway } : g),
        isLoading: false
      }));
    } catch (error) {
      set({ error: 'Gagal memperbarui gateway pembayaran', isLoading: false });
    }
  },
  
  deletePaymentGateway: async (id) => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      set(state => ({
        paymentGateways: state.paymentGateways.filter(g => g.id !== id),
        isLoading: false
      }));
    } catch (error) {
      set({ error: 'Gagal menghapus gateway pembayaran', isLoading: false });
    }
  },
  
  // SSO Providers actions
  fetchSsoProviders: async () => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      set({ ssoProviders: mockSsoProviders, isLoading: false });
    } catch (error) {
      set({ error: 'Gagal mengambil data provider SSO', isLoading: false });
    }
  },
  
  addSsoProvider: async (provider) => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      const newProvider = {
        ...provider,
        id: Date.now().toString(),
        lastSync: '-',
        users: 0
      };
      set(state => ({
        ssoProviders: [...state.ssoProviders, newProvider],
        isLoading: false
      }));
    } catch (error) {
      set({ error: 'Gagal menambahkan provider SSO', isLoading: false });
    }
  },
  
  updateSsoProvider: async (id, provider) => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      set(state => ({
        ssoProviders: state.ssoProviders.map(p => p.id === id ? { ...p, ...provider } : p),
        isLoading: false
      }));
    } catch (error) {
      set({ error: 'Gagal memperbarui provider SSO', isLoading: false });
    }
  },
  
  deleteSsoProvider: async (id) => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      set(state => ({
        ssoProviders: state.ssoProviders.filter(p => p.id !== id),
        isLoading: false
      }));
    } catch (error) {
      set({ error: 'Gagal menghapus provider SSO', isLoading: false });
    }
  },
  
  // Third Party Integrations actions
  fetchThirdPartyIntegrations: async () => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      set({ thirdPartyIntegrations: mockThirdPartyIntegrations, isLoading: false });
    } catch (error) {
      set({ error: 'Gagal mengambil data integrasi pihak ketiga', isLoading: false });
    }
  },
  
  addThirdPartyIntegration: async (integration) => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      const newIntegration = {
        ...integration,
        id: Date.now().toString(),
        lastSync: '-',
        apiCalls: 0
      };
      set(state => ({
        thirdPartyIntegrations: [...state.thirdPartyIntegrations, newIntegration],
        isLoading: false
      }));
    } catch (error) {
      set({ error: 'Gagal menambahkan integrasi pihak ketiga', isLoading: false });
    }
  },
  
  updateThirdPartyIntegration: async (id, integration) => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      set(state => ({
        thirdPartyIntegrations: state.thirdPartyIntegrations.map(i => i.id === id ? { ...i, ...integration } : i),
        isLoading: false
      }));
    } catch (error) {
      set({ error: 'Gagal memperbarui integrasi pihak ketiga', isLoading: false });
    }
  },
  
  deleteThirdPartyIntegration: async (id) => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      set(state => ({
        thirdPartyIntegrations: state.thirdPartyIntegrations.filter(i => i.id !== id),
        isLoading: false
      }));
    } catch (error) {
      set({ error: 'Gagal menghapus integrasi pihak ketiga', isLoading: false });
    }
  },
  
  // Webhooks actions
  fetchWebhooks: async () => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      set({ webhooks: mockWebhooks, isLoading: false });
    } catch (error) {
      set({ error: 'Gagal mengambil data webhook', isLoading: false });
    }
  },
  
  addWebhook: async (webhook) => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      const newWebhook = {
        ...webhook,
        id: Date.now().toString(),
        lastTriggered: '-',
        successRate: 0
      };
      set(state => ({
        webhooks: [...state.webhooks, newWebhook],
        isLoading: false
      }));
    } catch (error) {
      set({ error: 'Gagal menambahkan webhook', isLoading: false });
    }
  },
  
  updateWebhook: async (id, webhook) => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      set(state => ({
        webhooks: state.webhooks.map(w => w.id === id ? { ...w, ...webhook } : w),
        isLoading: false
      }));
    } catch (error) {
      set({ error: 'Gagal memperbarui webhook', isLoading: false });
    }
  },
  
  deleteWebhook: async (id) => {
    set({ isLoading: true, error: null });
    try {
      // Simulasi API call
      await new Promise(resolve => setTimeout(resolve, 500));
      set(state => ({
        webhooks: state.webhooks.filter(w => w.id !== id),
        isLoading: false
      }));
    } catch (error) {
      set({ error: 'Gagal menghapus webhook', isLoading: false });
    }
  }
}));

export default useIntegrationStore;

/== store/learningStore.ts
import { create } from 'zustand';
import goCourses from '../data/courses/go';

export interface LearningStep {
  id: string;
  title: string;
  type: 'lesson' | 'quiz' | 'practice';
  content: string;
  code?: string;
  expectedOutput?: string;
  options?: {
    id: string;
    text: string;
    isCorrect: boolean;
  }[];
}

interface LessonContent {
  id: string;
  level: string;
  title: string;
  description: string;
  steps: LearningStep[];
  nextLessonId?: string;
}

interface CourseContent {
  id: string;
  title: string;
  description: string;
  lessons: LessonContent[];
}

interface LearningState {
  currentStep: number;
  setCurrentStep: (step: number) => void;
  getCurrentContent: (courseId: string, lessonId: string) => LessonContent | null;
}

// Course content mapping
const courseContent: Record<string, CourseContent> = {
  'go-beginner': {
    id: 'go-beginner',
    title: 'Go | Beginner',
    description: 'Start your Go programming journey with basic concepts and syntax.',
    lessons: goCourses.beginner.lessons
  },
  'go-fundamentals': {
    id: 'go-fundamentals',
    title: 'Go | Fundamentals',
    description: 'Master Go fundamentals including structs, interfaces, error handling, and basic web development',
    lessons: goCourses.fundamentals.lessons
  },
  'go-intermediate': {
    id: 'go-intermediate',
    title: 'Go | Intermediate',
    description: 'Take your Go skills to the next level with advanced concurrency, testing, and API development',
    lessons: goCourses.intermediate.lessons
  },
  'go-expert': {
    id: 'go-expert',
    title: 'Go | Expert',
    description: 'Become a Go expert with microservices, performance optimization, and advanced design patterns',
    lessons: goCourses.expert.lessons
  },
  'python': {
    id: 'python',
    title: 'Python',
    description: 'Learn Python programming',
    lessons: [
      {
        id: 'basic-syntax',
        level: 'basic-syntax',
        title: 'Python Basic Syntax',
        description: 'Learn the fundamental syntax and concepts of Python programming',
        steps: [
          {
            id: 'introduction',
            title: 'Introduction to Python',
            type: 'lesson',
            content: '<h2>Welcome to Python</h2><p>Python is a high-level, interpreted programming language...</p>',
            code: 'print("Hello, Python!")'
          }
        ]
      }
    ]
  },
  'javascript': {
    id: 'javascript',
    title: 'JavaScript',
    description: 'Learn JavaScript programming',
    lessons: [
      {
        id: 'basic-syntax',
        level: 'basic-syntax',
        title: 'JavaScript Basic Syntax',
        description: 'Learn the fundamental syntax and concepts of JavaScript',
        steps: [
          {
            id: 'introduction',
            title: 'Introduction to JavaScript',
            type: 'lesson',
            content: '<h2>Welcome to JavaScript</h2><p>JavaScript is a versatile programming language...</p>',
            code: 'console.log("Hello, JavaScript!");'
          }
        ]
      }
    ]
  }
};

export const useLearningStore = create<LearningState>((set) => ({
  currentStep: 1,

  setCurrentStep: (step) => {
    set({ currentStep: step });
  },

  getCurrentContent: (courseId, lessonId) => {
    const course = courseContent[courseId];
    if (!course) {
      return null;
    }

    // Ensure lessons is an array before using find
    if (!Array.isArray(course.lessons)) {
      return null;
    }

    const lesson = course.lessons.find(l => l.level === lessonId);
    if (!lesson) {
      return null;
    }

    return lesson;
  },
}));

/== store/notificationStore.ts
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

export interface Notification {
  id: string;
  title: string;
  message: string;
  type: 'info' | 'success' | 'warning' | 'error';
  timestamp: number;
  read: boolean;
  link?: string;
}

interface NotificationState {
  notifications: Notification[];
  unreadCount: number;
  addNotification: (notification: Omit<Notification, 'id' | 'timestamp' | 'read'>) => void;
  markAsRead: (id: string) => void;
  markAllAsRead: () => void;
  removeNotification: (id: string) => void;
  clearAll: () => void;
}

const now = Date.now();
const hour = 3600000;
const day = 86400000;

export const useNotificationStore = create<NotificationState>()(
  persist(
    (set, get) => ({
      notifications: [
        {
          id: '1',
          title: 'New Course Available',
          message: 'Advanced Go Programming course is now available! Start learning advanced concepts and patterns.',
          type: 'info',
          timestamp: now - (1 * hour),
          read: false,
          link: '/courses/go-advanced'
        },
        {
          id: '2',
          title: 'Achievement Unlocked',
          message: 'Congratulations! You\'ve completed your first Go lesson. Keep up the great work!',
          type: 'success',
          timestamp: now - (2 * hour),
          read: false,
          link: '/achievements'
        },
        {
          id: '3',
          title: 'Daily Streak',
          message: 'Keep going! You\'re on a 3-day learning streak. Complete today\'s challenge to maintain it.',
          type: 'warning',
          timestamp: now - (1 * day),
          read: true
        },
        {
          id: '4',
          title: 'New Learning Path Available',
          message: 'Explore our new Backend Development learning path with structured curriculum.',
          type: 'info',
          timestamp: now - (2 * day),
          read: false,
          link: '/roadmap/backend'
        },
        {
          id: '5',
          title: 'Certificate Ready',
          message: 'Your Python Basics certificate is ready to be claimed! View and share your achievement.',
          type: 'success',
          timestamp: now - (3 * day),
          read: false,
          link: '/certificates'
        },
        {
          id: '6',
          title: 'Weekly Challenge',
          message: 'New weekly coding challenge is available. Solve it to earn bonus XP!',
          type: 'info',
          timestamp: now - (4 * day),
          read: true,
          link: '/challenges'
        },
        {
          id: '7',
          title: 'Community Milestone',
          message: 'Your helpful comments have reached 100 likes! Keep contributing to the community.',
          type: 'success',
          timestamp: now - (5 * day),
          read: true
        },
        {
          id: '8',
          title: 'Course Update',
          message: 'JavaScript Fundamentals course has been updated with new content and exercises.',
          type: 'info',
          timestamp: now - (6 * day),
          read: true,
          link: '/courses/javascript'
        },
        {
          id: '9',
          title: 'Security Alert',
          message: 'New login detected from an unknown device. Please review your account activity.',
          type: 'error',
          timestamp: now - (7 * day),
          read: true,
          link: '/settings/security'
        },
        {
          id: '10',
          title: 'Limited Time Offer',
          message: 'Get 50% off on annual subscription. Offer ends in 48 hours!',
          type: 'warning',
          timestamp: now - (8 * day),
          read: true,
          link: '/pricing'
        },
        {
          id: '11',
          title: 'Project Review',
          message: 'Your project submission has been reviewed. Check the feedback from our mentors.',
          type: 'info',
          timestamp: now - (9 * day),
          read: true,
          link: '/projects'
        },
        {
          id: '12',
          title: 'New Feature',
          message: 'Try out our new AI-powered code review feature in the compiler.',
          type: 'info',
          timestamp: now - (10 * day),
          read: true,
          link: '/compiler'
        },
        {
          id: '13',
          title: 'Learning Reminder',
          message: 'Don\'t forget to complete your daily coding practice to maintain your streak!',
          type: 'warning',
          timestamp: now - (11 * day),
          read: true
        },
        {
          id: '14',
          title: 'Community Event',
          message: 'Join our upcoming live coding session with industry experts this weekend.',
          type: 'info',
          timestamp: now - (12 * day),
          read: true,
          link: '/events'
        },
        {
          id: '15',
          title: 'Profile Milestone',
          message: 'Your profile has been viewed 1000 times! Update your portfolio to attract more opportunities.',
          type: 'success',
          timestamp: now - (13 * day),
          read: true,
          link: '/profile'
        }
      ],
      unreadCount: 4,

      addNotification: (notification) => {
        const newNotification = {
          ...notification,
          id: Math.random().toString(36).substr(2, 9),
          timestamp: Date.now(),
          read: false
        };

        set((state) => ({
          notifications: [newNotification, ...state.notifications],
          unreadCount: state.unreadCount + 1
        }));
      },

      markAsRead: (id) => {
        set((state) => {
          const notification = state.notifications.find(n => n.id === id);
          if (notification && !notification.read) {
            return {
              notifications: state.notifications.map(n =>
                n.id === id ? { ...n, read: true } : n
              ),
              unreadCount: state.unreadCount - 1
            };
          }
          return state;
        });
      },

      markAllAsRead: () => {
        set((state) => ({
          notifications: state.notifications.map(n => ({ ...n, read: true })),
          unreadCount: 0
        }));
      },

      removeNotification: (id) => {
        set((state) => {
          const notification = state.notifications.find(n => n.id === id);
          return {
            notifications: state.notifications.filter(n => n.id !== id),
            unreadCount: notification && !notification.read 
              ? state.unreadCount - 1 
              : state.unreadCount
          };
        });
      },

      clearAll: () => {
        set({ notifications: [], unreadCount: 0 });
      }
    }),
    {
      name: 'notification-storage'
    }
  )
);

/== store/roadmapStore.ts
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

export interface RoadmapNode {
  id: string;
  title: string;
  description?: string;
  type: 'primary' | 'secondary' | 'highlight';
  isCompleted?: boolean;
  isActive?: boolean;
  children?: RoadmapNode[];
  parentId?: string;
}

interface RoadmapState {
  currentRoadmap: string | null;
  completedNodes: string[];
  activeNode: string | null;
  setCurrentRoadmap: (roadmap: string) => void;
  completeNode: (nodeId: string) => void;
  setActiveNode: (nodeId: string | null) => void;
  getRoadmapProgress: (roadmapId: string) => number;
}

export const useRoadmapStore = create<RoadmapState>()(
  persist(
    (set, get) => ({
      currentRoadmap: null,
      completedNodes: [],
      activeNode: null,

      setCurrentRoadmap: (roadmap) => {
        set({ currentRoadmap: roadmap });
      },

      completeNode: (nodeId) => {
        set((state) => ({
          completedNodes: [...state.completedNodes, nodeId]
        }));
      },

      setActiveNode: (nodeId) => {
        set({ activeNode: nodeId });
      },

      getRoadmapProgress: (roadmapId) => {
        const { completedNodes } = get();
        // Calculate progress based on completed nodes
        // This is a simplified version - you would need to know total nodes for the roadmap
        return (completedNodes.length / 100) * 100;
      }
    }),
    {
      name: 'roadmap-storage'
    }
  )
);

/== store/submissionStore.ts
import { create } from 'zustand';

export interface SubmissionState {
  status: 'reviewing' | 'rejected' | 'approved' | null;
  feedback: {
    type: 'success' | 'error';
    message: string;
  }[];
  reviewerNotes: string | null;
  submissionFiles: {
    name: string;
    path: string;
    comments: number;
  }[];
  setStatus: (status: 'reviewing' | 'rejected' | 'approved' | null) => void;
  setFeedback: (feedback: { type: 'success' | 'error'; message: string; }[]) => void;
  setReviewerNotes: (notes: string | null) => void;
  setSubmissionFiles: (files: { name: string; path: string; comments: number; }[]) => void;
  reset: () => void;
}

export const useSubmissionStore = create<SubmissionState>((set) => ({
  status: null,
  feedback: [],
  reviewerNotes: null,
  submissionFiles: [],
  
  setStatus: (status) => set({ status }),
  setFeedback: (feedback) => set({ feedback }),
  setReviewerNotes: (notes) => set({ reviewerNotes: notes }),
  setSubmissionFiles: (files) => set({ submissionFiles: files }),
  reset: () => set({
    status: null,
    feedback: [],
    reviewerNotes: null,
    submissionFiles: []
  })
}));

/== store/subscriptionStore.ts
import { create } from 'zustand';

interface Feature {
  name: string;
  included: boolean;
}

export interface Subscription {
  id: string;
  type: 'free' | 'premium' | 'lifetime' | string;
  title: string;
  subtitle: string;
  monthlyPrice: number;
  yearlyPrice: number;
  buttonText: string;
  features: Feature[];
  isPopular?: boolean;
  guarantee?: string;
}

// Updated interface for global settings
export interface SubscriptionSettings {
  discountText: string;
  regionText: string;
  yearlyButtonText: string;
  monthlyButtonText: string;
  isMonthly: boolean; // Added to track current view mode
}

// Enhanced interface to match the updated SubscriptionCard editedValues format
interface CardEditedValues {
  title: string;
  subtitle: string;
  price: number;
  buttonText: string;
  features: Feature[];
  newFeature?: string; // Optional - only used in the card component
  guarantee?: string; // Added guarantee field
}

interface SubscriptionStore {
  subscriptions: Subscription[];
  settings: SubscriptionSettings;
  addSubscription: (subscription: Subscription) => void;
  updateSubscription: (id: string, updatedData: Partial<Subscription>) => void;
  updateSubscriptionFromCard: (id: string, editedValues: CardEditedValues) => void;
  addFeature: (id: string, featureName: string) => void;
  deleteFeature: (id: string, featureIndex: number) => void;
  updateFeature: (id: string, featureIndex: number, newName: string) => void;
  updateGuarantee: (id: string, guaranteeText: string) => void; // Added method for guarantee updates
  deleteSubscription: (subscriptionId: string) => void;
  updateSettings: (newSettings: Partial<SubscriptionSettings>) => void;
  togglePriceMode: () => void; // Toggle between monthly and yearly
  initializeStore: () => void;
  getCurrentPrice: (subscription: Subscription) => number; // Helper to get current price based on view mode
}

// Sample data matching the image shown
const sampleSubscriptions: Subscription[] = [
  {
    id: '1',
    type: 'free',
    title: 'Free',
    subtitle: 'Remains free forever',
    monthlyPrice: 0,
    yearlyPrice: 0,
    buttonText: 'Start for free',
    isPopular: false,
    features: [
      { name: 'Early chapters', included: true },
      { name: 'Limited challenges', included: true },
      { name: 'Unlimited AI guidance', included: true },
      { name: 'Practice projects', included: true },
      { name: 'Professional certifications', included: true },
      { name: 'Unlimited coding playground', included: true },
    ]
  },
  {
    id: '2',
    type: 'premium',
    title: 'Premium',
    subtitle: 'Access to everything',
    monthlyPrice: 48000, // Monthly price
    yearlyPrice: 578317, // Yearly price (shown in the image)
    buttonText: 'Get premium',
    isPopular: true,
    features: [
      { name: 'Full course catalog', included: true },
      { name: 'Coding challenges', included: true },
      { name: 'Unlimited AI guidance', included: true },
      { name: 'Practice projects', included: true },
      { name: 'Interview preparation courses', included: true },
      { name: 'Professional certifications', included: true },
      { name: 'Unlimited coding playground', included: true },
    ],
    guarantee: '14-day money back guarantee'
  },
  {
    id: '3',
    type: 'lifetime',
    title: 'Lifetime',
    subtitle: 'Access to PRO forever',
    monthlyPrice: 160000, // Estimated monthly equivalent
    yearlyPrice: 1923097, // Lifetime price (shown in the image)
    buttonText: 'Get lifetime access',
    isPopular: false,
    features: [
      { name: 'Everything in Premium plus:', included: true },
      { name: 'Lifetime access', included: true },
      { name: 'No recurring payments', included: true },
    ]
  }
];

// Updated default settings
const defaultSettings: SubscriptionSettings = {
  discountText: 'Save 66%',
  regionText: 'Price discounted based on your region',
  yearlyButtonText: 'Yearly',
  monthlyButtonText: 'Monthly',
  isMonthly: true // Default to monthly view
};

export const useSubscriptionStore = create<SubscriptionStore>((set, get) => ({
  subscriptions: [],
  settings: defaultSettings,
  
  addSubscription: (subscription) => 
    set((state) => ({ 
      subscriptions: [...state.subscriptions, subscription] 
    })),
  
  // Generic update method for direct updates
  updateSubscription: (id, updatedData) => 
    set((state) => ({
      subscriptions: state.subscriptions.map(sub => 
        sub.id === id ? { ...sub, ...updatedData } : sub
      )
    })),
  
  // Method that handles updates coming from the SubscriptionCard component
  updateSubscriptionFromCard: (id, editedValues) => {
    const { settings } = get();
    
    // Map card values to subscription format
    const updatedData: Partial<Subscription> = {
      title: editedValues.title,
      subtitle: editedValues.subtitle,
      buttonText: editedValues.buttonText,
      features: editedValues.features,
      guarantee: editedValues.guarantee
    };
    
    // Update the correct price field based on current view mode
    if (settings.isMonthly) {
      updatedData.monthlyPrice = editedValues.price;
    } else {
      updatedData.yearlyPrice = editedValues.price;
    }
    
    // Update the subscription
    set((state) => ({
      subscriptions: state.subscriptions.map(sub => 
        sub.id === id ? { ...sub, ...updatedData } : sub
      )
    }));
  },
  
  // Add a new feature to a subscription
  addFeature: (id, featureName) => 
    set((state) => ({
      subscriptions: state.subscriptions.map(sub => 
        sub.id === id 
          ? { 
              ...sub, 
              features: [...sub.features, { name: featureName, included: true }]
            } 
          : sub
      )
    })),
  
  // Delete a feature from a subscription
  deleteFeature: (id, featureIndex) => 
    set((state) => ({
      subscriptions: state.subscriptions.map(sub => {
        if (sub.id === id) {
          const updatedFeatures = [...sub.features];
          updatedFeatures.splice(featureIndex, 1);
          return { ...sub, features: updatedFeatures };
        }
        return sub;
      })
    })),
  
  // Update a feature name
  updateFeature: (id, featureIndex, newName) => 
    set((state) => ({
      subscriptions: state.subscriptions.map(sub => {
        if (sub.id === id) {
          const updatedFeatures = [...sub.features];
          updatedFeatures[featureIndex] = { 
            ...updatedFeatures[featureIndex], 
            name: newName 
          };
          return { ...sub, features: updatedFeatures };
        }
        return sub;
      })
    })),
    
  // Update the guarantee text
  updateGuarantee: (id, guaranteeText) => 
    set((state) => ({
      subscriptions: state.subscriptions.map(sub => 
        sub.id === id 
          ? { ...sub, guarantee: guaranteeText } 
          : sub
      )
    })),
  
  deleteSubscription: (subscriptionId) => 
    set((state) => ({
      subscriptions: state.subscriptions.filter(sub => sub.id !== subscriptionId)
    })),
    
  // Updated to accept partial settings updates
  updateSettings: (newSettings) =>
    set((state) => ({
      settings: { ...state.settings, ...newSettings }
    })),
  
  // Toggle between monthly and yearly view
  togglePriceMode: () =>
    set((state) => ({
      settings: { 
        ...state.settings, 
        isMonthly: !state.settings.isMonthly 
      }
    })),

  // Helper to get the current price based on view mode
  getCurrentPrice: (subscription) => {
    const { settings } = get();
    return settings.isMonthly ? subscription.monthlyPrice : subscription.yearlyPrice;
  },

  // Function to initialize the store with sample data
  initializeStore: () => 
    set({ 
      subscriptions: sampleSubscriptions,
      settings: defaultSettings 
    })
}));

// Initialize the store when the module is imported
// Remove this if you want to call initializeStore explicitly in your app
useSubscriptionStore.getState().initializeStore();

/== store/themeStore.ts
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

interface ThemeState {
  isDarkMode: boolean;
  toggleTheme: () => void;
}

export const useThemeStore = create<ThemeState>()(
  persist(
    (set) => ({
      isDarkMode: true, // Default to dark mode
      toggleTheme: () => set((state) => ({ isDarkMode: !state.isDarkMode })),
    }),
    {
      name: 'theme-storage',
    }
  )
);

/== store/useBundleStore.ts
import create from 'zustand';
import { devtools, persist } from 'zustand/middleware';

export interface Course {
  id: string;
  title: string;
  description: string;
  price: number;
  duration: number;
  level: 'beginner' | 'intermediate' | 'advanced';
  category: string;
  image: string;
}

export interface Bundle {
  id: string;
  title: string;
  description: string;
  courses: string[]; // array of course IDs
  originalPrice: number; // sum of individual course prices
  bundlePrice: number; // discounted price
  discountPercentage: number;
  theme: string;
  difficultyLevel: 'beginner' | 'intermediate' | 'advanced';
  careerPath?: string;
  limitedTime: boolean;
  startDate?: Date;
  endDate?: Date;
  accessDuration: 'lifetime' | number; // number of days if not lifetime
  prerequisites?: string[];
  courseOrder?: string[];
  hasCertificate: boolean;
  createdAt: Date;
  updatedAt: Date;
  isActive: boolean;
  customLandingPage?: {
    banner?: string;
    testimonials?: { name: string; text: string }[];
    highlights?: string[];
    customCSS?: string;
  };
}

export interface BundleStats {
  id: string;
  bundleId: string;
  purchases: number;
  completionRate: number;
  averageCompletionTime: number;
  mostPopularCourse: string;
  revenue: number;
  createdAt: Date;
}

interface BundleState {
  bundles: Bundle[];
  courses: Course[];
  stats: BundleStats[];
  selectedBundle: Bundle | null;
  isLoading: boolean;
  error: string | null;
  
  // Actions
  fetchBundles: () => Promise<void>;
  fetchCourses: () => Promise<void>;
  fetchBundleStats: (bundleId: string) => Promise<void>;
  createBundle: (bundle: Omit<Bundle, 'id' | 'createdAt' | 'updatedAt'>) => Promise<void>;
  updateBundle: (id: string, bundle: Partial<Bundle>) => Promise<void>;
  deleteBundle: (id: string) => Promise<void>;
  selectBundle: (id: string) => void;
  clearSelectedBundle: () => void;
}

// Sample Courses Data
const sampleCourses: Course[] = [
  {
    id: 'c1',
    title: 'React Fundamentals',
    description: 'Learn the basics of React.js and build your first application from scratch.',
    price: 599000,
    duration: 12, // in hours
    level: 'beginner',
    category: 'frontend',
    image: 'https://via.placeholder.com/300x200?text=React+Fundamentals'
  },
  {
    id: 'c2',
    title: 'Advanced React Patterns',
    description: 'Master advanced React patterns and state management techniques for large applications.',
    price: 799000,
    duration: 15,
    level: 'intermediate',
    category: 'frontend',
    image: 'https://via.placeholder.com/300x200?text=Advanced+React'
  },
  {
    id: 'c3',
    title: 'Node.js Backend Development',
    description: 'Build scalable backends using Node.js, Express, and MongoDB.',
    price: 699000,
    duration: 14,
    level: 'intermediate',
    category: 'backend',
    image: 'https://via.placeholder.com/300x200?text=Node.js+Backend'
  },
  {
    id: 'c4',
    title: 'Introduction to Python',
    description: 'Start your programming journey with Python, a versatile and beginner-friendly language.',
    price: 499000,
    duration: 10,
    level: 'beginner',
    category: 'programming',
    image: 'https://via.placeholder.com/300x200?text=Intro+to+Python'
  },
  {
    id: 'c5',
    title: 'Data Science with Python',
    description: 'Learn data analysis, visualization, and machine learning using Python libraries.',
    price: 899000,
    duration: 20,
    level: 'intermediate',
    category: 'data-science',
    image: 'https://via.placeholder.com/300x200?text=Data+Science'
  },
  {
    id: 'c6',
    title: 'Database Design & SQL',
    description: 'Master relational database design principles and SQL queries.',
    price: 599000,
    duration: 12,
    level: 'beginner',
    category: 'database',
    image: 'https://via.placeholder.com/300x200?text=SQL+Basics'
  },
  {
    id: 'c7',
    title: 'DevOps Engineering',
    description: 'Learn CI/CD pipelines, containerization, and cloud deployment strategies.',
    price: 999000,
    duration: 18,
    level: 'advanced',
    category: 'devops',
    image: 'https://via.placeholder.com/300x200?text=DevOps'
  },
  {
    id: 'c8',
    title: 'Mobile App Development with Flutter',
    description: 'Build cross-platform mobile apps for iOS and Android using Flutter and Dart.',
    price: 799000,
    duration: 16,
    level: 'intermediate',
    category: 'mobile',
    image: 'https://via.placeholder.com/300x200?text=Flutter'
  },
  {
    id: 'c9',
    title: 'Java Programming Masterclass',
    description: 'Comprehensive Java course covering basics to advanced concepts including Spring Boot.',
    price: 849000,
    duration: 25,
    level: 'intermediate',
    category: 'programming',
    image: 'https://via.placeholder.com/300x200?text=Java+Masterclass'
  },
  {
    id: 'c10',
    title: 'UI/UX Design Principles',
    description: 'Learn user interface and experience design fundamentals to create engaging digital products.',
    price: 649000,
    duration: 14,
    level: 'beginner',
    category: 'design',
    image: 'https://via.placeholder.com/300x200?text=UI/UX+Design'
  },
  {
    id: 'c11',
    title: 'Go Programming Language',
    description: 'Learn Go (Golang) for building efficient, reliable, and scalable server-side applications.',
    price: 749000,
    duration: 15,
    level: 'intermediate',
    category: 'programming',
    image: 'https://via.placeholder.com/300x200?text=Go+Programming'
  },
  {
    id: 'c12',
    title: 'Cyber Security Fundamentals',
    description: 'Understand security principles, threat models, and basic penetration testing techniques.',
    price: 849000,
    duration: 18,
    level: 'beginner',
    category: 'security',
    image: 'https://via.placeholder.com/300x200?text=Cyber+Security'
  },
  {
    id: 'c13',
    title: 'AWS Cloud Practitioner',
    description: 'Get started with Amazon Web Services and learn cloud fundamentals.',
    price: 599000,
    duration: 12,
    level: 'beginner',
    category: 'cloud',
    image: 'https://via.placeholder.com/300x200?text=AWS+Cloud'
  },
  {
    id: 'c14',
    title: 'Microservices Architecture',
    description: 'Design, implement and deploy microservices-based applications.',
    price: 899000,
    duration: 16,
    level: 'advanced',
    category: 'architecture',
    image: 'https://via.placeholder.com/300x200?text=Microservices'
  },
  {
    id: 'c15',
    title: 'Machine Learning Engineering',
    description: 'Apply machine learning algorithms to solve real-world problems at scale.',
    price: 1099000,
    duration: 24,
    level: 'advanced',
    category: 'data-science',
    image: 'https://via.placeholder.com/300x200?text=ML+Engineering'
  }
];

// Sample Bundles Data
const sampleBundles: Bundle[] = [
  {
    id: 'b1',
    title: 'Frontend Web Developer Path',
    description: 'Complete frontend development journey from fundamentals to advanced React patterns.',
    courses: ['c1', 'c2', 'c10'],
    originalPrice: 2047000,
    bundlePrice: 1599000,
    discountPercentage: 22,
    theme: 'Web Development',
    difficultyLevel: 'intermediate',
    careerPath: 'Frontend Developer',
    limitedTime: false,
    accessDuration: 'lifetime',
    prerequisites: ['Basic HTML and CSS knowledge'],
    courseOrder: ['c1', 'c10', 'c2'],
    hasCertificate: true,
    createdAt: new Date('2024-03-10'),
    updatedAt: new Date('2024-04-01'),
    isActive: true,
    customLandingPage: {
      banner: 'https://via.placeholder.com/1200x300?text=Frontend+Developer+Path',
      testimonials: [
        { name: 'Sarah J.', text: 'This bundle transformed my career. I went from basic HTML knowledge to a full-time React developer in 4 months!' },
        { name: 'Michael T.', text: 'The course progression is perfect. Each course builds on the previous one naturally.' }
      ],
      highlights: ['Build 5 complete projects for your portfolio', '24/7 community access', 'Resume review included']
    }
  },
  {
    id: 'b2',
    title: 'Full-Stack JavaScript Developer',
    description: 'Master both frontend and backend development using JavaScript technologies.',
    courses: ['c1', 'c2', 'c3'],
    originalPrice: 2097000,
    bundlePrice: 1699000,
    discountPercentage: 19,
    theme: 'Web Development',
    difficultyLevel: 'intermediate',
    careerPath: 'Full-Stack Developer',
    limitedTime: false,
    accessDuration: 'lifetime',
    courseOrder: ['c1', 'c2', 'c3'],
    hasCertificate: true,
    createdAt: new Date('2024-02-15'),
    updatedAt: new Date('2024-04-05'),
    isActive: true
  },
  {
    id: 'b3',
    title: 'Data Science Bootcamp',
    description: 'Comprehensive data science program covering Python, statistics, and machine learning.',
    courses: ['c4', 'c5', 'c15'],
    originalPrice: 2497000,
    bundlePrice: 1899000,
    discountPercentage: 24,
    theme: 'Data Science',
    difficultyLevel: 'intermediate',
    careerPath: 'Data Scientist',
    limitedTime: false,
    accessDuration: 'lifetime',
    prerequisites: ['Basic math knowledge', 'Problem-solving skills'],
    courseOrder: ['c4', 'c5', 'c15'],
    hasCertificate: true,
    createdAt: new Date('2024-01-20'),
    updatedAt: new Date('2024-03-15'),
    isActive: true
  },
  {
    id: 'b4',
    title: 'Mobile App Developer Bundle',
    description: 'Learn to build mobile applications for iOS and Android using Flutter.',
    courses: ['c8', 'c10'],
    originalPrice: 1448000,
    bundlePrice: 1199000,
    discountPercentage: 17,
    theme: 'Mobile Development',
    difficultyLevel: 'intermediate',
    careerPath: 'Mobile Developer',
    limitedTime: true,
    startDate: new Date('2024-04-01'),
    endDate: new Date('2024-06-30'),
    accessDuration: 365, // 1 year
    hasCertificate: true,
    createdAt: new Date('2024-03-25'),
    updatedAt: new Date('2024-03-25'),
    isActive: true
  },
  {
    id: 'b5',
    title: 'Cloud Engineering Certification',
    description: 'Prepare for cloud certifications and master deployment on major cloud platforms.',
    courses: ['c7', 'c13', 'c14'],
    originalPrice: 2497000,
    bundlePrice: 1999000,
    discountPercentage: 20,
    theme: 'Cloud Computing',
    difficultyLevel: 'advanced',
    careerPath: 'Cloud Engineer',
    limitedTime: false,
    accessDuration: 'lifetime',
    prerequisites: ['Basic networking knowledge', 'Command line familiarity'],
    courseOrder: ['c13', 'c7', 'c14'],
    hasCertificate: true,
    createdAt: new Date('2024-02-01'),
    updatedAt: new Date('2024-04-10'),
    isActive: true
  },
  {
    id: 'b6',
    title: 'Programming Fundamentals',
    description: 'Build strong programming foundations with Python and Java.',
    courses: ['c4', 'c9'],
    originalPrice: 1348000,
    bundlePrice: 999000,
    discountPercentage: 26,
    theme: 'Programming',
    difficultyLevel: 'beginner',
    limitedTime: false,
    accessDuration: 'lifetime',
    courseOrder: ['c4', 'c9'],
    hasCertificate: true,
    createdAt: new Date('2024-01-05'),
    updatedAt: new Date('2024-03-20'),
    isActive: true
  },
  {
    id: 'b7',
    title: 'Backend Developer Path',
    description: 'Comprehensive backend development skills with multiple technologies.',
    courses: ['c3', 'c6', 'c11', 'c14'],
    originalPrice: 3146000,
    bundlePrice: 2499000,
    discountPercentage: 21,
    theme: 'Backend Development',
    difficultyLevel: 'advanced',
    careerPath: 'Backend Engineer',
    limitedTime: false,
    accessDuration: 'lifetime',
    prerequisites: ['Basic programming knowledge'],
    courseOrder: ['c6', 'c3', 'c11', 'c14'],
    hasCertificate: true,
    createdAt: new Date('2024-02-10'),
    updatedAt: new Date('2024-04-05'),
    isActive: true
  },
  {
    id: 'b8',
    title: 'Cyber Security Specialist',
    description: 'Master cyber security principles and practices to protect digital assets.',
    courses: ['c12', 'c6', 'c7'],
    originalPrice: 2447000,
    bundlePrice: 1899000,
    discountPercentage: 22,
    theme: 'Cyber Security',
    difficultyLevel: 'intermediate',
    careerPath: 'Security Specialist',
    limitedTime: false,
    accessDuration: 'lifetime',
    prerequisites: ['Basic IT knowledge'],
    courseOrder: ['c12', 'c6', 'c7'],
    hasCertificate: true,
    createdAt: new Date('2024-03-01'),
    updatedAt: new Date('2024-04-15'),
    isActive: true
  },
  {
    id: 'b9',
    title: 'Modern Web Technologies',
    description: 'Stay current with the latest web development technologies and practices.',
    courses: ['c1', 'c3', 'c7', 'c14'],
    originalPrice: 3296000,
    bundlePrice: 2599000,
    discountPercentage: 21,
    theme: 'Web Development',
    difficultyLevel: 'intermediate',
    limitedTime: true,
    startDate: new Date('2024-05-01'),
    endDate: new Date('2024-07-31'),
    accessDuration: 'lifetime',
    hasCertificate: true,
    createdAt: new Date('2024-04-01'),
    updatedAt: new Date('2024-04-01'),
    isActive: true
  },
  {
    id: 'b10',
    title: 'Enterprise Developer Bundle',
    description: 'Complete skill set for enterprise application development.',
    courses: ['c9', 'c6', 'c14', 'c7', 'c13'],
    originalPrice: 3895000,
    bundlePrice: 2999000,
    discountPercentage: 23,
    theme: 'Enterprise Development',
    difficultyLevel: 'advanced',
    careerPath: 'Enterprise Architect',
    limitedTime: false,
    accessDuration: 'lifetime',
    prerequisites: ['2+ years programming experience'],
    courseOrder: ['c9', 'c6', 'c14', 'c7', 'c13'],
    hasCertificate: true,
    createdAt: new Date('2024-01-15'),
    updatedAt: new Date('2024-03-25'),
    isActive: true,
    customLandingPage: {
      banner: 'https://via.placeholder.com/1200x300?text=Enterprise+Developer+Bundle',
      testimonials: [
        { name: 'Robert K.', text: 'This bundle filled the gaps in my enterprise development knowledge. Highly recommended for senior developers.' },
        { name: 'Priya M.', text: 'The microservices and cloud sections alone are worth the price. Transformative for my career.' }
      ],
      highlights: ['Industry-standard architecture patterns', 'Real-world enterprise projects', 'Direct mentor access']
    }
  }
];

// Sample Bundle Stats
const sampleBundleStats: BundleStats[] = [
  {
    id: 'bs1',
    bundleId: 'b1',
    purchases: 328,
    completionRate: 68,
    averageCompletionTime: 45, // days
    mostPopularCourse: 'c1',
    revenue: 524772000,
    createdAt: new Date('2024-04-15')
  },
  {
    id: 'bs2',
    bundleId: 'b2',
    purchases: 245,
    completionRate: 62,
    averageCompletionTime: 60,
    mostPopularCourse: 'c1',
    revenue: 416255000,
    createdAt: new Date('2024-04-15')
  },
  {
    id: 'bs3',
    bundleId: 'b3',
    purchases: 187,
    completionRate: 55,
    averageCompletionTime: 75,
    mostPopularCourse: 'c4',
    revenue: 355113000,
    createdAt: new Date('2024-04-15')
  },
  {
    id: 'bs4',
    bundleId: 'b4',
    purchases: 129,
    completionRate: 72,
    averageCompletionTime: 30,
    mostPopularCourse: 'c8',
    revenue: 154671000,
    createdAt: new Date('2024-04-15')
  },
  {
    id: 'bs5',
    bundleId: 'b5',
    purchases: 156,
    completionRate: 48,
    averageCompletionTime: 90,
    mostPopularCourse: 'c13',
    revenue: 311844000,
    createdAt: new Date('2024-04-15')
  },
  {
    id: 'bs6',
    bundleId: 'b6',
    purchases: 412,
    completionRate: 78,
    averageCompletionTime: 35,
    mostPopularCourse: 'c4',
    revenue: 411588000,
    createdAt: new Date('2024-04-15')
  },
  {
    id: 'bs7',
    bundleId: 'b7',
    purchases: 189,
    completionRate: 45,
    averageCompletionTime: 110,
    mostPopularCourse: 'c3',
    revenue: 472311000,
    createdAt: new Date('2024-04-15')
  },
  {
    id: 'bs8',
    bundleId: 'b8',
    purchases: 142,
    completionRate: 58,
    averageCompletionTime: 65,
    mostPopularCourse: 'c12',
    revenue: 269658000,
    createdAt: new Date('2024-04-15')
  },
  {
    id: 'bs9',
    bundleId: 'b9',
    purchases: 97,
    completionRate: 42,
    averageCompletionTime: 50,
    mostPopularCourse: 'c1',
    revenue: 252103000,
    createdAt: new Date('2024-04-15')
  },
  {
    id: 'bs10',
    bundleId: 'b10',
    purchases: 78,
    completionRate: 38,
    averageCompletionTime: 130,
    mostPopularCourse: 'c9',
    revenue: 233922000,
    createdAt: new Date('2024-04-15')
  }
];

// Mock API function (replace with actual API calls)
const api = {
  fetchBundles: async (): Promise<Bundle[]> => {
    // Return sample bundles instead of empty array
    return Promise.resolve(sampleBundles);
  },
  fetchCourses: async (): Promise<Course[]> => {
    // Return sample courses instead of empty array
    return Promise.resolve(sampleCourses);
  },
  fetchBundleStats: async (bundleId: string): Promise<BundleStats> => {
    // Return actual stats for the bundle if available
    const stats = sampleBundleStats.find(s => s.bundleId === bundleId);
    if (stats) {
      return Promise.resolve(stats);
    }
    
    // Return default stats if not found
    return Promise.resolve({
      id: Math.random().toString(36).substring(2, 9),
      bundleId,
      purchases: 0,
      completionRate: 0,
      averageCompletionTime: 0,
      mostPopularCourse: '',
      revenue: 0,
      createdAt: new Date(),
    });
  },
  createBundle: async (bundle: Omit<Bundle, 'id' | 'createdAt' | 'updatedAt'>): Promise<Bundle> => {
    // Simulate API call
    return Promise.resolve({
      ...bundle,
      id: Math.random().toString(36).substring(2, 9),
      createdAt: new Date(),
      updatedAt: new Date(),
    });
  },
  updateBundle: async (id: string, bundle: Partial<Bundle>): Promise<Bundle> => {
    // Simulate API call
    return Promise.resolve({
      ...bundle,
      id,
      updatedAt: new Date(),
    } as Bundle);
  },
  deleteBundle: async (id: string): Promise<void> => {
    // Simulate API call
    return Promise.resolve();
  },
};

const useBundleStore = create<BundleState>()(
  devtools(
    persist(
      (set, get) => ({
        // Initialize with sample data
        bundles: sampleBundles,
        courses: sampleCourses,
        stats: sampleBundleStats,
        selectedBundle: null,
        isLoading: false,
        error: null,
        
        fetchBundles: async () => {
          set({ isLoading: true, error: null });
          try {
            const bundles = await api.fetchBundles();
            set({ bundles, isLoading: false });
          } catch (error) {
            set({ error: (error as Error).message, isLoading: false });
          }
        },
        
        fetchCourses: async () => {
          set({ isLoading: true, error: null });
          try {
            const courses = await api.fetchCourses();
            set({ courses, isLoading: false });
          } catch (error) {
            set({ error: (error as Error).message, isLoading: false });
          }
        },
        
        fetchBundleStats: async (bundleId: string) => {
          set({ isLoading: true, error: null });
          try {
            const bundleStats = await api.fetchBundleStats(bundleId);
            set((state) => ({
              stats: [...state.stats.filter(s => s.bundleId !== bundleId), bundleStats],
              isLoading: false,
            }));
          } catch (error) {
            set({ error: (error as Error).message, isLoading: false });
          }
        },
        
        createBundle: async (bundle) => {
          set({ isLoading: true, error: null });
          try {
            const newBundle = await api.createBundle(bundle);
            set((state) => ({
              bundles: [...state.bundles, newBundle],
              isLoading: false,
            }));
          } catch (error) {
            set({ error: (error as Error).message, isLoading: false });
          }
        },
        
        updateBundle: async (id, bundle) => {
          set({ isLoading: true, error: null });
          try {
            const updatedBundle = await api.updateBundle(id, bundle);
            set((state) => ({
              bundles: state.bundles.map(b => b.id === id ? { ...b, ...updatedBundle } : b),
              selectedBundle: state.selectedBundle?.id === id ? { ...state.selectedBundle, ...updatedBundle } : state.selectedBundle,
              isLoading: false,
            }));
          } catch (error) {
            set({ error: (error as Error).message, isLoading: false });
          }
        },
        
        deleteBundle: async (id) => {
          set({ isLoading: true, error: null });
          try {
            await api.deleteBundle(id);
            set((state) => ({
              bundles: state.bundles.filter(b => b.id !== id),
              selectedBundle: state.selectedBundle?.id === id ? null : state.selectedBundle,
              isLoading: false,
            }));
          } catch (error) {
            set({ error: (error as Error).message, isLoading: false });
          }
        },
        
        selectBundle: (id) => {
          const { bundles } = get();
          const bundle = bundles.find(b => b.id === id) || null;
          set({ selectedBundle: bundle });
        },
        
        clearSelectedBundle: () => {
          set({ selectedBundle: null });
        },
      }),
      {
        name: 'bundle-storage',
      }
    )
  )
);

export default useBundleStore;

/== types/index.ts
export type Status = 'active' | 'inactive';

export interface KpiMetric {
  name: string;
  value: string;
  trend: string;
  description: string;
}

export interface DemographicItem {
  location: string;
  percentage: number;
  revenue: number;
}

export interface CohortData {
  month: string;
  m1: string;
  m2: string;
  m3: string;
  m4: string;
  m5: string;
  m6: string;
}

export interface DiscountData {
  name: string;
  redemptions: number;
  revenue: number;
  avgOrder: number;
}

export interface MarketingChannel {
  channel: string;
  visits: number;
  conversions: number;
  convRate: string;
  revenue: number;
  roi: string;
}

export interface SelectOption {
  value: string;
  label: string;
}

export interface ChartDataItem {
  month: string;
  value: number;
}

export interface TableDataItem {
  month: string;
  revenue: number;
  growth: string;
  newCustomers: number;
}

export interface Course {
  id: string;
  title: string;
  description: string;
  price: number;
  duration: number;
  level: 'beginner' | 'intermediate' | 'advanced';
  category: string;
  image: string;
}

export interface Bundle {
  id: string;
  title: string;
  description: string;
  courses: string[]; // array of course IDs
  originalPrice: number; // sum of individual course prices
  bundlePrice: number; // discounted price
  discountPercentage: number;
  theme: string;
  difficultyLevel: 'beginner' | 'intermediate' | 'advanced';
  careerPath?: string;
  limitedTime: boolean;
  startDate?: Date;
  endDate?: Date;
  accessDuration: 'lifetime' | number; // number of days if not lifetime
  prerequisites?: string[];
  courseOrder?: string[];
  hasCertificate: boolean;
  createdAt: Date;
  updatedAt: Date;
  isActive: boolean;
  customLandingPage?: {
    banner?: string;
    testimonials?: { name: string; text: string }[];
    highlights?: string[];
    customCSS?: string;
  };
}

export interface BundleStats {
  id: string;
  bundleId: string;
  purchases: number;
  completionRate: number;
  averageCompletionTime: number;
  mostPopularCourse: string;
  revenue: number;
  createdAt: Date;
}

/== utils/bundleUtils.ts
import { Bundle, Course } from '../types';

export const calculateOriginalPrice = (courses: Course[], courseIds: string[]): number => {
  return courses
    .filter(course => courseIds.includes(course.id))
    .reduce((total, course) => total + course.price, 0);
};

export const calculateBundlePrice = (originalPrice: number, discountPercentage: number): number => {
  return Math.round((originalPrice * (1 - (discountPercentage / 100))) * 100) / 100;
};

export const formatCurrency = (amount: number): string => {
  return new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'USD',
  }).format(amount);
};

export const getTotalDuration = (courses: Course[], courseIds: string[]): number => {
  return courses
    .filter(course => courseIds.includes(course.id))
    .reduce((total, course) => total + course.duration, 0);
};

export const getBundleCompletionPercentage = (
  courseIds: string[],
  completedCourseIds: string[]
): number => {
  if (courseIds.length === 0) return 0;
  
  const completedCount = courseIds.filter(id => completedCourseIds.includes(id)).length;
  return Math.round((completedCount / courseIds.length) * 100);
};

export const isLimitedTimeActive = (bundle: Bundle): boolean => {
  if (!bundle.limitedTime) return true;
  
  const now = new Date();
  const startDate = bundle.startDate ? new Date(bundle.startDate) : null;
  const endDate = bundle.endDate ? new Date(bundle.endDate) : null;
  
  if (startDate && now < startDate) return false;
  if (endDate && now > endDate) return false;
  
  return true;
};

/== utils/roadmapTransform.ts
import { Node, Edge, MarkerType } from 'reactflow';
import { RoadmapNode } from '../store/roadmapStore';

interface Position {
  x: number;
  y: number;
}

const getNodeStyle = (type: string, isCompleted: boolean, isActive: boolean) => {
  const baseStyle = {
    padding: 20,
    borderRadius: 8,
    border: '1px solid #e2e8f0',
    width: 180,
  };

  if (isCompleted) {
    return {
      ...baseStyle,
      background: '#dcfce7',
      borderColor: '#22c55e',
      color: '#166534',
    };
  }

  if (isActive) {
    return {
      ...baseStyle,
      background: '#dbeafe',
      borderColor: '#3b82f6',
      color: '#1e40af',
    };
  }

  switch (type) {
    case 'primary':
      return {
        ...baseStyle,
        background: '#fef9c3',
        borderColor: '#ca8a04',
        color: '#854d0e',
      };
    case 'highlight':
      return {
        ...baseStyle,
        background: '#f3e8ff',
        borderColor: '#9333ea',
        color: '#6b21a8',
      };
    default:
      return {
        ...baseStyle,
        background: '#f8fafc',
        borderColor: '#e2e8f0',
        color: '#1e293b',
      };
  }
};

export const transformToFlow = (
  roadmapNodes: RoadmapNode[],
  completedNodes: string[],
  activeNode: string | null,
  startPosition: Position = { x: 0, y: 0 }
): { nodes: Node[]; edges: Edge[] } => {
  let nodes: Node[] = [];
  let edges: Edge[] = [];
  let currentX = startPosition.x;
  let currentY = startPosition.y;
  const levelGap = 300; // Increased gap between levels
  const nodeGap = 150; // Increased gap between nodes
  const siblingGap = 100; // Gap between sibling nodes

  const processNode = (
    node: RoadmapNode,
    level: number,
    parentId?: string,
    index: number = 0,
    totalSiblings: number = 1
  ): void => {
    const isCompleted = completedNodes.includes(node.id);
    const isActive = node.id === activeNode;
    const style = getNodeStyle(node.type, isCompleted, isActive);

    // Calculate vertical position based on siblings
    const verticalOffset = index * siblingGap - ((totalSiblings - 1) * siblingGap) / 2;
    const nodeY = currentY + verticalOffset;

    // Add node
    nodes.push({
      id: node.id,
      type: 'custom',
      position: { x: currentX + level * levelGap, y: nodeY },
      data: { 
        label: node.title,
        isCompleted,
        className: `bg-${style.background.slice(1)} text-${style.color.slice(1)} border-${style.borderColor.slice(1)}`
      },
      style,
      sourcePosition: 'right',
      targetPosition: 'left',
    });

    // Add edge from parent if exists
    if (parentId) {
      const edgeStyle = {
        stroke: isCompleted ? '#22c55e' : '#94a3b8',
        strokeWidth: isCompleted ? 2 : 1,
      };

      edges.push({
        id: `${parentId}-${node.id}`,
        source: parentId,
        target: node.id,
        type: 'smoothstep',
        animated: isActive,
        style: edgeStyle,
        markerEnd: {
          type: MarkerType.ArrowClosed,
          width: 20,
          height: 20,
          color: edgeStyle.stroke,
        },
      });
    }

    // Process children
    if (node.children && node.children.length > 0) {
      const childrenCount = node.children.length;
      node.children.forEach((child, childIndex) => {
        processNode(child, level + 1, node.id, childIndex, childrenCount);
      });
    }

    currentY += nodeGap;
  };

  // Process all root nodes
  roadmapNodes.forEach((node, index) => {
    if (index > 0) {
      currentY += nodeGap * 2; // Add extra space between root nodes
    }
    processNode(node, 0);
  });

  return { nodes, edges };
};

/== vite-env.d.ts
/// <reference types="vite/client" />


